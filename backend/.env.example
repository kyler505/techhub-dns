# ==============================================================================
# TechHub Delivery - Environment Configuration
# ==============================================================================
# Copy this file to .env and fill in your values.
# See DOCUMENTATION.md for detailed setup instructions.

# ==============================================================================
# DATABASE
# ==============================================================================
# MySQL connection string (PythonAnywhere uses MySQL)
DATABASE_URL=mysql+pymysql://username:password@localhost:3306/database_name

# ==============================================================================
# INFLOW INVENTORY API
# ==============================================================================
# Inflow Cloud API credentials
INFLOW_API_URL=https://cloudapi.inflowinventory.com
INFLOW_COMPANY_ID=your-company-id
INFLOW_API_KEY=your-api-key

# Webhook configuration (real-time order sync)
INFLOW_WEBHOOK_ENABLED=true
INFLOW_WEBHOOK_URL=https://techhub.pythonanywhere.com/api/inflow/webhook
INFLOW_WEBHOOK_AUTO_REGISTER=true
INFLOW_WEBHOOK_EVENTS=["orderCreated","orderUpdated"]

# Polling sync (backup when webhooks fail)
INFLOW_POLLING_SYNC_ENABLED=true
INFLOW_POLLING_SYNC_INTERVAL_MINUTES=20

# ==============================================================================
# TAMU ENTRA ID AUTHENTICATION (SAML + Service Principal)
# ==============================================================================
# Get these values from Azure Portal after creating apps at apps.identity.tamu.edu
#
# AZURE_TENANT_ID: Found in Azure Portal → Azure Active Directory → Overview
#                  Also visible in any app registration as "Directory (tenant) ID"
#                  For TAMU, this is the TAMU tenant ID.

# --- SAML Configuration (User Login) ---
SAML_ENABLED=false
SAML_IDP_ENTITY_ID=                    # From Azure: "Microsoft Entra Identifier"
SAML_IDP_SSO_URL=                      # From Azure: "Login URL"
SAML_IDP_CERT_PATH=certs/saml_cert.crt # Download from Azure, save locally
SAML_SP_ENTITY_ID=https://techhub.pythonanywhere.com
SAML_ACS_URL=https://techhub.pythonanywhere.com/auth/saml/callback

# --- Service Principal (Backend Graph API) ---
AZURE_TENANT_ID=                       # Directory (tenant) ID from Azure
AZURE_CLIENT_ID=                       # Application (client) ID from Service Principal
AZURE_CLIENT_SECRET=                   # Client secret value (not ID!)

# --- Session Configuration ---
SESSION_COOKIE_NAME=techhub_session
SESSION_MAX_AGE_HOURS=168

# ==============================================================================
# SHAREPOINT STORAGE
# ==============================================================================
# Used for storing picklists, QA documents, and delivery files
# Requires AZURE_* Service Principal to be configured above
SHAREPOINT_ENABLED=true
SHAREPOINT_SITE_URL=https://tamucs.sharepoint.com/teams/Team-TechHub
SHAREPOINT_FOLDER_PATH=General/delivery-storage

# ==============================================================================
# APPLICATION SETTINGS
# ==============================================================================
# CORS (frontend URL for development)
FRONTEND_URL=http://localhost:5173

# Flask secret key (change in production!)
SECRET_KEY=change-me-in-production

# ==============================================================================
# GITHUB AUTO-DEPLOY WEBHOOK
# ==============================================================================
# Automatically pull and reload when code is pushed to GitHub
# Set up webhook in GitHub repo settings: POST to /api/system/deploy
DEPLOY_WEBHOOK_ENABLED=false
DEPLOY_WEBHOOK_SECRET=your-webhook-secret-here

# ==============================================================================
# TAG REQUEST SYSTEM
# ==============================================================================
# WebDAV upload target for tag request JSON
TAG_REQUEST_WEBDAV_BASE_URL=https://webdav.example.com
TAG_REQUEST_WEBDAV_TARGET_PATH=/tag-requests
TAG_REQUEST_WEBDAV_USERNAME=webdav-user
TAG_REQUEST_WEBDAV_PASSWORD_SECRET_NAME=tag-request-webdav-password

# Teams Workflow webhook for notifications
TAG_REQUEST_TEAMS_WORKFLOW_URL=https://prod-00.westus.logic.azure.com/workflows/...
TAG_REQUEST_TEAMS_SHARED_SECRET=

# ==============================================================================
# CANOPY ORDERS UPLOADER (LEGACY WEBDAV)
# ==============================================================================
CANOPYORDERS_STORE_BASE=https://store-jsj7fos9p1.mybigcommerce.com
CANOPYORDERS_DAV_ROOT_PATH=/dav
CANOPYORDERS_BASE_DIR=/content/canopyorders
CANOPYORDERS_USERNAME=ehanson@tamu.edu
CANOPYORDERS_PASSWORD_SECRET_NAME=ehanson-webdav
CANOPYORDERS_USER_AGENT=Cyberduck/9.0.0 (Windows 10/10.0) (x86_64) (WebDAV)
CANOPYORDERS_TEAMS_WORKFLOW_URL=<legacy endpoint>
CANOPYORDERS_TEAMS_SHARED_SECRET=

# ==============================================================================
# OPTIONAL / LEGACY
# ==============================================================================
# Azure Key Vault (alternative to storing API keys in env)
# AZURE_KEY_VAULT_URL=https://your-keyvault.vault.azure.net/
