var bv=r=>{throw TypeError(r)};var Sh=(r,e,t)=>e.has(r)||bv("Cannot "+t);var Je=(r,e,t)=>(Sh(r,e,"read from private field"),t?t.call(r):e.get(r)),Xn=(r,e,t)=>e.has(r)?bv("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),Zt=(r,e,t,n)=>(Sh(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),Kn=(r,e,t)=>(Sh(r,e,"access private method"),t);var xv=(r,e,t,n)=>({set _(s){Zt(r,e,s,t)},get _(){return Je(r,e,n)}});function SE(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in r)){const o=Object.getOwnPropertyDescriptor(n,s);o&&Object.defineProperty(r,s,o.get?o:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function as(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var _h={exports:{}},Fo={},Eh={exports:{}},Oe={};var Sv;function _E(){if(Sv)return Oe;Sv=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function v(M){return M===null||typeof M!="object"?null:(M=p&&M[p]||M["@@iterator"],typeof M=="function"?M:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,w={};function x(M,H,ie){this.props=M,this.context=H,this.refs=w,this.updater=ie||b}x.prototype.isReactComponent={},x.prototype.setState=function(M,H){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,H,"setState")},x.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function E(){}E.prototype=x.prototype;function A(M,H,ie){this.props=M,this.context=H,this.refs=w,this.updater=ie||b}var C=A.prototype=new E;C.constructor=A,_(C,x.prototype),C.isPureReactComponent=!0;var k=Array.isArray,N=Object.prototype.hasOwnProperty,R={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function F(M,H,ie){var ce,ye={},be=null,ge=null;if(H!=null)for(ce in H.ref!==void 0&&(ge=H.ref),H.key!==void 0&&(be=""+H.key),H)N.call(H,ce)&&!D.hasOwnProperty(ce)&&(ye[ce]=H[ce]);var X=arguments.length-2;if(X===1)ye.children=ie;else if(1<X){for(var se=Array(X),ue=0;ue<X;ue++)se[ue]=arguments[ue+2];ye.children=se}if(M&&M.defaultProps)for(ce in X=M.defaultProps,X)ye[ce]===void 0&&(ye[ce]=X[ce]);return{$$typeof:r,type:M,key:be,ref:ge,props:ye,_owner:R.current}}function U(M,H){return{$$typeof:r,type:M.type,key:H,ref:M.ref,props:M.props,_owner:M._owner}}function q(M){return typeof M=="object"&&M!==null&&M.$$typeof===r}function Y(M){var H={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ie){return H[ie]})}var ne=/\/+/g;function oe(M,H){return typeof M=="object"&&M!==null&&M.key!=null?Y(""+M.key):H.toString(36)}function te(M,H,ie,ce,ye){var be=typeof M;(be==="undefined"||be==="boolean")&&(M=null);var ge=!1;if(M===null)ge=!0;else switch(be){case"string":case"number":ge=!0;break;case"object":switch(M.$$typeof){case r:case e:ge=!0}}if(ge)return ge=M,ye=ye(ge),M=ce===""?"."+oe(ge,0):ce,k(ye)?(ie="",M!=null&&(ie=M.replace(ne,"$&/")+"/"),te(ye,H,ie,"",function(ue){return ue})):ye!=null&&(q(ye)&&(ye=U(ye,ie+(!ye.key||ge&&ge.key===ye.key?"":(""+ye.key).replace(ne,"$&/")+"/")+M)),H.push(ye)),1;if(ge=0,ce=ce===""?".":ce+":",k(M))for(var X=0;X<M.length;X++){be=M[X];var se=ce+oe(be,X);ge+=te(be,H,ie,se,ye)}else if(se=v(M),typeof se=="function")for(M=se.call(M),X=0;!(be=M.next()).done;)be=be.value,se=ce+oe(be,X++),ge+=te(be,H,ie,se,ye);else if(be==="object")throw H=String(M),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return ge}function ae(M,H,ie){if(M==null)return M;var ce=[],ye=0;return te(M,ce,"","",function(be){return H.call(ie,be,ye++)}),ce}function G(M){if(M._status===-1){var H=M._result;H=H(),H.then(function(ie){(M._status===0||M._status===-1)&&(M._status=1,M._result=ie)},function(ie){(M._status===0||M._status===-1)&&(M._status=2,M._result=ie)}),M._status===-1&&(M._status=0,M._result=H)}if(M._status===1)return M._result.default;throw M._result}var K={current:null},V={transition:null},$={ReactCurrentDispatcher:K,ReactCurrentBatchConfig:V,ReactCurrentOwner:R};function Q(){throw Error("act(...) is not supported in production builds of React.")}return Oe.Children={map:ae,forEach:function(M,H,ie){ae(M,function(){H.apply(this,arguments)},ie)},count:function(M){var H=0;return ae(M,function(){H++}),H},toArray:function(M){return ae(M,function(H){return H})||[]},only:function(M){if(!q(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Oe.Component=x,Oe.Fragment=t,Oe.Profiler=s,Oe.PureComponent=A,Oe.StrictMode=n,Oe.Suspense=u,Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$,Oe.act=Q,Oe.cloneElement=function(M,H,ie){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var ce=_({},M.props),ye=M.key,be=M.ref,ge=M._owner;if(H!=null){if(H.ref!==void 0&&(be=H.ref,ge=R.current),H.key!==void 0&&(ye=""+H.key),M.type&&M.type.defaultProps)var X=M.type.defaultProps;for(se in H)N.call(H,se)&&!D.hasOwnProperty(se)&&(ce[se]=H[se]===void 0&&X!==void 0?X[se]:H[se])}var se=arguments.length-2;if(se===1)ce.children=ie;else if(1<se){X=Array(se);for(var ue=0;ue<se;ue++)X[ue]=arguments[ue+2];ce.children=X}return{$$typeof:r,type:M.type,key:ye,ref:be,props:ce,_owner:ge}},Oe.createContext=function(M){return M={$$typeof:l,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:o,_context:M},M.Consumer=M},Oe.createElement=F,Oe.createFactory=function(M){var H=F.bind(null,M);return H.type=M,H},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(M){return{$$typeof:c,render:M}},Oe.isValidElement=q,Oe.lazy=function(M){return{$$typeof:f,_payload:{_status:-1,_result:M},_init:G}},Oe.memo=function(M,H){return{$$typeof:h,type:M,compare:H===void 0?null:H}},Oe.startTransition=function(M){var H=V.transition;V.transition={};try{M()}finally{V.transition=H}},Oe.unstable_act=Q,Oe.useCallback=function(M,H){return K.current.useCallback(M,H)},Oe.useContext=function(M){return K.current.useContext(M)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(M){return K.current.useDeferredValue(M)},Oe.useEffect=function(M,H){return K.current.useEffect(M,H)},Oe.useId=function(){return K.current.useId()},Oe.useImperativeHandle=function(M,H,ie){return K.current.useImperativeHandle(M,H,ie)},Oe.useInsertionEffect=function(M,H){return K.current.useInsertionEffect(M,H)},Oe.useLayoutEffect=function(M,H){return K.current.useLayoutEffect(M,H)},Oe.useMemo=function(M,H){return K.current.useMemo(M,H)},Oe.useReducer=function(M,H,ie){return K.current.useReducer(M,H,ie)},Oe.useRef=function(M){return K.current.useRef(M)},Oe.useState=function(M){return K.current.useState(M)},Oe.useSyncExternalStore=function(M,H,ie){return K.current.useSyncExternalStore(M,H,ie)},Oe.useTransition=function(){return K.current.useTransition()},Oe.version="18.3.1",Oe}var _v;function Hf(){return _v||(_v=1,Eh.exports=_E()),Eh.exports}var Ev;function EE(){if(Ev)return Fo;Ev=1;var r=Hf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(c,u,h){var f,p={},v=null,b=null;h!==void 0&&(v=""+h),u.key!==void 0&&(v=""+u.key),u.ref!==void 0&&(b=u.ref);for(f in u)n.call(u,f)&&!o.hasOwnProperty(f)&&(p[f]=u[f]);if(c&&c.defaultProps)for(f in u=c.defaultProps,u)p[f]===void 0&&(p[f]=u[f]);return{$$typeof:e,type:c,key:v,ref:b,props:p,_owner:s.current}}return Fo.Fragment=t,Fo.jsx=l,Fo.jsxs=l,Fo}var Av;function AE(){return Av||(Av=1,_h.exports=EE()),_h.exports}var g=AE(),T=Hf();const _r=as(T),Wf=SE({__proto__:null,default:_r},[T]);var zl={},Ah={exports:{}},en={},Ch={exports:{}},Th={};var Cv;function CE(){return Cv||(Cv=1,(function(r){function e(V,$){var Q=V.length;V.push($);e:for(;0<Q;){var M=Q-1>>>1,H=V[M];if(0<s(H,$))V[M]=$,V[Q]=H,Q=M;else break e}}function t(V){return V.length===0?null:V[0]}function n(V){if(V.length===0)return null;var $=V[0],Q=V.pop();if(Q!==$){V[0]=Q;e:for(var M=0,H=V.length,ie=H>>>1;M<ie;){var ce=2*(M+1)-1,ye=V[ce],be=ce+1,ge=V[be];if(0>s(ye,Q))be<H&&0>s(ge,ye)?(V[M]=ge,V[be]=Q,M=be):(V[M]=ye,V[ce]=Q,M=ce);else if(be<H&&0>s(ge,Q))V[M]=ge,V[be]=Q,M=be;else break e}}return $}function s(V,$){var Q=V.sortIndex-$.sortIndex;return Q!==0?Q:V.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();r.unstable_now=function(){return l.now()-c}}var u=[],h=[],f=1,p=null,v=3,b=!1,_=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(V){for(var $=t(h);$!==null;){if($.callback===null)n(h);else if($.startTime<=V)n(h),$.sortIndex=$.expirationTime,e(u,$);else break;$=t(h)}}function k(V){if(w=!1,C(V),!_)if(t(u)!==null)_=!0,G(N);else{var $=t(h);$!==null&&K(k,$.startTime-V)}}function N(V,$){_=!1,w&&(w=!1,E(F),F=-1),b=!0;var Q=v;try{for(C($),p=t(u);p!==null&&(!(p.expirationTime>$)||V&&!Y());){var M=p.callback;if(typeof M=="function"){p.callback=null,v=p.priorityLevel;var H=M(p.expirationTime<=$);$=r.unstable_now(),typeof H=="function"?p.callback=H:p===t(u)&&n(u),C($)}else n(u);p=t(u)}if(p!==null)var ie=!0;else{var ce=t(h);ce!==null&&K(k,ce.startTime-$),ie=!1}return ie}finally{p=null,v=Q,b=!1}}var R=!1,D=null,F=-1,U=5,q=-1;function Y(){return!(r.unstable_now()-q<U)}function ne(){if(D!==null){var V=r.unstable_now();q=V;var $=!0;try{$=D(!0,V)}finally{$?oe():(R=!1,D=null)}}else R=!1}var oe;if(typeof A=="function")oe=function(){A(ne)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,ae=te.port2;te.port1.onmessage=ne,oe=function(){ae.postMessage(null)}}else oe=function(){x(ne,0)};function G(V){D=V,R||(R=!0,oe())}function K(V,$){F=x(function(){V(r.unstable_now())},$)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(V){V.callback=null},r.unstable_continueExecution=function(){_||b||(_=!0,G(N))},r.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<V?Math.floor(1e3/V):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_getFirstCallbackNode=function(){return t(u)},r.unstable_next=function(V){switch(v){case 1:case 2:case 3:var $=3;break;default:$=v}var Q=v;v=$;try{return V()}finally{v=Q}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(V,$){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var Q=v;v=V;try{return $()}finally{v=Q}},r.unstable_scheduleCallback=function(V,$,Q){var M=r.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?M+Q:M):Q=M,V){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=Q+H,V={id:f++,callback:$,priorityLevel:V,startTime:Q,expirationTime:H,sortIndex:-1},Q>M?(V.sortIndex=Q,e(h,V),t(u)===null&&V===t(h)&&(w?(E(F),F=-1):w=!0,K(k,Q-M))):(V.sortIndex=H,e(u,V),_||b||(_=!0,G(N))),V},r.unstable_shouldYield=Y,r.unstable_wrapCallback=function(V){var $=v;return function(){var Q=v;v=$;try{return V.apply(this,arguments)}finally{v=Q}}}})(Th)),Th}var Tv;function TE(){return Tv||(Tv=1,Ch.exports=CE()),Ch.exports}var kv;function kE(){if(kv)return en;kv=1;var r=Hf(),e=TE();function t(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,d=1;d<arguments.length;d++)a+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function o(i,a){l(i,a),l(i+"Capture",a)}function l(i,a){for(s[i]=a,i=0;i<a.length;i++)n.add(a[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function v(i){return u.call(p,i)?!0:u.call(f,i)?!1:h.test(i)?p[i]=!0:(f[i]=!0,!1)}function b(i,a,d,m){if(d!==null&&d.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return m?!1:d!==null?!d.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function _(i,a,d,m){if(a===null||typeof a>"u"||b(i,a,d,m))return!0;if(m)return!1;if(d!==null)switch(d.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function w(i,a,d,m,y,S,P){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=m,this.attributeNamespace=y,this.mustUseProperty=d,this.propertyName=i,this.type=a,this.sanitizeURL=S,this.removeEmptyString=P}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){x[i]=new w(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];x[a]=new w(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){x[i]=new w(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){x[i]=new w(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){x[i]=new w(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){x[i]=new w(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){x[i]=new w(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){x[i]=new w(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){x[i]=new w(i,5,!1,i.toLowerCase(),null,!1,!1)});var E=/[\-:]([a-z])/g;function A(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(E,A);x[a]=new w(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(E,A);x[a]=new w(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(E,A);x[a]=new w(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){x[i]=new w(i,1,!1,i.toLowerCase(),null,!1,!1)}),x.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){x[i]=new w(i,1,!1,i.toLowerCase(),null,!0,!0)});function C(i,a,d,m){var y=x.hasOwnProperty(a)?x[a]:null;(y!==null?y.type!==0:m||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(_(a,d,y,m)&&(d=null),m||y===null?v(a)&&(d===null?i.removeAttribute(a):i.setAttribute(a,""+d)):y.mustUseProperty?i[y.propertyName]=d===null?y.type===3?!1:"":d:(a=y.attributeName,m=y.attributeNamespace,d===null?i.removeAttribute(a):(y=y.type,d=y===3||y===4&&d===!0?"":""+d,m?i.setAttributeNS(m,a,d):i.setAttribute(a,d))))}var k=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),R=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),q=Symbol.for("react.provider"),Y=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),oe=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),ae=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),K=Symbol.for("react.offscreen"),V=Symbol.iterator;function $(i){return i===null||typeof i!="object"?null:(i=V&&i[V]||i["@@iterator"],typeof i=="function"?i:null)}var Q=Object.assign,M;function H(i){if(M===void 0)try{throw Error()}catch(d){var a=d.stack.trim().match(/\n( *(at )?)/);M=a&&a[1]||""}return`
`+M+i}var ie=!1;function ce(i,a){if(!i||ie)return"";ie=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(z){var m=z}Reflect.construct(i,[],a)}else{try{a.call()}catch(z){m=z}i.call(a.prototype)}else{try{throw Error()}catch(z){m=z}i()}}catch(z){if(z&&m&&typeof z.stack=="string"){for(var y=z.stack.split(`
`),S=m.stack.split(`
`),P=y.length-1,O=S.length-1;1<=P&&0<=O&&y[P]!==S[O];)O--;for(;1<=P&&0<=O;P--,O--)if(y[P]!==S[O]){if(P!==1||O!==1)do if(P--,O--,0>O||y[P]!==S[O]){var L=`
`+y[P].replace(" at new "," at ");return i.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",i.displayName)),L}while(1<=P&&0<=O);break}}}finally{ie=!1,Error.prepareStackTrace=d}return(i=i?i.displayName||i.name:"")?H(i):""}function ye(i){switch(i.tag){case 5:return H(i.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return i=ce(i.type,!1),i;case 11:return i=ce(i.type.render,!1),i;case 1:return i=ce(i.type,!0),i;default:return""}}function be(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case D:return"Fragment";case R:return"Portal";case U:return"Profiler";case F:return"StrictMode";case oe:return"Suspense";case te:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case Y:return(i.displayName||"Context")+".Consumer";case q:return(i._context.displayName||"Context")+".Provider";case ne:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case ae:return a=i.displayName||null,a!==null?a:be(i.type)||"Memo";case G:a=i._payload,i=i._init;try{return be(i(a))}catch{}}return null}function ge(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return be(a);case 8:return a===F?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function X(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function se(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function ue(i){var a=se(i)?"checked":"value",d=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),m=""+i[a];if(!i.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,S=d.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return y.call(this)},set:function(P){m=""+P,S.call(this,P)}}),Object.defineProperty(i,a,{enumerable:d.enumerable}),{getValue:function(){return m},setValue:function(P){m=""+P},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function et(i){i._valueTracker||(i._valueTracker=ue(i))}function Gt(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var d=a.getValue(),m="";return i&&(m=se(i)?i.checked?"true":"false":i.value),i=m,i!==d?(a.setValue(i),!0):!1}function De(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Be(i,a){var d=a.checked;return Q({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??i._wrapperState.initialChecked})}function Ke(i,a){var d=a.defaultValue==null?"":a.defaultValue,m=a.checked!=null?a.checked:a.defaultChecked;d=X(a.value!=null?a.value:d),i._wrapperState={initialChecked:m,initialValue:d,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Le(i,a){a=a.checked,a!=null&&C(i,"checked",a,!1)}function yt(i,a){Le(i,a);var d=X(a.value),m=a.type;if(d!=null)m==="number"?(d===0&&i.value===""||i.value!=d)&&(i.value=""+d):i.value!==""+d&&(i.value=""+d);else if(m==="submit"||m==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?us(i,a.type,d):a.hasOwnProperty("defaultValue")&&us(i,a.type,X(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function an(i,a,d){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var m=a.type;if(!(m!=="submit"&&m!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,d||a===i.value||(i.value=a),i.defaultValue=a}d=i.name,d!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,d!==""&&(i.name=d)}function us(i,a,d){(a!=="number"||De(i.ownerDocument)!==i)&&(d==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+d&&(i.defaultValue=""+d))}var ds=Array.isArray;function kn(i,a,d,m){if(i=i.options,a){a={};for(var y=0;y<d.length;y++)a["$"+d[y]]=!0;for(d=0;d<i.length;d++)y=a.hasOwnProperty("$"+i[d].value),i[d].selected!==y&&(i[d].selected=y),y&&m&&(i[d].defaultSelected=!0)}else{for(d=""+X(d),a=null,y=0;y<i.length;y++){if(i[y].value===d){i[y].selected=!0,m&&(i[y].defaultSelected=!0);return}a!==null||i[y].disabled||(a=i[y])}a!==null&&(a.selected=!0)}}function Ji(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return Q({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Ra(i,a){var d=a.value;if(d==null){if(d=a.children,a=a.defaultValue,d!=null){if(a!=null)throw Error(t(92));if(ds(d)){if(1<d.length)throw Error(t(93));d=d[0]}a=d}a==null&&(a=""),d=a}i._wrapperState={initialValue:X(d)}}function Na(i,a){var d=X(a.value),m=X(a.defaultValue);d!=null&&(d=""+d,d!==i.value&&(i.value=d),a.defaultValue==null&&i.defaultValue!==d&&(i.defaultValue=d)),m!=null&&(i.defaultValue=""+m)}function Da(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function Oa(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vn(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?Oa(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Pn,Rn=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,d,m,y){MSApp.execUnsafeLocalFunction(function(){return i(a,d,m,y)})}:i})(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(Pn=Pn||document.createElement("div"),Pn.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Pn.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function dr(i,a){if(a){var d=i.firstChild;if(d&&d===i.lastChild&&d.nodeType===3){d.nodeValue=a;return}}i.textContent=a}var Zi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},CS=["Webkit","ms","Moz","O"];Object.keys(Zi).forEach(function(i){CS.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),Zi[a]=Zi[i]})});function Lp(i,a,d){return a==null||typeof a=="boolean"||a===""?"":d||typeof a!="number"||a===0||Zi.hasOwnProperty(i)&&Zi[i]?(""+a).trim():a+"px"}function Ip(i,a){i=i.style;for(var d in a)if(a.hasOwnProperty(d)){var m=d.indexOf("--")===0,y=Lp(d,a[d],m);d==="float"&&(d="cssFloat"),m?i.setProperty(d,y):i[d]=y}}var TS=Q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mu(i,a){if(a){if(TS[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function Lu(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Iu=null;function Fu(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ju=null,zs=null,Hs=null;function Fp(i){if(i=So(i)){if(typeof ju!="function")throw Error(t(280));var a=i.stateNode;a&&(a=nl(a),ju(i.stateNode,i.type,a))}}function jp(i){zs?Hs?Hs.push(i):Hs=[i]:zs=i}function Bp(){if(zs){var i=zs,a=Hs;if(Hs=zs=null,Fp(i),a)for(i=0;i<a.length;i++)Fp(a[i])}}function Up(i,a){return i(a)}function zp(){}var Bu=!1;function Hp(i,a,d){if(Bu)return i(a,d);Bu=!0;try{return Up(i,a,d)}finally{Bu=!1,(zs!==null||Hs!==null)&&(zp(),Bp())}}function eo(i,a){var d=i.stateNode;if(d===null)return null;var m=nl(d);if(m===null)return null;d=m[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(i=i.type,m=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!m;break e;default:i=!1}if(i)return null;if(d&&typeof d!="function")throw Error(t(231,a,typeof d));return d}var Uu=!1;if(c)try{var to={};Object.defineProperty(to,"passive",{get:function(){Uu=!0}}),window.addEventListener("test",to,to),window.removeEventListener("test",to,to)}catch{Uu=!1}function kS(i,a,d,m,y,S,P,O,L){var z=Array.prototype.slice.call(arguments,3);try{a.apply(d,z)}catch(Z){this.onError(Z)}}var no=!1,Ma=null,La=!1,zu=null,PS={onError:function(i){no=!0,Ma=i}};function RS(i,a,d,m,y,S,P,O,L){no=!1,Ma=null,kS.apply(PS,arguments)}function NS(i,a,d,m,y,S,P,O,L){if(RS.apply(this,arguments),no){if(no){var z=Ma;no=!1,Ma=null}else throw Error(t(198));La||(La=!0,zu=z)}}function hs(i){var a=i,d=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(d=a.return),i=a.return;while(i)}return a.tag===3?d:null}function Wp(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function Vp(i){if(hs(i)!==i)throw Error(t(188))}function DS(i){var a=i.alternate;if(!a){if(a=hs(i),a===null)throw Error(t(188));return a!==i?null:i}for(var d=i,m=a;;){var y=d.return;if(y===null)break;var S=y.alternate;if(S===null){if(m=y.return,m!==null){d=m;continue}break}if(y.child===S.child){for(S=y.child;S;){if(S===d)return Vp(y),i;if(S===m)return Vp(y),a;S=S.sibling}throw Error(t(188))}if(d.return!==m.return)d=y,m=S;else{for(var P=!1,O=y.child;O;){if(O===d){P=!0,d=y,m=S;break}if(O===m){P=!0,m=y,d=S;break}O=O.sibling}if(!P){for(O=S.child;O;){if(O===d){P=!0,d=S,m=y;break}if(O===m){P=!0,m=S,d=y;break}O=O.sibling}if(!P)throw Error(t(189))}}if(d.alternate!==m)throw Error(t(190))}if(d.tag!==3)throw Error(t(188));return d.stateNode.current===d?i:a}function $p(i){return i=DS(i),i!==null?qp(i):null}function qp(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=qp(i);if(a!==null)return a;i=i.sibling}return null}var Gp=e.unstable_scheduleCallback,Yp=e.unstable_cancelCallback,OS=e.unstable_shouldYield,MS=e.unstable_requestPaint,ut=e.unstable_now,LS=e.unstable_getCurrentPriorityLevel,Hu=e.unstable_ImmediatePriority,Xp=e.unstable_UserBlockingPriority,Ia=e.unstable_NormalPriority,IS=e.unstable_LowPriority,Kp=e.unstable_IdlePriority,Fa=null,Vn=null;function FS(i){if(Vn&&typeof Vn.onCommitFiberRoot=="function")try{Vn.onCommitFiberRoot(Fa,i,void 0,(i.current.flags&128)===128)}catch{}}var Nn=Math.clz32?Math.clz32:US,jS=Math.log,BS=Math.LN2;function US(i){return i>>>=0,i===0?32:31-(jS(i)/BS|0)|0}var ja=64,Ba=4194304;function ro(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Ua(i,a){var d=i.pendingLanes;if(d===0)return 0;var m=0,y=i.suspendedLanes,S=i.pingedLanes,P=d&268435455;if(P!==0){var O=P&~y;O!==0?m=ro(O):(S&=P,S!==0&&(m=ro(S)))}else P=d&~y,P!==0?m=ro(P):S!==0&&(m=ro(S));if(m===0)return 0;if(a!==0&&a!==m&&(a&y)===0&&(y=m&-m,S=a&-a,y>=S||y===16&&(S&4194240)!==0))return a;if((m&4)!==0&&(m|=d&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=m;0<a;)d=31-Nn(a),y=1<<d,m|=i[d],a&=~y;return m}function zS(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HS(i,a){for(var d=i.suspendedLanes,m=i.pingedLanes,y=i.expirationTimes,S=i.pendingLanes;0<S;){var P=31-Nn(S),O=1<<P,L=y[P];L===-1?((O&d)===0||(O&m)!==0)&&(y[P]=zS(O,a)):L<=a&&(i.expiredLanes|=O),S&=~O}}function Wu(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Qp(){var i=ja;return ja<<=1,(ja&4194240)===0&&(ja=64),i}function Vu(i){for(var a=[],d=0;31>d;d++)a.push(i);return a}function so(i,a,d){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-Nn(a),i[a]=d}function WS(i,a){var d=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var m=i.eventTimes;for(i=i.expirationTimes;0<d;){var y=31-Nn(d),S=1<<y;a[y]=0,m[y]=-1,i[y]=-1,d&=~S}}function $u(i,a){var d=i.entangledLanes|=a;for(i=i.entanglements;d;){var m=31-Nn(d),y=1<<m;y&a|i[m]&a&&(i[m]|=a),d&=~y}}var Ue=0;function Jp(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Zp,qu,em,tm,nm,Gu=!1,za=[],Nr=null,Dr=null,Or=null,io=new Map,oo=new Map,Mr=[],VS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rm(i,a){switch(i){case"focusin":case"focusout":Nr=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":Or=null;break;case"pointerover":case"pointerout":io.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":oo.delete(a.pointerId)}}function ao(i,a,d,m,y,S){return i===null||i.nativeEvent!==S?(i={blockedOn:a,domEventName:d,eventSystemFlags:m,nativeEvent:S,targetContainers:[y]},a!==null&&(a=So(a),a!==null&&qu(a)),i):(i.eventSystemFlags|=m,a=i.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),i)}function $S(i,a,d,m,y){switch(a){case"focusin":return Nr=ao(Nr,i,a,d,m,y),!0;case"dragenter":return Dr=ao(Dr,i,a,d,m,y),!0;case"mouseover":return Or=ao(Or,i,a,d,m,y),!0;case"pointerover":var S=y.pointerId;return io.set(S,ao(io.get(S)||null,i,a,d,m,y)),!0;case"gotpointercapture":return S=y.pointerId,oo.set(S,ao(oo.get(S)||null,i,a,d,m,y)),!0}return!1}function sm(i){var a=fs(i.target);if(a!==null){var d=hs(a);if(d!==null){if(a=d.tag,a===13){if(a=Wp(d),a!==null){i.blockedOn=a,nm(i.priority,function(){em(d)});return}}else if(a===3&&d.stateNode.current.memoizedState.isDehydrated){i.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ha(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var d=Xu(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(d===null){d=i.nativeEvent;var m=new d.constructor(d.type,d);Iu=m,d.target.dispatchEvent(m),Iu=null}else return a=So(d),a!==null&&qu(a),i.blockedOn=d,!1;a.shift()}return!0}function im(i,a,d){Ha(i)&&d.delete(a)}function qS(){Gu=!1,Nr!==null&&Ha(Nr)&&(Nr=null),Dr!==null&&Ha(Dr)&&(Dr=null),Or!==null&&Ha(Or)&&(Or=null),io.forEach(im),oo.forEach(im)}function lo(i,a){i.blockedOn===a&&(i.blockedOn=null,Gu||(Gu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,qS)))}function co(i){function a(y){return lo(y,i)}if(0<za.length){lo(za[0],i);for(var d=1;d<za.length;d++){var m=za[d];m.blockedOn===i&&(m.blockedOn=null)}}for(Nr!==null&&lo(Nr,i),Dr!==null&&lo(Dr,i),Or!==null&&lo(Or,i),io.forEach(a),oo.forEach(a),d=0;d<Mr.length;d++)m=Mr[d],m.blockedOn===i&&(m.blockedOn=null);for(;0<Mr.length&&(d=Mr[0],d.blockedOn===null);)sm(d),d.blockedOn===null&&Mr.shift()}var Ws=k.ReactCurrentBatchConfig,Wa=!0;function GS(i,a,d,m){var y=Ue,S=Ws.transition;Ws.transition=null;try{Ue=1,Yu(i,a,d,m)}finally{Ue=y,Ws.transition=S}}function YS(i,a,d,m){var y=Ue,S=Ws.transition;Ws.transition=null;try{Ue=4,Yu(i,a,d,m)}finally{Ue=y,Ws.transition=S}}function Yu(i,a,d,m){if(Wa){var y=Xu(i,a,d,m);if(y===null)hd(i,a,m,Va,d),rm(i,m);else if($S(y,i,a,d,m))m.stopPropagation();else if(rm(i,m),a&4&&-1<VS.indexOf(i)){for(;y!==null;){var S=So(y);if(S!==null&&Zp(S),S=Xu(i,a,d,m),S===null&&hd(i,a,m,Va,d),S===y)break;y=S}y!==null&&m.stopPropagation()}else hd(i,a,m,null,d)}}var Va=null;function Xu(i,a,d,m){if(Va=null,i=Fu(m),i=fs(i),i!==null)if(a=hs(i),a===null)i=null;else if(d=a.tag,d===13){if(i=Wp(a),i!==null)return i;i=null}else if(d===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return Va=i,null}function om(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(LS()){case Hu:return 1;case Xp:return 4;case Ia:case IS:return 16;case Kp:return 536870912;default:return 16}default:return 16}}var Lr=null,Ku=null,$a=null;function am(){if($a)return $a;var i,a=Ku,d=a.length,m,y="value"in Lr?Lr.value:Lr.textContent,S=y.length;for(i=0;i<d&&a[i]===y[i];i++);var P=d-i;for(m=1;m<=P&&a[d-m]===y[S-m];m++);return $a=y.slice(i,1<m?1-m:void 0)}function qa(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Ga(){return!0}function lm(){return!1}function ln(i){function a(d,m,y,S,P){this._reactName=d,this._targetInst=y,this.type=m,this.nativeEvent=S,this.target=P,this.currentTarget=null;for(var O in i)i.hasOwnProperty(O)&&(d=i[O],this[O]=d?d(S):S[O]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Ga:lm,this.isPropagationStopped=lm,this}return Q(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Ga)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Ga)},persist:function(){},isPersistent:Ga}),a}var Vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qu=ln(Vs),uo=Q({},Vs,{view:0,detail:0}),XS=ln(uo),Ju,Zu,ho,Ya=Q({},uo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:td,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ho&&(ho&&i.type==="mousemove"?(Ju=i.screenX-ho.screenX,Zu=i.screenY-ho.screenY):Zu=Ju=0,ho=i),Ju)},movementY:function(i){return"movementY"in i?i.movementY:Zu}}),cm=ln(Ya),KS=Q({},Ya,{dataTransfer:0}),QS=ln(KS),JS=Q({},uo,{relatedTarget:0}),ed=ln(JS),ZS=Q({},Vs,{animationName:0,elapsedTime:0,pseudoElement:0}),e_=ln(ZS),t_=Q({},Vs,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),n_=ln(t_),r_=Q({},Vs,{data:0}),um=ln(r_),s_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},o_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function a_(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=o_[i])?!!a[i]:!1}function td(){return a_}var l_=Q({},uo,{key:function(i){if(i.key){var a=s_[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=qa(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?i_[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:td,charCode:function(i){return i.type==="keypress"?qa(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?qa(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),c_=ln(l_),u_=Q({},Ya,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dm=ln(u_),d_=Q({},uo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:td}),h_=ln(d_),f_=Q({},Vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),p_=ln(f_),m_=Q({},Ya,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),g_=ln(m_),v_=[9,13,27,32],nd=c&&"CompositionEvent"in window,fo=null;c&&"documentMode"in document&&(fo=document.documentMode);var y_=c&&"TextEvent"in window&&!fo,hm=c&&(!nd||fo&&8<fo&&11>=fo),fm=" ",pm=!1;function mm(i,a){switch(i){case"keyup":return v_.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gm(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var $s=!1;function w_(i,a){switch(i){case"compositionend":return gm(a);case"keypress":return a.which!==32?null:(pm=!0,fm);case"textInput":return i=a.data,i===fm&&pm?null:i;default:return null}}function b_(i,a){if($s)return i==="compositionend"||!nd&&mm(i,a)?(i=am(),$a=Ku=Lr=null,$s=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return hm&&a.locale!=="ko"?null:a.data;default:return null}}var x_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vm(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!x_[i.type]:a==="textarea"}function ym(i,a,d,m){jp(m),a=Za(a,"onChange"),0<a.length&&(d=new Qu("onChange","change",null,d,m),i.push({event:d,listeners:a}))}var po=null,mo=null;function S_(i){Im(i,0)}function Xa(i){var a=Ks(i);if(Gt(a))return i}function __(i,a){if(i==="change")return a}var wm=!1;if(c){var rd;if(c){var sd="oninput"in document;if(!sd){var bm=document.createElement("div");bm.setAttribute("oninput","return;"),sd=typeof bm.oninput=="function"}rd=sd}else rd=!1;wm=rd&&(!document.documentMode||9<document.documentMode)}function xm(){po&&(po.detachEvent("onpropertychange",Sm),mo=po=null)}function Sm(i){if(i.propertyName==="value"&&Xa(mo)){var a=[];ym(a,mo,i,Fu(i)),Hp(S_,a)}}function E_(i,a,d){i==="focusin"?(xm(),po=a,mo=d,po.attachEvent("onpropertychange",Sm)):i==="focusout"&&xm()}function A_(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Xa(mo)}function C_(i,a){if(i==="click")return Xa(a)}function T_(i,a){if(i==="input"||i==="change")return Xa(a)}function k_(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var Dn=typeof Object.is=="function"?Object.is:k_;function go(i,a){if(Dn(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var d=Object.keys(i),m=Object.keys(a);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var y=d[m];if(!u.call(a,y)||!Dn(i[y],a[y]))return!1}return!0}function _m(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Em(i,a){var d=_m(i);i=0;for(var m;d;){if(d.nodeType===3){if(m=i+d.textContent.length,i<=a&&m>=a)return{node:d,offset:a-i};i=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=_m(d)}}function Am(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?Am(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function Cm(){for(var i=window,a=De();a instanceof i.HTMLIFrameElement;){try{var d=typeof a.contentWindow.location.href=="string"}catch{d=!1}if(d)i=a.contentWindow;else break;a=De(i.document)}return a}function id(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function P_(i){var a=Cm(),d=i.focusedElem,m=i.selectionRange;if(a!==d&&d&&d.ownerDocument&&Am(d.ownerDocument.documentElement,d)){if(m!==null&&id(d)){if(a=m.start,i=m.end,i===void 0&&(i=a),"selectionStart"in d)d.selectionStart=a,d.selectionEnd=Math.min(i,d.value.length);else if(i=(a=d.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var y=d.textContent.length,S=Math.min(m.start,y);m=m.end===void 0?S:Math.min(m.end,y),!i.extend&&S>m&&(y=m,m=S,S=y),y=Em(d,S);var P=Em(d,m);y&&P&&(i.rangeCount!==1||i.anchorNode!==y.node||i.anchorOffset!==y.offset||i.focusNode!==P.node||i.focusOffset!==P.offset)&&(a=a.createRange(),a.setStart(y.node,y.offset),i.removeAllRanges(),S>m?(i.addRange(a),i.extend(P.node,P.offset)):(a.setEnd(P.node,P.offset),i.addRange(a)))}}for(a=[],i=d;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<a.length;d++)i=a[d],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var R_=c&&"documentMode"in document&&11>=document.documentMode,qs=null,od=null,vo=null,ad=!1;function Tm(i,a,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;ad||qs==null||qs!==De(m)||(m=qs,"selectionStart"in m&&id(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),vo&&go(vo,m)||(vo=m,m=Za(od,"onSelect"),0<m.length&&(a=new Qu("onSelect","select",null,a,d),i.push({event:a,listeners:m}),a.target=qs)))}function Ka(i,a){var d={};return d[i.toLowerCase()]=a.toLowerCase(),d["Webkit"+i]="webkit"+a,d["Moz"+i]="moz"+a,d}var Gs={animationend:Ka("Animation","AnimationEnd"),animationiteration:Ka("Animation","AnimationIteration"),animationstart:Ka("Animation","AnimationStart"),transitionend:Ka("Transition","TransitionEnd")},ld={},km={};c&&(km=document.createElement("div").style,"AnimationEvent"in window||(delete Gs.animationend.animation,delete Gs.animationiteration.animation,delete Gs.animationstart.animation),"TransitionEvent"in window||delete Gs.transitionend.transition);function Qa(i){if(ld[i])return ld[i];if(!Gs[i])return i;var a=Gs[i],d;for(d in a)if(a.hasOwnProperty(d)&&d in km)return ld[i]=a[d];return i}var Pm=Qa("animationend"),Rm=Qa("animationiteration"),Nm=Qa("animationstart"),Dm=Qa("transitionend"),Om=new Map,Mm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ir(i,a){Om.set(i,a),o(a,[i])}for(var cd=0;cd<Mm.length;cd++){var ud=Mm[cd],N_=ud.toLowerCase(),D_=ud[0].toUpperCase()+ud.slice(1);Ir(N_,"on"+D_)}Ir(Pm,"onAnimationEnd"),Ir(Rm,"onAnimationIteration"),Ir(Nm,"onAnimationStart"),Ir("dblclick","onDoubleClick"),Ir("focusin","onFocus"),Ir("focusout","onBlur"),Ir(Dm,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),O_=new Set("cancel close invalid load scroll toggle".split(" ").concat(yo));function Lm(i,a,d){var m=i.type||"unknown-event";i.currentTarget=d,NS(m,a,void 0,i),i.currentTarget=null}function Im(i,a){a=(a&4)!==0;for(var d=0;d<i.length;d++){var m=i[d],y=m.event;m=m.listeners;e:{var S=void 0;if(a)for(var P=m.length-1;0<=P;P--){var O=m[P],L=O.instance,z=O.currentTarget;if(O=O.listener,L!==S&&y.isPropagationStopped())break e;Lm(y,O,z),S=L}else for(P=0;P<m.length;P++){if(O=m[P],L=O.instance,z=O.currentTarget,O=O.listener,L!==S&&y.isPropagationStopped())break e;Lm(y,O,z),S=L}}}if(La)throw i=zu,La=!1,zu=null,i}function qe(i,a){var d=a[yd];d===void 0&&(d=a[yd]=new Set);var m=i+"__bubble";d.has(m)||(Fm(a,i,2,!1),d.add(m))}function dd(i,a,d){var m=0;a&&(m|=4),Fm(d,i,m,a)}var Ja="_reactListening"+Math.random().toString(36).slice(2);function wo(i){if(!i[Ja]){i[Ja]=!0,n.forEach(function(d){d!=="selectionchange"&&(O_.has(d)||dd(d,!1,i),dd(d,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Ja]||(a[Ja]=!0,dd("selectionchange",!1,a))}}function Fm(i,a,d,m){switch(om(a)){case 1:var y=GS;break;case 4:y=YS;break;default:y=Yu}d=y.bind(null,a,d,i),y=void 0,!Uu||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),m?y!==void 0?i.addEventListener(a,d,{capture:!0,passive:y}):i.addEventListener(a,d,!0):y!==void 0?i.addEventListener(a,d,{passive:y}):i.addEventListener(a,d,!1)}function hd(i,a,d,m,y){var S=m;if((a&1)===0&&(a&2)===0&&m!==null)e:for(;;){if(m===null)return;var P=m.tag;if(P===3||P===4){var O=m.stateNode.containerInfo;if(O===y||O.nodeType===8&&O.parentNode===y)break;if(P===4)for(P=m.return;P!==null;){var L=P.tag;if((L===3||L===4)&&(L=P.stateNode.containerInfo,L===y||L.nodeType===8&&L.parentNode===y))return;P=P.return}for(;O!==null;){if(P=fs(O),P===null)return;if(L=P.tag,L===5||L===6){m=S=P;continue e}O=O.parentNode}}m=m.return}Hp(function(){var z=S,Z=Fu(d),ee=[];e:{var J=Om.get(i);if(J!==void 0){var le=Qu,pe=i;switch(i){case"keypress":if(qa(d)===0)break e;case"keydown":case"keyup":le=c_;break;case"focusin":pe="focus",le=ed;break;case"focusout":pe="blur",le=ed;break;case"beforeblur":case"afterblur":le=ed;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=cm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=QS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=h_;break;case Pm:case Rm:case Nm:le=e_;break;case Dm:le=p_;break;case"scroll":le=XS;break;case"wheel":le=g_;break;case"copy":case"cut":case"paste":le=n_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=dm}var me=(a&4)!==0,dt=!me&&i==="scroll",j=me?J!==null?J+"Capture":null:J;me=[];for(var I=z,B;I!==null;){B=I;var re=B.stateNode;if(B.tag===5&&re!==null&&(B=re,j!==null&&(re=eo(I,j),re!=null&&me.push(bo(I,re,B)))),dt)break;I=I.return}0<me.length&&(J=new le(J,pe,null,d,Z),ee.push({event:J,listeners:me}))}}if((a&7)===0){e:{if(J=i==="mouseover"||i==="pointerover",le=i==="mouseout"||i==="pointerout",J&&d!==Iu&&(pe=d.relatedTarget||d.fromElement)&&(fs(pe)||pe[hr]))break e;if((le||J)&&(J=Z.window===Z?Z:(J=Z.ownerDocument)?J.defaultView||J.parentWindow:window,le?(pe=d.relatedTarget||d.toElement,le=z,pe=pe?fs(pe):null,pe!==null&&(dt=hs(pe),pe!==dt||pe.tag!==5&&pe.tag!==6)&&(pe=null)):(le=null,pe=z),le!==pe)){if(me=cm,re="onMouseLeave",j="onMouseEnter",I="mouse",(i==="pointerout"||i==="pointerover")&&(me=dm,re="onPointerLeave",j="onPointerEnter",I="pointer"),dt=le==null?J:Ks(le),B=pe==null?J:Ks(pe),J=new me(re,I+"leave",le,d,Z),J.target=dt,J.relatedTarget=B,re=null,fs(Z)===z&&(me=new me(j,I+"enter",pe,d,Z),me.target=B,me.relatedTarget=dt,re=me),dt=re,le&&pe)t:{for(me=le,j=pe,I=0,B=me;B;B=Ys(B))I++;for(B=0,re=j;re;re=Ys(re))B++;for(;0<I-B;)me=Ys(me),I--;for(;0<B-I;)j=Ys(j),B--;for(;I--;){if(me===j||j!==null&&me===j.alternate)break t;me=Ys(me),j=Ys(j)}me=null}else me=null;le!==null&&jm(ee,J,le,me,!1),pe!==null&&dt!==null&&jm(ee,dt,pe,me,!0)}}e:{if(J=z?Ks(z):window,le=J.nodeName&&J.nodeName.toLowerCase(),le==="select"||le==="input"&&J.type==="file")var ve=__;else if(vm(J))if(wm)ve=T_;else{ve=A_;var xe=E_}else(le=J.nodeName)&&le.toLowerCase()==="input"&&(J.type==="checkbox"||J.type==="radio")&&(ve=C_);if(ve&&(ve=ve(i,z))){ym(ee,ve,d,Z);break e}xe&&xe(i,J,z),i==="focusout"&&(xe=J._wrapperState)&&xe.controlled&&J.type==="number"&&us(J,"number",J.value)}switch(xe=z?Ks(z):window,i){case"focusin":(vm(xe)||xe.contentEditable==="true")&&(qs=xe,od=z,vo=null);break;case"focusout":vo=od=qs=null;break;case"mousedown":ad=!0;break;case"contextmenu":case"mouseup":case"dragend":ad=!1,Tm(ee,d,Z);break;case"selectionchange":if(R_)break;case"keydown":case"keyup":Tm(ee,d,Z)}var Se;if(nd)e:{switch(i){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else $s?mm(i,d)&&(Ee="onCompositionEnd"):i==="keydown"&&d.keyCode===229&&(Ee="onCompositionStart");Ee&&(hm&&d.locale!=="ko"&&($s||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&$s&&(Se=am()):(Lr=Z,Ku="value"in Lr?Lr.value:Lr.textContent,$s=!0)),xe=Za(z,Ee),0<xe.length&&(Ee=new um(Ee,i,null,d,Z),ee.push({event:Ee,listeners:xe}),Se?Ee.data=Se:(Se=gm(d),Se!==null&&(Ee.data=Se)))),(Se=y_?w_(i,d):b_(i,d))&&(z=Za(z,"onBeforeInput"),0<z.length&&(Z=new um("onBeforeInput","beforeinput",null,d,Z),ee.push({event:Z,listeners:z}),Z.data=Se))}Im(ee,a)})}function bo(i,a,d){return{instance:i,listener:a,currentTarget:d}}function Za(i,a){for(var d=a+"Capture",m=[];i!==null;){var y=i,S=y.stateNode;y.tag===5&&S!==null&&(y=S,S=eo(i,d),S!=null&&m.unshift(bo(i,S,y)),S=eo(i,a),S!=null&&m.push(bo(i,S,y))),i=i.return}return m}function Ys(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function jm(i,a,d,m,y){for(var S=a._reactName,P=[];d!==null&&d!==m;){var O=d,L=O.alternate,z=O.stateNode;if(L!==null&&L===m)break;O.tag===5&&z!==null&&(O=z,y?(L=eo(d,S),L!=null&&P.unshift(bo(d,L,O))):y||(L=eo(d,S),L!=null&&P.push(bo(d,L,O)))),d=d.return}P.length!==0&&i.push({event:a,listeners:P})}var M_=/\r\n?/g,L_=/\u0000|\uFFFD/g;function Bm(i){return(typeof i=="string"?i:""+i).replace(M_,`
`).replace(L_,"")}function el(i,a,d){if(a=Bm(a),Bm(i)!==a&&d)throw Error(t(425))}function tl(){}var fd=null,pd=null;function md(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var gd=typeof setTimeout=="function"?setTimeout:void 0,I_=typeof clearTimeout=="function"?clearTimeout:void 0,Um=typeof Promise=="function"?Promise:void 0,F_=typeof queueMicrotask=="function"?queueMicrotask:typeof Um<"u"?function(i){return Um.resolve(null).then(i).catch(j_)}:gd;function j_(i){setTimeout(function(){throw i})}function vd(i,a){var d=a,m=0;do{var y=d.nextSibling;if(i.removeChild(d),y&&y.nodeType===8)if(d=y.data,d==="/$"){if(m===0){i.removeChild(y),co(a);return}m--}else d!=="$"&&d!=="$?"&&d!=="$!"||m++;d=y}while(d);co(a)}function Fr(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function zm(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var d=i.data;if(d==="$"||d==="$!"||d==="$?"){if(a===0)return i;a--}else d==="/$"&&a++}i=i.previousSibling}return null}var Xs=Math.random().toString(36).slice(2),$n="__reactFiber$"+Xs,xo="__reactProps$"+Xs,hr="__reactContainer$"+Xs,yd="__reactEvents$"+Xs,B_="__reactListeners$"+Xs,U_="__reactHandles$"+Xs;function fs(i){var a=i[$n];if(a)return a;for(var d=i.parentNode;d;){if(a=d[hr]||d[$n]){if(d=a.alternate,a.child!==null||d!==null&&d.child!==null)for(i=zm(i);i!==null;){if(d=i[$n])return d;i=zm(i)}return a}i=d,d=i.parentNode}return null}function So(i){return i=i[$n]||i[hr],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Ks(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function nl(i){return i[xo]||null}var wd=[],Qs=-1;function jr(i){return{current:i}}function Ge(i){0>Qs||(i.current=wd[Qs],wd[Qs]=null,Qs--)}function $e(i,a){Qs++,wd[Qs]=i.current,i.current=a}var Br={},Ot=jr(Br),Yt=jr(!1),ps=Br;function Js(i,a){var d=i.type.contextTypes;if(!d)return Br;var m=i.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===a)return m.__reactInternalMemoizedMaskedChildContext;var y={},S;for(S in d)y[S]=a[S];return m&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=y),y}function Xt(i){return i=i.childContextTypes,i!=null}function rl(){Ge(Yt),Ge(Ot)}function Hm(i,a,d){if(Ot.current!==Br)throw Error(t(168));$e(Ot,a),$e(Yt,d)}function Wm(i,a,d){var m=i.stateNode;if(a=a.childContextTypes,typeof m.getChildContext!="function")return d;m=m.getChildContext();for(var y in m)if(!(y in a))throw Error(t(108,ge(i)||"Unknown",y));return Q({},d,m)}function sl(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Br,ps=Ot.current,$e(Ot,i),$e(Yt,Yt.current),!0}function Vm(i,a,d){var m=i.stateNode;if(!m)throw Error(t(169));d?(i=Wm(i,a,ps),m.__reactInternalMemoizedMergedChildContext=i,Ge(Yt),Ge(Ot),$e(Ot,i)):Ge(Yt),$e(Yt,d)}var fr=null,il=!1,bd=!1;function $m(i){fr===null?fr=[i]:fr.push(i)}function z_(i){il=!0,$m(i)}function Ur(){if(!bd&&fr!==null){bd=!0;var i=0,a=Ue;try{var d=fr;for(Ue=1;i<d.length;i++){var m=d[i];do m=m(!0);while(m!==null)}fr=null,il=!1}catch(y){throw fr!==null&&(fr=fr.slice(i+1)),Gp(Hu,Ur),y}finally{Ue=a,bd=!1}}return null}var Zs=[],ei=0,ol=null,al=0,yn=[],wn=0,ms=null,pr=1,mr="";function gs(i,a){Zs[ei++]=al,Zs[ei++]=ol,ol=i,al=a}function qm(i,a,d){yn[wn++]=pr,yn[wn++]=mr,yn[wn++]=ms,ms=i;var m=pr;i=mr;var y=32-Nn(m)-1;m&=~(1<<y),d+=1;var S=32-Nn(a)+y;if(30<S){var P=y-y%5;S=(m&(1<<P)-1).toString(32),m>>=P,y-=P,pr=1<<32-Nn(a)+y|d<<y|m,mr=S+i}else pr=1<<S|d<<y|m,mr=i}function xd(i){i.return!==null&&(gs(i,1),qm(i,1,0))}function Sd(i){for(;i===ol;)ol=Zs[--ei],Zs[ei]=null,al=Zs[--ei],Zs[ei]=null;for(;i===ms;)ms=yn[--wn],yn[wn]=null,mr=yn[--wn],yn[wn]=null,pr=yn[--wn],yn[wn]=null}var cn=null,un=null,Qe=!1,On=null;function Gm(i,a){var d=_n(5,null,null,0);d.elementType="DELETED",d.stateNode=a,d.return=i,a=i.deletions,a===null?(i.deletions=[d],i.flags|=16):a.push(d)}function Ym(i,a){switch(i.tag){case 5:var d=i.type;return a=a.nodeType!==1||d.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,cn=i,un=Fr(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,cn=i,un=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(d=ms!==null?{id:pr,overflow:mr}:null,i.memoizedState={dehydrated:a,treeContext:d,retryLane:1073741824},d=_n(18,null,null,0),d.stateNode=a,d.return=i,i.child=d,cn=i,un=null,!0):!1;default:return!1}}function _d(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Ed(i){if(Qe){var a=un;if(a){var d=a;if(!Ym(i,a)){if(_d(i))throw Error(t(418));a=Fr(d.nextSibling);var m=cn;a&&Ym(i,a)?Gm(m,d):(i.flags=i.flags&-4097|2,Qe=!1,cn=i)}}else{if(_d(i))throw Error(t(418));i.flags=i.flags&-4097|2,Qe=!1,cn=i}}}function Xm(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;cn=i}function ll(i){if(i!==cn)return!1;if(!Qe)return Xm(i),Qe=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!md(i.type,i.memoizedProps)),a&&(a=un)){if(_d(i))throw Km(),Error(t(418));for(;a;)Gm(i,a),a=Fr(a.nextSibling)}if(Xm(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var d=i.data;if(d==="/$"){if(a===0){un=Fr(i.nextSibling);break e}a--}else d!=="$"&&d!=="$!"&&d!=="$?"||a++}i=i.nextSibling}un=null}}else un=cn?Fr(i.stateNode.nextSibling):null;return!0}function Km(){for(var i=un;i;)i=Fr(i.nextSibling)}function ti(){un=cn=null,Qe=!1}function Ad(i){On===null?On=[i]:On.push(i)}var H_=k.ReactCurrentBatchConfig;function _o(i,a,d){if(i=d.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(t(309));var m=d.stateNode}if(!m)throw Error(t(147,i));var y=m,S=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===S?a.ref:(a=function(P){var O=y.refs;P===null?delete O[S]:O[S]=P},a._stringRef=S,a)}if(typeof i!="string")throw Error(t(284));if(!d._owner)throw Error(t(290,i))}return i}function cl(i,a){throw i=Object.prototype.toString.call(a),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function Qm(i){var a=i._init;return a(i._payload)}function Jm(i){function a(j,I){if(i){var B=j.deletions;B===null?(j.deletions=[I],j.flags|=16):B.push(I)}}function d(j,I){if(!i)return null;for(;I!==null;)a(j,I),I=I.sibling;return null}function m(j,I){for(j=new Map;I!==null;)I.key!==null?j.set(I.key,I):j.set(I.index,I),I=I.sibling;return j}function y(j,I){return j=Yr(j,I),j.index=0,j.sibling=null,j}function S(j,I,B){return j.index=B,i?(B=j.alternate,B!==null?(B=B.index,B<I?(j.flags|=2,I):B):(j.flags|=2,I)):(j.flags|=1048576,I)}function P(j){return i&&j.alternate===null&&(j.flags|=2),j}function O(j,I,B,re){return I===null||I.tag!==6?(I=gh(B,j.mode,re),I.return=j,I):(I=y(I,B),I.return=j,I)}function L(j,I,B,re){var ve=B.type;return ve===D?Z(j,I,B.props.children,re,B.key):I!==null&&(I.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===G&&Qm(ve)===I.type)?(re=y(I,B.props),re.ref=_o(j,I,B),re.return=j,re):(re=Ol(B.type,B.key,B.props,null,j.mode,re),re.ref=_o(j,I,B),re.return=j,re)}function z(j,I,B,re){return I===null||I.tag!==4||I.stateNode.containerInfo!==B.containerInfo||I.stateNode.implementation!==B.implementation?(I=vh(B,j.mode,re),I.return=j,I):(I=y(I,B.children||[]),I.return=j,I)}function Z(j,I,B,re,ve){return I===null||I.tag!==7?(I=Es(B,j.mode,re,ve),I.return=j,I):(I=y(I,B),I.return=j,I)}function ee(j,I,B){if(typeof I=="string"&&I!==""||typeof I=="number")return I=gh(""+I,j.mode,B),I.return=j,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case N:return B=Ol(I.type,I.key,I.props,null,j.mode,B),B.ref=_o(j,null,I),B.return=j,B;case R:return I=vh(I,j.mode,B),I.return=j,I;case G:var re=I._init;return ee(j,re(I._payload),B)}if(ds(I)||$(I))return I=Es(I,j.mode,B,null),I.return=j,I;cl(j,I)}return null}function J(j,I,B,re){var ve=I!==null?I.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return ve!==null?null:O(j,I,""+B,re);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case N:return B.key===ve?L(j,I,B,re):null;case R:return B.key===ve?z(j,I,B,re):null;case G:return ve=B._init,J(j,I,ve(B._payload),re)}if(ds(B)||$(B))return ve!==null?null:Z(j,I,B,re,null);cl(j,B)}return null}function le(j,I,B,re,ve){if(typeof re=="string"&&re!==""||typeof re=="number")return j=j.get(B)||null,O(I,j,""+re,ve);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case N:return j=j.get(re.key===null?B:re.key)||null,L(I,j,re,ve);case R:return j=j.get(re.key===null?B:re.key)||null,z(I,j,re,ve);case G:var xe=re._init;return le(j,I,B,xe(re._payload),ve)}if(ds(re)||$(re))return j=j.get(B)||null,Z(I,j,re,ve,null);cl(I,re)}return null}function pe(j,I,B,re){for(var ve=null,xe=null,Se=I,Ee=I=0,Et=null;Se!==null&&Ee<B.length;Ee++){Se.index>Ee?(Et=Se,Se=null):Et=Se.sibling;var je=J(j,Se,B[Ee],re);if(je===null){Se===null&&(Se=Et);break}i&&Se&&je.alternate===null&&a(j,Se),I=S(je,I,Ee),xe===null?ve=je:xe.sibling=je,xe=je,Se=Et}if(Ee===B.length)return d(j,Se),Qe&&gs(j,Ee),ve;if(Se===null){for(;Ee<B.length;Ee++)Se=ee(j,B[Ee],re),Se!==null&&(I=S(Se,I,Ee),xe===null?ve=Se:xe.sibling=Se,xe=Se);return Qe&&gs(j,Ee),ve}for(Se=m(j,Se);Ee<B.length;Ee++)Et=le(Se,j,Ee,B[Ee],re),Et!==null&&(i&&Et.alternate!==null&&Se.delete(Et.key===null?Ee:Et.key),I=S(Et,I,Ee),xe===null?ve=Et:xe.sibling=Et,xe=Et);return i&&Se.forEach(function(Xr){return a(j,Xr)}),Qe&&gs(j,Ee),ve}function me(j,I,B,re){var ve=$(B);if(typeof ve!="function")throw Error(t(150));if(B=ve.call(B),B==null)throw Error(t(151));for(var xe=ve=null,Se=I,Ee=I=0,Et=null,je=B.next();Se!==null&&!je.done;Ee++,je=B.next()){Se.index>Ee?(Et=Se,Se=null):Et=Se.sibling;var Xr=J(j,Se,je.value,re);if(Xr===null){Se===null&&(Se=Et);break}i&&Se&&Xr.alternate===null&&a(j,Se),I=S(Xr,I,Ee),xe===null?ve=Xr:xe.sibling=Xr,xe=Xr,Se=Et}if(je.done)return d(j,Se),Qe&&gs(j,Ee),ve;if(Se===null){for(;!je.done;Ee++,je=B.next())je=ee(j,je.value,re),je!==null&&(I=S(je,I,Ee),xe===null?ve=je:xe.sibling=je,xe=je);return Qe&&gs(j,Ee),ve}for(Se=m(j,Se);!je.done;Ee++,je=B.next())je=le(Se,j,Ee,je.value,re),je!==null&&(i&&je.alternate!==null&&Se.delete(je.key===null?Ee:je.key),I=S(je,I,Ee),xe===null?ve=je:xe.sibling=je,xe=je);return i&&Se.forEach(function(xE){return a(j,xE)}),Qe&&gs(j,Ee),ve}function dt(j,I,B,re){if(typeof B=="object"&&B!==null&&B.type===D&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case N:e:{for(var ve=B.key,xe=I;xe!==null;){if(xe.key===ve){if(ve=B.type,ve===D){if(xe.tag===7){d(j,xe.sibling),I=y(xe,B.props.children),I.return=j,j=I;break e}}else if(xe.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===G&&Qm(ve)===xe.type){d(j,xe.sibling),I=y(xe,B.props),I.ref=_o(j,xe,B),I.return=j,j=I;break e}d(j,xe);break}else a(j,xe);xe=xe.sibling}B.type===D?(I=Es(B.props.children,j.mode,re,B.key),I.return=j,j=I):(re=Ol(B.type,B.key,B.props,null,j.mode,re),re.ref=_o(j,I,B),re.return=j,j=re)}return P(j);case R:e:{for(xe=B.key;I!==null;){if(I.key===xe)if(I.tag===4&&I.stateNode.containerInfo===B.containerInfo&&I.stateNode.implementation===B.implementation){d(j,I.sibling),I=y(I,B.children||[]),I.return=j,j=I;break e}else{d(j,I);break}else a(j,I);I=I.sibling}I=vh(B,j.mode,re),I.return=j,j=I}return P(j);case G:return xe=B._init,dt(j,I,xe(B._payload),re)}if(ds(B))return pe(j,I,B,re);if($(B))return me(j,I,B,re);cl(j,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,I!==null&&I.tag===6?(d(j,I.sibling),I=y(I,B),I.return=j,j=I):(d(j,I),I=gh(B,j.mode,re),I.return=j,j=I),P(j)):d(j,I)}return dt}var ni=Jm(!0),Zm=Jm(!1),ul=jr(null),dl=null,ri=null,Cd=null;function Td(){Cd=ri=dl=null}function kd(i){var a=ul.current;Ge(ul),i._currentValue=a}function Pd(i,a,d){for(;i!==null;){var m=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,m!==null&&(m.childLanes|=a)):m!==null&&(m.childLanes&a)!==a&&(m.childLanes|=a),i===d)break;i=i.return}}function si(i,a){dl=i,Cd=ri=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&a)!==0&&(Kt=!0),i.firstContext=null)}function bn(i){var a=i._currentValue;if(Cd!==i)if(i={context:i,memoizedValue:a,next:null},ri===null){if(dl===null)throw Error(t(308));ri=i,dl.dependencies={lanes:0,firstContext:i}}else ri=ri.next=i;return a}var vs=null;function Rd(i){vs===null?vs=[i]:vs.push(i)}function eg(i,a,d,m){var y=a.interleaved;return y===null?(d.next=d,Rd(a)):(d.next=y.next,y.next=d),a.interleaved=d,gr(i,m)}function gr(i,a){i.lanes|=a;var d=i.alternate;for(d!==null&&(d.lanes|=a),d=i,i=i.return;i!==null;)i.childLanes|=a,d=i.alternate,d!==null&&(d.childLanes|=a),d=i,i=i.return;return d.tag===3?d.stateNode:null}var zr=!1;function Nd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tg(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function vr(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function Hr(i,a,d){var m=i.updateQueue;if(m===null)return null;if(m=m.shared,(Fe&2)!==0){var y=m.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),m.pending=a,gr(i,d)}return y=m.interleaved,y===null?(a.next=a,Rd(m)):(a.next=y.next,y.next=a),m.interleaved=a,gr(i,d)}function hl(i,a,d){if(a=a.updateQueue,a!==null&&(a=a.shared,(d&4194240)!==0)){var m=a.lanes;m&=i.pendingLanes,d|=m,a.lanes=d,$u(i,d)}}function ng(i,a){var d=i.updateQueue,m=i.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var y=null,S=null;if(d=d.firstBaseUpdate,d!==null){do{var P={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};S===null?y=S=P:S=S.next=P,d=d.next}while(d!==null);S===null?y=S=a:S=S.next=a}else y=S=a;d={baseState:m.baseState,firstBaseUpdate:y,lastBaseUpdate:S,shared:m.shared,effects:m.effects},i.updateQueue=d;return}i=d.lastBaseUpdate,i===null?d.firstBaseUpdate=a:i.next=a,d.lastBaseUpdate=a}function fl(i,a,d,m){var y=i.updateQueue;zr=!1;var S=y.firstBaseUpdate,P=y.lastBaseUpdate,O=y.shared.pending;if(O!==null){y.shared.pending=null;var L=O,z=L.next;L.next=null,P===null?S=z:P.next=z,P=L;var Z=i.alternate;Z!==null&&(Z=Z.updateQueue,O=Z.lastBaseUpdate,O!==P&&(O===null?Z.firstBaseUpdate=z:O.next=z,Z.lastBaseUpdate=L))}if(S!==null){var ee=y.baseState;P=0,Z=z=L=null,O=S;do{var J=O.lane,le=O.eventTime;if((m&J)===J){Z!==null&&(Z=Z.next={eventTime:le,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});e:{var pe=i,me=O;switch(J=a,le=d,me.tag){case 1:if(pe=me.payload,typeof pe=="function"){ee=pe.call(le,ee,J);break e}ee=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=me.payload,J=typeof pe=="function"?pe.call(le,ee,J):pe,J==null)break e;ee=Q({},ee,J);break e;case 2:zr=!0}}O.callback!==null&&O.lane!==0&&(i.flags|=64,J=y.effects,J===null?y.effects=[O]:J.push(O))}else le={eventTime:le,lane:J,tag:O.tag,payload:O.payload,callback:O.callback,next:null},Z===null?(z=Z=le,L=ee):Z=Z.next=le,P|=J;if(O=O.next,O===null){if(O=y.shared.pending,O===null)break;J=O,O=J.next,J.next=null,y.lastBaseUpdate=J,y.shared.pending=null}}while(!0);if(Z===null&&(L=ee),y.baseState=L,y.firstBaseUpdate=z,y.lastBaseUpdate=Z,a=y.shared.interleaved,a!==null){y=a;do P|=y.lane,y=y.next;while(y!==a)}else S===null&&(y.shared.lanes=0);bs|=P,i.lanes=P,i.memoizedState=ee}}function rg(i,a,d){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var m=i[a],y=m.callback;if(y!==null){if(m.callback=null,m=d,typeof y!="function")throw Error(t(191,y));y.call(m)}}}var Eo={},qn=jr(Eo),Ao=jr(Eo),Co=jr(Eo);function ys(i){if(i===Eo)throw Error(t(174));return i}function Dd(i,a){switch($e(Co,a),$e(Ao,i),$e(qn,Eo),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:vn(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=vn(a,i)}Ge(qn),$e(qn,a)}function ii(){Ge(qn),Ge(Ao),Ge(Co)}function sg(i){ys(Co.current);var a=ys(qn.current),d=vn(a,i.type);a!==d&&($e(Ao,i),$e(qn,d))}function Od(i){Ao.current===i&&(Ge(qn),Ge(Ao))}var tt=jr(0);function pl(i){for(var a=i;a!==null;){if(a.tag===13){var d=a.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Md=[];function Ld(){for(var i=0;i<Md.length;i++)Md[i]._workInProgressVersionPrimary=null;Md.length=0}var ml=k.ReactCurrentDispatcher,Id=k.ReactCurrentBatchConfig,ws=0,nt=null,wt=null,St=null,gl=!1,To=!1,ko=0,W_=0;function Mt(){throw Error(t(321))}function Fd(i,a){if(a===null)return!1;for(var d=0;d<a.length&&d<i.length;d++)if(!Dn(i[d],a[d]))return!1;return!0}function jd(i,a,d,m,y,S){if(ws=S,nt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,ml.current=i===null||i.memoizedState===null?G_:Y_,i=d(m,y),To){S=0;do{if(To=!1,ko=0,25<=S)throw Error(t(301));S+=1,St=wt=null,a.updateQueue=null,ml.current=X_,i=d(m,y)}while(To)}if(ml.current=wl,a=wt!==null&&wt.next!==null,ws=0,St=wt=nt=null,gl=!1,a)throw Error(t(300));return i}function Bd(){var i=ko!==0;return ko=0,i}function Gn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?nt.memoizedState=St=i:St=St.next=i,St}function xn(){if(wt===null){var i=nt.alternate;i=i!==null?i.memoizedState:null}else i=wt.next;var a=St===null?nt.memoizedState:St.next;if(a!==null)St=a,wt=i;else{if(i===null)throw Error(t(310));wt=i,i={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},St===null?nt.memoizedState=St=i:St=St.next=i}return St}function Po(i,a){return typeof a=="function"?a(i):a}function Ud(i){var a=xn(),d=a.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=i;var m=wt,y=m.baseQueue,S=d.pending;if(S!==null){if(y!==null){var P=y.next;y.next=S.next,S.next=P}m.baseQueue=y=S,d.pending=null}if(y!==null){S=y.next,m=m.baseState;var O=P=null,L=null,z=S;do{var Z=z.lane;if((ws&Z)===Z)L!==null&&(L=L.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),m=z.hasEagerState?z.eagerState:i(m,z.action);else{var ee={lane:Z,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};L===null?(O=L=ee,P=m):L=L.next=ee,nt.lanes|=Z,bs|=Z}z=z.next}while(z!==null&&z!==S);L===null?P=m:L.next=O,Dn(m,a.memoizedState)||(Kt=!0),a.memoizedState=m,a.baseState=P,a.baseQueue=L,d.lastRenderedState=m}if(i=d.interleaved,i!==null){y=i;do S=y.lane,nt.lanes|=S,bs|=S,y=y.next;while(y!==i)}else y===null&&(d.lanes=0);return[a.memoizedState,d.dispatch]}function zd(i){var a=xn(),d=a.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=i;var m=d.dispatch,y=d.pending,S=a.memoizedState;if(y!==null){d.pending=null;var P=y=y.next;do S=i(S,P.action),P=P.next;while(P!==y);Dn(S,a.memoizedState)||(Kt=!0),a.memoizedState=S,a.baseQueue===null&&(a.baseState=S),d.lastRenderedState=S}return[S,m]}function ig(){}function og(i,a){var d=nt,m=xn(),y=a(),S=!Dn(m.memoizedState,y);if(S&&(m.memoizedState=y,Kt=!0),m=m.queue,Hd(cg.bind(null,d,m,i),[i]),m.getSnapshot!==a||S||St!==null&&St.memoizedState.tag&1){if(d.flags|=2048,Ro(9,lg.bind(null,d,m,y,a),void 0,null),_t===null)throw Error(t(349));(ws&30)!==0||ag(d,a,y)}return y}function ag(i,a,d){i.flags|=16384,i={getSnapshot:a,value:d},a=nt.updateQueue,a===null?(a={lastEffect:null,stores:null},nt.updateQueue=a,a.stores=[i]):(d=a.stores,d===null?a.stores=[i]:d.push(i))}function lg(i,a,d,m){a.value=d,a.getSnapshot=m,ug(a)&&dg(i)}function cg(i,a,d){return d(function(){ug(a)&&dg(i)})}function ug(i){var a=i.getSnapshot;i=i.value;try{var d=a();return!Dn(i,d)}catch{return!0}}function dg(i){var a=gr(i,1);a!==null&&Fn(a,i,1,-1)}function hg(i){var a=Gn();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Po,lastRenderedState:i},a.queue=i,i=i.dispatch=q_.bind(null,nt,i),[a.memoizedState,i]}function Ro(i,a,d,m){return i={tag:i,create:a,destroy:d,deps:m,next:null},a=nt.updateQueue,a===null?(a={lastEffect:null,stores:null},nt.updateQueue=a,a.lastEffect=i.next=i):(d=a.lastEffect,d===null?a.lastEffect=i.next=i:(m=d.next,d.next=i,i.next=m,a.lastEffect=i)),i}function fg(){return xn().memoizedState}function vl(i,a,d,m){var y=Gn();nt.flags|=i,y.memoizedState=Ro(1|a,d,void 0,m===void 0?null:m)}function yl(i,a,d,m){var y=xn();m=m===void 0?null:m;var S=void 0;if(wt!==null){var P=wt.memoizedState;if(S=P.destroy,m!==null&&Fd(m,P.deps)){y.memoizedState=Ro(a,d,S,m);return}}nt.flags|=i,y.memoizedState=Ro(1|a,d,S,m)}function pg(i,a){return vl(8390656,8,i,a)}function Hd(i,a){return yl(2048,8,i,a)}function mg(i,a){return yl(4,2,i,a)}function gg(i,a){return yl(4,4,i,a)}function vg(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function yg(i,a,d){return d=d!=null?d.concat([i]):null,yl(4,4,vg.bind(null,a,i),d)}function Wd(){}function wg(i,a){var d=xn();a=a===void 0?null:a;var m=d.memoizedState;return m!==null&&a!==null&&Fd(a,m[1])?m[0]:(d.memoizedState=[i,a],i)}function bg(i,a){var d=xn();a=a===void 0?null:a;var m=d.memoizedState;return m!==null&&a!==null&&Fd(a,m[1])?m[0]:(i=i(),d.memoizedState=[i,a],i)}function xg(i,a,d){return(ws&21)===0?(i.baseState&&(i.baseState=!1,Kt=!0),i.memoizedState=d):(Dn(d,a)||(d=Qp(),nt.lanes|=d,bs|=d,i.baseState=!0),a)}function V_(i,a){var d=Ue;Ue=d!==0&&4>d?d:4,i(!0);var m=Id.transition;Id.transition={};try{i(!1),a()}finally{Ue=d,Id.transition=m}}function Sg(){return xn().memoizedState}function $_(i,a,d){var m=qr(i);if(d={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null},_g(i))Eg(a,d);else if(d=eg(i,a,d,m),d!==null){var y=zt();Fn(d,i,m,y),Ag(d,a,m)}}function q_(i,a,d){var m=qr(i),y={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null};if(_g(i))Eg(a,y);else{var S=i.alternate;if(i.lanes===0&&(S===null||S.lanes===0)&&(S=a.lastRenderedReducer,S!==null))try{var P=a.lastRenderedState,O=S(P,d);if(y.hasEagerState=!0,y.eagerState=O,Dn(O,P)){var L=a.interleaved;L===null?(y.next=y,Rd(a)):(y.next=L.next,L.next=y),a.interleaved=y;return}}catch{}d=eg(i,a,y,m),d!==null&&(y=zt(),Fn(d,i,m,y),Ag(d,a,m))}}function _g(i){var a=i.alternate;return i===nt||a!==null&&a===nt}function Eg(i,a){To=gl=!0;var d=i.pending;d===null?a.next=a:(a.next=d.next,d.next=a),i.pending=a}function Ag(i,a,d){if((d&4194240)!==0){var m=a.lanes;m&=i.pendingLanes,d|=m,a.lanes=d,$u(i,d)}}var wl={readContext:bn,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},G_={readContext:bn,useCallback:function(i,a){return Gn().memoizedState=[i,a===void 0?null:a],i},useContext:bn,useEffect:pg,useImperativeHandle:function(i,a,d){return d=d!=null?d.concat([i]):null,vl(4194308,4,vg.bind(null,a,i),d)},useLayoutEffect:function(i,a){return vl(4194308,4,i,a)},useInsertionEffect:function(i,a){return vl(4,2,i,a)},useMemo:function(i,a){var d=Gn();return a=a===void 0?null:a,i=i(),d.memoizedState=[i,a],i},useReducer:function(i,a,d){var m=Gn();return a=d!==void 0?d(a):a,m.memoizedState=m.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},m.queue=i,i=i.dispatch=$_.bind(null,nt,i),[m.memoizedState,i]},useRef:function(i){var a=Gn();return i={current:i},a.memoizedState=i},useState:hg,useDebugValue:Wd,useDeferredValue:function(i){return Gn().memoizedState=i},useTransition:function(){var i=hg(!1),a=i[0];return i=V_.bind(null,i[1]),Gn().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,d){var m=nt,y=Gn();if(Qe){if(d===void 0)throw Error(t(407));d=d()}else{if(d=a(),_t===null)throw Error(t(349));(ws&30)!==0||ag(m,a,d)}y.memoizedState=d;var S={value:d,getSnapshot:a};return y.queue=S,pg(cg.bind(null,m,S,i),[i]),m.flags|=2048,Ro(9,lg.bind(null,m,S,d,a),void 0,null),d},useId:function(){var i=Gn(),a=_t.identifierPrefix;if(Qe){var d=mr,m=pr;d=(m&~(1<<32-Nn(m)-1)).toString(32)+d,a=":"+a+"R"+d,d=ko++,0<d&&(a+="H"+d.toString(32)),a+=":"}else d=W_++,a=":"+a+"r"+d.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},Y_={readContext:bn,useCallback:wg,useContext:bn,useEffect:Hd,useImperativeHandle:yg,useInsertionEffect:mg,useLayoutEffect:gg,useMemo:bg,useReducer:Ud,useRef:fg,useState:function(){return Ud(Po)},useDebugValue:Wd,useDeferredValue:function(i){var a=xn();return xg(a,wt.memoizedState,i)},useTransition:function(){var i=Ud(Po)[0],a=xn().memoizedState;return[i,a]},useMutableSource:ig,useSyncExternalStore:og,useId:Sg,unstable_isNewReconciler:!1},X_={readContext:bn,useCallback:wg,useContext:bn,useEffect:Hd,useImperativeHandle:yg,useInsertionEffect:mg,useLayoutEffect:gg,useMemo:bg,useReducer:zd,useRef:fg,useState:function(){return zd(Po)},useDebugValue:Wd,useDeferredValue:function(i){var a=xn();return wt===null?a.memoizedState=i:xg(a,wt.memoizedState,i)},useTransition:function(){var i=zd(Po)[0],a=xn().memoizedState;return[i,a]},useMutableSource:ig,useSyncExternalStore:og,useId:Sg,unstable_isNewReconciler:!1};function Mn(i,a){if(i&&i.defaultProps){a=Q({},a),i=i.defaultProps;for(var d in i)a[d]===void 0&&(a[d]=i[d]);return a}return a}function Vd(i,a,d,m){a=i.memoizedState,d=d(m,a),d=d==null?a:Q({},a,d),i.memoizedState=d,i.lanes===0&&(i.updateQueue.baseState=d)}var bl={isMounted:function(i){return(i=i._reactInternals)?hs(i)===i:!1},enqueueSetState:function(i,a,d){i=i._reactInternals;var m=zt(),y=qr(i),S=vr(m,y);S.payload=a,d!=null&&(S.callback=d),a=Hr(i,S,y),a!==null&&(Fn(a,i,y,m),hl(a,i,y))},enqueueReplaceState:function(i,a,d){i=i._reactInternals;var m=zt(),y=qr(i),S=vr(m,y);S.tag=1,S.payload=a,d!=null&&(S.callback=d),a=Hr(i,S,y),a!==null&&(Fn(a,i,y,m),hl(a,i,y))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var d=zt(),m=qr(i),y=vr(d,m);y.tag=2,a!=null&&(y.callback=a),a=Hr(i,y,m),a!==null&&(Fn(a,i,m,d),hl(a,i,m))}};function Cg(i,a,d,m,y,S,P){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(m,S,P):a.prototype&&a.prototype.isPureReactComponent?!go(d,m)||!go(y,S):!0}function Tg(i,a,d){var m=!1,y=Br,S=a.contextType;return typeof S=="object"&&S!==null?S=bn(S):(y=Xt(a)?ps:Ot.current,m=a.contextTypes,S=(m=m!=null)?Js(i,y):Br),a=new a(d,S),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=bl,i.stateNode=a,a._reactInternals=i,m&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=y,i.__reactInternalMemoizedMaskedChildContext=S),a}function kg(i,a,d,m){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(d,m),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(d,m),a.state!==i&&bl.enqueueReplaceState(a,a.state,null)}function $d(i,a,d,m){var y=i.stateNode;y.props=d,y.state=i.memoizedState,y.refs={},Nd(i);var S=a.contextType;typeof S=="object"&&S!==null?y.context=bn(S):(S=Xt(a)?ps:Ot.current,y.context=Js(i,S)),y.state=i.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(Vd(i,a,S,d),y.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(a=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),a!==y.state&&bl.enqueueReplaceState(y,y.state,null),fl(i,d,y,m),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308)}function oi(i,a){try{var d="",m=a;do d+=ye(m),m=m.return;while(m);var y=d}catch(S){y=`
Error generating stack: `+S.message+`
`+S.stack}return{value:i,source:a,stack:y,digest:null}}function qd(i,a,d){return{value:i,source:null,stack:d??null,digest:a??null}}function Gd(i,a){try{console.error(a.value)}catch(d){setTimeout(function(){throw d})}}var K_=typeof WeakMap=="function"?WeakMap:Map;function Pg(i,a,d){d=vr(-1,d),d.tag=3,d.payload={element:null};var m=a.value;return d.callback=function(){Tl||(Tl=!0,lh=m),Gd(i,a)},d}function Rg(i,a,d){d=vr(-1,d),d.tag=3;var m=i.type.getDerivedStateFromError;if(typeof m=="function"){var y=a.value;d.payload=function(){return m(y)},d.callback=function(){Gd(i,a)}}var S=i.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(d.callback=function(){Gd(i,a),typeof m!="function"&&(Vr===null?Vr=new Set([this]):Vr.add(this));var P=a.stack;this.componentDidCatch(a.value,{componentStack:P!==null?P:""})}),d}function Ng(i,a,d){var m=i.pingCache;if(m===null){m=i.pingCache=new K_;var y=new Set;m.set(a,y)}else y=m.get(a),y===void 0&&(y=new Set,m.set(a,y));y.has(d)||(y.add(d),i=uE.bind(null,i,a,d),a.then(i,i))}function Dg(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function Og(i,a,d,m,y){return(i.mode&1)===0?(i===a?i.flags|=65536:(i.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(a=vr(-1,1),a.tag=2,Hr(d,a,1))),d.lanes|=1),i):(i.flags|=65536,i.lanes=y,i)}var Q_=k.ReactCurrentOwner,Kt=!1;function Ut(i,a,d,m){a.child=i===null?Zm(a,null,d,m):ni(a,i.child,d,m)}function Mg(i,a,d,m,y){d=d.render;var S=a.ref;return si(a,y),m=jd(i,a,d,m,S,y),d=Bd(),i!==null&&!Kt?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~y,yr(i,a,y)):(Qe&&d&&xd(a),a.flags|=1,Ut(i,a,m,y),a.child)}function Lg(i,a,d,m,y){if(i===null){var S=d.type;return typeof S=="function"&&!mh(S)&&S.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(a.tag=15,a.type=S,Ig(i,a,S,m,y)):(i=Ol(d.type,null,m,a,a.mode,y),i.ref=a.ref,i.return=a,a.child=i)}if(S=i.child,(i.lanes&y)===0){var P=S.memoizedProps;if(d=d.compare,d=d!==null?d:go,d(P,m)&&i.ref===a.ref)return yr(i,a,y)}return a.flags|=1,i=Yr(S,m),i.ref=a.ref,i.return=a,a.child=i}function Ig(i,a,d,m,y){if(i!==null){var S=i.memoizedProps;if(go(S,m)&&i.ref===a.ref)if(Kt=!1,a.pendingProps=m=S,(i.lanes&y)!==0)(i.flags&131072)!==0&&(Kt=!0);else return a.lanes=i.lanes,yr(i,a,y)}return Yd(i,a,d,m,y)}function Fg(i,a,d){var m=a.pendingProps,y=m.children,S=i!==null?i.memoizedState:null;if(m.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(li,dn),dn|=d;else{if((d&1073741824)===0)return i=S!==null?S.baseLanes|d:d,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,$e(li,dn),dn|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=S!==null?S.baseLanes:d,$e(li,dn),dn|=m}else S!==null?(m=S.baseLanes|d,a.memoizedState=null):m=d,$e(li,dn),dn|=m;return Ut(i,a,y,d),a.child}function jg(i,a){var d=a.ref;(i===null&&d!==null||i!==null&&i.ref!==d)&&(a.flags|=512,a.flags|=2097152)}function Yd(i,a,d,m,y){var S=Xt(d)?ps:Ot.current;return S=Js(a,S),si(a,y),d=jd(i,a,d,m,S,y),m=Bd(),i!==null&&!Kt?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~y,yr(i,a,y)):(Qe&&m&&xd(a),a.flags|=1,Ut(i,a,d,y),a.child)}function Bg(i,a,d,m,y){if(Xt(d)){var S=!0;sl(a)}else S=!1;if(si(a,y),a.stateNode===null)Sl(i,a),Tg(a,d,m),$d(a,d,m,y),m=!0;else if(i===null){var P=a.stateNode,O=a.memoizedProps;P.props=O;var L=P.context,z=d.contextType;typeof z=="object"&&z!==null?z=bn(z):(z=Xt(d)?ps:Ot.current,z=Js(a,z));var Z=d.getDerivedStateFromProps,ee=typeof Z=="function"||typeof P.getSnapshotBeforeUpdate=="function";ee||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(O!==m||L!==z)&&kg(a,P,m,z),zr=!1;var J=a.memoizedState;P.state=J,fl(a,m,P,y),L=a.memoizedState,O!==m||J!==L||Yt.current||zr?(typeof Z=="function"&&(Vd(a,d,Z,m),L=a.memoizedState),(O=zr||Cg(a,d,O,m,J,L,z))?(ee||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(a.flags|=4194308)):(typeof P.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=m,a.memoizedState=L),P.props=m,P.state=L,P.context=z,m=O):(typeof P.componentDidMount=="function"&&(a.flags|=4194308),m=!1)}else{P=a.stateNode,tg(i,a),O=a.memoizedProps,z=a.type===a.elementType?O:Mn(a.type,O),P.props=z,ee=a.pendingProps,J=P.context,L=d.contextType,typeof L=="object"&&L!==null?L=bn(L):(L=Xt(d)?ps:Ot.current,L=Js(a,L));var le=d.getDerivedStateFromProps;(Z=typeof le=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(O!==ee||J!==L)&&kg(a,P,m,L),zr=!1,J=a.memoizedState,P.state=J,fl(a,m,P,y);var pe=a.memoizedState;O!==ee||J!==pe||Yt.current||zr?(typeof le=="function"&&(Vd(a,d,le,m),pe=a.memoizedState),(z=zr||Cg(a,d,z,m,J,pe,L)||!1)?(Z||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(m,pe,L),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(m,pe,L)),typeof P.componentDidUpdate=="function"&&(a.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof P.componentDidUpdate!="function"||O===i.memoizedProps&&J===i.memoizedState||(a.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&J===i.memoizedState||(a.flags|=1024),a.memoizedProps=m,a.memoizedState=pe),P.props=m,P.state=pe,P.context=L,m=z):(typeof P.componentDidUpdate!="function"||O===i.memoizedProps&&J===i.memoizedState||(a.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&J===i.memoizedState||(a.flags|=1024),m=!1)}return Xd(i,a,d,m,S,y)}function Xd(i,a,d,m,y,S){jg(i,a);var P=(a.flags&128)!==0;if(!m&&!P)return y&&Vm(a,d,!1),yr(i,a,S);m=a.stateNode,Q_.current=a;var O=P&&typeof d.getDerivedStateFromError!="function"?null:m.render();return a.flags|=1,i!==null&&P?(a.child=ni(a,i.child,null,S),a.child=ni(a,null,O,S)):Ut(i,a,O,S),a.memoizedState=m.state,y&&Vm(a,d,!0),a.child}function Ug(i){var a=i.stateNode;a.pendingContext?Hm(i,a.pendingContext,a.pendingContext!==a.context):a.context&&Hm(i,a.context,!1),Dd(i,a.containerInfo)}function zg(i,a,d,m,y){return ti(),Ad(y),a.flags|=256,Ut(i,a,d,m),a.child}var Kd={dehydrated:null,treeContext:null,retryLane:0};function Qd(i){return{baseLanes:i,cachePool:null,transitions:null}}function Hg(i,a,d){var m=a.pendingProps,y=tt.current,S=!1,P=(a.flags&128)!==0,O;if((O=P)||(O=i!==null&&i.memoizedState===null?!1:(y&2)!==0),O?(S=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(y|=1),$e(tt,y&1),i===null)return Ed(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((a.mode&1)===0?a.lanes=1:i.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(P=m.children,i=m.fallback,S?(m=a.mode,S=a.child,P={mode:"hidden",children:P},(m&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=P):S=Ml(P,m,0,null),i=Es(i,m,d,null),S.return=a,i.return=a,S.sibling=i,a.child=S,a.child.memoizedState=Qd(d),a.memoizedState=Kd,i):Jd(a,P));if(y=i.memoizedState,y!==null&&(O=y.dehydrated,O!==null))return J_(i,a,P,m,O,y,d);if(S){S=m.fallback,P=a.mode,y=i.child,O=y.sibling;var L={mode:"hidden",children:m.children};return(P&1)===0&&a.child!==y?(m=a.child,m.childLanes=0,m.pendingProps=L,a.deletions=null):(m=Yr(y,L),m.subtreeFlags=y.subtreeFlags&14680064),O!==null?S=Yr(O,S):(S=Es(S,P,d,null),S.flags|=2),S.return=a,m.return=a,m.sibling=S,a.child=m,m=S,S=a.child,P=i.child.memoizedState,P=P===null?Qd(d):{baseLanes:P.baseLanes|d,cachePool:null,transitions:P.transitions},S.memoizedState=P,S.childLanes=i.childLanes&~d,a.memoizedState=Kd,m}return S=i.child,i=S.sibling,m=Yr(S,{mode:"visible",children:m.children}),(a.mode&1)===0&&(m.lanes=d),m.return=a,m.sibling=null,i!==null&&(d=a.deletions,d===null?(a.deletions=[i],a.flags|=16):d.push(i)),a.child=m,a.memoizedState=null,m}function Jd(i,a){return a=Ml({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function xl(i,a,d,m){return m!==null&&Ad(m),ni(a,i.child,null,d),i=Jd(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function J_(i,a,d,m,y,S,P){if(d)return a.flags&256?(a.flags&=-257,m=qd(Error(t(422))),xl(i,a,P,m)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(S=m.fallback,y=a.mode,m=Ml({mode:"visible",children:m.children},y,0,null),S=Es(S,y,P,null),S.flags|=2,m.return=a,S.return=a,m.sibling=S,a.child=m,(a.mode&1)!==0&&ni(a,i.child,null,P),a.child.memoizedState=Qd(P),a.memoizedState=Kd,S);if((a.mode&1)===0)return xl(i,a,P,null);if(y.data==="$!"){if(m=y.nextSibling&&y.nextSibling.dataset,m)var O=m.dgst;return m=O,S=Error(t(419)),m=qd(S,m,void 0),xl(i,a,P,m)}if(O=(P&i.childLanes)!==0,Kt||O){if(m=_t,m!==null){switch(P&-P){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(m.suspendedLanes|P))!==0?0:y,y!==0&&y!==S.retryLane&&(S.retryLane=y,gr(i,y),Fn(m,i,y,-1))}return ph(),m=qd(Error(t(421))),xl(i,a,P,m)}return y.data==="$?"?(a.flags|=128,a.child=i.child,a=dE.bind(null,i),y._reactRetry=a,null):(i=S.treeContext,un=Fr(y.nextSibling),cn=a,Qe=!0,On=null,i!==null&&(yn[wn++]=pr,yn[wn++]=mr,yn[wn++]=ms,pr=i.id,mr=i.overflow,ms=a),a=Jd(a,m.children),a.flags|=4096,a)}function Wg(i,a,d){i.lanes|=a;var m=i.alternate;m!==null&&(m.lanes|=a),Pd(i.return,a,d)}function Zd(i,a,d,m,y){var S=i.memoizedState;S===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:y}:(S.isBackwards=a,S.rendering=null,S.renderingStartTime=0,S.last=m,S.tail=d,S.tailMode=y)}function Vg(i,a,d){var m=a.pendingProps,y=m.revealOrder,S=m.tail;if(Ut(i,a,m.children,d),m=tt.current,(m&2)!==0)m=m&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Wg(i,d,a);else if(i.tag===19)Wg(i,d,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}m&=1}if($e(tt,m),(a.mode&1)===0)a.memoizedState=null;else switch(y){case"forwards":for(d=a.child,y=null;d!==null;)i=d.alternate,i!==null&&pl(i)===null&&(y=d),d=d.sibling;d=y,d===null?(y=a.child,a.child=null):(y=d.sibling,d.sibling=null),Zd(a,!1,y,d,S);break;case"backwards":for(d=null,y=a.child,a.child=null;y!==null;){if(i=y.alternate,i!==null&&pl(i)===null){a.child=y;break}i=y.sibling,y.sibling=d,d=y,y=i}Zd(a,!0,d,null,S);break;case"together":Zd(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Sl(i,a){(a.mode&1)===0&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function yr(i,a,d){if(i!==null&&(a.dependencies=i.dependencies),bs|=a.lanes,(d&a.childLanes)===0)return null;if(i!==null&&a.child!==i.child)throw Error(t(153));if(a.child!==null){for(i=a.child,d=Yr(i,i.pendingProps),a.child=d,d.return=a;i.sibling!==null;)i=i.sibling,d=d.sibling=Yr(i,i.pendingProps),d.return=a;d.sibling=null}return a.child}function Z_(i,a,d){switch(a.tag){case 3:Ug(a),ti();break;case 5:sg(a);break;case 1:Xt(a.type)&&sl(a);break;case 4:Dd(a,a.stateNode.containerInfo);break;case 10:var m=a.type._context,y=a.memoizedProps.value;$e(ul,m._currentValue),m._currentValue=y;break;case 13:if(m=a.memoizedState,m!==null)return m.dehydrated!==null?($e(tt,tt.current&1),a.flags|=128,null):(d&a.child.childLanes)!==0?Hg(i,a,d):($e(tt,tt.current&1),i=yr(i,a,d),i!==null?i.sibling:null);$e(tt,tt.current&1);break;case 19:if(m=(d&a.childLanes)!==0,(i.flags&128)!==0){if(m)return Vg(i,a,d);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),$e(tt,tt.current),m)break;return null;case 22:case 23:return a.lanes=0,Fg(i,a,d)}return yr(i,a,d)}var $g,eh,qg,Gg;$g=function(i,a){for(var d=a.child;d!==null;){if(d.tag===5||d.tag===6)i.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},eh=function(){},qg=function(i,a,d,m){var y=i.memoizedProps;if(y!==m){i=a.stateNode,ys(qn.current);var S=null;switch(d){case"input":y=Be(i,y),m=Be(i,m),S=[];break;case"select":y=Q({},y,{value:void 0}),m=Q({},m,{value:void 0}),S=[];break;case"textarea":y=Ji(i,y),m=Ji(i,m),S=[];break;default:typeof y.onClick!="function"&&typeof m.onClick=="function"&&(i.onclick=tl)}Mu(d,m);var P;d=null;for(z in y)if(!m.hasOwnProperty(z)&&y.hasOwnProperty(z)&&y[z]!=null)if(z==="style"){var O=y[z];for(P in O)O.hasOwnProperty(P)&&(d||(d={}),d[P]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(s.hasOwnProperty(z)?S||(S=[]):(S=S||[]).push(z,null));for(z in m){var L=m[z];if(O=y?.[z],m.hasOwnProperty(z)&&L!==O&&(L!=null||O!=null))if(z==="style")if(O){for(P in O)!O.hasOwnProperty(P)||L&&L.hasOwnProperty(P)||(d||(d={}),d[P]="");for(P in L)L.hasOwnProperty(P)&&O[P]!==L[P]&&(d||(d={}),d[P]=L[P])}else d||(S||(S=[]),S.push(z,d)),d=L;else z==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,O=O?O.__html:void 0,L!=null&&O!==L&&(S=S||[]).push(z,L)):z==="children"?typeof L!="string"&&typeof L!="number"||(S=S||[]).push(z,""+L):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(s.hasOwnProperty(z)?(L!=null&&z==="onScroll"&&qe("scroll",i),S||O===L||(S=[])):(S=S||[]).push(z,L))}d&&(S=S||[]).push("style",d);var z=S;(a.updateQueue=z)&&(a.flags|=4)}},Gg=function(i,a,d,m){d!==m&&(a.flags|=4)};function No(i,a){if(!Qe)switch(i.tailMode){case"hidden":a=i.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?i.tail=null:d.sibling=null;break;case"collapsed":d=i.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:m.sibling=null}}function Lt(i){var a=i.alternate!==null&&i.alternate.child===i.child,d=0,m=0;if(a)for(var y=i.child;y!==null;)d|=y.lanes|y.childLanes,m|=y.subtreeFlags&14680064,m|=y.flags&14680064,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)d|=y.lanes|y.childLanes,m|=y.subtreeFlags,m|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=m,i.childLanes=d,a}function eE(i,a,d){var m=a.pendingProps;switch(Sd(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(a),null;case 1:return Xt(a.type)&&rl(),Lt(a),null;case 3:return m=a.stateNode,ii(),Ge(Yt),Ge(Ot),Ld(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(i===null||i.child===null)&&(ll(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,On!==null&&(dh(On),On=null))),eh(i,a),Lt(a),null;case 5:Od(a);var y=ys(Co.current);if(d=a.type,i!==null&&a.stateNode!=null)qg(i,a,d,m,y),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!m){if(a.stateNode===null)throw Error(t(166));return Lt(a),null}if(i=ys(qn.current),ll(a)){m=a.stateNode,d=a.type;var S=a.memoizedProps;switch(m[$n]=a,m[xo]=S,i=(a.mode&1)!==0,d){case"dialog":qe("cancel",m),qe("close",m);break;case"iframe":case"object":case"embed":qe("load",m);break;case"video":case"audio":for(y=0;y<yo.length;y++)qe(yo[y],m);break;case"source":qe("error",m);break;case"img":case"image":case"link":qe("error",m),qe("load",m);break;case"details":qe("toggle",m);break;case"input":Ke(m,S),qe("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!S.multiple},qe("invalid",m);break;case"textarea":Ra(m,S),qe("invalid",m)}Mu(d,S),y=null;for(var P in S)if(S.hasOwnProperty(P)){var O=S[P];P==="children"?typeof O=="string"?m.textContent!==O&&(S.suppressHydrationWarning!==!0&&el(m.textContent,O,i),y=["children",O]):typeof O=="number"&&m.textContent!==""+O&&(S.suppressHydrationWarning!==!0&&el(m.textContent,O,i),y=["children",""+O]):s.hasOwnProperty(P)&&O!=null&&P==="onScroll"&&qe("scroll",m)}switch(d){case"input":et(m),an(m,S,!0);break;case"textarea":et(m),Da(m);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(m.onclick=tl)}m=y,a.updateQueue=m,m!==null&&(a.flags|=4)}else{P=y.nodeType===9?y:y.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Oa(d)),i==="http://www.w3.org/1999/xhtml"?d==="script"?(i=P.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof m.is=="string"?i=P.createElement(d,{is:m.is}):(i=P.createElement(d),d==="select"&&(P=i,m.multiple?P.multiple=!0:m.size&&(P.size=m.size))):i=P.createElementNS(i,d),i[$n]=a,i[xo]=m,$g(i,a,!1,!1),a.stateNode=i;e:{switch(P=Lu(d,m),d){case"dialog":qe("cancel",i),qe("close",i),y=m;break;case"iframe":case"object":case"embed":qe("load",i),y=m;break;case"video":case"audio":for(y=0;y<yo.length;y++)qe(yo[y],i);y=m;break;case"source":qe("error",i),y=m;break;case"img":case"image":case"link":qe("error",i),qe("load",i),y=m;break;case"details":qe("toggle",i),y=m;break;case"input":Ke(i,m),y=Be(i,m),qe("invalid",i);break;case"option":y=m;break;case"select":i._wrapperState={wasMultiple:!!m.multiple},y=Q({},m,{value:void 0}),qe("invalid",i);break;case"textarea":Ra(i,m),y=Ji(i,m),qe("invalid",i);break;default:y=m}Mu(d,y),O=y;for(S in O)if(O.hasOwnProperty(S)){var L=O[S];S==="style"?Ip(i,L):S==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&Rn(i,L)):S==="children"?typeof L=="string"?(d!=="textarea"||L!=="")&&dr(i,L):typeof L=="number"&&dr(i,""+L):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(s.hasOwnProperty(S)?L!=null&&S==="onScroll"&&qe("scroll",i):L!=null&&C(i,S,L,P))}switch(d){case"input":et(i),an(i,m,!1);break;case"textarea":et(i),Da(i);break;case"option":m.value!=null&&i.setAttribute("value",""+X(m.value));break;case"select":i.multiple=!!m.multiple,S=m.value,S!=null?kn(i,!!m.multiple,S,!1):m.defaultValue!=null&&kn(i,!!m.multiple,m.defaultValue,!0);break;default:typeof y.onClick=="function"&&(i.onclick=tl)}switch(d){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Lt(a),null;case 6:if(i&&a.stateNode!=null)Gg(i,a,i.memoizedProps,m);else{if(typeof m!="string"&&a.stateNode===null)throw Error(t(166));if(d=ys(Co.current),ys(qn.current),ll(a)){if(m=a.stateNode,d=a.memoizedProps,m[$n]=a,(S=m.nodeValue!==d)&&(i=cn,i!==null))switch(i.tag){case 3:el(m.nodeValue,d,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&el(m.nodeValue,d,(i.mode&1)!==0)}S&&(a.flags|=4)}else m=(d.nodeType===9?d:d.ownerDocument).createTextNode(m),m[$n]=a,a.stateNode=m}return Lt(a),null;case 13:if(Ge(tt),m=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Qe&&un!==null&&(a.mode&1)!==0&&(a.flags&128)===0)Km(),ti(),a.flags|=98560,S=!1;else if(S=ll(a),m!==null&&m.dehydrated!==null){if(i===null){if(!S)throw Error(t(318));if(S=a.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(t(317));S[$n]=a}else ti(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Lt(a),S=!1}else On!==null&&(dh(On),On=null),S=!0;if(!S)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=d,a):(m=m!==null,m!==(i!==null&&i.memoizedState!==null)&&m&&(a.child.flags|=8192,(a.mode&1)!==0&&(i===null||(tt.current&1)!==0?bt===0&&(bt=3):ph())),a.updateQueue!==null&&(a.flags|=4),Lt(a),null);case 4:return ii(),eh(i,a),i===null&&wo(a.stateNode.containerInfo),Lt(a),null;case 10:return kd(a.type._context),Lt(a),null;case 17:return Xt(a.type)&&rl(),Lt(a),null;case 19:if(Ge(tt),S=a.memoizedState,S===null)return Lt(a),null;if(m=(a.flags&128)!==0,P=S.rendering,P===null)if(m)No(S,!1);else{if(bt!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(P=pl(i),P!==null){for(a.flags|=128,No(S,!1),m=P.updateQueue,m!==null&&(a.updateQueue=m,a.flags|=4),a.subtreeFlags=0,m=d,d=a.child;d!==null;)S=d,i=m,S.flags&=14680066,P=S.alternate,P===null?(S.childLanes=0,S.lanes=i,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=P.childLanes,S.lanes=P.lanes,S.child=P.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=P.memoizedProps,S.memoizedState=P.memoizedState,S.updateQueue=P.updateQueue,S.type=P.type,i=P.dependencies,S.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),d=d.sibling;return $e(tt,tt.current&1|2),a.child}i=i.sibling}S.tail!==null&&ut()>ci&&(a.flags|=128,m=!0,No(S,!1),a.lanes=4194304)}else{if(!m)if(i=pl(P),i!==null){if(a.flags|=128,m=!0,d=i.updateQueue,d!==null&&(a.updateQueue=d,a.flags|=4),No(S,!0),S.tail===null&&S.tailMode==="hidden"&&!P.alternate&&!Qe)return Lt(a),null}else 2*ut()-S.renderingStartTime>ci&&d!==1073741824&&(a.flags|=128,m=!0,No(S,!1),a.lanes=4194304);S.isBackwards?(P.sibling=a.child,a.child=P):(d=S.last,d!==null?d.sibling=P:a.child=P,S.last=P)}return S.tail!==null?(a=S.tail,S.rendering=a,S.tail=a.sibling,S.renderingStartTime=ut(),a.sibling=null,d=tt.current,$e(tt,m?d&1|2:d&1),a):(Lt(a),null);case 22:case 23:return fh(),m=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==m&&(a.flags|=8192),m&&(a.mode&1)!==0?(dn&1073741824)!==0&&(Lt(a),a.subtreeFlags&6&&(a.flags|=8192)):Lt(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function tE(i,a){switch(Sd(a),a.tag){case 1:return Xt(a.type)&&rl(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return ii(),Ge(Yt),Ge(Ot),Ld(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 5:return Od(a),null;case 13:if(Ge(tt),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(t(340));ti()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return Ge(tt),null;case 4:return ii(),null;case 10:return kd(a.type._context),null;case 22:case 23:return fh(),null;case 24:return null;default:return null}}var _l=!1,It=!1,nE=typeof WeakSet=="function"?WeakSet:Set,de=null;function ai(i,a){var d=i.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(m){ct(i,a,m)}else d.current=null}function th(i,a,d){try{d()}catch(m){ct(i,a,m)}}var Yg=!1;function rE(i,a){if(fd=Wa,i=Cm(),id(i)){if("selectionStart"in i)var d={start:i.selectionStart,end:i.selectionEnd};else e:{d=(d=i.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var y=m.anchorOffset,S=m.focusNode;m=m.focusOffset;try{d.nodeType,S.nodeType}catch{d=null;break e}var P=0,O=-1,L=-1,z=0,Z=0,ee=i,J=null;t:for(;;){for(var le;ee!==d||y!==0&&ee.nodeType!==3||(O=P+y),ee!==S||m!==0&&ee.nodeType!==3||(L=P+m),ee.nodeType===3&&(P+=ee.nodeValue.length),(le=ee.firstChild)!==null;)J=ee,ee=le;for(;;){if(ee===i)break t;if(J===d&&++z===y&&(O=P),J===S&&++Z===m&&(L=P),(le=ee.nextSibling)!==null)break;ee=J,J=ee.parentNode}ee=le}d=O===-1||L===-1?null:{start:O,end:L}}else d=null}d=d||{start:0,end:0}}else d=null;for(pd={focusedElem:i,selectionRange:d},Wa=!1,de=a;de!==null;)if(a=de,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,de=i;else for(;de!==null;){a=de;try{var pe=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(pe!==null){var me=pe.memoizedProps,dt=pe.memoizedState,j=a.stateNode,I=j.getSnapshotBeforeUpdate(a.elementType===a.type?me:Mn(a.type,me),dt);j.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var B=a.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(re){ct(a,a.return,re)}if(i=a.sibling,i!==null){i.return=a.return,de=i;break}de=a.return}return pe=Yg,Yg=!1,pe}function Do(i,a,d){var m=a.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var y=m=m.next;do{if((y.tag&i)===i){var S=y.destroy;y.destroy=void 0,S!==void 0&&th(a,d,S)}y=y.next}while(y!==m)}}function El(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do{if((d.tag&i)===i){var m=d.create;d.destroy=m()}d=d.next}while(d!==a)}}function nh(i){var a=i.ref;if(a!==null){var d=i.stateNode;i.tag,i=d,typeof a=="function"?a(i):a.current=i}}function Xg(i){var a=i.alternate;a!==null&&(i.alternate=null,Xg(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[$n],delete a[xo],delete a[yd],delete a[B_],delete a[U_])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Kg(i){return i.tag===5||i.tag===3||i.tag===4}function Qg(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Kg(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function rh(i,a,d){var m=i.tag;if(m===5||m===6)i=i.stateNode,a?d.nodeType===8?d.parentNode.insertBefore(i,a):d.insertBefore(i,a):(d.nodeType===8?(a=d.parentNode,a.insertBefore(i,d)):(a=d,a.appendChild(i)),d=d._reactRootContainer,d!=null||a.onclick!==null||(a.onclick=tl));else if(m!==4&&(i=i.child,i!==null))for(rh(i,a,d),i=i.sibling;i!==null;)rh(i,a,d),i=i.sibling}function sh(i,a,d){var m=i.tag;if(m===5||m===6)i=i.stateNode,a?d.insertBefore(i,a):d.appendChild(i);else if(m!==4&&(i=i.child,i!==null))for(sh(i,a,d),i=i.sibling;i!==null;)sh(i,a,d),i=i.sibling}var kt=null,Ln=!1;function Wr(i,a,d){for(d=d.child;d!==null;)Jg(i,a,d),d=d.sibling}function Jg(i,a,d){if(Vn&&typeof Vn.onCommitFiberUnmount=="function")try{Vn.onCommitFiberUnmount(Fa,d)}catch{}switch(d.tag){case 5:It||ai(d,a);case 6:var m=kt,y=Ln;kt=null,Wr(i,a,d),kt=m,Ln=y,kt!==null&&(Ln?(i=kt,d=d.stateNode,i.nodeType===8?i.parentNode.removeChild(d):i.removeChild(d)):kt.removeChild(d.stateNode));break;case 18:kt!==null&&(Ln?(i=kt,d=d.stateNode,i.nodeType===8?vd(i.parentNode,d):i.nodeType===1&&vd(i,d),co(i)):vd(kt,d.stateNode));break;case 4:m=kt,y=Ln,kt=d.stateNode.containerInfo,Ln=!0,Wr(i,a,d),kt=m,Ln=y;break;case 0:case 11:case 14:case 15:if(!It&&(m=d.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){y=m=m.next;do{var S=y,P=S.destroy;S=S.tag,P!==void 0&&((S&2)!==0||(S&4)!==0)&&th(d,a,P),y=y.next}while(y!==m)}Wr(i,a,d);break;case 1:if(!It&&(ai(d,a),m=d.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=d.memoizedProps,m.state=d.memoizedState,m.componentWillUnmount()}catch(O){ct(d,a,O)}Wr(i,a,d);break;case 21:Wr(i,a,d);break;case 22:d.mode&1?(It=(m=It)||d.memoizedState!==null,Wr(i,a,d),It=m):Wr(i,a,d);break;default:Wr(i,a,d)}}function Zg(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var d=i.stateNode;d===null&&(d=i.stateNode=new nE),a.forEach(function(m){var y=hE.bind(null,i,m);d.has(m)||(d.add(m),m.then(y,y))})}}function In(i,a){var d=a.deletions;if(d!==null)for(var m=0;m<d.length;m++){var y=d[m];try{var S=i,P=a,O=P;e:for(;O!==null;){switch(O.tag){case 5:kt=O.stateNode,Ln=!1;break e;case 3:kt=O.stateNode.containerInfo,Ln=!0;break e;case 4:kt=O.stateNode.containerInfo,Ln=!0;break e}O=O.return}if(kt===null)throw Error(t(160));Jg(S,P,y),kt=null,Ln=!1;var L=y.alternate;L!==null&&(L.return=null),y.return=null}catch(z){ct(y,a,z)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)ev(a,i),a=a.sibling}function ev(i,a){var d=i.alternate,m=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(In(a,i),Yn(i),m&4){try{Do(3,i,i.return),El(3,i)}catch(me){ct(i,i.return,me)}try{Do(5,i,i.return)}catch(me){ct(i,i.return,me)}}break;case 1:In(a,i),Yn(i),m&512&&d!==null&&ai(d,d.return);break;case 5:if(In(a,i),Yn(i),m&512&&d!==null&&ai(d,d.return),i.flags&32){var y=i.stateNode;try{dr(y,"")}catch(me){ct(i,i.return,me)}}if(m&4&&(y=i.stateNode,y!=null)){var S=i.memoizedProps,P=d!==null?d.memoizedProps:S,O=i.type,L=i.updateQueue;if(i.updateQueue=null,L!==null)try{O==="input"&&S.type==="radio"&&S.name!=null&&Le(y,S),Lu(O,P);var z=Lu(O,S);for(P=0;P<L.length;P+=2){var Z=L[P],ee=L[P+1];Z==="style"?Ip(y,ee):Z==="dangerouslySetInnerHTML"?Rn(y,ee):Z==="children"?dr(y,ee):C(y,Z,ee,z)}switch(O){case"input":yt(y,S);break;case"textarea":Na(y,S);break;case"select":var J=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!S.multiple;var le=S.value;le!=null?kn(y,!!S.multiple,le,!1):J!==!!S.multiple&&(S.defaultValue!=null?kn(y,!!S.multiple,S.defaultValue,!0):kn(y,!!S.multiple,S.multiple?[]:"",!1))}y[xo]=S}catch(me){ct(i,i.return,me)}}break;case 6:if(In(a,i),Yn(i),m&4){if(i.stateNode===null)throw Error(t(162));y=i.stateNode,S=i.memoizedProps;try{y.nodeValue=S}catch(me){ct(i,i.return,me)}}break;case 3:if(In(a,i),Yn(i),m&4&&d!==null&&d.memoizedState.isDehydrated)try{co(a.containerInfo)}catch(me){ct(i,i.return,me)}break;case 4:In(a,i),Yn(i);break;case 13:In(a,i),Yn(i),y=i.child,y.flags&8192&&(S=y.memoizedState!==null,y.stateNode.isHidden=S,!S||y.alternate!==null&&y.alternate.memoizedState!==null||(ah=ut())),m&4&&Zg(i);break;case 22:if(Z=d!==null&&d.memoizedState!==null,i.mode&1?(It=(z=It)||Z,In(a,i),It=z):In(a,i),Yn(i),m&8192){if(z=i.memoizedState!==null,(i.stateNode.isHidden=z)&&!Z&&(i.mode&1)!==0)for(de=i,Z=i.child;Z!==null;){for(ee=de=Z;de!==null;){switch(J=de,le=J.child,J.tag){case 0:case 11:case 14:case 15:Do(4,J,J.return);break;case 1:ai(J,J.return);var pe=J.stateNode;if(typeof pe.componentWillUnmount=="function"){m=J,d=J.return;try{a=m,pe.props=a.memoizedProps,pe.state=a.memoizedState,pe.componentWillUnmount()}catch(me){ct(m,d,me)}}break;case 5:ai(J,J.return);break;case 22:if(J.memoizedState!==null){rv(ee);continue}}le!==null?(le.return=J,de=le):rv(ee)}Z=Z.sibling}e:for(Z=null,ee=i;;){if(ee.tag===5){if(Z===null){Z=ee;try{y=ee.stateNode,z?(S=y.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(O=ee.stateNode,L=ee.memoizedProps.style,P=L!=null&&L.hasOwnProperty("display")?L.display:null,O.style.display=Lp("display",P))}catch(me){ct(i,i.return,me)}}}else if(ee.tag===6){if(Z===null)try{ee.stateNode.nodeValue=z?"":ee.memoizedProps}catch(me){ct(i,i.return,me)}}else if((ee.tag!==22&&ee.tag!==23||ee.memoizedState===null||ee===i)&&ee.child!==null){ee.child.return=ee,ee=ee.child;continue}if(ee===i)break e;for(;ee.sibling===null;){if(ee.return===null||ee.return===i)break e;Z===ee&&(Z=null),ee=ee.return}Z===ee&&(Z=null),ee.sibling.return=ee.return,ee=ee.sibling}}break;case 19:In(a,i),Yn(i),m&4&&Zg(i);break;case 21:break;default:In(a,i),Yn(i)}}function Yn(i){var a=i.flags;if(a&2){try{e:{for(var d=i.return;d!==null;){if(Kg(d)){var m=d;break e}d=d.return}throw Error(t(160))}switch(m.tag){case 5:var y=m.stateNode;m.flags&32&&(dr(y,""),m.flags&=-33);var S=Qg(i);sh(i,S,y);break;case 3:case 4:var P=m.stateNode.containerInfo,O=Qg(i);rh(i,O,P);break;default:throw Error(t(161))}}catch(L){ct(i,i.return,L)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function sE(i,a,d){de=i,tv(i)}function tv(i,a,d){for(var m=(i.mode&1)!==0;de!==null;){var y=de,S=y.child;if(y.tag===22&&m){var P=y.memoizedState!==null||_l;if(!P){var O=y.alternate,L=O!==null&&O.memoizedState!==null||It;O=_l;var z=It;if(_l=P,(It=L)&&!z)for(de=y;de!==null;)P=de,L=P.child,P.tag===22&&P.memoizedState!==null?sv(y):L!==null?(L.return=P,de=L):sv(y);for(;S!==null;)de=S,tv(S),S=S.sibling;de=y,_l=O,It=z}nv(i)}else(y.subtreeFlags&8772)!==0&&S!==null?(S.return=y,de=S):nv(i)}}function nv(i){for(;de!==null;){var a=de;if((a.flags&8772)!==0){var d=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:It||El(5,a);break;case 1:var m=a.stateNode;if(a.flags&4&&!It)if(d===null)m.componentDidMount();else{var y=a.elementType===a.type?d.memoizedProps:Mn(a.type,d.memoizedProps);m.componentDidUpdate(y,d.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var S=a.updateQueue;S!==null&&rg(a,S,m);break;case 3:var P=a.updateQueue;if(P!==null){if(d=null,a.child!==null)switch(a.child.tag){case 5:d=a.child.stateNode;break;case 1:d=a.child.stateNode}rg(a,P,d)}break;case 5:var O=a.stateNode;if(d===null&&a.flags&4){d=O;var L=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&d.focus();break;case"img":L.src&&(d.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var z=a.alternate;if(z!==null){var Z=z.memoizedState;if(Z!==null){var ee=Z.dehydrated;ee!==null&&co(ee)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}It||a.flags&512&&nh(a)}catch(J){ct(a,a.return,J)}}if(a===i){de=null;break}if(d=a.sibling,d!==null){d.return=a.return,de=d;break}de=a.return}}function rv(i){for(;de!==null;){var a=de;if(a===i){de=null;break}var d=a.sibling;if(d!==null){d.return=a.return,de=d;break}de=a.return}}function sv(i){for(;de!==null;){var a=de;try{switch(a.tag){case 0:case 11:case 15:var d=a.return;try{El(4,a)}catch(L){ct(a,d,L)}break;case 1:var m=a.stateNode;if(typeof m.componentDidMount=="function"){var y=a.return;try{m.componentDidMount()}catch(L){ct(a,y,L)}}var S=a.return;try{nh(a)}catch(L){ct(a,S,L)}break;case 5:var P=a.return;try{nh(a)}catch(L){ct(a,P,L)}}}catch(L){ct(a,a.return,L)}if(a===i){de=null;break}var O=a.sibling;if(O!==null){O.return=a.return,de=O;break}de=a.return}}var iE=Math.ceil,Al=k.ReactCurrentDispatcher,ih=k.ReactCurrentOwner,Sn=k.ReactCurrentBatchConfig,Fe=0,_t=null,mt=null,Pt=0,dn=0,li=jr(0),bt=0,Oo=null,bs=0,Cl=0,oh=0,Mo=null,Qt=null,ah=0,ci=1/0,wr=null,Tl=!1,lh=null,Vr=null,kl=!1,$r=null,Pl=0,Lo=0,ch=null,Rl=-1,Nl=0;function zt(){return(Fe&6)!==0?ut():Rl!==-1?Rl:Rl=ut()}function qr(i){return(i.mode&1)===0?1:(Fe&2)!==0&&Pt!==0?Pt&-Pt:H_.transition!==null?(Nl===0&&(Nl=Qp()),Nl):(i=Ue,i!==0||(i=window.event,i=i===void 0?16:om(i.type)),i)}function Fn(i,a,d,m){if(50<Lo)throw Lo=0,ch=null,Error(t(185));so(i,d,m),((Fe&2)===0||i!==_t)&&(i===_t&&((Fe&2)===0&&(Cl|=d),bt===4&&Gr(i,Pt)),Jt(i,m),d===1&&Fe===0&&(a.mode&1)===0&&(ci=ut()+500,il&&Ur()))}function Jt(i,a){var d=i.callbackNode;HS(i,a);var m=Ua(i,i===_t?Pt:0);if(m===0)d!==null&&Yp(d),i.callbackNode=null,i.callbackPriority=0;else if(a=m&-m,i.callbackPriority!==a){if(d!=null&&Yp(d),a===1)i.tag===0?z_(ov.bind(null,i)):$m(ov.bind(null,i)),F_(function(){(Fe&6)===0&&Ur()}),d=null;else{switch(Jp(m)){case 1:d=Hu;break;case 4:d=Xp;break;case 16:d=Ia;break;case 536870912:d=Kp;break;default:d=Ia}d=pv(d,iv.bind(null,i))}i.callbackPriority=a,i.callbackNode=d}}function iv(i,a){if(Rl=-1,Nl=0,(Fe&6)!==0)throw Error(t(327));var d=i.callbackNode;if(ui()&&i.callbackNode!==d)return null;var m=Ua(i,i===_t?Pt:0);if(m===0)return null;if((m&30)!==0||(m&i.expiredLanes)!==0||a)a=Dl(i,m);else{a=m;var y=Fe;Fe|=2;var S=lv();(_t!==i||Pt!==a)&&(wr=null,ci=ut()+500,Ss(i,a));do try{lE();break}catch(O){av(i,O)}while(!0);Td(),Al.current=S,Fe=y,mt!==null?a=0:(_t=null,Pt=0,a=bt)}if(a!==0){if(a===2&&(y=Wu(i),y!==0&&(m=y,a=uh(i,y))),a===1)throw d=Oo,Ss(i,0),Gr(i,m),Jt(i,ut()),d;if(a===6)Gr(i,m);else{if(y=i.current.alternate,(m&30)===0&&!oE(y)&&(a=Dl(i,m),a===2&&(S=Wu(i),S!==0&&(m=S,a=uh(i,S))),a===1))throw d=Oo,Ss(i,0),Gr(i,m),Jt(i,ut()),d;switch(i.finishedWork=y,i.finishedLanes=m,a){case 0:case 1:throw Error(t(345));case 2:_s(i,Qt,wr);break;case 3:if(Gr(i,m),(m&130023424)===m&&(a=ah+500-ut(),10<a)){if(Ua(i,0)!==0)break;if(y=i.suspendedLanes,(y&m)!==m){zt(),i.pingedLanes|=i.suspendedLanes&y;break}i.timeoutHandle=gd(_s.bind(null,i,Qt,wr),a);break}_s(i,Qt,wr);break;case 4:if(Gr(i,m),(m&4194240)===m)break;for(a=i.eventTimes,y=-1;0<m;){var P=31-Nn(m);S=1<<P,P=a[P],P>y&&(y=P),m&=~S}if(m=y,m=ut()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*iE(m/1960))-m,10<m){i.timeoutHandle=gd(_s.bind(null,i,Qt,wr),m);break}_s(i,Qt,wr);break;case 5:_s(i,Qt,wr);break;default:throw Error(t(329))}}}return Jt(i,ut()),i.callbackNode===d?iv.bind(null,i):null}function uh(i,a){var d=Mo;return i.current.memoizedState.isDehydrated&&(Ss(i,a).flags|=256),i=Dl(i,a),i!==2&&(a=Qt,Qt=d,a!==null&&dh(a)),i}function dh(i){Qt===null?Qt=i:Qt.push.apply(Qt,i)}function oE(i){for(var a=i;;){if(a.flags&16384){var d=a.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var m=0;m<d.length;m++){var y=d[m],S=y.getSnapshot;y=y.value;try{if(!Dn(S(),y))return!1}catch{return!1}}}if(d=a.child,a.subtreeFlags&16384&&d!==null)d.return=a,a=d;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Gr(i,a){for(a&=~oh,a&=~Cl,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var d=31-Nn(a),m=1<<d;i[d]=-1,a&=~m}}function ov(i){if((Fe&6)!==0)throw Error(t(327));ui();var a=Ua(i,0);if((a&1)===0)return Jt(i,ut()),null;var d=Dl(i,a);if(i.tag!==0&&d===2){var m=Wu(i);m!==0&&(a=m,d=uh(i,m))}if(d===1)throw d=Oo,Ss(i,0),Gr(i,a),Jt(i,ut()),d;if(d===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,_s(i,Qt,wr),Jt(i,ut()),null}function hh(i,a){var d=Fe;Fe|=1;try{return i(a)}finally{Fe=d,Fe===0&&(ci=ut()+500,il&&Ur())}}function xs(i){$r!==null&&$r.tag===0&&(Fe&6)===0&&ui();var a=Fe;Fe|=1;var d=Sn.transition,m=Ue;try{if(Sn.transition=null,Ue=1,i)return i()}finally{Ue=m,Sn.transition=d,Fe=a,(Fe&6)===0&&Ur()}}function fh(){dn=li.current,Ge(li)}function Ss(i,a){i.finishedWork=null,i.finishedLanes=0;var d=i.timeoutHandle;if(d!==-1&&(i.timeoutHandle=-1,I_(d)),mt!==null)for(d=mt.return;d!==null;){var m=d;switch(Sd(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&rl();break;case 3:ii(),Ge(Yt),Ge(Ot),Ld();break;case 5:Od(m);break;case 4:ii();break;case 13:Ge(tt);break;case 19:Ge(tt);break;case 10:kd(m.type._context);break;case 22:case 23:fh()}d=d.return}if(_t=i,mt=i=Yr(i.current,null),Pt=dn=a,bt=0,Oo=null,oh=Cl=bs=0,Qt=Mo=null,vs!==null){for(a=0;a<vs.length;a++)if(d=vs[a],m=d.interleaved,m!==null){d.interleaved=null;var y=m.next,S=d.pending;if(S!==null){var P=S.next;S.next=y,m.next=P}d.pending=m}vs=null}return i}function av(i,a){do{var d=mt;try{if(Td(),ml.current=wl,gl){for(var m=nt.memoizedState;m!==null;){var y=m.queue;y!==null&&(y.pending=null),m=m.next}gl=!1}if(ws=0,St=wt=nt=null,To=!1,ko=0,ih.current=null,d===null||d.return===null){bt=1,Oo=a,mt=null;break}e:{var S=i,P=d.return,O=d,L=a;if(a=Pt,O.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var z=L,Z=O,ee=Z.tag;if((Z.mode&1)===0&&(ee===0||ee===11||ee===15)){var J=Z.alternate;J?(Z.updateQueue=J.updateQueue,Z.memoizedState=J.memoizedState,Z.lanes=J.lanes):(Z.updateQueue=null,Z.memoizedState=null)}var le=Dg(P);if(le!==null){le.flags&=-257,Og(le,P,O,S,a),le.mode&1&&Ng(S,z,a),a=le,L=z;var pe=a.updateQueue;if(pe===null){var me=new Set;me.add(L),a.updateQueue=me}else pe.add(L);break e}else{if((a&1)===0){Ng(S,z,a),ph();break e}L=Error(t(426))}}else if(Qe&&O.mode&1){var dt=Dg(P);if(dt!==null){(dt.flags&65536)===0&&(dt.flags|=256),Og(dt,P,O,S,a),Ad(oi(L,O));break e}}S=L=oi(L,O),bt!==4&&(bt=2),Mo===null?Mo=[S]:Mo.push(S),S=P;do{switch(S.tag){case 3:S.flags|=65536,a&=-a,S.lanes|=a;var j=Pg(S,L,a);ng(S,j);break e;case 1:O=L;var I=S.type,B=S.stateNode;if((S.flags&128)===0&&(typeof I.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(Vr===null||!Vr.has(B)))){S.flags|=65536,a&=-a,S.lanes|=a;var re=Rg(S,O,a);ng(S,re);break e}}S=S.return}while(S!==null)}uv(d)}catch(ve){a=ve,mt===d&&d!==null&&(mt=d=d.return);continue}break}while(!0)}function lv(){var i=Al.current;return Al.current=wl,i===null?wl:i}function ph(){(bt===0||bt===3||bt===2)&&(bt=4),_t===null||(bs&268435455)===0&&(Cl&268435455)===0||Gr(_t,Pt)}function Dl(i,a){var d=Fe;Fe|=2;var m=lv();(_t!==i||Pt!==a)&&(wr=null,Ss(i,a));do try{aE();break}catch(y){av(i,y)}while(!0);if(Td(),Fe=d,Al.current=m,mt!==null)throw Error(t(261));return _t=null,Pt=0,bt}function aE(){for(;mt!==null;)cv(mt)}function lE(){for(;mt!==null&&!OS();)cv(mt)}function cv(i){var a=fv(i.alternate,i,dn);i.memoizedProps=i.pendingProps,a===null?uv(i):mt=a,ih.current=null}function uv(i){var a=i;do{var d=a.alternate;if(i=a.return,(a.flags&32768)===0){if(d=eE(d,a,dn),d!==null){mt=d;return}}else{if(d=tE(d,a),d!==null){d.flags&=32767,mt=d;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{bt=6,mt=null;return}}if(a=a.sibling,a!==null){mt=a;return}mt=a=i}while(a!==null);bt===0&&(bt=5)}function _s(i,a,d){var m=Ue,y=Sn.transition;try{Sn.transition=null,Ue=1,cE(i,a,d,m)}finally{Sn.transition=y,Ue=m}return null}function cE(i,a,d,m){do ui();while($r!==null);if((Fe&6)!==0)throw Error(t(327));d=i.finishedWork;var y=i.finishedLanes;if(d===null)return null;if(i.finishedWork=null,i.finishedLanes=0,d===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var S=d.lanes|d.childLanes;if(WS(i,S),i===_t&&(mt=_t=null,Pt=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||kl||(kl=!0,pv(Ia,function(){return ui(),null})),S=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||S){S=Sn.transition,Sn.transition=null;var P=Ue;Ue=1;var O=Fe;Fe|=4,ih.current=null,rE(i,d),ev(d,i),P_(pd),Wa=!!fd,pd=fd=null,i.current=d,sE(d),MS(),Fe=O,Ue=P,Sn.transition=S}else i.current=d;if(kl&&(kl=!1,$r=i,Pl=y),S=i.pendingLanes,S===0&&(Vr=null),FS(d.stateNode),Jt(i,ut()),a!==null)for(m=i.onRecoverableError,d=0;d<a.length;d++)y=a[d],m(y.value,{componentStack:y.stack,digest:y.digest});if(Tl)throw Tl=!1,i=lh,lh=null,i;return(Pl&1)!==0&&i.tag!==0&&ui(),S=i.pendingLanes,(S&1)!==0?i===ch?Lo++:(Lo=0,ch=i):Lo=0,Ur(),null}function ui(){if($r!==null){var i=Jp(Pl),a=Sn.transition,d=Ue;try{if(Sn.transition=null,Ue=16>i?16:i,$r===null)var m=!1;else{if(i=$r,$r=null,Pl=0,(Fe&6)!==0)throw Error(t(331));var y=Fe;for(Fe|=4,de=i.current;de!==null;){var S=de,P=S.child;if((de.flags&16)!==0){var O=S.deletions;if(O!==null){for(var L=0;L<O.length;L++){var z=O[L];for(de=z;de!==null;){var Z=de;switch(Z.tag){case 0:case 11:case 15:Do(8,Z,S)}var ee=Z.child;if(ee!==null)ee.return=Z,de=ee;else for(;de!==null;){Z=de;var J=Z.sibling,le=Z.return;if(Xg(Z),Z===z){de=null;break}if(J!==null){J.return=le,de=J;break}de=le}}}var pe=S.alternate;if(pe!==null){var me=pe.child;if(me!==null){pe.child=null;do{var dt=me.sibling;me.sibling=null,me=dt}while(me!==null)}}de=S}}if((S.subtreeFlags&2064)!==0&&P!==null)P.return=S,de=P;else e:for(;de!==null;){if(S=de,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:Do(9,S,S.return)}var j=S.sibling;if(j!==null){j.return=S.return,de=j;break e}de=S.return}}var I=i.current;for(de=I;de!==null;){P=de;var B=P.child;if((P.subtreeFlags&2064)!==0&&B!==null)B.return=P,de=B;else e:for(P=I;de!==null;){if(O=de,(O.flags&2048)!==0)try{switch(O.tag){case 0:case 11:case 15:El(9,O)}}catch(ve){ct(O,O.return,ve)}if(O===P){de=null;break e}var re=O.sibling;if(re!==null){re.return=O.return,de=re;break e}de=O.return}}if(Fe=y,Ur(),Vn&&typeof Vn.onPostCommitFiberRoot=="function")try{Vn.onPostCommitFiberRoot(Fa,i)}catch{}m=!0}return m}finally{Ue=d,Sn.transition=a}}return!1}function dv(i,a,d){a=oi(d,a),a=Pg(i,a,1),i=Hr(i,a,1),a=zt(),i!==null&&(so(i,1,a),Jt(i,a))}function ct(i,a,d){if(i.tag===3)dv(i,i,d);else for(;a!==null;){if(a.tag===3){dv(a,i,d);break}else if(a.tag===1){var m=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Vr===null||!Vr.has(m))){i=oi(d,i),i=Rg(a,i,1),a=Hr(a,i,1),i=zt(),a!==null&&(so(a,1,i),Jt(a,i));break}}a=a.return}}function uE(i,a,d){var m=i.pingCache;m!==null&&m.delete(a),a=zt(),i.pingedLanes|=i.suspendedLanes&d,_t===i&&(Pt&d)===d&&(bt===4||bt===3&&(Pt&130023424)===Pt&&500>ut()-ah?Ss(i,0):oh|=d),Jt(i,a)}function hv(i,a){a===0&&((i.mode&1)===0?a=1:(a=Ba,Ba<<=1,(Ba&130023424)===0&&(Ba=4194304)));var d=zt();i=gr(i,a),i!==null&&(so(i,a,d),Jt(i,d))}function dE(i){var a=i.memoizedState,d=0;a!==null&&(d=a.retryLane),hv(i,d)}function hE(i,a){var d=0;switch(i.tag){case 13:var m=i.stateNode,y=i.memoizedState;y!==null&&(d=y.retryLane);break;case 19:m=i.stateNode;break;default:throw Error(t(314))}m!==null&&m.delete(a),hv(i,d)}var fv;fv=function(i,a,d){if(i!==null)if(i.memoizedProps!==a.pendingProps||Yt.current)Kt=!0;else{if((i.lanes&d)===0&&(a.flags&128)===0)return Kt=!1,Z_(i,a,d);Kt=(i.flags&131072)!==0}else Kt=!1,Qe&&(a.flags&1048576)!==0&&qm(a,al,a.index);switch(a.lanes=0,a.tag){case 2:var m=a.type;Sl(i,a),i=a.pendingProps;var y=Js(a,Ot.current);si(a,d),y=jd(null,a,m,i,y,d);var S=Bd();return a.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Xt(m)?(S=!0,sl(a)):S=!1,a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,Nd(a),y.updater=bl,a.stateNode=y,y._reactInternals=a,$d(a,m,i,d),a=Xd(null,a,m,!0,S,d)):(a.tag=0,Qe&&S&&xd(a),Ut(null,a,y,d),a=a.child),a;case 16:m=a.elementType;e:{switch(Sl(i,a),i=a.pendingProps,y=m._init,m=y(m._payload),a.type=m,y=a.tag=pE(m),i=Mn(m,i),y){case 0:a=Yd(null,a,m,i,d);break e;case 1:a=Bg(null,a,m,i,d);break e;case 11:a=Mg(null,a,m,i,d);break e;case 14:a=Lg(null,a,m,Mn(m.type,i),d);break e}throw Error(t(306,m,""))}return a;case 0:return m=a.type,y=a.pendingProps,y=a.elementType===m?y:Mn(m,y),Yd(i,a,m,y,d);case 1:return m=a.type,y=a.pendingProps,y=a.elementType===m?y:Mn(m,y),Bg(i,a,m,y,d);case 3:e:{if(Ug(a),i===null)throw Error(t(387));m=a.pendingProps,S=a.memoizedState,y=S.element,tg(i,a),fl(a,m,null,d);var P=a.memoizedState;if(m=P.element,S.isDehydrated)if(S={element:m,isDehydrated:!1,cache:P.cache,pendingSuspenseBoundaries:P.pendingSuspenseBoundaries,transitions:P.transitions},a.updateQueue.baseState=S,a.memoizedState=S,a.flags&256){y=oi(Error(t(423)),a),a=zg(i,a,m,d,y);break e}else if(m!==y){y=oi(Error(t(424)),a),a=zg(i,a,m,d,y);break e}else for(un=Fr(a.stateNode.containerInfo.firstChild),cn=a,Qe=!0,On=null,d=Zm(a,null,m,d),a.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(ti(),m===y){a=yr(i,a,d);break e}Ut(i,a,m,d)}a=a.child}return a;case 5:return sg(a),i===null&&Ed(a),m=a.type,y=a.pendingProps,S=i!==null?i.memoizedProps:null,P=y.children,md(m,y)?P=null:S!==null&&md(m,S)&&(a.flags|=32),jg(i,a),Ut(i,a,P,d),a.child;case 6:return i===null&&Ed(a),null;case 13:return Hg(i,a,d);case 4:return Dd(a,a.stateNode.containerInfo),m=a.pendingProps,i===null?a.child=ni(a,null,m,d):Ut(i,a,m,d),a.child;case 11:return m=a.type,y=a.pendingProps,y=a.elementType===m?y:Mn(m,y),Mg(i,a,m,y,d);case 7:return Ut(i,a,a.pendingProps,d),a.child;case 8:return Ut(i,a,a.pendingProps.children,d),a.child;case 12:return Ut(i,a,a.pendingProps.children,d),a.child;case 10:e:{if(m=a.type._context,y=a.pendingProps,S=a.memoizedProps,P=y.value,$e(ul,m._currentValue),m._currentValue=P,S!==null)if(Dn(S.value,P)){if(S.children===y.children&&!Yt.current){a=yr(i,a,d);break e}}else for(S=a.child,S!==null&&(S.return=a);S!==null;){var O=S.dependencies;if(O!==null){P=S.child;for(var L=O.firstContext;L!==null;){if(L.context===m){if(S.tag===1){L=vr(-1,d&-d),L.tag=2;var z=S.updateQueue;if(z!==null){z=z.shared;var Z=z.pending;Z===null?L.next=L:(L.next=Z.next,Z.next=L),z.pending=L}}S.lanes|=d,L=S.alternate,L!==null&&(L.lanes|=d),Pd(S.return,d,a),O.lanes|=d;break}L=L.next}}else if(S.tag===10)P=S.type===a.type?null:S.child;else if(S.tag===18){if(P=S.return,P===null)throw Error(t(341));P.lanes|=d,O=P.alternate,O!==null&&(O.lanes|=d),Pd(P,d,a),P=S.sibling}else P=S.child;if(P!==null)P.return=S;else for(P=S;P!==null;){if(P===a){P=null;break}if(S=P.sibling,S!==null){S.return=P.return,P=S;break}P=P.return}S=P}Ut(i,a,y.children,d),a=a.child}return a;case 9:return y=a.type,m=a.pendingProps.children,si(a,d),y=bn(y),m=m(y),a.flags|=1,Ut(i,a,m,d),a.child;case 14:return m=a.type,y=Mn(m,a.pendingProps),y=Mn(m.type,y),Lg(i,a,m,y,d);case 15:return Ig(i,a,a.type,a.pendingProps,d);case 17:return m=a.type,y=a.pendingProps,y=a.elementType===m?y:Mn(m,y),Sl(i,a),a.tag=1,Xt(m)?(i=!0,sl(a)):i=!1,si(a,d),Tg(a,m,y),$d(a,m,y,d),Xd(null,a,m,!0,i,d);case 19:return Vg(i,a,d);case 22:return Fg(i,a,d)}throw Error(t(156,a.tag))};function pv(i,a){return Gp(i,a)}function fE(i,a,d,m){this.tag=i,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(i,a,d,m){return new fE(i,a,d,m)}function mh(i){return i=i.prototype,!(!i||!i.isReactComponent)}function pE(i){if(typeof i=="function")return mh(i)?1:0;if(i!=null){if(i=i.$$typeof,i===ne)return 11;if(i===ae)return 14}return 2}function Yr(i,a){var d=i.alternate;return d===null?(d=_n(i.tag,a,i.key,i.mode),d.elementType=i.elementType,d.type=i.type,d.stateNode=i.stateNode,d.alternate=i,i.alternate=d):(d.pendingProps=a,d.type=i.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=i.flags&14680064,d.childLanes=i.childLanes,d.lanes=i.lanes,d.child=i.child,d.memoizedProps=i.memoizedProps,d.memoizedState=i.memoizedState,d.updateQueue=i.updateQueue,a=i.dependencies,d.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},d.sibling=i.sibling,d.index=i.index,d.ref=i.ref,d}function Ol(i,a,d,m,y,S){var P=2;if(m=i,typeof i=="function")mh(i)&&(P=1);else if(typeof i=="string")P=5;else e:switch(i){case D:return Es(d.children,y,S,a);case F:P=8,y|=8;break;case U:return i=_n(12,d,a,y|2),i.elementType=U,i.lanes=S,i;case oe:return i=_n(13,d,a,y),i.elementType=oe,i.lanes=S,i;case te:return i=_n(19,d,a,y),i.elementType=te,i.lanes=S,i;case K:return Ml(d,y,S,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case q:P=10;break e;case Y:P=9;break e;case ne:P=11;break e;case ae:P=14;break e;case G:P=16,m=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return a=_n(P,d,a,y),a.elementType=i,a.type=m,a.lanes=S,a}function Es(i,a,d,m){return i=_n(7,i,m,a),i.lanes=d,i}function Ml(i,a,d,m){return i=_n(22,i,m,a),i.elementType=K,i.lanes=d,i.stateNode={isHidden:!1},i}function gh(i,a,d){return i=_n(6,i,null,a),i.lanes=d,i}function vh(i,a,d){return a=_n(4,i.children!==null?i.children:[],i.key,a),a.lanes=d,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function mE(i,a,d,m,y){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vu(0),this.expirationTimes=Vu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vu(0),this.identifierPrefix=m,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function yh(i,a,d,m,y,S,P,O,L){return i=new mE(i,a,d,O,L),a===1?(a=1,S===!0&&(a|=8)):a=0,S=_n(3,null,null,a),i.current=S,S.stateNode=i,S.memoizedState={element:m,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nd(S),i}function gE(i,a,d){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:R,key:m==null?null:""+m,children:i,containerInfo:a,implementation:d}}function mv(i){if(!i)return Br;i=i._reactInternals;e:{if(hs(i)!==i||i.tag!==1)throw Error(t(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Xt(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(i.tag===1){var d=i.type;if(Xt(d))return Wm(i,d,a)}return a}function gv(i,a,d,m,y,S,P,O,L){return i=yh(d,m,!0,i,y,S,P,O,L),i.context=mv(null),d=i.current,m=zt(),y=qr(d),S=vr(m,y),S.callback=a??null,Hr(d,S,y),i.current.lanes=y,so(i,y,m),Jt(i,m),i}function Ll(i,a,d,m){var y=a.current,S=zt(),P=qr(y);return d=mv(d),a.context===null?a.context=d:a.pendingContext=d,a=vr(S,P),a.payload={element:i},m=m===void 0?null:m,m!==null&&(a.callback=m),i=Hr(y,a,P),i!==null&&(Fn(i,y,P,S),hl(i,y,P)),P}function Il(i){return i=i.current,i.child?(i.child.tag===5,i.child.stateNode):null}function vv(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var d=i.retryLane;i.retryLane=d!==0&&d<a?d:a}}function wh(i,a){vv(i,a),(i=i.alternate)&&vv(i,a)}function vE(){return null}var yv=typeof reportError=="function"?reportError:function(i){console.error(i)};function bh(i){this._internalRoot=i}Fl.prototype.render=bh.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(t(409));Ll(i,a,null,null)},Fl.prototype.unmount=bh.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;xs(function(){Ll(null,i,null,null)}),a[hr]=null}};function Fl(i){this._internalRoot=i}Fl.prototype.unstable_scheduleHydration=function(i){if(i){var a=tm();i={blockedOn:null,target:i,priority:a};for(var d=0;d<Mr.length&&a!==0&&a<Mr[d].priority;d++);Mr.splice(d,0,i),d===0&&sm(i)}};function xh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function jl(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function wv(){}function yE(i,a,d,m,y){if(y){if(typeof m=="function"){var S=m;m=function(){var z=Il(P);S.call(z)}}var P=gv(a,m,i,0,null,!1,!1,"",wv);return i._reactRootContainer=P,i[hr]=P.current,wo(i.nodeType===8?i.parentNode:i),xs(),P}for(;y=i.lastChild;)i.removeChild(y);if(typeof m=="function"){var O=m;m=function(){var z=Il(L);O.call(z)}}var L=yh(i,0,!1,null,null,!1,!1,"",wv);return i._reactRootContainer=L,i[hr]=L.current,wo(i.nodeType===8?i.parentNode:i),xs(function(){Ll(a,L,d,m)}),L}function Bl(i,a,d,m,y){var S=d._reactRootContainer;if(S){var P=S;if(typeof y=="function"){var O=y;y=function(){var L=Il(P);O.call(L)}}Ll(a,P,i,y)}else P=yE(d,a,i,y,m);return Il(P)}Zp=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var d=ro(a.pendingLanes);d!==0&&($u(a,d|1),Jt(a,ut()),(Fe&6)===0&&(ci=ut()+500,Ur()))}break;case 13:xs(function(){var m=gr(i,1);if(m!==null){var y=zt();Fn(m,i,1,y)}}),wh(i,1)}},qu=function(i){if(i.tag===13){var a=gr(i,134217728);if(a!==null){var d=zt();Fn(a,i,134217728,d)}wh(i,134217728)}},em=function(i){if(i.tag===13){var a=qr(i),d=gr(i,a);if(d!==null){var m=zt();Fn(d,i,a,m)}wh(i,a)}},tm=function(){return Ue},nm=function(i,a){var d=Ue;try{return Ue=i,a()}finally{Ue=d}},ju=function(i,a,d){switch(a){case"input":if(yt(i,d),a=d.name,d.type==="radio"&&a!=null){for(d=i;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<d.length;a++){var m=d[a];if(m!==i&&m.form===i.form){var y=nl(m);if(!y)throw Error(t(90));Gt(m),yt(m,y)}}}break;case"textarea":Na(i,d);break;case"select":a=d.value,a!=null&&kn(i,!!d.multiple,a,!1)}},Up=hh,zp=xs;var wE={usingClientEntryPoint:!1,Events:[So,Ks,nl,jp,Bp,hh]},Io={findFiberByHostInstance:fs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bE={bundleType:Io.bundleType,version:Io.version,rendererPackageName:Io.rendererPackageName,rendererConfig:Io.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=$p(i),i===null?null:i.stateNode},findFiberByHostInstance:Io.findFiberByHostInstance||vE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ul.isDisabled&&Ul.supportsFiber)try{Fa=Ul.inject(bE),Vn=Ul}catch{}}return en.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wE,en.createPortal=function(i,a){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xh(a))throw Error(t(200));return gE(i,a,null,d)},en.createRoot=function(i,a){if(!xh(i))throw Error(t(299));var d=!1,m="",y=yv;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(y=a.onRecoverableError)),a=yh(i,1,!1,null,null,d,!1,m,y),i[hr]=a.current,wo(i.nodeType===8?i.parentNode:i),new bh(a)},en.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=$p(a),i=i===null?null:i.stateNode,i},en.flushSync=function(i){return xs(i)},en.hydrate=function(i,a,d){if(!jl(a))throw Error(t(200));return Bl(null,i,a,!0,d)},en.hydrateRoot=function(i,a,d){if(!xh(i))throw Error(t(405));var m=d!=null&&d.hydratedSources||null,y=!1,S="",P=yv;if(d!=null&&(d.unstable_strictMode===!0&&(y=!0),d.identifierPrefix!==void 0&&(S=d.identifierPrefix),d.onRecoverableError!==void 0&&(P=d.onRecoverableError)),a=gv(a,null,i,1,d??null,y,!1,S,P),i[hr]=a.current,wo(i),m)for(i=0;i<m.length;i++)d=m[i],y=d._getVersion,y=y(d._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[d,y]:a.mutableSourceEagerHydrationData.push(d,y);return new Fl(a)},en.render=function(i,a,d){if(!jl(a))throw Error(t(200));return Bl(null,i,a,!1,d)},en.unmountComponentAtNode=function(i){if(!jl(i))throw Error(t(40));return i._reactRootContainer?(xs(function(){Bl(null,null,i,!1,function(){i._reactRootContainer=null,i[hr]=null})}),!0):!1},en.unstable_batchedUpdates=hh,en.unstable_renderSubtreeIntoContainer=function(i,a,d,m){if(!jl(d))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Bl(i,a,d,!1,m)},en.version="18.3.1-next-f1338f8080-20240426",en}var Pv;function sw(){if(Pv)return Ah.exports;Pv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Ah.exports=kE(),Ah.exports}var Rv;function PE(){if(Rv)return zl;Rv=1;var r=sw();return zl.createRoot=r.createRoot,zl.hydrateRoot=r.hydrateRoot,zl}var RE=PE();const NE=as(RE);var iw=sw();const DE=as(iw);function sa(){return sa=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},sa.apply(this,arguments)}var ns;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(ns||(ns={}));const Nv="popstate";function OE(r){r===void 0&&(r={});function e(n,s){let{pathname:o,search:l,hash:c}=n.location;return lf("",{pathname:o,search:l,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(n,s){return typeof s=="string"?s:Zc(s)}return LE(e,t,null,r)}function pt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Vf(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ME(){return Math.random().toString(36).substr(2,8)}function Dv(r,e){return{usr:r.state,key:r.key,idx:e}}function lf(r,e,t,n){return t===void 0&&(t=null),sa({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?Wi(e):e,{state:t,key:e&&e.key||n||ME()})}function Zc(r){let{pathname:e="/",search:t="",hash:n=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Wi(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substr(n),r=r.substr(0,n)),r&&(e.pathname=r)}return e}function LE(r,e,t,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:o=!1}=n,l=s.history,c=ns.Pop,u=null,h=f();h==null&&(h=0,l.replaceState(sa({},l.state,{idx:h}),""));function f(){return(l.state||{idx:null}).idx}function p(){c=ns.Pop;let x=f(),E=x==null?null:x-h;h=x,u&&u({action:c,location:w.location,delta:E})}function v(x,E){c=ns.Push;let A=lf(w.location,x,E);h=f()+1;let C=Dv(A,h),k=w.createHref(A);try{l.pushState(C,"",k)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(k)}o&&u&&u({action:c,location:w.location,delta:1})}function b(x,E){c=ns.Replace;let A=lf(w.location,x,E);h=f();let C=Dv(A,h),k=w.createHref(A);l.replaceState(C,"",k),o&&u&&u({action:c,location:w.location,delta:0})}function _(x){let E=s.location.origin!=="null"?s.location.origin:s.location.href,A=typeof x=="string"?x:Zc(x);return A=A.replace(/ $/,"%20"),pt(E,"No window.location.(origin|href) available to create URL for href: "+A),new URL(A,E)}let w={get action(){return c},get location(){return r(s,l)},listen(x){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Nv,p),u=x,()=>{s.removeEventListener(Nv,p),u=null}},createHref(x){return e(s,x)},createURL:_,encodeLocation(x){let E=_(x);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:v,replace:b,go(x){return l.go(x)}};return w}var Ov;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Ov||(Ov={}));function IE(r,e,t){return t===void 0&&(t="/"),FE(r,e,t)}function FE(r,e,t,n){let s=typeof e=="string"?Wi(e):e,o=$f(s.pathname||"/",t);if(o==null)return null;let l=ow(r);jE(l);let c=null;for(let u=0;c==null&&u<l.length;++u){let h=KE(o);c=GE(l[u],h)}return c}function ow(r,e,t,n){e===void 0&&(e=[]),t===void 0&&(t=[]),n===void 0&&(n="");let s=(o,l,c)=>{let u={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};u.relativePath.startsWith("/")&&(pt(u.relativePath.startsWith(n),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(n.length));let h=rs([n,u.relativePath]),f=t.concat(u);o.children&&o.children.length>0&&(pt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),ow(o.children,e,f,h)),!(o.path==null&&!o.index)&&e.push({path:h,score:$E(h,o.index),routesMeta:f})};return r.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))s(o,l);else for(let u of aw(o.path))s(o,l,u)}),e}function aw(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let l=aw(n.join("/")),c=[];return c.push(...l.map(u=>u===""?o:[o,u].join("/"))),s&&c.push(...l),c.map(u=>r.startsWith("/")&&u===""?"/":u)}function jE(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:qE(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}const BE=/^:[\w-]+$/,UE=3,zE=2,HE=1,WE=10,VE=-2,Mv=r=>r==="*";function $E(r,e){let t=r.split("/"),n=t.length;return t.some(Mv)&&(n+=VE),e&&(n+=zE),t.filter(s=>!Mv(s)).reduce((s,o)=>s+(BE.test(o)?UE:o===""?HE:WE),n)}function qE(r,e){return r.length===e.length&&r.slice(0,-1).every((n,s)=>n===e[s])?r[r.length-1]-e[e.length-1]:0}function GE(r,e,t){let{routesMeta:n}=r,s={},o="/",l=[];for(let c=0;c<n.length;++c){let u=n[c],h=c===n.length-1,f=o==="/"?e:e.slice(o.length)||"/",p=YE({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},f),v=u.route;if(!p)return null;Object.assign(s,p.params),l.push({params:s,pathname:rs([o,p.pathname]),pathnameBase:tA(rs([o,p.pathnameBase])),route:v}),p.pathnameBase!=="/"&&(o=rs([o,p.pathnameBase]))}return l}function YE(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=XE(r.path,r.caseSensitive,r.end),s=e.match(t);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:n.reduce((h,f,p)=>{let{paramName:v,isOptional:b}=f;if(v==="*"){let w=c[p]||"";l=o.slice(0,o.length-w.length).replace(/(.)\/+$/,"$1")}const _=c[p];return b&&!_?h[v]=void 0:h[v]=(_||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:l,pattern:r}}function XE(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Vf(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let n=[],s="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,u)=>(n.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),s+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":r!==""&&r!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function KE(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Vf(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function $f(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}const QE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,JE=r=>QE.test(r);function ZE(r,e){e===void 0&&(e="/");let{pathname:t,search:n="",hash:s=""}=typeof r=="string"?Wi(r):r,o;if(t)if(JE(t))o=t;else{if(t.includes("//")){let l=t;t=t.replace(/\/\/+/g,"/"),Vf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+t))}t.startsWith("/")?o=Lv(t.substring(1),"/"):o=Lv(t,e)}else o=e;return{pathname:o,search:nA(n),hash:rA(s)}}function Lv(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function kh(r,e,t,n){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function eA(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function qf(r,e){let t=eA(r);return e?t.map((n,s)=>s===t.length-1?n.pathname:n.pathnameBase):t.map(n=>n.pathnameBase)}function Gf(r,e,t,n){n===void 0&&(n=!1);let s;typeof r=="string"?s=Wi(r):(s=sa({},r),pt(!s.pathname||!s.pathname.includes("?"),kh("?","pathname","search",s)),pt(!s.pathname||!s.pathname.includes("#"),kh("#","pathname","hash",s)),pt(!s.search||!s.search.includes("#"),kh("#","search","hash",s)));let o=r===""||s.pathname==="",l=o?"/":s.pathname,c;if(l==null)c=t;else{let p=e.length-1;if(!n&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),p-=1;s.pathname=v.join("/")}c=p>=0?e[p]:"/"}let u=ZE(s,c),h=l&&l!=="/"&&l.endsWith("/"),f=(o||l===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(h||f)&&(u.pathname+="/"),u}const rs=r=>r.join("/").replace(/\/\/+/g,"/"),tA=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),nA=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,rA=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function sA(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const lw=["post","put","patch","delete"];new Set(lw);const iA=["get",...lw];new Set(iA);function ia(){return ia=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},ia.apply(this,arguments)}const Yf=T.createContext(null),oA=T.createContext(null),ls=T.createContext(null),du=T.createContext(null),Pr=T.createContext({outlet:null,matches:[],isDataRoute:!1}),cw=T.createContext(null);function aA(r,e){let{relative:t}=e===void 0?{}:e;Vi()||pt(!1);let{basename:n,navigator:s}=T.useContext(ls),{hash:o,pathname:l,search:c}=hw(r,{relative:t}),u=l;return n!=="/"&&(u=l==="/"?n:rs([n,l])),s.createHref({pathname:u,search:c,hash:o})}function Vi(){return T.useContext(du)!=null}function cs(){return Vi()||pt(!1),T.useContext(du).location}function uw(r){T.useContext(ls).static||T.useLayoutEffect(r)}function cr(){let{isDataRoute:r}=T.useContext(Pr);return r?bA():lA()}function lA(){Vi()||pt(!1);let r=T.useContext(Yf),{basename:e,future:t,navigator:n}=T.useContext(ls),{matches:s}=T.useContext(Pr),{pathname:o}=cs(),l=JSON.stringify(qf(s,t.v7_relativeSplatPath)),c=T.useRef(!1);return uw(()=>{c.current=!0}),T.useCallback(function(h,f){if(f===void 0&&(f={}),!c.current)return;if(typeof h=="number"){n.go(h);return}let p=Gf(h,JSON.parse(l),o,f.relative==="path");r==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:rs([e,p.pathname])),(f.replace?n.replace:n.push)(p,f.state,f)},[e,n,l,o,r])}function dw(){let{matches:r}=T.useContext(Pr),e=r[r.length-1];return e?e.params:{}}function hw(r,e){let{relative:t}=e===void 0?{}:e,{future:n}=T.useContext(ls),{matches:s}=T.useContext(Pr),{pathname:o}=cs(),l=JSON.stringify(qf(s,n.v7_relativeSplatPath));return T.useMemo(()=>Gf(r,JSON.parse(l),o,t==="path"),[r,l,o,t])}function cA(r,e){return uA(r,e)}function uA(r,e,t,n){Vi()||pt(!1);let{navigator:s}=T.useContext(ls),{matches:o}=T.useContext(Pr),l=o[o.length-1],c=l?l.params:{};l&&l.pathname;let u=l?l.pathnameBase:"/";l&&l.route;let h=cs(),f;if(e){var p;let x=typeof e=="string"?Wi(e):e;u==="/"||(p=x.pathname)!=null&&p.startsWith(u)||pt(!1),f=x}else f=h;let v=f.pathname||"/",b=v;if(u!=="/"){let x=u.replace(/^\//,"").split("/");b="/"+v.replace(/^\//,"").split("/").slice(x.length).join("/")}let _=IE(r,{pathname:b}),w=mA(_&&_.map(x=>Object.assign({},x,{params:Object.assign({},c,x.params),pathname:rs([u,s.encodeLocation?s.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?u:rs([u,s.encodeLocation?s.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),o,t,n);return e&&w?T.createElement(du.Provider,{value:{location:ia({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:ns.Pop}},w):w}function dA(){let r=wA(),e=sA(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),t?T.createElement("pre",{style:s},t):null,null)}const hA=T.createElement(dA,null);class fA extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?T.createElement(Pr.Provider,{value:this.props.routeContext},T.createElement(cw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function pA(r){let{routeContext:e,match:t,children:n}=r,s=T.useContext(Yf);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),T.createElement(Pr.Provider,{value:e},n)}function mA(r,e,t,n){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),n===void 0&&(n=null),r==null){var o;if(!t)return null;if(t.errors)r=t.matches;else if((o=n)!=null&&o.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let l=r,c=(s=t)==null?void 0:s.errors;if(c!=null){let f=l.findIndex(p=>p.route.id&&c?.[p.route.id]!==void 0);f>=0||pt(!1),l=l.slice(0,Math.min(l.length,f+1))}let u=!1,h=-1;if(t&&n&&n.v7_partialHydration)for(let f=0;f<l.length;f++){let p=l[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=f),p.route.id){let{loaderData:v,errors:b}=t,_=p.route.loader&&v[p.route.id]===void 0&&(!b||b[p.route.id]===void 0);if(p.route.lazy||_){u=!0,h>=0?l=l.slice(0,h+1):l=[l[0]];break}}}return l.reduceRight((f,p,v)=>{let b,_=!1,w=null,x=null;t&&(b=c&&p.route.id?c[p.route.id]:void 0,w=p.route.errorElement||hA,u&&(h<0&&v===0?(xA("route-fallback"),_=!0,x=null):h===v&&(_=!0,x=p.route.hydrateFallbackElement||null)));let E=e.concat(l.slice(0,v+1)),A=()=>{let C;return b?C=w:_?C=x:p.route.Component?C=T.createElement(p.route.Component,null):p.route.element?C=p.route.element:C=f,T.createElement(pA,{match:p,routeContext:{outlet:f,matches:E,isDataRoute:t!=null},children:C})};return t&&(p.route.ErrorBoundary||p.route.errorElement||v===0)?T.createElement(fA,{location:t.location,revalidation:t.revalidation,component:w,error:b,children:A(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):A()},null)}var fw=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(fw||{}),pw=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(pw||{});function gA(r){let e=T.useContext(Yf);return e||pt(!1),e}function vA(r){let e=T.useContext(oA);return e||pt(!1),e}function yA(r){let e=T.useContext(Pr);return e||pt(!1),e}function mw(r){let e=yA(),t=e.matches[e.matches.length-1];return t.route.id||pt(!1),t.route.id}function wA(){var r;let e=T.useContext(cw),t=vA(),n=mw();return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function bA(){let{router:r}=gA(fw.UseNavigateStable),e=mw(pw.UseNavigateStable),t=T.useRef(!1);return uw(()=>{t.current=!0}),T.useCallback(function(s,o){o===void 0&&(o={}),t.current&&(typeof s=="number"?r.navigate(s):r.navigate(s,ia({fromRouteId:e},o)))},[r,e])}const Iv={};function xA(r,e,t){Iv[r]||(Iv[r]=!0)}function SA(r,e){r?.v7_startTransition,r?.v7_relativeSplatPath}function _A(r){let{to:e,replace:t,state:n,relative:s}=r;Vi()||pt(!1);let{future:o,static:l}=T.useContext(ls),{matches:c}=T.useContext(Pr),{pathname:u}=cs(),h=cr(),f=Gf(e,qf(c,o.v7_relativeSplatPath),u,s==="path"),p=JSON.stringify(f);return T.useEffect(()=>h(JSON.parse(p),{replace:t,state:n,relative:s}),[h,p,s,t,n]),null}function hn(r){pt(!1)}function EA(r){let{basename:e="/",children:t=null,location:n,navigationType:s=ns.Pop,navigator:o,static:l=!1,future:c}=r;Vi()&&pt(!1);let u=e.replace(/^\/*/,"/"),h=T.useMemo(()=>({basename:u,navigator:o,static:l,future:ia({v7_relativeSplatPath:!1},c)}),[u,c,o,l]);typeof n=="string"&&(n=Wi(n));let{pathname:f="/",search:p="",hash:v="",state:b=null,key:_="default"}=n,w=T.useMemo(()=>{let x=$f(f,u);return x==null?null:{location:{pathname:x,search:p,hash:v,state:b,key:_},navigationType:s}},[u,f,p,v,b,_,s]);return w==null?null:T.createElement(ls.Provider,{value:h},T.createElement(du.Provider,{children:t,value:w}))}function AA(r){let{children:e,location:t}=r;return cA(cf(e),t)}new Promise(()=>{});function cf(r,e){e===void 0&&(e=[]);let t=[];return T.Children.forEach(r,(n,s)=>{if(!T.isValidElement(n))return;let o=[...e,s];if(n.type===T.Fragment){t.push.apply(t,cf(n.props.children,o));return}n.type!==hn&&pt(!1),!n.props.index||!n.props.children||pt(!1);let l={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=cf(n.props.children,o)),t.push(l)}),t}function uf(){return uf=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},uf.apply(this,arguments)}function CA(r,e){if(r==null)return{};var t={},n=Object.keys(r),s,o;for(o=0;o<n.length;o++)s=n[o],!(e.indexOf(s)>=0)&&(t[s]=r[s]);return t}function TA(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function kA(r,e){return r.button===0&&(!e||e==="_self")&&!TA(r)}function df(r){return r===void 0&&(r=""),new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((e,t)=>{let n=r[t];return e.concat(Array.isArray(n)?n.map(s=>[t,s]):[[t,n]])},[]))}function PA(r,e){let t=df(r);return e&&e.forEach((n,s)=>{t.has(s)||e.getAll(s).forEach(o=>{t.append(s,o)})}),t}const RA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],NA="6";try{window.__reactRouterVersion=NA}catch{}const DA="startTransition",Fv=Wf[DA];function OA(r){let{basename:e,children:t,future:n,window:s}=r,o=T.useRef();o.current==null&&(o.current=OE({window:s,v5Compat:!0}));let l=o.current,[c,u]=T.useState({action:l.action,location:l.location}),{v7_startTransition:h}=n||{},f=T.useCallback(p=>{h&&Fv?Fv(()=>u(p)):u(p)},[u,h]);return T.useLayoutEffect(()=>l.listen(f),[l,f]),T.useEffect(()=>SA(n),[n]),T.createElement(EA,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:l,future:n})}const MA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",LA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rn=T.forwardRef(function(e,t){let{onClick:n,relative:s,reloadDocument:o,replace:l,state:c,target:u,to:h,preventScrollReset:f,viewTransition:p}=e,v=CA(e,RA),{basename:b}=T.useContext(ls),_,w=!1;if(typeof h=="string"&&LA.test(h)&&(_=h,MA))try{let C=new URL(window.location.href),k=h.startsWith("//")?new URL(C.protocol+h):new URL(h),N=$f(k.pathname,b);k.origin===C.origin&&N!=null?h=N+k.search+k.hash:w=!0}catch{}let x=aA(h,{relative:s}),E=IA(h,{replace:l,state:c,target:u,preventScrollReset:f,relative:s,viewTransition:p});function A(C){n&&n(C),C.defaultPrevented||E(C)}return T.createElement("a",uf({},v,{href:_||x,onClick:w||o?n:A,ref:t,target:u}))});var jv;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(jv||(jv={}));var Bv;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Bv||(Bv={}));function IA(r,e){let{target:t,replace:n,state:s,preventScrollReset:o,relative:l,viewTransition:c}=e===void 0?{}:e,u=cr(),h=cs(),f=hw(r,{relative:l});return T.useCallback(p=>{if(kA(p,t)){p.preventDefault();let v=n!==void 0?n:Zc(h)===Zc(f);u(r,{replace:v,state:s,preventScrollReset:o,relative:l,viewTransition:c})}},[h,u,f,n,s,t,r,o,l,c])}function FA(r){let e=T.useRef(df(r)),t=T.useRef(!1),n=cs(),s=T.useMemo(()=>PA(n.search,t.current?null:e.current),[n.search]),o=cr(),l=T.useCallback((c,u)=>{const h=df(typeof c=="function"?c(s):c);t.current=!0,o("?"+h,u)},[o,s]);return[s,l]}function gw(r,e){return function(){return r.apply(e,arguments)}}const{toString:jA}=Object.prototype,{getPrototypeOf:Xf}=Object,{iterator:hu,toStringTag:vw}=Symbol,fu=(r=>e=>{const t=jA.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Hn=r=>(r=r.toLowerCase(),e=>fu(e)===r),pu=r=>e=>typeof e===r,{isArray:$i}=Array,ji=pu("undefined");function pa(r){return r!==null&&!ji(r)&&r.constructor!==null&&!ji(r.constructor)&&sn(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const yw=Hn("ArrayBuffer");function BA(r){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&yw(r.buffer),e}const UA=pu("string"),sn=pu("function"),ww=pu("number"),ma=r=>r!==null&&typeof r=="object",zA=r=>r===!0||r===!1,Wc=r=>{if(fu(r)!=="object")return!1;const e=Xf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(vw in r)&&!(hu in r)},HA=r=>{if(!ma(r)||pa(r))return!1;try{return Object.keys(r).length===0&&Object.getPrototypeOf(r)===Object.prototype}catch{return!1}},WA=Hn("Date"),VA=Hn("File"),$A=Hn("Blob"),qA=Hn("FileList"),GA=r=>ma(r)&&sn(r.pipe),YA=r=>{let e;return r&&(typeof FormData=="function"&&r instanceof FormData||sn(r.append)&&((e=fu(r))==="formdata"||e==="object"&&sn(r.toString)&&r.toString()==="[object FormData]"))},XA=Hn("URLSearchParams"),[KA,QA,JA,ZA]=["ReadableStream","Request","Response","Headers"].map(Hn),eC=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ga(r,e,{allOwnKeys:t=!1}={}){if(r===null||typeof r>"u")return;let n,s;if(typeof r!="object"&&(r=[r]),$i(r))for(n=0,s=r.length;n<s;n++)e.call(null,r[n],n,r);else{if(pa(r))return;const o=t?Object.getOwnPropertyNames(r):Object.keys(r),l=o.length;let c;for(n=0;n<l;n++)c=o[n],e.call(null,r[c],c,r)}}function bw(r,e){if(pa(r))return null;e=e.toLowerCase();const t=Object.keys(r);let n=t.length,s;for(;n-- >0;)if(s=t[n],e===s.toLowerCase())return s;return null}const Ts=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,xw=r=>!ji(r)&&r!==Ts;function hf(){const{caseless:r,skipUndefined:e}=xw(this)&&this||{},t={},n=(s,o)=>{const l=r&&bw(t,o)||o;Wc(t[l])&&Wc(s)?t[l]=hf(t[l],s):Wc(s)?t[l]=hf({},s):$i(s)?t[l]=s.slice():(!e||!ji(s))&&(t[l]=s)};for(let s=0,o=arguments.length;s<o;s++)arguments[s]&&ga(arguments[s],n);return t}const tC=(r,e,t,{allOwnKeys:n}={})=>(ga(e,(s,o)=>{t&&sn(s)?r[o]=gw(s,t):r[o]=s},{allOwnKeys:n}),r),nC=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),rC=(r,e,t,n)=>{r.prototype=Object.create(e.prototype,n),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:e.prototype}),t&&Object.assign(r.prototype,t)},sC=(r,e,t,n)=>{let s,o,l;const c={};if(e=e||{},r==null)return e;do{for(s=Object.getOwnPropertyNames(r),o=s.length;o-- >0;)l=s[o],(!n||n(l,r,e))&&!c[l]&&(e[l]=r[l],c[l]=!0);r=t!==!1&&Xf(r)}while(r&&(!t||t(r,e))&&r!==Object.prototype);return e},iC=(r,e,t)=>{r=String(r),(t===void 0||t>r.length)&&(t=r.length),t-=e.length;const n=r.indexOf(e,t);return n!==-1&&n===t},oC=r=>{if(!r)return null;if($i(r))return r;let e=r.length;if(!ww(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=r[e];return t},aC=(r=>e=>r&&e instanceof r)(typeof Uint8Array<"u"&&Xf(Uint8Array)),lC=(r,e)=>{const n=(r&&r[hu]).call(r);let s;for(;(s=n.next())&&!s.done;){const o=s.value;e.call(r,o[0],o[1])}},cC=(r,e)=>{let t;const n=[];for(;(t=r.exec(e))!==null;)n.push(t);return n},uC=Hn("HTMLFormElement"),dC=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,s){return n.toUpperCase()+s}),Uv=(({hasOwnProperty:r})=>(e,t)=>r.call(e,t))(Object.prototype),hC=Hn("RegExp"),Sw=(r,e)=>{const t=Object.getOwnPropertyDescriptors(r),n={};ga(t,(s,o)=>{let l;(l=e(s,o,r))!==!1&&(n[o]=l||s)}),Object.defineProperties(r,n)},fC=r=>{Sw(r,(e,t)=>{if(sn(r)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=r[t];if(sn(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},pC=(r,e)=>{const t={},n=s=>{s.forEach(o=>{t[o]=!0})};return $i(r)?n(r):n(String(r).split(e)),t},mC=()=>{},gC=(r,e)=>r!=null&&Number.isFinite(r=+r)?r:e;function vC(r){return!!(r&&sn(r.append)&&r[vw]==="FormData"&&r[hu])}const yC=r=>{const e=new Array(10),t=(n,s)=>{if(ma(n)){if(e.indexOf(n)>=0)return;if(pa(n))return n;if(!("toJSON"in n)){e[s]=n;const o=$i(n)?[]:{};return ga(n,(l,c)=>{const u=t(l,s+1);!ji(u)&&(o[c]=u)}),e[s]=void 0,o}}return n};return t(r,0)},wC=Hn("AsyncFunction"),bC=r=>r&&(ma(r)||sn(r))&&sn(r.then)&&sn(r.catch),_w=((r,e)=>r?setImmediate:e?((t,n)=>(Ts.addEventListener("message",({source:s,data:o})=>{s===Ts&&o===t&&n.length&&n.shift()()},!1),s=>{n.push(s),Ts.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",sn(Ts.postMessage)),xC=typeof queueMicrotask<"u"?queueMicrotask.bind(Ts):typeof process<"u"&&process.nextTick||_w,SC=r=>r!=null&&sn(r[hu]),W={isArray:$i,isArrayBuffer:yw,isBuffer:pa,isFormData:YA,isArrayBufferView:BA,isString:UA,isNumber:ww,isBoolean:zA,isObject:ma,isPlainObject:Wc,isEmptyObject:HA,isReadableStream:KA,isRequest:QA,isResponse:JA,isHeaders:ZA,isUndefined:ji,isDate:WA,isFile:VA,isBlob:$A,isRegExp:hC,isFunction:sn,isStream:GA,isURLSearchParams:XA,isTypedArray:aC,isFileList:qA,forEach:ga,merge:hf,extend:tC,trim:eC,stripBOM:nC,inherits:rC,toFlatObject:sC,kindOf:fu,kindOfTest:Hn,endsWith:iC,toArray:oC,forEachEntry:lC,matchAll:cC,isHTMLForm:uC,hasOwnProperty:Uv,hasOwnProp:Uv,reduceDescriptors:Sw,freezeMethods:fC,toObjectSet:pC,toCamelCase:dC,noop:mC,toFiniteNumber:gC,findKey:bw,global:Ts,isContextDefined:xw,isSpecCompliantForm:vC,toJSONObject:yC,isAsyncFn:wC,isThenable:bC,setImmediate:_w,asap:xC,isIterable:SC};function ke(r,e,t,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}W.inherits(ke,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:W.toJSONObject(this.config),code:this.code,status:this.status}}});const Ew=ke.prototype,Aw={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{Aw[r]={value:r}});Object.defineProperties(ke,Aw);Object.defineProperty(Ew,"isAxiosError",{value:!0});ke.from=(r,e,t,n,s,o)=>{const l=Object.create(Ew);W.toFlatObject(r,l,function(f){return f!==Error.prototype},h=>h!=="isAxiosError");const c=r&&r.message?r.message:"Error",u=e==null&&r?r.code:e;return ke.call(l,c,u,t,n,s),r&&l.cause==null&&Object.defineProperty(l,"cause",{value:r,configurable:!0}),l.name=r&&r.name||"Error",o&&Object.assign(l,o),l};const _C=null;function ff(r){return W.isPlainObject(r)||W.isArray(r)}function Cw(r){return W.endsWith(r,"[]")?r.slice(0,-2):r}function zv(r,e,t){return r?r.concat(e).map(function(s,o){return s=Cw(s),!t&&o?"["+s+"]":s}).join(t?".":""):e}function EC(r){return W.isArray(r)&&!r.some(ff)}const AC=W.toFlatObject(W,{},null,function(e){return/^is[A-Z]/.test(e)});function mu(r,e,t){if(!W.isObject(r))throw new TypeError("target must be an object");e=e||new FormData,t=W.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,x){return!W.isUndefined(x[w])});const n=t.metaTokens,s=t.visitor||f,o=t.dots,l=t.indexes,u=(t.Blob||typeof Blob<"u"&&Blob)&&W.isSpecCompliantForm(e);if(!W.isFunction(s))throw new TypeError("visitor must be a function");function h(_){if(_===null)return"";if(W.isDate(_))return _.toISOString();if(W.isBoolean(_))return _.toString();if(!u&&W.isBlob(_))throw new ke("Blob is not supported. Use a Buffer instead.");return W.isArrayBuffer(_)||W.isTypedArray(_)?u&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function f(_,w,x){let E=_;if(_&&!x&&typeof _=="object"){if(W.endsWith(w,"{}"))w=n?w:w.slice(0,-2),_=JSON.stringify(_);else if(W.isArray(_)&&EC(_)||(W.isFileList(_)||W.endsWith(w,"[]"))&&(E=W.toArray(_)))return w=Cw(w),E.forEach(function(C,k){!(W.isUndefined(C)||C===null)&&e.append(l===!0?zv([w],k,o):l===null?w:w+"[]",h(C))}),!1}return ff(_)?!0:(e.append(zv(x,w,o),h(_)),!1)}const p=[],v=Object.assign(AC,{defaultVisitor:f,convertValue:h,isVisitable:ff});function b(_,w){if(!W.isUndefined(_)){if(p.indexOf(_)!==-1)throw Error("Circular reference detected in "+w.join("."));p.push(_),W.forEach(_,function(E,A){(!(W.isUndefined(E)||E===null)&&s.call(e,E,W.isString(A)?A.trim():A,w,v))===!0&&b(E,w?w.concat(A):[A])}),p.pop()}}if(!W.isObject(r))throw new TypeError("data must be an object");return b(r),e}function Hv(r){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Kf(r,e){this._pairs=[],r&&mu(r,this,e)}const Tw=Kf.prototype;Tw.append=function(e,t){this._pairs.push([e,t])};Tw.toString=function(e){const t=e?function(n){return e.call(this,n,Hv)}:Hv;return this._pairs.map(function(s){return t(s[0])+"="+t(s[1])},"").join("&")};function CC(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function kw(r,e,t){if(!e)return r;const n=t&&t.encode||CC;W.isFunction(t)&&(t={serialize:t});const s=t&&t.serialize;let o;if(s?o=s(e,t):o=W.isURLSearchParams(e)?e.toString():new Kf(e,t).toString(n),o){const l=r.indexOf("#");l!==-1&&(r=r.slice(0,l)),r+=(r.indexOf("?")===-1?"?":"&")+o}return r}class Wv{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){W.forEach(this.handlers,function(n){n!==null&&e(n)})}}const Pw={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},TC=typeof URLSearchParams<"u"?URLSearchParams:Kf,kC=typeof FormData<"u"?FormData:null,PC=typeof Blob<"u"?Blob:null,RC={isBrowser:!0,classes:{URLSearchParams:TC,FormData:kC,Blob:PC},protocols:["http","https","file","blob","url","data"]},Qf=typeof window<"u"&&typeof document<"u",pf=typeof navigator=="object"&&navigator||void 0,NC=Qf&&(!pf||["ReactNative","NativeScript","NS"].indexOf(pf.product)<0),DC=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",OC=Qf&&window.location.href||"http://localhost",MC=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Qf,hasStandardBrowserEnv:NC,hasStandardBrowserWebWorkerEnv:DC,navigator:pf,origin:OC},Symbol.toStringTag,{value:"Module"})),jt={...MC,...RC};function LC(r,e){return mu(r,new jt.classes.URLSearchParams,{visitor:function(t,n,s,o){return jt.isNode&&W.isBuffer(t)?(this.append(n,t.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...e})}function IC(r){return W.matchAll(/\w+|\[(\w*)]/g,r).map(e=>e[0]==="[]"?"":e[1]||e[0])}function FC(r){const e={},t=Object.keys(r);let n;const s=t.length;let o;for(n=0;n<s;n++)o=t[n],e[o]=r[o];return e}function Rw(r){function e(t,n,s,o){let l=t[o++];if(l==="__proto__")return!0;const c=Number.isFinite(+l),u=o>=t.length;return l=!l&&W.isArray(s)?s.length:l,u?(W.hasOwnProp(s,l)?s[l]=[s[l],n]:s[l]=n,!c):((!s[l]||!W.isObject(s[l]))&&(s[l]=[]),e(t,n,s[l],o)&&W.isArray(s[l])&&(s[l]=FC(s[l])),!c)}if(W.isFormData(r)&&W.isFunction(r.entries)){const t={};return W.forEachEntry(r,(n,s)=>{e(IC(n),s,t,0)}),t}return null}function jC(r,e,t){if(W.isString(r))try{return(e||JSON.parse)(r),W.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(r)}const va={transitional:Pw,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",s=n.indexOf("application/json")>-1,o=W.isObject(e);if(o&&W.isHTMLForm(e)&&(e=new FormData(e)),W.isFormData(e))return s?JSON.stringify(Rw(e)):e;if(W.isArrayBuffer(e)||W.isBuffer(e)||W.isStream(e)||W.isFile(e)||W.isBlob(e)||W.isReadableStream(e))return e;if(W.isArrayBufferView(e))return e.buffer;if(W.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return LC(e,this.formSerializer).toString();if((c=W.isFileList(e))||n.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return mu(c?{"files[]":e}:e,u&&new u,this.formSerializer)}}return o||s?(t.setContentType("application/json",!1),jC(e)):e}],transformResponse:[function(e){const t=this.transitional||va.transitional,n=t&&t.forcedJSONParsing,s=this.responseType==="json";if(W.isResponse(e)||W.isReadableStream(e))return e;if(e&&W.isString(e)&&(n&&!this.responseType||s)){const l=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(c){if(l)throw c.name==="SyntaxError"?ke.from(c,ke.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:jt.classes.FormData,Blob:jt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};W.forEach(["delete","get","head","post","put","patch"],r=>{va.headers[r]={}});const BC=W.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),UC=r=>{const e={};let t,n,s;return r&&r.split(`
`).forEach(function(l){s=l.indexOf(":"),t=l.substring(0,s).trim().toLowerCase(),n=l.substring(s+1).trim(),!(!t||e[t]&&BC[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e},Vv=Symbol("internals");function jo(r){return r&&String(r).trim().toLowerCase()}function Vc(r){return r===!1||r==null?r:W.isArray(r)?r.map(Vc):String(r)}function zC(r){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(r);)e[n[1]]=n[2];return e}const HC=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function Ph(r,e,t,n,s){if(W.isFunction(n))return n.call(this,e,t);if(s&&(e=t),!!W.isString(e)){if(W.isString(n))return e.indexOf(n)!==-1;if(W.isRegExp(n))return n.test(e)}}function WC(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function VC(r,e){const t=W.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(r,n+t,{value:function(s,o,l){return this[n].call(this,e,s,o,l)},configurable:!0})})}let on=class{constructor(e){e&&this.set(e)}set(e,t,n){const s=this;function o(c,u,h){const f=jo(u);if(!f)throw new Error("header name must be a non-empty string");const p=W.findKey(s,f);(!p||s[p]===void 0||h===!0||h===void 0&&s[p]!==!1)&&(s[p||u]=Vc(c))}const l=(c,u)=>W.forEach(c,(h,f)=>o(h,f,u));if(W.isPlainObject(e)||e instanceof this.constructor)l(e,t);else if(W.isString(e)&&(e=e.trim())&&!HC(e))l(UC(e),t);else if(W.isObject(e)&&W.isIterable(e)){let c={},u,h;for(const f of e){if(!W.isArray(f))throw TypeError("Object iterator must return a key-value pair");c[h=f[0]]=(u=c[h])?W.isArray(u)?[...u,f[1]]:[u,f[1]]:f[1]}l(c,t)}else e!=null&&o(t,e,n);return this}get(e,t){if(e=jo(e),e){const n=W.findKey(this,e);if(n){const s=this[n];if(!t)return s;if(t===!0)return zC(s);if(W.isFunction(t))return t.call(this,s,n);if(W.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=jo(e),e){const n=W.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||Ph(this,this[n],n,t)))}return!1}delete(e,t){const n=this;let s=!1;function o(l){if(l=jo(l),l){const c=W.findKey(n,l);c&&(!t||Ph(n,n[c],c,t))&&(delete n[c],s=!0)}}return W.isArray(e)?e.forEach(o):o(e),s}clear(e){const t=Object.keys(this);let n=t.length,s=!1;for(;n--;){const o=t[n];(!e||Ph(this,this[o],o,e,!0))&&(delete this[o],s=!0)}return s}normalize(e){const t=this,n={};return W.forEach(this,(s,o)=>{const l=W.findKey(n,o);if(l){t[l]=Vc(s),delete t[o];return}const c=e?WC(o):String(o).trim();c!==o&&delete t[o],t[c]=Vc(s),n[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return W.forEach(this,(n,s)=>{n!=null&&n!==!1&&(t[s]=e&&W.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(s=>n.set(s)),n}static accessor(e){const n=(this[Vv]=this[Vv]={accessors:{}}).accessors,s=this.prototype;function o(l){const c=jo(l);n[c]||(VC(s,l),n[c]=!0)}return W.isArray(e)?e.forEach(o):o(e),this}};on.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);W.reduceDescriptors(on.prototype,({value:r},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>r,set(n){this[t]=n}}});W.freezeMethods(on);function Rh(r,e){const t=this||va,n=e||t,s=on.from(n.headers);let o=n.data;return W.forEach(r,function(c){o=c.call(t,o,s.normalize(),e?e.status:void 0)}),s.normalize(),o}function Nw(r){return!!(r&&r.__CANCEL__)}function qi(r,e,t){ke.call(this,r??"canceled",ke.ERR_CANCELED,e,t),this.name="CanceledError"}W.inherits(qi,ke,{__CANCEL__:!0});function Dw(r,e,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?r(t):e(new ke("Request failed with status code "+t.status,[ke.ERR_BAD_REQUEST,ke.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function $C(r){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return e&&e[1]||""}function qC(r,e){r=r||10;const t=new Array(r),n=new Array(r);let s=0,o=0,l;return e=e!==void 0?e:1e3,function(u){const h=Date.now(),f=n[o];l||(l=h),t[s]=u,n[s]=h;let p=o,v=0;for(;p!==s;)v+=t[p++],p=p%r;if(s=(s+1)%r,s===o&&(o=(o+1)%r),h-l<e)return;const b=f&&h-f;return b?Math.round(v*1e3/b):void 0}}function GC(r,e){let t=0,n=1e3/e,s,o;const l=(h,f=Date.now())=>{t=f,s=null,o&&(clearTimeout(o),o=null),r(...h)};return[(...h)=>{const f=Date.now(),p=f-t;p>=n?l(h,f):(s=h,o||(o=setTimeout(()=>{o=null,l(s)},n-p)))},()=>s&&l(s)]}const eu=(r,e,t=3)=>{let n=0;const s=qC(50,250);return GC(o=>{const l=o.loaded,c=o.lengthComputable?o.total:void 0,u=l-n,h=s(u),f=l<=c;n=l;const p={loaded:l,total:c,progress:c?l/c:void 0,bytes:u,rate:h||void 0,estimated:h&&c&&f?(c-l)/h:void 0,event:o,lengthComputable:c!=null,[e?"download":"upload"]:!0};r(p)},t)},$v=(r,e)=>{const t=r!=null;return[n=>e[0]({lengthComputable:t,total:r,loaded:n}),e[1]]},qv=r=>(...e)=>W.asap(()=>r(...e)),YC=jt.hasStandardBrowserEnv?((r,e)=>t=>(t=new URL(t,jt.origin),r.protocol===t.protocol&&r.host===t.host&&(e||r.port===t.port)))(new URL(jt.origin),jt.navigator&&/(msie|trident)/i.test(jt.navigator.userAgent)):()=>!0,XC=jt.hasStandardBrowserEnv?{write(r,e,t,n,s,o,l){if(typeof document>"u")return;const c=[`${r}=${encodeURIComponent(e)}`];W.isNumber(t)&&c.push(`expires=${new Date(t).toUTCString()}`),W.isString(n)&&c.push(`path=${n}`),W.isString(s)&&c.push(`domain=${s}`),o===!0&&c.push("secure"),W.isString(l)&&c.push(`SameSite=${l}`),document.cookie=c.join("; ")},read(r){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+r+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(r){this.write(r,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function KC(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function QC(r,e){return e?r.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):r}function Ow(r,e,t){let n=!KC(e);return r&&(n||t==!1)?QC(r,e):e}const Gv=r=>r instanceof on?{...r}:r;function Os(r,e){e=e||{};const t={};function n(h,f,p,v){return W.isPlainObject(h)&&W.isPlainObject(f)?W.merge.call({caseless:v},h,f):W.isPlainObject(f)?W.merge({},f):W.isArray(f)?f.slice():f}function s(h,f,p,v){if(W.isUndefined(f)){if(!W.isUndefined(h))return n(void 0,h,p,v)}else return n(h,f,p,v)}function o(h,f){if(!W.isUndefined(f))return n(void 0,f)}function l(h,f){if(W.isUndefined(f)){if(!W.isUndefined(h))return n(void 0,h)}else return n(void 0,f)}function c(h,f,p){if(p in e)return n(h,f);if(p in r)return n(void 0,h)}const u={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:c,headers:(h,f,p)=>s(Gv(h),Gv(f),p,!0)};return W.forEach(Object.keys({...r,...e}),function(f){const p=u[f]||s,v=p(r[f],e[f],f);W.isUndefined(v)&&p!==c||(t[f]=v)}),t}const Mw=r=>{const e=Os({},r);let{data:t,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:o,headers:l,auth:c}=e;if(e.headers=l=on.from(l),e.url=kw(Ow(e.baseURL,e.url,e.allowAbsoluteUrls),r.params,r.paramsSerializer),c&&l.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),W.isFormData(t)){if(jt.hasStandardBrowserEnv||jt.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(W.isFunction(t.getHeaders)){const u=t.getHeaders(),h=["content-type","content-length"];Object.entries(u).forEach(([f,p])=>{h.includes(f.toLowerCase())&&l.set(f,p)})}}if(jt.hasStandardBrowserEnv&&(n&&W.isFunction(n)&&(n=n(e)),n||n!==!1&&YC(e.url))){const u=s&&o&&XC.read(o);u&&l.set(s,u)}return e},JC=typeof XMLHttpRequest<"u",ZC=JC&&function(r){return new Promise(function(t,n){const s=Mw(r);let o=s.data;const l=on.from(s.headers).normalize();let{responseType:c,onUploadProgress:u,onDownloadProgress:h}=s,f,p,v,b,_;function w(){b&&b(),_&&_(),s.cancelToken&&s.cancelToken.unsubscribe(f),s.signal&&s.signal.removeEventListener("abort",f)}let x=new XMLHttpRequest;x.open(s.method.toUpperCase(),s.url,!0),x.timeout=s.timeout;function E(){if(!x)return;const C=on.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),N={data:!c||c==="text"||c==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:C,config:r,request:x};Dw(function(D){t(D),w()},function(D){n(D),w()},N),x=null}"onloadend"in x?x.onloadend=E:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(E)},x.onabort=function(){x&&(n(new ke("Request aborted",ke.ECONNABORTED,r,x)),x=null)},x.onerror=function(k){const N=k&&k.message?k.message:"Network Error",R=new ke(N,ke.ERR_NETWORK,r,x);R.event=k||null,n(R),x=null},x.ontimeout=function(){let k=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const N=s.transitional||Pw;s.timeoutErrorMessage&&(k=s.timeoutErrorMessage),n(new ke(k,N.clarifyTimeoutError?ke.ETIMEDOUT:ke.ECONNABORTED,r,x)),x=null},o===void 0&&l.setContentType(null),"setRequestHeader"in x&&W.forEach(l.toJSON(),function(k,N){x.setRequestHeader(N,k)}),W.isUndefined(s.withCredentials)||(x.withCredentials=!!s.withCredentials),c&&c!=="json"&&(x.responseType=s.responseType),h&&([v,_]=eu(h,!0),x.addEventListener("progress",v)),u&&x.upload&&([p,b]=eu(u),x.upload.addEventListener("progress",p),x.upload.addEventListener("loadend",b)),(s.cancelToken||s.signal)&&(f=C=>{x&&(n(!C||C.type?new qi(null,r,x):C),x.abort(),x=null)},s.cancelToken&&s.cancelToken.subscribe(f),s.signal&&(s.signal.aborted?f():s.signal.addEventListener("abort",f)));const A=$C(s.url);if(A&&jt.protocols.indexOf(A)===-1){n(new ke("Unsupported protocol "+A+":",ke.ERR_BAD_REQUEST,r));return}x.send(o||null)})},e1=(r,e)=>{const{length:t}=r=r?r.filter(Boolean):[];if(e||t){let n=new AbortController,s;const o=function(h){if(!s){s=!0,c();const f=h instanceof Error?h:this.reason;n.abort(f instanceof ke?f:new qi(f instanceof Error?f.message:f))}};let l=e&&setTimeout(()=>{l=null,o(new ke(`timeout ${e} of ms exceeded`,ke.ETIMEDOUT))},e);const c=()=>{r&&(l&&clearTimeout(l),l=null,r.forEach(h=>{h.unsubscribe?h.unsubscribe(o):h.removeEventListener("abort",o)}),r=null)};r.forEach(h=>h.addEventListener("abort",o));const{signal:u}=n;return u.unsubscribe=()=>W.asap(c),u}},t1=function*(r,e){let t=r.byteLength;if(t<e){yield r;return}let n=0,s;for(;n<t;)s=n+e,yield r.slice(n,s),n=s},n1=async function*(r,e){for await(const t of r1(r))yield*t1(t,e)},r1=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const e=r.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)break;yield n}}finally{await e.cancel()}},Yv=(r,e,t,n)=>{const s=n1(r,e);let o=0,l,c=u=>{l||(l=!0,n&&n(u))};return new ReadableStream({async pull(u){try{const{done:h,value:f}=await s.next();if(h){c(),u.close();return}let p=f.byteLength;if(t){let v=o+=p;t(v)}u.enqueue(new Uint8Array(f))}catch(h){throw c(h),h}},cancel(u){return c(u),s.return()}},{highWaterMark:2})},Xv=64*1024,{isFunction:Hl}=W,s1=(({Request:r,Response:e})=>({Request:r,Response:e}))(W.global),{ReadableStream:Kv,TextEncoder:Qv}=W.global,Jv=(r,...e)=>{try{return!!r(...e)}catch{return!1}},i1=r=>{r=W.merge.call({skipUndefined:!0},s1,r);const{fetch:e,Request:t,Response:n}=r,s=e?Hl(e):typeof fetch=="function",o=Hl(t),l=Hl(n);if(!s)return!1;const c=s&&Hl(Kv),u=s&&(typeof Qv=="function"?(_=>w=>_.encode(w))(new Qv):async _=>new Uint8Array(await new t(_).arrayBuffer())),h=o&&c&&Jv(()=>{let _=!1;const w=new t(jt.origin,{body:new Kv,method:"POST",get duplex(){return _=!0,"half"}}).headers.has("Content-Type");return _&&!w}),f=l&&c&&Jv(()=>W.isReadableStream(new n("").body)),p={stream:f&&(_=>_.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(_=>{!p[_]&&(p[_]=(w,x)=>{let E=w&&w[_];if(E)return E.call(w);throw new ke(`Response type '${_}' is not supported`,ke.ERR_NOT_SUPPORT,x)})});const v=async _=>{if(_==null)return 0;if(W.isBlob(_))return _.size;if(W.isSpecCompliantForm(_))return(await new t(jt.origin,{method:"POST",body:_}).arrayBuffer()).byteLength;if(W.isArrayBufferView(_)||W.isArrayBuffer(_))return _.byteLength;if(W.isURLSearchParams(_)&&(_=_+""),W.isString(_))return(await u(_)).byteLength},b=async(_,w)=>{const x=W.toFiniteNumber(_.getContentLength());return x??v(w)};return async _=>{let{url:w,method:x,data:E,signal:A,cancelToken:C,timeout:k,onDownloadProgress:N,onUploadProgress:R,responseType:D,headers:F,withCredentials:U="same-origin",fetchOptions:q}=Mw(_),Y=e||fetch;D=D?(D+"").toLowerCase():"text";let ne=e1([A,C&&C.toAbortSignal()],k),oe=null;const te=ne&&ne.unsubscribe&&(()=>{ne.unsubscribe()});let ae;try{if(R&&h&&x!=="get"&&x!=="head"&&(ae=await b(F,E))!==0){let M=new t(w,{method:"POST",body:E,duplex:"half"}),H;if(W.isFormData(E)&&(H=M.headers.get("content-type"))&&F.setContentType(H),M.body){const[ie,ce]=$v(ae,eu(qv(R)));E=Yv(M.body,Xv,ie,ce)}}W.isString(U)||(U=U?"include":"omit");const G=o&&"credentials"in t.prototype,K={...q,signal:ne,method:x.toUpperCase(),headers:F.normalize().toJSON(),body:E,duplex:"half",credentials:G?U:void 0};oe=o&&new t(w,K);let V=await(o?Y(oe,q):Y(w,K));const $=f&&(D==="stream"||D==="response");if(f&&(N||$&&te)){const M={};["status","statusText","headers"].forEach(ye=>{M[ye]=V[ye]});const H=W.toFiniteNumber(V.headers.get("content-length")),[ie,ce]=N&&$v(H,eu(qv(N),!0))||[];V=new n(Yv(V.body,Xv,ie,()=>{ce&&ce(),te&&te()}),M)}D=D||"text";let Q=await p[W.findKey(p,D)||"text"](V,_);return!$&&te&&te(),await new Promise((M,H)=>{Dw(M,H,{data:Q,headers:on.from(V.headers),status:V.status,statusText:V.statusText,config:_,request:oe})})}catch(G){throw te&&te(),G&&G.name==="TypeError"&&/Load failed|fetch/i.test(G.message)?Object.assign(new ke("Network Error",ke.ERR_NETWORK,_,oe),{cause:G.cause||G}):ke.from(G,G&&G.code,_,oe)}}},o1=new Map,Lw=r=>{let e=r&&r.env||{};const{fetch:t,Request:n,Response:s}=e,o=[n,s,t];let l=o.length,c=l,u,h,f=o1;for(;c--;)u=o[c],h=f.get(u),h===void 0&&f.set(u,h=c?new Map:i1(e)),f=h;return h};Lw();const Jf={http:_C,xhr:ZC,fetch:{get:Lw}};W.forEach(Jf,(r,e)=>{if(r){try{Object.defineProperty(r,"name",{value:e})}catch{}Object.defineProperty(r,"adapterName",{value:e})}});const Zv=r=>`- ${r}`,a1=r=>W.isFunction(r)||r===null||r===!1;function l1(r,e){r=W.isArray(r)?r:[r];const{length:t}=r;let n,s;const o={};for(let l=0;l<t;l++){n=r[l];let c;if(s=n,!a1(n)&&(s=Jf[(c=String(n)).toLowerCase()],s===void 0))throw new ke(`Unknown adapter '${c}'`);if(s&&(W.isFunction(s)||(s=s.get(e))))break;o[c||"#"+l]=s}if(!s){const l=Object.entries(o).map(([u,h])=>`adapter ${u} `+(h===!1?"is not supported by the environment":"is not available in the build"));let c=t?l.length>1?`since :
`+l.map(Zv).join(`
`):" "+Zv(l[0]):"as no adapter specified";throw new ke("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return s}const Iw={getAdapter:l1,adapters:Jf};function Nh(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new qi(null,r)}function ey(r){return Nh(r),r.headers=on.from(r.headers),r.data=Rh.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),Iw.getAdapter(r.adapter||va.adapter,r)(r).then(function(n){return Nh(r),n.data=Rh.call(r,r.transformResponse,n),n.headers=on.from(n.headers),n},function(n){return Nw(n)||(Nh(r),n&&n.response&&(n.response.data=Rh.call(r,r.transformResponse,n.response),n.response.headers=on.from(n.response.headers))),Promise.reject(n)})}const Fw="1.13.2",gu={};["object","boolean","number","function","string","symbol"].forEach((r,e)=>{gu[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});const ty={};gu.transitional=function(e,t,n){function s(o,l){return"[Axios v"+Fw+"] Transitional option '"+o+"'"+l+(n?". "+n:"")}return(o,l,c)=>{if(e===!1)throw new ke(s(l," has been removed"+(t?" in "+t:"")),ke.ERR_DEPRECATED);return t&&!ty[l]&&(ty[l]=!0,console.warn(s(l," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(o,l,c):!0}};gu.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function c1(r,e,t){if(typeof r!="object")throw new ke("options must be an object",ke.ERR_BAD_OPTION_VALUE);const n=Object.keys(r);let s=n.length;for(;s-- >0;){const o=n[s],l=e[o];if(l){const c=r[o],u=c===void 0||l(c,o,r);if(u!==!0)throw new ke("option "+o+" must be "+u,ke.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new ke("Unknown option "+o,ke.ERR_BAD_OPTION)}}const $c={assertOptions:c1,validators:gu},Qn=$c.validators;let Ds=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Wv,response:new Wv}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Os(this.defaults,t);const{transitional:n,paramsSerializer:s,headers:o}=t;n!==void 0&&$c.assertOptions(n,{silentJSONParsing:Qn.transitional(Qn.boolean),forcedJSONParsing:Qn.transitional(Qn.boolean),clarifyTimeoutError:Qn.transitional(Qn.boolean)},!1),s!=null&&(W.isFunction(s)?t.paramsSerializer={serialize:s}:$c.assertOptions(s,{encode:Qn.function,serialize:Qn.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),$c.assertOptions(t,{baseUrl:Qn.spelling("baseURL"),withXsrfToken:Qn.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let l=o&&W.merge(o.common,o[t.method]);o&&W.forEach(["delete","get","head","post","put","patch","common"],_=>{delete o[_]}),t.headers=on.concat(l,o);const c=[];let u=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(t)===!1||(u=u&&w.synchronous,c.unshift(w.fulfilled,w.rejected))});const h=[];this.interceptors.response.forEach(function(w){h.push(w.fulfilled,w.rejected)});let f,p=0,v;if(!u){const _=[ey.bind(this),void 0];for(_.unshift(...c),_.push(...h),v=_.length,f=Promise.resolve(t);p<v;)f=f.then(_[p++],_[p++]);return f}v=c.length;let b=t;for(;p<v;){const _=c[p++],w=c[p++];try{b=_(b)}catch(x){w.call(this,x);break}}try{f=ey.call(this,b)}catch(_){return Promise.reject(_)}for(p=0,v=h.length;p<v;)f=f.then(h[p++],h[p++]);return f}getUri(e){e=Os(this.defaults,e);const t=Ow(e.baseURL,e.url,e.allowAbsoluteUrls);return kw(t,e.params,e.paramsSerializer)}};W.forEach(["delete","get","head","options"],function(e){Ds.prototype[e]=function(t,n){return this.request(Os(n||{},{method:e,url:t,data:(n||{}).data}))}});W.forEach(["post","put","patch"],function(e){function t(n){return function(o,l,c){return this.request(Os(c||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:l}))}}Ds.prototype[e]=t(),Ds.prototype[e+"Form"]=t(!0)});let u1=class jw{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(o){t=o});const n=this;this.promise.then(s=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](s);n._listeners=null}),this.promise.then=s=>{let o;const l=new Promise(c=>{n.subscribe(c),o=c}).then(s);return l.cancel=function(){n.unsubscribe(o)},l},e(function(o,l,c){n.reason||(n.reason=new qi(o,l,c),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=n=>{e.abort(n)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new jw(function(s){e=s}),cancel:e}}};function d1(r){return function(t){return r.apply(null,t)}}function h1(r){return W.isObject(r)&&r.isAxiosError===!0}const mf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(mf).forEach(([r,e])=>{mf[e]=r});function Bw(r){const e=new Ds(r),t=gw(Ds.prototype.request,e);return W.extend(t,Ds.prototype,e,{allOwnKeys:!0}),W.extend(t,e,null,{allOwnKeys:!0}),t.create=function(s){return Bw(Os(r,s))},t}const at=Bw(va);at.Axios=Ds;at.CanceledError=qi;at.CancelToken=u1;at.isCancel=Nw;at.VERSION=Fw;at.toFormData=mu;at.AxiosError=ke;at.Cancel=at.CanceledError;at.all=function(e){return Promise.all(e)};at.spread=d1;at.isAxiosError=h1;at.mergeConfig=Os;at.AxiosHeaders=on;at.formToJSON=r=>Rw(W.isHTMLForm(r)?new FormData(r):r);at.getAdapter=Iw.getAdapter;at.HttpStatusCode=mf;at.default=at;const{Axios:mM,AxiosError:gM,CanceledError:vM,isCancel:yM,CancelToken:wM,VERSION:bM,all:xM,Cancel:SM,isAxiosError:_M,spread:EM,toFormData:AM,AxiosHeaders:CM,HttpStatusCode:TM,formToJSON:kM,getAdapter:PM,mergeConfig:RM}=at,Uw=T.createContext(void 0);function f1({children:r}){const[e,t]=T.useState(null),[n,s]=T.useState(null),[o,l]=T.useState(!0),c=async()=>{try{const p=await at.get("/auth/me",{withCredentials:!0});t(p.data.user),s(p.data.session)}catch{t(null),s(null)}finally{l(!1)}};T.useEffect(()=>{c()},[]);const f={user:e,session:n,isAuthenticated:!!e,isLoading:o,login:()=>{window.location.href="/auth/saml/login?next="+encodeURIComponent(window.location.pathname)},logout:async()=>{try{await at.post("/auth/logout",{},{withCredentials:!0})}catch(p){console.error("Logout error:",p)}finally{t(null),s(null),window.location.href="/login"}},refreshAuth:c};return g.jsx(Uw.Provider,{value:f,children:r})}function ya(){const r=T.useContext(Uw);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r}function jn({children:r}){const{isAuthenticated:e,isLoading:t}=ya(),n=cs();return t?g.jsx("div",{className:"flex items-center justify-center min-h-screen",children:g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-maroon-700"})}):e?g.jsx(g.Fragment,{children:r}):g.jsx(_A,{to:"/login",state:{from:n},replace:!0})}var Te=(r=>(r.PICKED="picked",r.QA="qa",r.PRE_DELIVERY="pre-delivery",r.IN_DELIVERY="in-delivery",r.SHIPPING="shipping",r.DELIVERED="delivered",r.ISSUE="issue",r))(Te||{}),xr=(r=>(r.WORK_AREA="work_area",r.DOCK="dock",r.SHIPPED="shipped",r))(xr||{});const p1={work_area:"Work Area",dock:"At Dock",shipped:"Shipped to Carrier"},Zr={picked:"Picked",qa:"QA","pre-delivery":"Pre-Delivery","in-delivery":"In Delivery",shipping:"Shipping",delivered:"Delivered",issue:"Issue"},He=at.create({baseURL:"/api",headers:{"Content-Type":"application/json"},withCredentials:!0});He.interceptors.response.use(r=>r,r=>(r.response?.status===401&&(window.location.pathname.startsWith("/login")||(window.location.href="/login")),Promise.reject(r)));const it={getOrders:async r=>(await He.get("/orders",{params:r})).data,getOrder:async r=>(await He.get(`/orders/${r}`)).data,updateOrderStatus:async(r,e,t)=>(await He.patch(`/orders/${r}/status`,e,{params:t?{changed_by:t}:void 0})).data,bulkUpdateStatus:async r=>(await He.post("/orders/bulk-transition",r)).data,getOrderAudit:async r=>(await He.get(`/orders/${r}/audit`)).data,retryNotification:async r=>(await He.post(`/orders/${r}/retry-notification`)).data,tagOrder:async(r,e)=>(await He.post(`/orders/${r}/tag`,e)).data,generatePicklist:async(r,e)=>(await He.post(`/orders/${r}/picklist`,e||{})).data,submitQa:async(r,e)=>(await He.post(`/orders/${r}/qa`,e)).data,signOrder:async(r,e)=>(await He.post(`/orders/${r}/sign`,e)).data,updateShippingWorkflow:async(r,e)=>(await He.patch(`/orders/${r}/shipping-workflow`,e)).data,getShippingWorkflow:async r=>(await He.get(`/orders/${r}/shipping-workflow`)).data};function zw(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var s=r.length;for(e=0;e<s;e++)r[e]&&(t=zw(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function Gi(){for(var r,e,t=0,n="",s=arguments.length;t<s;t++)(r=arguments[t])&&(e=zw(r))&&(n&&(n+=" "),n+=e);return n}const ny=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,ry=Gi,Hw=(r,e)=>t=>{var n;if(e?.variants==null)return ry(r,t?.class,t?.className);const{variants:s,defaultVariants:o}=e,l=Object.keys(s).map(h=>{const f=t?.[h],p=o?.[h];if(f===null)return null;const v=ny(f)||ny(p);return s[h][v]}),c=t&&Object.entries(t).reduce((h,f)=>{let[p,v]=f;return v===void 0||(h[p]=v),h},{}),u=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((h,f)=>{let{class:p,className:v,...b}=f;return Object.entries(b).every(_=>{let[w,x]=_;return Array.isArray(x)?x.includes({...o,...c}[w]):{...o,...c}[w]===x})?[...h,p,v]:h},[]);return ry(r,l,u,t?.class,t?.className)},Zf="-",m1=r=>{const e=v1(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=r;return{getClassGroupId:l=>{const c=l.split(Zf);return c[0]===""&&c.length!==1&&c.shift(),Ww(c,e)||g1(l)},getConflictingClassGroupIds:(l,c)=>{const u=t[l]||[];return c&&n[l]?[...u,...n[l]]:u}}},Ww=(r,e)=>{if(r.length===0)return e.classGroupId;const t=r[0],n=e.nextPart.get(t),s=n?Ww(r.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const o=r.join(Zf);return e.validators.find(({validator:l})=>l(o))?.classGroupId},sy=/^\[(.+)\]$/,g1=r=>{if(sy.test(r)){const e=sy.exec(r)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},v1=r=>{const{theme:e,prefix:t}=r,n={nextPart:new Map,validators:[]};return w1(Object.entries(r.classGroups),t).forEach(([o,l])=>{gf(l,n,o,e)}),n},gf=(r,e,t,n)=>{r.forEach(s=>{if(typeof s=="string"){const o=s===""?e:iy(e,s);o.classGroupId=t;return}if(typeof s=="function"){if(y1(s)){gf(s(n),e,t,n);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([o,l])=>{gf(l,iy(e,o),t,n)})})},iy=(r,e)=>{let t=r;return e.split(Zf).forEach(n=>{t.nextPart.has(n)||t.nextPart.set(n,{nextPart:new Map,validators:[]}),t=t.nextPart.get(n)}),t},y1=r=>r.isThemeGetter,w1=(r,e)=>e?r.map(([t,n])=>{const s=n.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([l,c])=>[e+l,c])):o);return[t,s]}):r,b1=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,n=new Map;const s=(o,l)=>{t.set(o,l),e++,e>r&&(e=0,n=t,t=new Map)};return{get(o){let l=t.get(o);if(l!==void 0)return l;if((l=n.get(o))!==void 0)return s(o,l),l},set(o,l){t.has(o)?t.set(o,l):s(o,l)}}},Vw="!",x1=r=>{const{separator:e,experimentalParseClassName:t}=r,n=e.length===1,s=e[0],o=e.length,l=c=>{const u=[];let h=0,f=0,p;for(let x=0;x<c.length;x++){let E=c[x];if(h===0){if(E===s&&(n||c.slice(x,x+o)===e)){u.push(c.slice(f,x)),f=x+o;continue}if(E==="/"){p=x;continue}}E==="["?h++:E==="]"&&h--}const v=u.length===0?c:c.substring(f),b=v.startsWith(Vw),_=b?v.substring(1):v,w=p&&p>f?p-f:void 0;return{modifiers:u,hasImportantModifier:b,baseClassName:_,maybePostfixModifierPosition:w}};return t?c=>t({className:c,parseClassName:l}):l},S1=r=>{if(r.length<=1)return r;const e=[];let t=[];return r.forEach(n=>{n[0]==="["?(e.push(...t.sort(),n),t=[]):t.push(n)}),e.push(...t.sort()),e},_1=r=>({cache:b1(r.cacheSize),parseClassName:x1(r),...m1(r)}),E1=/\s+/,A1=(r,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:s}=e,o=[],l=r.trim().split(E1);let c="";for(let u=l.length-1;u>=0;u-=1){const h=l[u],{modifiers:f,hasImportantModifier:p,baseClassName:v,maybePostfixModifierPosition:b}=t(h);let _=!!b,w=n(_?v.substring(0,b):v);if(!w){if(!_){c=h+(c.length>0?" "+c:c);continue}if(w=n(v),!w){c=h+(c.length>0?" "+c:c);continue}_=!1}const x=S1(f).join(":"),E=p?x+Vw:x,A=E+w;if(o.includes(A))continue;o.push(A);const C=s(w,_);for(let k=0;k<C.length;++k){const N=C[k];o.push(E+N)}c=h+(c.length>0?" "+c:c)}return c};function C1(){let r=0,e,t,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=$w(e))&&(n&&(n+=" "),n+=t);return n}const $w=r=>{if(typeof r=="string")return r;let e,t="";for(let n=0;n<r.length;n++)r[n]&&(e=$w(r[n]))&&(t&&(t+=" "),t+=e);return t};function T1(r,...e){let t,n,s,o=l;function l(u){const h=e.reduce((f,p)=>p(f),r());return t=_1(h),n=t.cache.get,s=t.cache.set,o=c,c(u)}function c(u){const h=n(u);if(h)return h;const f=A1(u,t);return s(u,f),f}return function(){return o(C1.apply(null,arguments))}}const Ye=r=>{const e=t=>t[r]||[];return e.isThemeGetter=!0,e},qw=/^\[(?:([a-z-]+):)?(.+)\]$/i,k1=/^\d+\/\d+$/,P1=new Set(["px","full","screen"]),R1=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,N1=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,D1=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,O1=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,M1=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,br=r=>Ai(r)||P1.has(r)||k1.test(r),Kr=r=>Yi(r,"length",H1),Ai=r=>!!r&&!Number.isNaN(Number(r)),Dh=r=>Yi(r,"number",Ai),Bo=r=>!!r&&Number.isInteger(Number(r)),L1=r=>r.endsWith("%")&&Ai(r.slice(0,-1)),Pe=r=>qw.test(r),Qr=r=>R1.test(r),I1=new Set(["length","size","percentage"]),F1=r=>Yi(r,I1,Gw),j1=r=>Yi(r,"position",Gw),B1=new Set(["image","url"]),U1=r=>Yi(r,B1,V1),z1=r=>Yi(r,"",W1),Uo=()=>!0,Yi=(r,e,t)=>{const n=qw.exec(r);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):t(n[2]):!1},H1=r=>N1.test(r)&&!D1.test(r),Gw=()=>!1,W1=r=>O1.test(r),V1=r=>M1.test(r),$1=()=>{const r=Ye("colors"),e=Ye("spacing"),t=Ye("blur"),n=Ye("brightness"),s=Ye("borderColor"),o=Ye("borderRadius"),l=Ye("borderSpacing"),c=Ye("borderWidth"),u=Ye("contrast"),h=Ye("grayscale"),f=Ye("hueRotate"),p=Ye("invert"),v=Ye("gap"),b=Ye("gradientColorStops"),_=Ye("gradientColorStopPositions"),w=Ye("inset"),x=Ye("margin"),E=Ye("opacity"),A=Ye("padding"),C=Ye("saturate"),k=Ye("scale"),N=Ye("sepia"),R=Ye("skew"),D=Ye("space"),F=Ye("translate"),U=()=>["auto","contain","none"],q=()=>["auto","hidden","clip","visible","scroll"],Y=()=>["auto",Pe,e],ne=()=>[Pe,e],oe=()=>["",br,Kr],te=()=>["auto",Ai,Pe],ae=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],G=()=>["solid","dashed","dotted","double","none"],K=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],V=()=>["start","end","center","between","around","evenly","stretch"],$=()=>["","0",Pe],Q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],M=()=>[Ai,Pe];return{cacheSize:500,separator:":",theme:{colors:[Uo],spacing:[br,Kr],blur:["none","",Qr,Pe],brightness:M(),borderColor:[r],borderRadius:["none","","full",Qr,Pe],borderSpacing:ne(),borderWidth:oe(),contrast:M(),grayscale:$(),hueRotate:M(),invert:$(),gap:ne(),gradientColorStops:[r],gradientColorStopPositions:[L1,Kr],inset:Y(),margin:Y(),opacity:M(),padding:ne(),saturate:M(),scale:M(),sepia:$(),skew:M(),space:ne(),translate:ne()},classGroups:{aspect:[{aspect:["auto","square","video",Pe]}],container:["container"],columns:[{columns:[Qr]}],"break-after":[{"break-after":Q()}],"break-before":[{"break-before":Q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ae(),Pe]}],overflow:[{overflow:q()}],"overflow-x":[{"overflow-x":q()}],"overflow-y":[{"overflow-y":q()}],overscroll:[{overscroll:U()}],"overscroll-x":[{"overscroll-x":U()}],"overscroll-y":[{"overscroll-y":U()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[w]}],"inset-x":[{"inset-x":[w]}],"inset-y":[{"inset-y":[w]}],start:[{start:[w]}],end:[{end:[w]}],top:[{top:[w]}],right:[{right:[w]}],bottom:[{bottom:[w]}],left:[{left:[w]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Bo,Pe]}],basis:[{basis:Y()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Pe]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",Bo,Pe]}],"grid-cols":[{"grid-cols":[Uo]}],"col-start-end":[{col:["auto",{span:["full",Bo,Pe]},Pe]}],"col-start":[{"col-start":te()}],"col-end":[{"col-end":te()}],"grid-rows":[{"grid-rows":[Uo]}],"row-start-end":[{row:["auto",{span:[Bo,Pe]},Pe]}],"row-start":[{"row-start":te()}],"row-end":[{"row-end":te()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Pe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Pe]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal",...V()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...V(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...V(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[A]}],px:[{px:[A]}],py:[{py:[A]}],ps:[{ps:[A]}],pe:[{pe:[A]}],pt:[{pt:[A]}],pr:[{pr:[A]}],pb:[{pb:[A]}],pl:[{pl:[A]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[D]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[D]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Pe,e]}],"min-w":[{"min-w":[Pe,e,"min","max","fit"]}],"max-w":[{"max-w":[Pe,e,"none","full","min","max","fit","prose",{screen:[Qr]},Qr]}],h:[{h:[Pe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Pe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Pe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Pe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Qr,Kr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Dh]}],"font-family":[{font:[Uo]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Pe]}],"line-clamp":[{"line-clamp":["none",Ai,Dh]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",br,Pe]}],"list-image":[{"list-image":["none",Pe]}],"list-style-type":[{list:["none","disc","decimal",Pe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[r]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[r]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...G(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",br,Kr]}],"underline-offset":[{"underline-offset":["auto",br,Pe]}],"text-decoration-color":[{decoration:[r]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:ne()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Pe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Pe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ae(),j1]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",F1]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},U1]}],"bg-color":[{bg:[r]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[b]}],"gradient-via":[{via:[b]}],"gradient-to":[{to:[b]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...G(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:G()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...G()]}],"outline-offset":[{"outline-offset":[br,Pe]}],"outline-w":[{outline:[br,Kr]}],"outline-color":[{outline:[r]}],"ring-w":[{ring:oe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[r]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[br,Kr]}],"ring-offset-color":[{"ring-offset":[r]}],shadow:[{shadow:["","inner","none",Qr,z1]}],"shadow-color":[{shadow:[Uo]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...K(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":K()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[n]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",Qr,Pe]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[p]}],saturate:[{saturate:[C]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Pe]}],duration:[{duration:M()}],ease:[{ease:["linear","in","out","in-out",Pe]}],delay:[{delay:M()}],animate:[{animate:["none","spin","ping","pulse","bounce",Pe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[Bo,Pe]}],"translate-x":[{"translate-x":[F]}],"translate-y":[{"translate-y":[F]}],"skew-x":[{"skew-x":[R]}],"skew-y":[{"skew-y":[R]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Pe]}],accent:[{accent:["auto",r]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Pe]}],"caret-color":[{caret:[r]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":ne()}],"scroll-mx":[{"scroll-mx":ne()}],"scroll-my":[{"scroll-my":ne()}],"scroll-ms":[{"scroll-ms":ne()}],"scroll-me":[{"scroll-me":ne()}],"scroll-mt":[{"scroll-mt":ne()}],"scroll-mr":[{"scroll-mr":ne()}],"scroll-mb":[{"scroll-mb":ne()}],"scroll-ml":[{"scroll-ml":ne()}],"scroll-p":[{"scroll-p":ne()}],"scroll-px":[{"scroll-px":ne()}],"scroll-py":[{"scroll-py":ne()}],"scroll-ps":[{"scroll-ps":ne()}],"scroll-pe":[{"scroll-pe":ne()}],"scroll-pt":[{"scroll-pt":ne()}],"scroll-pr":[{"scroll-pr":ne()}],"scroll-pb":[{"scroll-pb":ne()}],"scroll-pl":[{"scroll-pl":ne()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Pe]}],fill:[{fill:[r,"none"]}],"stroke-w":[{stroke:[br,Kr,Dh]}],stroke:[{stroke:[r,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},q1=T1($1);function Xe(...r){return q1(Gi(r))}const G1=Hw("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function tu({className:r,variant:e,...t}){return g.jsx("div",{className:Xe(G1({variant:e}),r),...t})}const Y1={[Te.PICKED]:"secondary",[Te.QA]:"default",[Te.PRE_DELIVERY]:"default",[Te.IN_DELIVERY]:"warning",[Te.SHIPPING]:"outline",[Te.DELIVERED]:"success",[Te.ISSUE]:"destructive"};function Yw({status:r}){return g.jsx(tu,{variant:Y1[r],children:Zr[r]})}var Wl={exports:{}},Oh={exports:{}},oy;function lt(){return oy||(oy=1,(function(r){function e(t){return t&&t.__esModule?t:{default:t}}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports})(Oh)),Oh.exports}var Vl={exports:{}},$l={exports:{}},Mh={exports:{}},ay;function Xw(){return ay||(ay=1,(function(r){function e(t){"@babel/helpers - typeof";return r.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},r.exports.__esModule=!0,r.exports.default=r.exports,e(t)}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports})(Mh)),Mh.exports}var ql={exports:{}},ly;function $t(){return ly||(ly=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(n,s){if(s.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+s.length+" present")}r.exports=e.default})(ql,ql.exports)),ql.exports}var cy;function X1(){return cy||(cy=1,(function(r,e){var t=lt().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var n=t(Xw()),s=t($t());function o(l){return(0,s.default)(1,arguments),l instanceof Date||(0,n.default)(l)==="object"&&Object.prototype.toString.call(l)==="[object Date]"}r.exports=e.default})($l,$l.exports)),$l.exports}var Gl={exports:{}},uy;function ur(){return uy||(uy=1,(function(r,e){var t=lt().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var n=t(Xw()),s=t($t());function o(l){(0,s.default)(1,arguments);var c=Object.prototype.toString.call(l);return l instanceof Date||(0,n.default)(l)==="object"&&c==="[object Date]"?new Date(l.getTime()):typeof l=="number"||c==="[object Number]"?new Date(l):((typeof l=="string"||c==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}r.exports=e.default})(Gl,Gl.exports)),Gl.exports}var dy;function K1(){return dy||(dy=1,(function(r,e){var t=lt().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var n=t(X1()),s=t(ur()),o=t($t());function l(c){if((0,o.default)(1,arguments),!(0,n.default)(c)&&typeof c!="number")return!1;var u=(0,s.default)(c);return!isNaN(Number(u))}r.exports=e.default})(Vl,Vl.exports)),Vl.exports}var Yl={exports:{}},Xl={exports:{}},Kl={exports:{}},hy;function js(){return hy||(hy=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(n){if(n===null||n===!0||n===!1)return NaN;var s=Number(n);return isNaN(s)?s:s<0?Math.ceil(s):Math.floor(s)}r.exports=e.default})(Kl,Kl.exports)),Kl.exports}var fy;function Q1(){return fy||(fy=1,(function(r,e){var t=lt().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var n=t(js()),s=t(ur()),o=t($t());function l(c,u){(0,o.default)(2,arguments);var h=(0,s.default)(c).getTime(),f=(0,n.default)(u);return new Date(h+f)}r.exports=e.default})(Xl,Xl.exports)),Xl.exports}var py;function J1(){return py||(py=1,(function(r,e){var t=lt().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var n=t(Q1()),s=t($t()),o=t(js());function l(c,u){(0,s.default)(2,arguments);var h=(0,o.default)(u);return(0,n.default)(c,-h)}r.exports=e.default})(Yl,Yl.exports)),Yl.exports}var Ql={exports:{}},Jl={exports:{}},my;function Z1(){return my||(my=1,(function(r,e){var t=lt().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var n=t(ur()),s=t($t()),o=864e5;function l(c){(0,s.default)(1,arguments);var u=(0,n.default)(c),h=u.getTime();u.setUTCMonth(0,1),u.setUTCHours(0,0,0,0);var f=u.getTime(),p=h-f;return Math.floor(p/o)+1}r.exports=e.default})(Jl,Jl.exports)),Jl.exports}var Zl={exports:{}},ec={exports:{}},gy;function ep(){return gy||(gy=1,(function(r,e){var t=lt().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var n=t(ur()),s=t($t());function o(l){(0,s.default)(1,arguments);var c=1,u=(0,n.default)(l),h=u.getUTCDay(),f=(h<c?7:0)+h-c;return u.setUTCDate(u.getUTCDate()-f),u.setUTCHours(0,0,0,0),u}r.exports=e.default})(ec,ec.exports)),ec.exports}var tc={exports:{}},nc={exports:{}},vy;function Kw(){return vy||(vy=1,(function(r,e){var t=lt().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var n=t(ur()),s=t($t()),o=t(ep());function l(c){(0,s.default)(1,arguments);var u=(0,n.default)(c),h=u.getUTCFullYear(),f=new Date(0);f.setUTCFullYear(h+1,0,4),f.setUTCHours(0,0,0,0);var p=(0,o.default)(f),v=new Date(0);v.setUTCFullYear(h,0,4),v.setUTCHours(0,0,0,0);var b=(0,o.default)(v);return u.getTime()>=p.getTime()?h+1:u.getTime()>=b.getTime()?h:h-1}r.exports=e.default})(nc,nc.exports)),nc.exports}var yy;function eT(){return yy||(yy=1,(function(r,e){var t=lt().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var n=t(Kw()),s=t(ep()),o=t($t());function l(c){(0,o.default)(1,arguments);var u=(0,n.default)(c),h=new Date(0);h.setUTCFullYear(u,0,4),h.setUTCHours(0,0,0,0);var f=(0,s.default)(h);return f}r.exports=e.default})(tc,tc.exports)),tc.exports}var wy;function tT(){return wy||(wy=1,(function(r,e){var t=lt().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var n=t(ur()),s=t(ep()),o=t(eT()),l=t($t()),c=6048e5;function u(h){(0,l.default)(1,arguments);var f=(0,n.default)(h),p=(0,s.default)(f).getTime()-(0,o.default)(f).getTime();return Math.round(p/c)+1}r.exports=e.default})(Zl,Zl.exports)),Zl.exports}var rc={exports:{}},sc={exports:{}},zo={},by;function vu(){if(by)return zo;by=1,Object.defineProperty(zo,"__esModule",{value:!0}),zo.getDefaultOptions=e,zo.setDefaultOptions=t;var r={};function e(){return r}function t(n){r=n}return zo}var xy;function tp(){return xy||(xy=1,(function(r,e){var t=lt().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var n=t(ur()),s=t($t()),o=t(js()),l=vu();function c(u,h){var f,p,v,b,_,w,x,E;(0,s.default)(1,arguments);var A=(0,l.getDefaultOptions)(),C=(0,o.default)((f=(p=(v=(b=h?.weekStartsOn)!==null&&b!==void 0?b:h==null||(_=h.locale)===null||_===void 0||(w=_.options)===null||w===void 0?void 0:w.weekStartsOn)!==null&&v!==void 0?v:A.weekStartsOn)!==null&&p!==void 0?p:(x=A.locale)===null||x===void 0||(E=x.options)===null||E===void 0?void 0:E.weekStartsOn)!==null&&f!==void 0?f:0);if(!(C>=0&&C<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var k=(0,n.default)(u),N=k.getUTCDay(),R=(N<C?7:0)+N-C;return k.setUTCDate(k.getUTCDate()-R),k.setUTCHours(0,0,0,0),k}r.exports=e.default})(sc,sc.exports)),sc.exports}var ic={exports:{}},oc={exports:{}},Sy;function Qw(){return Sy||(Sy=1,(function(r,e){var t=lt().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var n=t(ur()),s=t($t()),o=t(tp()),l=t(js()),c=vu();function u(h,f){var p,v,b,_,w,x,E,A;(0,s.default)(1,arguments);var C=(0,n.default)(h),k=C.getUTCFullYear(),N=(0,c.getDefaultOptions)(),R=(0,l.default)((p=(v=(b=(_=f?.firstWeekContainsDate)!==null&&_!==void 0?_:f==null||(w=f.locale)===null||w===void 0||(x=w.options)===null||x===void 0?void 0:x.firstWeekContainsDate)!==null&&b!==void 0?b:N.firstWeekContainsDate)!==null&&v!==void 0?v:(E=N.locale)===null||E===void 0||(A=E.options)===null||A===void 0?void 0:A.firstWeekContainsDate)!==null&&p!==void 0?p:1);if(!(R>=1&&R<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var D=new Date(0);D.setUTCFullYear(k+1,0,R),D.setUTCHours(0,0,0,0);var F=(0,o.default)(D,f),U=new Date(0);U.setUTCFullYear(k,0,R),U.setUTCHours(0,0,0,0);var q=(0,o.default)(U,f);return C.getTime()>=F.getTime()?k+1:C.getTime()>=q.getTime()?k:k-1}r.exports=e.default})(oc,oc.exports)),oc.exports}var _y;function nT(){return _y||(_y=1,(function(r,e){var t=lt().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var n=t(Qw()),s=t($t()),o=t(tp()),l=t(js()),c=vu();function u(h,f){var p,v,b,_,w,x,E,A;(0,s.default)(1,arguments);var C=(0,c.getDefaultOptions)(),k=(0,l.default)((p=(v=(b=(_=f?.firstWeekContainsDate)!==null&&_!==void 0?_:f==null||(w=f.locale)===null||w===void 0||(x=w.options)===null||x===void 0?void 0:x.firstWeekContainsDate)!==null&&b!==void 0?b:C.firstWeekContainsDate)!==null&&v!==void 0?v:(E=C.locale)===null||E===void 0||(A=E.options)===null||A===void 0?void 0:A.firstWeekContainsDate)!==null&&p!==void 0?p:1),N=(0,n.default)(h,f),R=new Date(0);R.setUTCFullYear(N,0,k),R.setUTCHours(0,0,0,0);var D=(0,o.default)(R,f);return D}r.exports=e.default})(ic,ic.exports)),ic.exports}var Ey;function rT(){return Ey||(Ey=1,(function(r,e){var t=lt().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var n=t(ur()),s=t(tp()),o=t(nT()),l=t($t()),c=6048e5;function u(h,f){(0,l.default)(1,arguments);var p=(0,n.default)(h),v=(0,s.default)(p,f).getTime()-(0,o.default)(p,f).getTime();return Math.round(v/c)+1}r.exports=e.default})(rc,rc.exports)),rc.exports}var ac={exports:{}},Ay;function Jw(){return Ay||(Ay=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(n,s){for(var o=n<0?"-":"",l=Math.abs(n).toString();l.length<s;)l="0"+l;return o+l}r.exports=e.default})(ac,ac.exports)),ac.exports}var lc={exports:{}},Cy;function sT(){return Cy||(Cy=1,(function(r,e){var t=lt().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(Jw()),s={y:function(c,u){var h=c.getUTCFullYear(),f=h>0?h:1-h;return(0,n.default)(u==="yy"?f%100:f,u.length)},M:function(c,u){var h=c.getUTCMonth();return u==="M"?String(h+1):(0,n.default)(h+1,2)},d:function(c,u){return(0,n.default)(c.getUTCDate(),u.length)},a:function(c,u){var h=c.getUTCHours()/12>=1?"pm":"am";switch(u){case"a":case"aa":return h.toUpperCase();case"aaa":return h;case"aaaaa":return h[0];default:return h==="am"?"a.m.":"p.m."}},h:function(c,u){return(0,n.default)(c.getUTCHours()%12||12,u.length)},H:function(c,u){return(0,n.default)(c.getUTCHours(),u.length)},m:function(c,u){return(0,n.default)(c.getUTCMinutes(),u.length)},s:function(c,u){return(0,n.default)(c.getUTCSeconds(),u.length)},S:function(c,u){var h=u.length,f=c.getUTCMilliseconds(),p=Math.floor(f*Math.pow(10,h-3));return(0,n.default)(p,u.length)}},o=s;e.default=o,r.exports=e.default})(lc,lc.exports)),lc.exports}var Ty;function iT(){return Ty||(Ty=1,(function(r,e){var t=lt().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(Z1()),s=t(tT()),o=t(Kw()),l=t(rT()),c=t(Qw()),u=t(Jw()),h=t(sT()),f={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},p={G:function(E,A,C){var k=E.getUTCFullYear()>0?1:0;switch(A){case"G":case"GG":case"GGG":return C.era(k,{width:"abbreviated"});case"GGGGG":return C.era(k,{width:"narrow"});default:return C.era(k,{width:"wide"})}},y:function(E,A,C){if(A==="yo"){var k=E.getUTCFullYear(),N=k>0?k:1-k;return C.ordinalNumber(N,{unit:"year"})}return h.default.y(E,A)},Y:function(E,A,C,k){var N=(0,c.default)(E,k),R=N>0?N:1-N;if(A==="YY"){var D=R%100;return(0,u.default)(D,2)}return A==="Yo"?C.ordinalNumber(R,{unit:"year"}):(0,u.default)(R,A.length)},R:function(E,A){var C=(0,o.default)(E);return(0,u.default)(C,A.length)},u:function(E,A){var C=E.getUTCFullYear();return(0,u.default)(C,A.length)},Q:function(E,A,C){var k=Math.ceil((E.getUTCMonth()+1)/3);switch(A){case"Q":return String(k);case"QQ":return(0,u.default)(k,2);case"Qo":return C.ordinalNumber(k,{unit:"quarter"});case"QQQ":return C.quarter(k,{width:"abbreviated",context:"formatting"});case"QQQQQ":return C.quarter(k,{width:"narrow",context:"formatting"});default:return C.quarter(k,{width:"wide",context:"formatting"})}},q:function(E,A,C){var k=Math.ceil((E.getUTCMonth()+1)/3);switch(A){case"q":return String(k);case"qq":return(0,u.default)(k,2);case"qo":return C.ordinalNumber(k,{unit:"quarter"});case"qqq":return C.quarter(k,{width:"abbreviated",context:"standalone"});case"qqqqq":return C.quarter(k,{width:"narrow",context:"standalone"});default:return C.quarter(k,{width:"wide",context:"standalone"})}},M:function(E,A,C){var k=E.getUTCMonth();switch(A){case"M":case"MM":return h.default.M(E,A);case"Mo":return C.ordinalNumber(k+1,{unit:"month"});case"MMM":return C.month(k,{width:"abbreviated",context:"formatting"});case"MMMMM":return C.month(k,{width:"narrow",context:"formatting"});default:return C.month(k,{width:"wide",context:"formatting"})}},L:function(E,A,C){var k=E.getUTCMonth();switch(A){case"L":return String(k+1);case"LL":return(0,u.default)(k+1,2);case"Lo":return C.ordinalNumber(k+1,{unit:"month"});case"LLL":return C.month(k,{width:"abbreviated",context:"standalone"});case"LLLLL":return C.month(k,{width:"narrow",context:"standalone"});default:return C.month(k,{width:"wide",context:"standalone"})}},w:function(E,A,C,k){var N=(0,l.default)(E,k);return A==="wo"?C.ordinalNumber(N,{unit:"week"}):(0,u.default)(N,A.length)},I:function(E,A,C){var k=(0,s.default)(E);return A==="Io"?C.ordinalNumber(k,{unit:"week"}):(0,u.default)(k,A.length)},d:function(E,A,C){return A==="do"?C.ordinalNumber(E.getUTCDate(),{unit:"date"}):h.default.d(E,A)},D:function(E,A,C){var k=(0,n.default)(E);return A==="Do"?C.ordinalNumber(k,{unit:"dayOfYear"}):(0,u.default)(k,A.length)},E:function(E,A,C){var k=E.getUTCDay();switch(A){case"E":case"EE":case"EEE":return C.day(k,{width:"abbreviated",context:"formatting"});case"EEEEE":return C.day(k,{width:"narrow",context:"formatting"});case"EEEEEE":return C.day(k,{width:"short",context:"formatting"});default:return C.day(k,{width:"wide",context:"formatting"})}},e:function(E,A,C,k){var N=E.getUTCDay(),R=(N-k.weekStartsOn+8)%7||7;switch(A){case"e":return String(R);case"ee":return(0,u.default)(R,2);case"eo":return C.ordinalNumber(R,{unit:"day"});case"eee":return C.day(N,{width:"abbreviated",context:"formatting"});case"eeeee":return C.day(N,{width:"narrow",context:"formatting"});case"eeeeee":return C.day(N,{width:"short",context:"formatting"});default:return C.day(N,{width:"wide",context:"formatting"})}},c:function(E,A,C,k){var N=E.getUTCDay(),R=(N-k.weekStartsOn+8)%7||7;switch(A){case"c":return String(R);case"cc":return(0,u.default)(R,A.length);case"co":return C.ordinalNumber(R,{unit:"day"});case"ccc":return C.day(N,{width:"abbreviated",context:"standalone"});case"ccccc":return C.day(N,{width:"narrow",context:"standalone"});case"cccccc":return C.day(N,{width:"short",context:"standalone"});default:return C.day(N,{width:"wide",context:"standalone"})}},i:function(E,A,C){var k=E.getUTCDay(),N=k===0?7:k;switch(A){case"i":return String(N);case"ii":return(0,u.default)(N,A.length);case"io":return C.ordinalNumber(N,{unit:"day"});case"iii":return C.day(k,{width:"abbreviated",context:"formatting"});case"iiiii":return C.day(k,{width:"narrow",context:"formatting"});case"iiiiii":return C.day(k,{width:"short",context:"formatting"});default:return C.day(k,{width:"wide",context:"formatting"})}},a:function(E,A,C){var k=E.getUTCHours(),N=k/12>=1?"pm":"am";switch(A){case"a":case"aa":return C.dayPeriod(N,{width:"abbreviated",context:"formatting"});case"aaa":return C.dayPeriod(N,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return C.dayPeriod(N,{width:"narrow",context:"formatting"});default:return C.dayPeriod(N,{width:"wide",context:"formatting"})}},b:function(E,A,C){var k=E.getUTCHours(),N;switch(k===12?N=f.noon:k===0?N=f.midnight:N=k/12>=1?"pm":"am",A){case"b":case"bb":return C.dayPeriod(N,{width:"abbreviated",context:"formatting"});case"bbb":return C.dayPeriod(N,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return C.dayPeriod(N,{width:"narrow",context:"formatting"});default:return C.dayPeriod(N,{width:"wide",context:"formatting"})}},B:function(E,A,C){var k=E.getUTCHours(),N;switch(k>=17?N=f.evening:k>=12?N=f.afternoon:k>=4?N=f.morning:N=f.night,A){case"B":case"BB":case"BBB":return C.dayPeriod(N,{width:"abbreviated",context:"formatting"});case"BBBBB":return C.dayPeriod(N,{width:"narrow",context:"formatting"});default:return C.dayPeriod(N,{width:"wide",context:"formatting"})}},h:function(E,A,C){if(A==="ho"){var k=E.getUTCHours()%12;return k===0&&(k=12),C.ordinalNumber(k,{unit:"hour"})}return h.default.h(E,A)},H:function(E,A,C){return A==="Ho"?C.ordinalNumber(E.getUTCHours(),{unit:"hour"}):h.default.H(E,A)},K:function(E,A,C){var k=E.getUTCHours()%12;return A==="Ko"?C.ordinalNumber(k,{unit:"hour"}):(0,u.default)(k,A.length)},k:function(E,A,C){var k=E.getUTCHours();return k===0&&(k=24),A==="ko"?C.ordinalNumber(k,{unit:"hour"}):(0,u.default)(k,A.length)},m:function(E,A,C){return A==="mo"?C.ordinalNumber(E.getUTCMinutes(),{unit:"minute"}):h.default.m(E,A)},s:function(E,A,C){return A==="so"?C.ordinalNumber(E.getUTCSeconds(),{unit:"second"}):h.default.s(E,A)},S:function(E,A){return h.default.S(E,A)},X:function(E,A,C,k){var N=k._originalDate||E,R=N.getTimezoneOffset();if(R===0)return"Z";switch(A){case"X":return b(R);case"XXXX":case"XX":return _(R);default:return _(R,":")}},x:function(E,A,C,k){var N=k._originalDate||E,R=N.getTimezoneOffset();switch(A){case"x":return b(R);case"xxxx":case"xx":return _(R);default:return _(R,":")}},O:function(E,A,C,k){var N=k._originalDate||E,R=N.getTimezoneOffset();switch(A){case"O":case"OO":case"OOO":return"GMT"+v(R,":");default:return"GMT"+_(R,":")}},z:function(E,A,C,k){var N=k._originalDate||E,R=N.getTimezoneOffset();switch(A){case"z":case"zz":case"zzz":return"GMT"+v(R,":");default:return"GMT"+_(R,":")}},t:function(E,A,C,k){var N=k._originalDate||E,R=Math.floor(N.getTime()/1e3);return(0,u.default)(R,A.length)},T:function(E,A,C,k){var N=k._originalDate||E,R=N.getTime();return(0,u.default)(R,A.length)}};function v(x,E){var A=x>0?"-":"+",C=Math.abs(x),k=Math.floor(C/60),N=C%60;if(N===0)return A+String(k);var R=E;return A+String(k)+R+(0,u.default)(N,2)}function b(x,E){if(x%60===0){var A=x>0?"-":"+";return A+(0,u.default)(Math.abs(x)/60,2)}return _(x,E)}function _(x,E){var A=E||"",C=x>0?"-":"+",k=Math.abs(x),N=(0,u.default)(Math.floor(k/60),2),R=(0,u.default)(k%60,2);return C+N+A+R}var w=p;e.default=w,r.exports=e.default})(Ql,Ql.exports)),Ql.exports}var cc={exports:{}},ky;function oT(){return ky||(ky=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(u,h){switch(u){case"P":return h.date({width:"short"});case"PP":return h.date({width:"medium"});case"PPP":return h.date({width:"long"});default:return h.date({width:"full"})}},n=function(u,h){switch(u){case"p":return h.time({width:"short"});case"pp":return h.time({width:"medium"});case"ppp":return h.time({width:"long"});default:return h.time({width:"full"})}},s=function(u,h){var f=u.match(/(P+)(p+)?/)||[],p=f[1],v=f[2];if(!v)return t(u,h);var b;switch(p){case"P":b=h.dateTime({width:"short"});break;case"PP":b=h.dateTime({width:"medium"});break;case"PPP":b=h.dateTime({width:"long"});break;default:b=h.dateTime({width:"full"});break}return b.replace("{{date}}",t(p,h)).replace("{{time}}",n(v,h))},o={p:n,P:s},l=o;e.default=l,r.exports=e.default})(cc,cc.exports)),cc.exports}var uc={exports:{}},Py;function Zw(){return Py||(Py=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(n){var s=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return s.setUTCFullYear(n.getFullYear()),n.getTime()-s.getTime()}r.exports=e.default})(uc,uc.exports)),uc.exports}var di={},Ry;function aT(){if(Ry)return di;Ry=1,Object.defineProperty(di,"__esModule",{value:!0}),di.isProtectedDayOfYearToken=t,di.isProtectedWeekYearToken=n,di.throwProtectedError=s;var r=["D","DD"],e=["YY","YYYY"];function t(o){return r.indexOf(o)!==-1}function n(o){return e.indexOf(o)!==-1}function s(o,l,c){if(o==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(l,"`) for formatting years to the input `").concat(c,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(o==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(l,"`) for formatting years to the input `").concat(c,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(o==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(l,"`) for formatting days of the month to the input `").concat(c,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(o==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(l,"`) for formatting days of the month to the input `").concat(c,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}return di}var dc={exports:{}},hc={exports:{}},fc={exports:{}},Ny;function lT(){return Ny||(Ny=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},n=function(l,c,u){var h,f=t[l];return typeof f=="string"?h=f:c===1?h=f.one:h=f.other.replace("{{count}}",c.toString()),u!=null&&u.addSuffix?u.comparison&&u.comparison>0?"in "+h:h+" ago":h},s=n;e.default=s,r.exports=e.default})(fc,fc.exports)),fc.exports}var pc={exports:{}},mc={exports:{}},Dy;function cT(){return Dy||(Dy=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(n){return function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=s.width?String(s.width):n.defaultWidth,l=n.formats[o]||n.formats[n.defaultWidth];return l}}r.exports=e.default})(mc,mc.exports)),mc.exports}var Oy;function uT(){return Oy||(Oy=1,(function(r,e){var t=lt().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(cT()),s={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},o={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},l={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},c={date:(0,n.default)({formats:s,defaultWidth:"full"}),time:(0,n.default)({formats:o,defaultWidth:"full"}),dateTime:(0,n.default)({formats:l,defaultWidth:"full"})},u=c;e.default=u,r.exports=e.default})(pc,pc.exports)),pc.exports}var gc={exports:{}},My;function dT(){return My||(My=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},n=function(l,c,u,h){return t[l]},s=n;e.default=s,r.exports=e.default})(gc,gc.exports)),gc.exports}var vc={exports:{}},yc={exports:{}},Ly;function hT(){return Ly||(Ly=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(n){return function(s,o){var l=o!=null&&o.context?String(o.context):"standalone",c;if(l==="formatting"&&n.formattingValues){var u=n.defaultFormattingWidth||n.defaultWidth,h=o!=null&&o.width?String(o.width):u;c=n.formattingValues[h]||n.formattingValues[u]}else{var f=n.defaultWidth,p=o!=null&&o.width?String(o.width):n.defaultWidth;c=n.values[p]||n.values[f]}var v=n.argumentCallback?n.argumentCallback(s):s;return c[v]}}r.exports=e.default})(yc,yc.exports)),yc.exports}var Iy;function fT(){return Iy||(Iy=1,(function(r,e){var t=lt().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(hT()),s={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},o={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},l={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},c={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},u={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},h={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},f=function(_,w){var x=Number(_),E=x%100;if(E>20||E<10)switch(E%10){case 1:return x+"st";case 2:return x+"nd";case 3:return x+"rd"}return x+"th"},p={ordinalNumber:f,era:(0,n.default)({values:s,defaultWidth:"wide"}),quarter:(0,n.default)({values:o,defaultWidth:"wide",argumentCallback:function(_){return _-1}}),month:(0,n.default)({values:l,defaultWidth:"wide"}),day:(0,n.default)({values:c,defaultWidth:"wide"}),dayPeriod:(0,n.default)({values:u,defaultWidth:"wide",formattingValues:h,defaultFormattingWidth:"wide"})},v=p;e.default=v,r.exports=e.default})(vc,vc.exports)),vc.exports}var wc={exports:{}},bc={exports:{}},Fy;function pT(){return Fy||(Fy=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(o){return function(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=c.width,h=u&&o.matchPatterns[u]||o.matchPatterns[o.defaultMatchWidth],f=l.match(h);if(!f)return null;var p=f[0],v=u&&o.parsePatterns[u]||o.parsePatterns[o.defaultParseWidth],b=Array.isArray(v)?s(v,function(x){return x.test(p)}):n(v,function(x){return x.test(p)}),_;_=o.valueCallback?o.valueCallback(b):b,_=c.valueCallback?c.valueCallback(_):_;var w=l.slice(p.length);return{value:_,rest:w}}}function n(o,l){for(var c in o)if(o.hasOwnProperty(c)&&l(o[c]))return c}function s(o,l){for(var c=0;c<o.length;c++)if(l(o[c]))return c}r.exports=e.default})(bc,bc.exports)),bc.exports}var xc={exports:{}},jy;function mT(){return jy||(jy=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(n){return function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=s.match(n.matchPattern);if(!l)return null;var c=l[0],u=s.match(n.parsePattern);if(!u)return null;var h=n.valueCallback?n.valueCallback(u[0]):u[0];h=o.valueCallback?o.valueCallback(h):h;var f=s.slice(c.length);return{value:h,rest:f}}}r.exports=e.default})(xc,xc.exports)),xc.exports}var By;function gT(){return By||(By=1,(function(r,e){var t=lt().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(pT()),s=t(mT()),o=/^(\d+)(th|st|nd|rd)?/i,l=/\d+/i,c={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},u={any:[/^b/i,/^(a|c)/i]},h={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},f={any:[/1/i,/2/i,/3/i,/4/i]},p={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},v={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},b={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},_={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},w={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},x={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},E={ordinalNumber:(0,s.default)({matchPattern:o,parsePattern:l,valueCallback:function(k){return parseInt(k,10)}}),era:(0,n.default)({matchPatterns:c,defaultMatchWidth:"wide",parsePatterns:u,defaultParseWidth:"any"}),quarter:(0,n.default)({matchPatterns:h,defaultMatchWidth:"wide",parsePatterns:f,defaultParseWidth:"any",valueCallback:function(k){return k+1}}),month:(0,n.default)({matchPatterns:p,defaultMatchWidth:"wide",parsePatterns:v,defaultParseWidth:"any"}),day:(0,n.default)({matchPatterns:b,defaultMatchWidth:"wide",parsePatterns:_,defaultParseWidth:"any"}),dayPeriod:(0,n.default)({matchPatterns:w,defaultMatchWidth:"any",parsePatterns:x,defaultParseWidth:"any"})},A=E;e.default=A,r.exports=e.default})(wc,wc.exports)),wc.exports}var Uy;function vT(){return Uy||(Uy=1,(function(r,e){var t=lt().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(lT()),s=t(uT()),o=t(dT()),l=t(fT()),c=t(gT()),u={code:"en-US",formatDistance:n.default,formatLong:s.default,formatRelative:o.default,localize:l.default,match:c.default,options:{weekStartsOn:0,firstWeekContainsDate:1}},h=u;e.default=h,r.exports=e.default})(hc,hc.exports)),hc.exports}var zy;function yT(){return zy||(zy=1,(function(r,e){var t=lt().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(vT()),s=n.default;e.default=s,r.exports=e.default})(dc,dc.exports)),dc.exports}var Hy;function wT(){return Hy||(Hy=1,(function(r,e){var t=lt().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=C;var n=t(K1()),s=t(J1()),o=t(ur()),l=t(iT()),c=t(oT()),u=t(Zw()),h=aT(),f=t(js()),p=t($t()),v=vu(),b=t(yT()),_=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,w=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,x=/^'([^]*?)'?$/,E=/''/g,A=/[a-zA-Z]/;function C(N,R,D){var F,U,q,Y,ne,oe,te,ae,G,K,V,$,Q,M,H,ie,ce,ye;(0,p.default)(2,arguments);var be=String(R),ge=(0,v.getDefaultOptions)(),X=(F=(U=D?.locale)!==null&&U!==void 0?U:ge.locale)!==null&&F!==void 0?F:b.default,se=(0,f.default)((q=(Y=(ne=(oe=D?.firstWeekContainsDate)!==null&&oe!==void 0?oe:D==null||(te=D.locale)===null||te===void 0||(ae=te.options)===null||ae===void 0?void 0:ae.firstWeekContainsDate)!==null&&ne!==void 0?ne:ge.firstWeekContainsDate)!==null&&Y!==void 0?Y:(G=ge.locale)===null||G===void 0||(K=G.options)===null||K===void 0?void 0:K.firstWeekContainsDate)!==null&&q!==void 0?q:1);if(!(se>=1&&se<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var ue=(0,f.default)((V=($=(Q=(M=D?.weekStartsOn)!==null&&M!==void 0?M:D==null||(H=D.locale)===null||H===void 0||(ie=H.options)===null||ie===void 0?void 0:ie.weekStartsOn)!==null&&Q!==void 0?Q:ge.weekStartsOn)!==null&&$!==void 0?$:(ce=ge.locale)===null||ce===void 0||(ye=ce.options)===null||ye===void 0?void 0:ye.weekStartsOn)!==null&&V!==void 0?V:0);if(!(ue>=0&&ue<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!X.localize)throw new RangeError("locale must contain localize property");if(!X.formatLong)throw new RangeError("locale must contain formatLong property");var et=(0,o.default)(N);if(!(0,n.default)(et))throw new RangeError("Invalid time value");var Gt=(0,u.default)(et),De=(0,s.default)(et,Gt),Be={firstWeekContainsDate:se,weekStartsOn:ue,locale:X,_originalDate:et},Ke=be.match(w).map(function(Le){var yt=Le[0];if(yt==="p"||yt==="P"){var an=c.default[yt];return an(Le,X.formatLong)}return Le}).join("").match(_).map(function(Le){if(Le==="''")return"'";var yt=Le[0];if(yt==="'")return k(Le);var an=l.default[yt];if(an)return!(D!=null&&D.useAdditionalWeekYearTokens)&&(0,h.isProtectedWeekYearToken)(Le)&&(0,h.throwProtectedError)(Le,R,String(N)),!(D!=null&&D.useAdditionalDayOfYearTokens)&&(0,h.isProtectedDayOfYearToken)(Le)&&(0,h.throwProtectedError)(Le,R,String(N)),an(De,Le,X.localize,Be);if(yt.match(A))throw new RangeError("Format string contains an unescaped latin alphabet character `"+yt+"`");return Le}).join("");return Ke}function k(N){var R=N.match(x);return R?R[1].replace(E,"'"):N}r.exports=e.default})(Wl,Wl.exports)),Wl.exports}var bT=wT();const xT=as(bT);function Wy(r,e,t){var n=ET(r,t.timeZone,t.locale);return n.formatToParts?ST(n,e):_T(n,e)}function ST(r,e){for(var t=r.formatToParts(e),n=t.length-1;n>=0;--n)if(t[n].type==="timeZoneName")return t[n].value}function _T(r,e){var t=r.format(e).replace(/\u200E/g,""),n=/ [\w-+ ]+$/.exec(t);return n?n[0].substr(1):""}function ET(r,e,t){if(t&&!t.code)throw new Error("date-fns-tz error: Please set a language code on the locale object imported from date-fns, e.g. `locale.code = 'en-US'`");return new Intl.DateTimeFormat(t?[t.code,"en-US"]:void 0,{timeZone:e,timeZoneName:r})}function AT(r,e){var t=PT(e);return t.formatToParts?TT(t,r):kT(t,r)}var CT={year:0,month:1,day:2,hour:3,minute:4,second:5};function TT(r,e){try{for(var t=r.formatToParts(e),n=[],s=0;s<t.length;s++){var o=CT[t[s].type];o>=0&&(n[o]=parseInt(t[s].value,10))}return n}catch(l){if(l instanceof RangeError)return[NaN];throw l}}function kT(r,e){var t=r.format(e),n=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(t);return[n[3],n[1],n[2],n[4],n[5],n[6]]}var Lh={};function PT(r){if(!Lh[r]){var e=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),t=e==="06/25/2014, 00:00:00"||e==="06/25/2014 00:00:00";Lh[r]=t?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:r,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:r,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return Lh[r]}function eb(r,e,t,n,s,o,l){var c=new Date(0);return c.setUTCFullYear(r,e,t),c.setUTCHours(n,s,o,l),c}var Vy=36e5,RT=6e4,Ih={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function np(r,e,t){var n,s;if(!r||(n=Ih.timezoneZ.exec(r),n))return 0;var o;if(n=Ih.timezoneHH.exec(r),n)return o=parseInt(n[1],10),$y(o)?-(o*Vy):NaN;if(n=Ih.timezoneHHMM.exec(r),n){o=parseInt(n[2],10);var l=parseInt(n[3],10);return $y(o,l)?(s=Math.abs(o)*Vy+l*RT,n[1]==="+"?-s:s):NaN}if(OT(r)){e=new Date(e||Date.now());var c=t?e:NT(e),u=vf(c,r),h=t?u:DT(e,u,r);return-h}return NaN}function NT(r){return eb(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds())}function vf(r,e){var t=AT(r,e),n=eb(t[0],t[1]-1,t[2],t[3]%24,t[4],t[5],0).getTime(),s=r.getTime(),o=s%1e3;return s-=o>=0?o:1e3+o,n-s}function DT(r,e,t){var n=r.getTime(),s=n-e,o=vf(new Date(s),t);if(e===o)return e;s-=o-e;var l=vf(new Date(s),t);return o===l?o:Math.max(o,l)}function $y(r,e){return-23<=r&&r<=23&&(e==null||0<=e&&e<=59)}var qy={};function OT(r){if(qy[r])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:r}),qy[r]=!0,!0}catch{return!1}}var MT=60*1e3,LT={X:function(r,e,t,n){var s=Fh(n.timeZone,r);if(s===0)return"Z";switch(e){case"X":return Gy(s);case"XXXX":case"XX":return vi(s);default:return vi(s,":")}},x:function(r,e,t,n){var s=Fh(n.timeZone,r);switch(e){case"x":return Gy(s);case"xxxx":case"xx":return vi(s);default:return vi(s,":")}},O:function(r,e,t,n){var s=Fh(n.timeZone,r);switch(e){case"O":case"OO":case"OOO":return"GMT"+IT(s,":");default:return"GMT"+vi(s,":")}},z:function(r,e,t,n){switch(e){case"z":case"zz":case"zzz":return Wy("short",r,n);default:return Wy("long",r,n)}}};function Fh(r,e){var t=r?np(r,e,!0)/MT:e.getTimezoneOffset();if(Number.isNaN(t))throw new RangeError("Invalid time zone specified: "+r);return t}function nu(r,e){for(var t=r<0?"-":"",n=Math.abs(r).toString();n.length<e;)n="0"+n;return t+n}function vi(r,e){var t=e||"",n=r>0?"-":"+",s=Math.abs(r),o=nu(Math.floor(s/60),2),l=nu(Math.floor(s%60),2);return n+o+t+l}function Gy(r,e){if(r%60===0){var t=r>0?"-":"+";return t+nu(Math.abs(r)/60,2)}return vi(r,e)}function IT(r,e){var t=r>0?"-":"+",n=Math.abs(r),s=Math.floor(n/60),o=n%60;if(o===0)return t+String(s);var l=e;return t+String(s)+l+nu(o,2)}var FT=js();const jT=as(FT);var BT=Zw();const Yy=as(BT);var UT=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,jh=36e5,Xy=6e4,zT=2,Wt={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:UT};function tb(r,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(r===null)return new Date(NaN);var t=e||{},n=t.additionalDigits==null?zT:jT(t.additionalDigits);if(n!==2&&n!==1&&n!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]")return new Date(r.getTime());if(typeof r=="number"||Object.prototype.toString.call(r)==="[object Number]")return new Date(r);if(!(typeof r=="string"||Object.prototype.toString.call(r)==="[object String]"))return new Date(NaN);var s=HT(r),o=WT(s.date,n),l=o.year,c=o.restDateString,u=VT(c,l);if(isNaN(u))return new Date(NaN);if(u){var h=u.getTime(),f=0,p;if(s.time&&(f=$T(s.time),isNaN(f)))return new Date(NaN);if(s.timeZone||t.timeZone){if(p=np(s.timeZone||t.timeZone,new Date(h+f)),isNaN(p))return new Date(NaN)}else p=Yy(new Date(h+f)),p=Yy(new Date(h+f+p));return new Date(h+f+p)}else return new Date(NaN)}function HT(r){var e={},t=Wt.dateTimePattern.exec(r),n;if(t?(e.date=t[1],n=t[3]):(t=Wt.datePattern.exec(r),t?(e.date=t[1],n=t[2]):(e.date=null,n=r)),n){var s=Wt.timeZone.exec(n);s?(e.time=n.replace(s[1],""),e.timeZone=s[1].trim()):e.time=n}return e}function WT(r,e){var t=Wt.YYY[e],n=Wt.YYYYY[e],s;if(s=Wt.YYYY.exec(r)||n.exec(r),s){var o=s[1];return{year:parseInt(o,10),restDateString:r.slice(o.length)}}if(s=Wt.YY.exec(r)||t.exec(r),s){var l=s[1];return{year:parseInt(l,10)*100,restDateString:r.slice(l.length)}}return{year:null}}function VT(r,e){if(e===null)return null;var t,n,s,o;if(r.length===0)return n=new Date(0),n.setUTCFullYear(e),n;if(t=Wt.MM.exec(r),t)return n=new Date(0),s=parseInt(t[1],10)-1,Qy(e,s)?(n.setUTCFullYear(e,s),n):new Date(NaN);if(t=Wt.DDD.exec(r),t){n=new Date(0);var l=parseInt(t[1],10);return YT(e,l)?(n.setUTCFullYear(e,0,l),n):new Date(NaN)}if(t=Wt.MMDD.exec(r),t){n=new Date(0),s=parseInt(t[1],10)-1;var c=parseInt(t[2],10);return Qy(e,s,c)?(n.setUTCFullYear(e,s,c),n):new Date(NaN)}if(t=Wt.Www.exec(r),t)return o=parseInt(t[1],10)-1,Jy(e,o)?Ky(e,o):new Date(NaN);if(t=Wt.WwwD.exec(r),t){o=parseInt(t[1],10)-1;var u=parseInt(t[2],10)-1;return Jy(e,o,u)?Ky(e,o,u):new Date(NaN)}return null}function $T(r){var e,t,n;if(e=Wt.HH.exec(r),e)return t=parseFloat(e[1].replace(",",".")),Bh(t)?t%24*jh:NaN;if(e=Wt.HHMM.exec(r),e)return t=parseInt(e[1],10),n=parseFloat(e[2].replace(",",".")),Bh(t,n)?t%24*jh+n*Xy:NaN;if(e=Wt.HHMMSS.exec(r),e){t=parseInt(e[1],10),n=parseInt(e[2],10);var s=parseFloat(e[3].replace(",","."));return Bh(t,n,s)?t%24*jh+n*Xy+s*1e3:NaN}return null}function Ky(r,e,t){e=e||0,t=t||0;var n=new Date(0);n.setUTCFullYear(r,0,4);var s=n.getUTCDay()||7,o=e*7+t+1-s;return n.setUTCDate(n.getUTCDate()+o),n}var qT=[31,28,31,30,31,30,31,31,30,31,30,31],GT=[31,29,31,30,31,30,31,31,30,31,30,31];function nb(r){return r%400===0||r%4===0&&r%100!==0}function Qy(r,e,t){if(e<0||e>11)return!1;if(t!=null){if(t<1)return!1;var n=nb(r);if(n&&t>GT[e]||!n&&t>qT[e])return!1}return!0}function YT(r,e){if(e<1)return!1;var t=nb(r);return!(t&&e>366||!t&&e>365)}function Jy(r,e,t){return!(e<0||e>52||t!=null&&(t<0||t>6))}function Bh(r,e,t){return!(r!=null&&(r<0||r>=25)||e!=null&&(e<0||e>=60)||t!=null&&(t<0||t>=60))}var XT=/([xXOz]+)|''|'(''|[^'])+('|$)/g;function KT(r,e,t){var n=String(e),s=t||{},o=n.match(XT);if(o){var l=tb(s.originalDate||r,s);n=o.reduce(function(c,u){if(u[0]==="'")return c;var h=c.indexOf(u),f=c[h-1]==="'",p=c.replace(u,"'"+LT[u[0]](l,u,null,s)+"'");return f?p.substring(0,h-1)+p.substring(h+1):p},n)}return xT(r,n,s)}var Sc={exports:{}},_c={exports:{}},Zy;function QT(){return Zy||(Zy=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(n,s){if(n==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o]);return n}r.exports=e.default})(_c,_c.exports)),_c.exports}var e0;function JT(){return e0||(e0=1,(function(r,e){var t=lt().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var n=t(QT());function s(o){return(0,n.default)({},o)}r.exports=e.default})(Sc,Sc.exports)),Sc.exports}var ZT=JT();const ek=as(ZT);function tk(r,e,t){var n=tb(r,t),s=np(e,n,!0),o=new Date(n.getTime()-s),l=new Date(0);return l.setFullYear(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()),l.setHours(o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds(),o.getUTCMilliseconds()),l}function nk(r,e,t,n){var s=ek(n);return s.timeZone=e,s.originalDate=r,KT(tk(r,e),t,s)}function yi(r,e="MMM d, yyyy HH:mm"){if(!r)return"N/A";try{const t=new Date(r);return nk(t,"America/Chicago",e)}catch(t){return console.error("Error formatting date to Central Time:",t),r}}function rk(r){if(!r.inflow_data)return!0;const e=r.inflow_data.shippingAddress;if(!e)return!0;const t=e.city?.trim();if(!t)return!0;const n=t.toUpperCase();return n==="BRYAN"||n==="COLLEGE STATION"}function rp(r){return r.delivery_location?rk(r)?r.delivery_location:r.inflow_data?.shippingAddress?.city?r.inflow_data.shippingAddress.city.trim():r.delivery_location:"N/A"}const rb=T.forwardRef(({className:r,...e},t)=>g.jsx("div",{className:"relative w-full overflow-auto",children:g.jsx("table",{ref:t,className:Xe("w-full caption-bottom text-sm",r),...e})}));rb.displayName="Table";const sb=T.forwardRef(({className:r,...e},t)=>g.jsx("thead",{ref:t,className:Xe("[&_tr]:border-b",r),...e}));sb.displayName="TableHeader";const ib=T.forwardRef(({className:r,...e},t)=>g.jsx("tbody",{ref:t,className:Xe("[&_tr:last-child]:border-0",r),...e}));ib.displayName="TableBody";const sk=T.forwardRef(({className:r,...e},t)=>g.jsx("tfoot",{ref:t,className:Xe("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...e}));sk.displayName="TableFooter";const yf=T.forwardRef(({className:r,...e},t)=>g.jsx("tr",{ref:t,className:Xe("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...e}));yf.displayName="TableRow";const wi=T.forwardRef(({className:r,...e},t)=>g.jsx("th",{ref:t,className:Xe("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...e}));wi.displayName="TableHead";const bi=T.forwardRef(({className:r,...e},t)=>g.jsx("td",{ref:t,className:Xe("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...e}));bi.displayName="TableCell";const ik=T.forwardRef(({className:r,...e},t)=>g.jsx("caption",{ref:t,className:Xe("mt-4 text-sm text-muted-foreground",r),...e}));ik.displayName="TableCaption";function t0(r,e){if(typeof r=="function")return r(e);r!=null&&(r.current=e)}function ob(...r){return e=>{let t=!1;const n=r.map(s=>{const o=t0(s,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let s=0;s<n.length;s++){const o=n[s];typeof o=="function"?o():t0(r[s],null)}}}}function ar(...r){return T.useCallback(ob(...r),r)}function oa(r){const e=ak(r),t=T.forwardRef((n,s)=>{const{children:o,...l}=n,c=T.Children.toArray(o),u=c.find(ck);if(u){const h=u.props.children,f=c.map(p=>p===u?T.Children.count(h)>1?T.Children.only(null):T.isValidElement(h)?h.props.children:null:p);return g.jsx(e,{...l,ref:s,children:T.isValidElement(h)?T.cloneElement(h,void 0,f):null})}return g.jsx(e,{...l,ref:s,children:o})});return t.displayName=`${r}.Slot`,t}var ok=oa("Slot");function ak(r){const e=T.forwardRef((t,n)=>{const{children:s,...o}=t;if(T.isValidElement(s)){const l=dk(s),c=uk(o,s.props);return s.type!==T.Fragment&&(c.ref=n?ob(n,l):l),T.cloneElement(s,c)}return T.Children.count(s)>1?T.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var lk=Symbol("radix.slottable");function ck(r){return T.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===lk}function uk(r,e){const t={...e};for(const n in e){const s=r[n],o=e[n];/^on[A-Z]/.test(n)?s&&o?t[n]=(...c)=>{const u=o(...c);return s(...c),u}:s&&(t[n]=s):n==="style"?t[n]={...s,...o}:n==="className"&&(t[n]=[s,o].filter(Boolean).join(" "))}return{...r,...t}}function dk(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}const hk=Hw("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),xt=T.forwardRef(({className:r,variant:e,size:t,asChild:n=!1,...s},o)=>{const l=n?ok:"button";return g.jsx(l,{className:Xe(hk({variant:e,size:t,className:r})),ref:o,...s})});xt.displayName="Button";function ab({orders:r,onViewDetail:e}){return r.length===0?g.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"No orders found"}):g.jsxs(rb,{children:[g.jsx(sb,{children:g.jsxs(yf,{children:[g.jsx(wi,{children:"Order ID"}),g.jsx(wi,{children:"Recipient"}),g.jsx(wi,{children:"Location"}),g.jsx(wi,{children:"Order Date"}),g.jsx(wi,{children:"Status"})]})}),g.jsx(ib,{children:r.map(t=>g.jsxs(yf,{children:[g.jsx(bi,{children:g.jsx(xt,{variant:"link",onClick:()=>e(t.id),className:"p-0 h-auto font-normal",children:t.inflow_order_id})}),g.jsx(bi,{children:t.recipient_name||"N/A"}),g.jsx(bi,{children:rp(t)}),g.jsx(bi,{children:yi(t.created_at,"MMM d, yyyy")}),g.jsx(bi,{children:g.jsx(Yw,{status:t.status})})]},t.id))})]})}function fk({status:r,onStatusChange:e,search:t,onSearchChange:n}){const s=l=>l===null&&r===null?!0:Array.isArray(l)&&Array.isArray(r)?l.length===r.length&&l.every(c=>r.includes(c)):l===r,o=[{label:"All",value:null},{label:"Picked + QA",value:[Te.PICKED,Te.QA]},{label:Zr[Te.PRE_DELIVERY],value:Te.PRE_DELIVERY},{label:Zr[Te.IN_DELIVERY],value:Te.IN_DELIVERY},{label:Zr[Te.SHIPPING],value:Te.SHIPPING},{label:Zr[Te.DELIVERED],value:Te.DELIVERED},{label:Zr[Te.ISSUE],value:Te.ISSUE}];return g.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:items-end sm:justify-between",children:[g.jsx("div",{className:"flex gap-1 border-b",children:o.map(l=>g.jsx("button",{onClick:()=>e(l.value),className:`px-3 py-2 text-sm border-b-2 -mb-px transition-colors ${s(l.value)?"border-primary text-primary font-medium":"border-transparent text-muted-foreground hover:text-foreground"}`,children:l.label},l.label))}),g.jsx("div",{className:"w-full sm:w-auto sm:min-w-[300px]",children:g.jsx("input",{type:"text",placeholder:"Search orders...",value:t,onChange:l=>n(l.target.value),className:"w-full px-3 py-2 text-sm border rounded-md focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent"})})]})}function lb({currentStatus:r,newStatus:e,onConfirm:t,onCancel:n,requireReason:s=!1}){const[o,l]=T.useState(""),c=u=>{if(u.preventDefault(),s&&!o.trim()){alert("Reason is required");return}t(o||void 0)};return g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[g.jsx("h2",{className:"text-xl font-bold mb-4",children:"Change Status"}),g.jsxs("p",{className:"mb-4",children:["Change status from ",g.jsx("strong",{children:Zr[r]})," to ",g.jsx("strong",{children:Zr[e]})]}),g.jsxs("form",{onSubmit:c,children:[s&&g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{className:"block text-sm font-medium mb-2",children:"Reason *"}),g.jsx("textarea",{value:o,onChange:u=>l(u.target.value),className:"w-full border rounded p-2",rows:3,required:!0,placeholder:"Enter reason for this status change..."})]}),g.jsxs("div",{className:"flex gap-2 justify-end",children:[g.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 border rounded hover:bg-gray-100",children:"Cancel"}),g.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Confirm"})]})]})]})})}const rr=T.forwardRef(({className:r,...e},t)=>g.jsx("div",{ref:t,className:Xe("rounded-lg border bg-card text-card-foreground shadow-sm",r),...e}));rr.displayName="Card";const Er=T.forwardRef(({className:r,...e},t)=>g.jsx("div",{ref:t,className:Xe("flex flex-col space-y-1.5 p-6",r),...e}));Er.displayName="CardHeader";const Ar=T.forwardRef(({className:r,...e},t)=>g.jsx("h3",{ref:t,className:Xe("text-2xl font-semibold leading-none tracking-tight",r),...e}));Ar.displayName="CardTitle";const cb=T.forwardRef(({className:r,...e},t)=>g.jsx("p",{ref:t,className:Xe("text-sm text-muted-foreground",r),...e}));cb.displayName="CardDescription";const sr=T.forwardRef(({className:r,...e},t)=>g.jsx("div",{ref:t,className:Xe("p-6 pt-0",r),...e}));sr.displayName="CardContent";const pk=T.forwardRef(({className:r,...e},t)=>g.jsx("div",{ref:t,className:Xe("flex items-center p-6 pt-0",r),...e}));pk.displayName="CardFooter";function mk(){const[r,e]=T.useState([]),[t,n]=T.useState(!0),[s,o]=T.useState([Te.PICKED,Te.QA]),[l,c]=T.useState(""),[u,h]=T.useState(null),f=cr();T.useEffect(()=>{p()},[s,l]);const p=async()=>{n(!0);try{if(Array.isArray(s)){const w=s.map(A=>it.getOrders({status:A,search:l||void 0})),E=(await Promise.all(w)).flat().sort((A,C)=>new Date(C.updated_at).getTime()-new Date(A.updated_at).getTime());e(E)}else{const w=await it.getOrders({status:s||void 0,search:l||void 0});e(w)}}catch(w){console.error("Failed to load orders:",w)}finally{n(!1)}},v=(w,x,E)=>{x===Te.ISSUE&&E===void 0?h({orderId:w,newStatus:x,requireReason:!0}):b(w,x,E)},b=async(w,x,E)=>{try{await it.updateOrderStatus(w,{status:x,reason:E}),h(null),p()}catch(A){console.error("Failed to update status:",A),alert("Failed to update order status")}},_=w=>{f(`/orders/${w}`)};return t?g.jsx("div",{className:"flex items-center justify-center min-h-screen",children:g.jsx("div",{className:"text-lg",children:"Loading..."})}):g.jsxs("div",{className:"container mx-auto py-4 space-y-4",children:[g.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Orders"}),g.jsxs(rr,{children:[g.jsx("div",{className:"p-6 pb-4",children:g.jsx(fk,{status:s,onStatusChange:o,search:l,onSearchChange:c})}),g.jsx(sr,{children:g.jsx(ab,{orders:r,onStatusChange:v,onViewDetail:_})})]}),u&&g.jsx(lb,{currentStatus:r.find(w=>w.id===u.orderId)?.status||Te.PRE_DELIVERY,newStatus:u.newStatus,requireReason:u.requireReason,onConfirm:w=>b(u.orderId,u.newStatus,w),onCancel:()=>h(null)})]})}function gk({order:r,auditLogs:e,notifications:t,onRetryNotification:n,onTagOrder:s,onGeneratePicklist:o}){const l=t[0],c=()=>{const u=window.prompt("Enter tag IDs (comma-separated)","");if(u===null)return;const h=u.split(",").map(f=>f.trim()).filter(Boolean);s(h)};return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Order ",r.inflow_order_id]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"font-medium",children:"Status:"}),g.jsx("div",{className:"mt-1",children:g.jsx(Yw,{status:r.status})})]}),g.jsxs("div",{children:[g.jsx("label",{className:"font-medium",children:"Recipient:"}),g.jsx("p",{children:r.recipient_name||"N/A"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"font-medium",children:"Contact:"}),g.jsx("p",{children:r.recipient_contact||"N/A"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"font-medium",children:"Location:"}),g.jsx("p",{children:r.delivery_location||"N/A"}),r.inflow_data?.shippingAddress&&g.jsx("p",{className:"text-sm text-gray-500 mt-1",children:[r.inflow_data.shippingAddress.address1,r.inflow_data.shippingAddress.address2,r.inflow_data.shippingAddress.city,r.inflow_data.shippingAddress.state,r.inflow_data.shippingAddress.postalCode].filter(Boolean).join(", ")})]}),g.jsxs("div",{children:[g.jsx("label",{className:"font-medium",children:"PO Number:"}),g.jsx("p",{children:r.po_number||"N/A"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"font-medium",children:"Deliverer:"}),g.jsx("p",{children:r.assigned_deliverer||"Unassigned"})]}),r.issue_reason&&g.jsxs("div",{className:"col-span-2",children:[g.jsx("label",{className:"font-medium",children:"Issue Reason:"}),g.jsx("p",{className:"text-red-600",children:r.issue_reason})]})]}),r.status===Te.IN_DELIVERY&&g.jsx("div",{className:"mt-4",children:g.jsx(rn,{to:`/document-signing?orderId=${r.id}`,className:"inline-flex items-center px-4 py-2 bg-[#800000] text-white rounded hover:bg-[#660000]",children:"Open Document Signing"})})]}),g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsx("h3",{className:"text-xl font-bold mb-4",children:"Preparation Checklist"}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex items-center justify-between gap-4",children:[g.jsxs("div",{children:[g.jsx("p",{className:"font-medium",children:"Asset Tagging"}),g.jsx("p",{className:"text-sm text-gray-600",children:r.tagged_at?`Completed ${yi(r.tagged_at)}`:"Pending"})]}),g.jsx("button",{onClick:c,disabled:!!r.tagged_at,className:"px-3 py-2 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 disabled:bg-gray-300",children:r.tagged_at?"Tagged":"Mark Tagged"})]}),g.jsxs("div",{className:"flex items-center justify-between gap-4",children:[g.jsxs("div",{children:[g.jsx("p",{className:"font-medium",children:"Generate Picklist & Email Order Details"}),g.jsx("p",{className:"text-sm text-gray-600",children:r.picklist_generated_at?`Generated ${yi(r.picklist_generated_at)}`:"Pending"}),r.picklist_generated_at&&g.jsx("p",{className:"text-xs text-green-600",children:" Order Details emailed to recipient"}),r.picklist_path&&g.jsx("a",{className:"text-sm text-blue-600 hover:underline",href:`/api/orders/${r.id}/picklist`,target:"_blank",rel:"noreferrer",children:"Download picklist"})]}),g.jsx("button",{onClick:o,disabled:!r.tagged_at||!!r.picklist_generated_at,className:"px-3 py-2 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 disabled:bg-gray-300",children:r.picklist_generated_at?"Generated":"Generate & Email"})]}),g.jsxs("div",{className:"flex items-center justify-between gap-4",children:[g.jsxs("div",{children:[g.jsx("p",{className:"font-medium",children:"QA Checklist"}),g.jsx("p",{className:"text-sm text-gray-600",children:r.qa_completed_at?`Completed ${yi(r.qa_completed_at)}${r.qa_completed_by?` by ${r.qa_completed_by}`:""}`:"Pending"}),r.qa_method&&g.jsxs("p",{className:"text-xs text-gray-500",children:["Method: ",r.qa_method]})]}),r.qa_completed_at?g.jsx("span",{className:"px-3 py-2 text-sm bg-green-100 text-green-800 rounded",children:"QA Completed"}):g.jsx("span",{className:"px-3 py-2 text-sm bg-gray-100 text-gray-600 rounded",children:"QA Pending"})]})]})]}),l&&g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsx("h3",{className:"text-xl font-bold mb-4",children:"Teams Notification"}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("p",{children:[g.jsx("strong",{children:"Status:"})," ",g.jsx("span",{className:l.status==="sent"?"text-green-600":l.status==="failed"?"text-red-600":"text-yellow-600",children:l.status})]}),l.sent_at&&g.jsxs("p",{children:[g.jsx("strong",{children:"Sent at:"})," ",yi(l.sent_at)]}),l.error_message&&g.jsxs("div",{children:[g.jsxs("p",{className:"text-red-600",children:[g.jsx("strong",{children:"Error:"})," ",l.error_message]}),g.jsx("button",{onClick:n,className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Retry Notification"})]})]})]}),g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsx("h3",{className:"text-xl font-bold mb-4",children:"Audit Timeline"}),g.jsx("div",{className:"space-y-2",children:e.map(u=>g.jsxs("div",{className:"border-l-2 border-gray-300 pl-4 py-2",children:[g.jsxs("p",{className:"font-medium",children:[u.from_status||"Created","  ",u.to_status]}),g.jsxs("p",{className:"text-sm text-gray-600",children:[yi(u.timestamp),u.changed_by&&` by ${u.changed_by}`]}),u.reason&&g.jsx("p",{className:"text-sm text-gray-500 mt-1",children:u.reason})]},u.id))})]}),r.inflow_data&&g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsx("h3",{className:"text-xl font-bold mb-4",children:"Inflow Data"}),g.jsx("pre",{className:"bg-gray-100 p-4 rounded overflow-auto text-sm",children:JSON.stringify(r.inflow_data,null,2)})]})]})}function vk(){const{orderId:r}=dw(),e=cr(),[t,n]=T.useState(null),[s,o]=T.useState([]),[l,c]=T.useState([]),[u,h]=T.useState(!0),[f,p]=T.useState(null);T.useEffect(()=>{r&&v()},[r]);const v=async()=>{if(r){h(!0);try{const[A,C]=await Promise.all([it.getOrder(r),it.getOrderAudit(r)]);n(A),o(C),c(A.teams_notifications||[])}catch(A){console.error("Failed to load order:",A)}finally{h(!1)}}},b=(A,C)=>{if(!t)return;A===Te.ISSUE&&C===void 0?p({newStatus:A,requireReason:!0}):_(A,C)},_=async(A,C)=>{if(t)try{await it.updateOrderStatus(t.id,{status:A,reason:C}),p(null),v()}catch(k){console.error("Failed to update status:",k),alert("Failed to update order status")}},w=async()=>{if(t)try{await it.retryNotification(t.id),v()}catch(A){console.error("Failed to retry notification:",A),alert("Failed to retry notification")}},x=async A=>{if(t)try{await it.tagOrder(t.id,{tag_ids:A}),v()}catch(C){console.error("Failed to tag order:",C),alert("Failed to tag order")}},E=async()=>{if(t)try{await it.generatePicklist(t.id),v()}catch(A){console.error("Failed to generate picklist:",A),alert("Failed to generate picklist")}};return u?g.jsx("div",{className:"p-4",children:"Loading..."}):t?g.jsxs("div",{className:"p-4",children:[g.jsx("button",{onClick:()=>e("/"),className:"mb-4 px-4 py-2 border rounded hover:bg-gray-100",children:" Back to Orders"}),g.jsx(gk,{order:t,auditLogs:s,notifications:l,onStatusChange:b,onRetryNotification:w,onTagOrder:x,onGeneratePicklist:E}),f&&g.jsx(lb,{currentStatus:t.status,newStatus:f.newStatus,requireReason:f.requireReason,onConfirm:A=>_(f.newStatus,A),onCancel:()=>p(null)})]}):g.jsx("div",{className:"p-4",children:"Order not found"})}function Dt(r,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(r?.(s),t===!1||!s.defaultPrevented)return e?.(s)}}function yk(r,e){const t=T.createContext(e),n=o=>{const{children:l,...c}=o,u=T.useMemo(()=>c,Object.values(c));return g.jsx(t.Provider,{value:u,children:l})};n.displayName=r+"Provider";function s(o){const l=T.useContext(t);if(l)return l;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${r}\``)}return[n,s]}function yu(r,e=[]){let t=[];function n(o,l){const c=T.createContext(l),u=t.length;t=[...t,l];const h=p=>{const{scope:v,children:b,..._}=p,w=v?.[r]?.[u]||c,x=T.useMemo(()=>_,Object.values(_));return g.jsx(w.Provider,{value:x,children:b})};h.displayName=o+"Provider";function f(p,v){const b=v?.[r]?.[u]||c,_=T.useContext(b);if(_)return _;if(l!==void 0)return l;throw new Error(`\`${p}\` must be used within \`${o}\``)}return[h,f]}const s=()=>{const o=t.map(l=>T.createContext(l));return function(c){const u=c?.[r]||o;return T.useMemo(()=>({[`__scope${r}`]:{...c,[r]:u}}),[c,u])}};return s.scopeName=r,[n,wk(s,...e)]}function wk(...r){const e=r[0];if(r.length===1)return e;const t=()=>{const n=r.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const l=n.reduce((c,{useScope:u,scopeName:h})=>{const p=u(o)[`__scope${h}`];return{...c,...p}},{});return T.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return t.scopeName=e.scopeName,t}function bk(r){const e=r+"CollectionProvider",[t,n]=yu(e),[s,o]=t(e,{collectionRef:{current:null},itemMap:new Map}),l=w=>{const{scope:x,children:E}=w,A=_r.useRef(null),C=_r.useRef(new Map).current;return g.jsx(s,{scope:x,itemMap:C,collectionRef:A,children:E})};l.displayName=e;const c=r+"CollectionSlot",u=oa(c),h=_r.forwardRef((w,x)=>{const{scope:E,children:A}=w,C=o(c,E),k=ar(x,C.collectionRef);return g.jsx(u,{ref:k,children:A})});h.displayName=c;const f=r+"CollectionItemSlot",p="data-radix-collection-item",v=oa(f),b=_r.forwardRef((w,x)=>{const{scope:E,children:A,...C}=w,k=_r.useRef(null),N=ar(x,k),R=o(f,E);return _r.useEffect(()=>(R.itemMap.set(k,{ref:k,...C}),()=>{R.itemMap.delete(k)})),g.jsx(v,{[p]:"",ref:N,children:A})});b.displayName=f;function _(w){const x=o(r+"CollectionConsumer",w);return _r.useCallback(()=>{const A=x.collectionRef.current;if(!A)return[];const C=Array.from(A.querySelectorAll(`[${p}]`));return Array.from(x.itemMap.values()).sort((R,D)=>C.indexOf(R.ref.current)-C.indexOf(D.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:l,Slot:h,ItemSlot:b},_,n]}var aa=globalThis?.document?T.useLayoutEffect:()=>{},xk=Wf[" useId ".trim().toString()]||(()=>{}),Sk=0;function Zo(r){const[e,t]=T.useState(xk());return aa(()=>{t(n=>n??String(Sk++))},[r]),e?`radix-${e}`:""}var _k=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],qt=_k.reduce((r,e)=>{const t=oa(`Primitive.${e}`),n=T.forwardRef((s,o)=>{const{asChild:l,...c}=s,u=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),g.jsx(u,{...c,ref:o})});return n.displayName=`Primitive.${e}`,{...r,[e]:n}},{});function Ek(r,e){r&&iw.flushSync(()=>r.dispatchEvent(e))}function Bi(r){const e=T.useRef(r);return T.useEffect(()=>{e.current=r}),T.useMemo(()=>(...t)=>e.current?.(...t),[])}var Ak=Wf[" useInsertionEffect ".trim().toString()]||aa;function sp({prop:r,defaultProp:e,onChange:t=()=>{},caller:n}){const[s,o,l]=Ck({defaultProp:e,onChange:t}),c=r!==void 0,u=c?r:s;{const f=T.useRef(r!==void 0);T.useEffect(()=>{const p=f.current;p!==c&&console.warn(`${n} is changing from ${p?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=c},[c,n])}const h=T.useCallback(f=>{if(c){const p=Tk(f)?f(r):f;p!==r&&l.current?.(p)}else o(f)},[c,r,o,l]);return[u,h]}function Ck({defaultProp:r,onChange:e}){const[t,n]=T.useState(r),s=T.useRef(t),o=T.useRef(e);return Ak(()=>{o.current=e},[e]),T.useEffect(()=>{s.current!==t&&(o.current?.(t),s.current=t)},[t,s]),[t,n,o]}function Tk(r){return typeof r=="function"}var kk=T.createContext(void 0);function ub(r){const e=T.useContext(kk);return r||e||"ltr"}var Uh="rovingFocusGroup.onEntryFocus",Pk={bubbles:!1,cancelable:!0},wa="RovingFocusGroup",[wf,db,Rk]=bk(wa),[Nk,hb]=yu(wa,[Rk]),[Dk,Ok]=Nk(wa),fb=T.forwardRef((r,e)=>g.jsx(wf.Provider,{scope:r.__scopeRovingFocusGroup,children:g.jsx(wf.Slot,{scope:r.__scopeRovingFocusGroup,children:g.jsx(Mk,{...r,ref:e})})}));fb.displayName=wa;var Mk=T.forwardRef((r,e)=>{const{__scopeRovingFocusGroup:t,orientation:n,loop:s=!1,dir:o,currentTabStopId:l,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:u,onEntryFocus:h,preventScrollOnEntryFocus:f=!1,...p}=r,v=T.useRef(null),b=ar(e,v),_=ub(o),[w,x]=sp({prop:l,defaultProp:c??null,onChange:u,caller:wa}),[E,A]=T.useState(!1),C=Bi(h),k=db(t),N=T.useRef(!1),[R,D]=T.useState(0);return T.useEffect(()=>{const F=v.current;if(F)return F.addEventListener(Uh,C),()=>F.removeEventListener(Uh,C)},[C]),g.jsx(Dk,{scope:t,orientation:n,dir:_,loop:s,currentTabStopId:w,onItemFocus:T.useCallback(F=>x(F),[x]),onItemShiftTab:T.useCallback(()=>A(!0),[]),onFocusableItemAdd:T.useCallback(()=>D(F=>F+1),[]),onFocusableItemRemove:T.useCallback(()=>D(F=>F-1),[]),children:g.jsx(qt.div,{tabIndex:E||R===0?-1:0,"data-orientation":n,...p,ref:b,style:{outline:"none",...r.style},onMouseDown:Dt(r.onMouseDown,()=>{N.current=!0}),onFocus:Dt(r.onFocus,F=>{const U=!N.current;if(F.target===F.currentTarget&&U&&!E){const q=new CustomEvent(Uh,Pk);if(F.currentTarget.dispatchEvent(q),!q.defaultPrevented){const Y=k().filter(G=>G.focusable),ne=Y.find(G=>G.active),oe=Y.find(G=>G.id===w),ae=[ne,oe,...Y].filter(Boolean).map(G=>G.ref.current);gb(ae,f)}}N.current=!1}),onBlur:Dt(r.onBlur,()=>A(!1))})})}),pb="RovingFocusGroupItem",mb=T.forwardRef((r,e)=>{const{__scopeRovingFocusGroup:t,focusable:n=!0,active:s=!1,tabStopId:o,children:l,...c}=r,u=Zo(),h=o||u,f=Ok(pb,t),p=f.currentTabStopId===h,v=db(t),{onFocusableItemAdd:b,onFocusableItemRemove:_,currentTabStopId:w}=f;return T.useEffect(()=>{if(n)return b(),()=>_()},[n,b,_]),g.jsx(wf.ItemSlot,{scope:t,id:h,focusable:n,active:s,children:g.jsx(qt.span,{tabIndex:p?0:-1,"data-orientation":f.orientation,...c,ref:e,onMouseDown:Dt(r.onMouseDown,x=>{n?f.onItemFocus(h):x.preventDefault()}),onFocus:Dt(r.onFocus,()=>f.onItemFocus(h)),onKeyDown:Dt(r.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){f.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const E=Fk(x,f.orientation,f.dir);if(E!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let C=v().filter(k=>k.focusable).map(k=>k.ref.current);if(E==="last")C.reverse();else if(E==="prev"||E==="next"){E==="prev"&&C.reverse();const k=C.indexOf(x.currentTarget);C=f.loop?jk(C,k+1):C.slice(k+1)}setTimeout(()=>gb(C))}}),children:typeof l=="function"?l({isCurrentTabStop:p,hasTabStop:w!=null}):l})})});mb.displayName=pb;var Lk={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Ik(r,e){return e!=="rtl"?r:r==="ArrowLeft"?"ArrowRight":r==="ArrowRight"?"ArrowLeft":r}function Fk(r,e,t){const n=Ik(r.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return Lk[n]}function gb(r,e=!1){const t=document.activeElement;for(const n of r)if(n===t||(n.focus({preventScroll:e}),document.activeElement!==t))return}function jk(r,e){return r.map((t,n)=>r[(e+n)%r.length])}var Bk=fb,Uk=mb;function zk(r,e){return T.useReducer((t,n)=>e[t][n]??t,r)}var ba=r=>{const{present:e,children:t}=r,n=Hk(e),s=typeof t=="function"?t({present:n.isPresent}):T.Children.only(t),o=ar(n.ref,Wk(s));return typeof t=="function"||n.isPresent?T.cloneElement(s,{ref:o}):null};ba.displayName="Presence";function Hk(r){const[e,t]=T.useState(),n=T.useRef(null),s=T.useRef(r),o=T.useRef("none"),l=r?"mounted":"unmounted",[c,u]=zk(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return T.useEffect(()=>{const h=Ec(n.current);o.current=c==="mounted"?h:"none"},[c]),aa(()=>{const h=n.current,f=s.current;if(f!==r){const v=o.current,b=Ec(h);r?u("MOUNT"):b==="none"||h?.display==="none"?u("UNMOUNT"):u(f&&v!==b?"ANIMATION_OUT":"UNMOUNT"),s.current=r}},[r,u]),aa(()=>{if(e){let h;const f=e.ownerDocument.defaultView??window,p=b=>{const w=Ec(n.current).includes(CSS.escape(b.animationName));if(b.target===e&&w&&(u("ANIMATION_END"),!s.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",h=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},v=b=>{b.target===e&&(o.current=Ec(n.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{f.clearTimeout(h),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:T.useCallback(h=>{n.current=h?getComputedStyle(h):null,t(h)},[])}}function Ec(r){return r?.animationName||"none"}function Wk(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}var wu="Tabs",[Vk]=yu(wu,[hb]),vb=hb(),[$k,ip]=Vk(wu),yb=T.forwardRef((r,e)=>{const{__scopeTabs:t,value:n,onValueChange:s,defaultValue:o,orientation:l="horizontal",dir:c,activationMode:u="automatic",...h}=r,f=ub(c),[p,v]=sp({prop:n,onChange:s,defaultProp:o??"",caller:wu});return g.jsx($k,{scope:t,baseId:Zo(),value:p,onValueChange:v,orientation:l,dir:f,activationMode:u,children:g.jsx(qt.div,{dir:f,"data-orientation":l,...h,ref:e})})});yb.displayName=wu;var wb="TabsList",bb=T.forwardRef((r,e)=>{const{__scopeTabs:t,loop:n=!0,...s}=r,o=ip(wb,t),l=vb(t);return g.jsx(Bk,{asChild:!0,...l,orientation:o.orientation,dir:o.dir,loop:n,children:g.jsx(qt.div,{role:"tablist","aria-orientation":o.orientation,...s,ref:e})})});bb.displayName=wb;var xb="TabsTrigger",Sb=T.forwardRef((r,e)=>{const{__scopeTabs:t,value:n,disabled:s=!1,...o}=r,l=ip(xb,t),c=vb(t),u=Ab(l.baseId,n),h=Cb(l.baseId,n),f=n===l.value;return g.jsx(Uk,{asChild:!0,...c,focusable:!s,active:f,children:g.jsx(qt.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":h,"data-state":f?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:u,...o,ref:e,onMouseDown:Dt(r.onMouseDown,p=>{!s&&p.button===0&&p.ctrlKey===!1?l.onValueChange(n):p.preventDefault()}),onKeyDown:Dt(r.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&l.onValueChange(n)}),onFocus:Dt(r.onFocus,()=>{const p=l.activationMode!=="manual";!f&&!s&&p&&l.onValueChange(n)})})})});Sb.displayName=xb;var _b="TabsContent",Eb=T.forwardRef((r,e)=>{const{__scopeTabs:t,value:n,forceMount:s,children:o,...l}=r,c=ip(_b,t),u=Ab(c.baseId,n),h=Cb(c.baseId,n),f=n===c.value,p=T.useRef(f);return T.useEffect(()=>{const v=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(v)},[]),g.jsx(ba,{present:s||f,children:({present:v})=>g.jsx(qt.div,{"data-state":f?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":u,hidden:!v,id:h,tabIndex:0,...l,ref:e,style:{...r.style,animationDuration:p.current?"0s":void 0},children:v&&o})})});Eb.displayName=_b;function Ab(r,e){return`${r}-trigger-${e}`}function Cb(r,e){return`${r}-content-${e}`}var qk=yb,Tb=bb,kb=Sb,Pb=Eb;const Gk=qk,Rb=T.forwardRef(({className:r,...e},t)=>g.jsx(Tb,{ref:t,className:Xe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...e}));Rb.displayName=Tb.displayName;const Go=T.forwardRef(({className:r,...e},t)=>g.jsx(kb,{ref:t,className:Xe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...e}));Go.displayName=kb.displayName;const Yo=T.forwardRef(({className:r,...e},t)=>g.jsx(Pb,{ref:t,className:Xe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...e}));Yo.displayName=Pb.displayName;const lr=Object.create(null);lr.open="0";lr.close="1";lr.ping="2";lr.pong="3";lr.message="4";lr.upgrade="5";lr.noop="6";const qc=Object.create(null);Object.keys(lr).forEach(r=>{qc[lr[r]]=r});const bf={type:"error",data:"parser error"},Nb=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Db=typeof ArrayBuffer=="function",Ob=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer,op=({type:r,data:e},t,n)=>Nb&&e instanceof Blob?t?n(e):n0(e,n):Db&&(e instanceof ArrayBuffer||Ob(e))?t?n(e):n0(new Blob([e]),n):n(lr[r]+(e||"")),n0=(r,e)=>{const t=new FileReader;return t.onload=function(){const n=t.result.split(",")[1];e("b"+(n||""))},t.readAsDataURL(r)};function r0(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}let zh;function Yk(r,e){if(Nb&&r.data instanceof Blob)return r.data.arrayBuffer().then(r0).then(e);if(Db&&(r.data instanceof ArrayBuffer||Ob(r.data)))return e(r0(r.data));op(r,!1,t=>{zh||(zh=new TextEncoder),e(zh.encode(t))})}const s0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Xo=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let r=0;r<s0.length;r++)Xo[s0.charCodeAt(r)]=r;const Xk=r=>{let e=r.length*.75,t=r.length,n,s=0,o,l,c,u;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);const h=new ArrayBuffer(e),f=new Uint8Array(h);for(n=0;n<t;n+=4)o=Xo[r.charCodeAt(n)],l=Xo[r.charCodeAt(n+1)],c=Xo[r.charCodeAt(n+2)],u=Xo[r.charCodeAt(n+3)],f[s++]=o<<2|l>>4,f[s++]=(l&15)<<4|c>>2,f[s++]=(c&3)<<6|u&63;return h},Kk=typeof ArrayBuffer=="function",ap=(r,e)=>{if(typeof r!="string")return{type:"message",data:Mb(r,e)};const t=r.charAt(0);return t==="b"?{type:"message",data:Qk(r.substring(1),e)}:qc[t]?r.length>1?{type:qc[t],data:r.substring(1)}:{type:qc[t]}:bf},Qk=(r,e)=>{if(Kk){const t=Xk(r);return Mb(t,e)}else return{base64:!0,data:r}},Mb=(r,e)=>e==="blob"?r instanceof Blob?r:new Blob([r]):r instanceof ArrayBuffer?r:r.buffer,Lb="",Jk=(r,e)=>{const t=r.length,n=new Array(t);let s=0;r.forEach((o,l)=>{op(o,!1,c=>{n[l]=c,++s===t&&e(n.join(Lb))})})},Zk=(r,e)=>{const t=r.split(Lb),n=[];for(let s=0;s<t.length;s++){const o=ap(t[s],e);if(n.push(o),o.type==="error")break}return n};function eP(){return new TransformStream({transform(r,e){Yk(r,t=>{const n=t.length;let s;if(n<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,n);else if(n<65536){s=new Uint8Array(3);const o=new DataView(s.buffer);o.setUint8(0,126),o.setUint16(1,n)}else{s=new Uint8Array(9);const o=new DataView(s.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(n))}r.data&&typeof r.data!="string"&&(s[0]|=128),e.enqueue(s),e.enqueue(t)})}})}let Hh;function Ac(r){return r.reduce((e,t)=>e+t.length,0)}function Cc(r,e){if(r[0].length===e)return r.shift();const t=new Uint8Array(e);let n=0;for(let s=0;s<e;s++)t[s]=r[0][n++],n===r[0].length&&(r.shift(),n=0);return r.length&&n<r[0].length&&(r[0]=r[0].slice(n)),t}function tP(r,e){Hh||(Hh=new TextDecoder);const t=[];let n=0,s=-1,o=!1;return new TransformStream({transform(l,c){for(t.push(l);;){if(n===0){if(Ac(t)<1)break;const u=Cc(t,1);o=(u[0]&128)===128,s=u[0]&127,s<126?n=3:s===126?n=1:n=2}else if(n===1){if(Ac(t)<2)break;const u=Cc(t,2);s=new DataView(u.buffer,u.byteOffset,u.length).getUint16(0),n=3}else if(n===2){if(Ac(t)<8)break;const u=Cc(t,8),h=new DataView(u.buffer,u.byteOffset,u.length),f=h.getUint32(0);if(f>Math.pow(2,21)-1){c.enqueue(bf);break}s=f*Math.pow(2,32)+h.getUint32(4),n=3}else{if(Ac(t)<s)break;const u=Cc(t,s);c.enqueue(ap(o?u:Hh.decode(u),e)),n=0}if(s===0||s>r){c.enqueue(bf);break}}}})}const Ib=4;function vt(r){if(r)return nP(r)}function nP(r){for(var e in vt.prototype)r[e]=vt.prototype[e];return r}vt.prototype.on=vt.prototype.addEventListener=function(r,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(e),this};vt.prototype.once=function(r,e){function t(){this.off(r,t),e.apply(this,arguments)}return t.fn=e,this.on(r,t),this};vt.prototype.off=vt.prototype.removeListener=vt.prototype.removeAllListeners=vt.prototype.removeEventListener=function(r,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+r];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var n,s=0;s<t.length;s++)if(n=t[s],n===e||n.fn===e){t.splice(s,1);break}return t.length===0&&delete this._callbacks["$"+r],this};vt.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+r],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(t){t=t.slice(0);for(var n=0,s=t.length;n<s;++n)t[n].apply(this,e)}return this};vt.prototype.emitReserved=vt.prototype.emit;vt.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]};vt.prototype.hasListeners=function(r){return!!this.listeners(r).length};const bu=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),Tn=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),rP="arraybuffer";function Fb(r,...e){return e.reduce((t,n)=>(r.hasOwnProperty(n)&&(t[n]=r[n]),t),{})}const sP=Tn.setTimeout,iP=Tn.clearTimeout;function xu(r,e){e.useNativeTimers?(r.setTimeoutFn=sP.bind(Tn),r.clearTimeoutFn=iP.bind(Tn)):(r.setTimeoutFn=Tn.setTimeout.bind(Tn),r.clearTimeoutFn=Tn.clearTimeout.bind(Tn))}const oP=1.33;function aP(r){return typeof r=="string"?lP(r):Math.ceil((r.byteLength||r.size)*oP)}function lP(r){let e=0,t=0;for(let n=0,s=r.length;n<s;n++)e=r.charCodeAt(n),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(n++,t+=4);return t}function jb(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function cP(r){let e="";for(let t in r)r.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(r[t]));return e}function uP(r){let e={},t=r.split("&");for(let n=0,s=t.length;n<s;n++){let o=t[n].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}class dP extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class lp extends vt{constructor(e){super(),this.writable=!1,xu(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new dP(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=ap(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=cP(e);return t.length?"?"+t:""}}class hP extends lp{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||t()})),this.writable||(n++,this.once("drain",function(){--n||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};Zk(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Jk(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=jb()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let Bb=!1;try{Bb=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const fP=Bb;function pP(){}class mP extends hP{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let n=location.port;n||(n=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(s,o)=>{this.onError("xhr post error",s,o)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,n)=>{this.onError("xhr poll error",t,n)}),this.pollXhr=e}}class or extends vt{constructor(e,t,n){super(),this.createRequest=e,xu(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var e;const t=Fb(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&n.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var s;n.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=or.requestsCount++,or.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=pP,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete or.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}or.requestsCount=0;or.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",i0);else if(typeof addEventListener=="function"){const r="onpagehide"in Tn?"pagehide":"unload";addEventListener(r,i0,!1)}}function i0(){for(let r in or.requests)or.requests.hasOwnProperty(r)&&or.requests[r].abort()}const gP=(function(){const r=Ub({xdomain:!1});return r&&r.responseType!==null})();class vP extends mP{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=gP&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new or(Ub,this.uri(),e)}}function Ub(r){const e=r.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||fP))return new XMLHttpRequest}catch{}if(!e)try{return new Tn[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const zb=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class yP extends lp{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=zb?{}:Fb(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],s=t===e.length-1;op(n,this.supportsBinary,o=>{try{this.doWrite(n,o)}catch{}s&&bu(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=jb()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const Wh=Tn.WebSocket||Tn.MozWebSocket;class wP extends yP{createSocket(e,t,n){return zb?new Wh(e,t,n):t?new Wh(e,t):new Wh(e)}doWrite(e,t){this.ws.send(t)}}class bP extends lp{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=tP(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),s=eP();s.readable.pipeTo(e.writable),this._writer=s.writable.getWriter();const o=()=>{n.read().then(({done:c,value:u})=>{c||(this.onPacket(u),o())}).catch(c=>{})};o();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],s=t===e.length-1;this._writer.write(n).then(()=>{s&&bu(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const xP={websocket:wP,webtransport:bP,polling:vP},SP=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,_P=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function xf(r){if(r.length>8e3)throw"URI too long";const e=r,t=r.indexOf("["),n=r.indexOf("]");t!=-1&&n!=-1&&(r=r.substring(0,t)+r.substring(t,n).replace(/:/g,";")+r.substring(n,r.length));let s=SP.exec(r||""),o={},l=14;for(;l--;)o[_P[l]]=s[l]||"";return t!=-1&&n!=-1&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=EP(o,o.path),o.queryKey=AP(o,o.query),o}function EP(r,e){const t=/\/{2,9}/g,n=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&n.splice(0,1),e.slice(-1)=="/"&&n.splice(n.length-1,1),n}function AP(r,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,s,o){s&&(t[s]=o)}),t}const Sf=typeof addEventListener=="function"&&typeof removeEventListener=="function",Gc=[];Sf&&addEventListener("offline",()=>{Gc.forEach(r=>r())},!1);class ss extends vt{constructor(e,t){if(super(),this.binaryType=rP,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const n=xf(e);t.hostname=n.host,t.secure=n.protocol==="https"||n.protocol==="wss",t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=xf(t.host).host);xu(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(n=>{const s=n.prototype.name;this.transports.push(s),this._transportsByName[s]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=uP(this.opts.query)),Sf&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Gc.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=Ib,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&ss.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",ss.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let n=0;n<this.writeBuffer.length;n++){const s=this.writeBuffer[n].data;if(s&&(t+=aP(s)),n>0&&t>this._maxPayload)return this.writeBuffer.slice(0,n);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,bu(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,s){if(typeof t=="function"&&(s=t,t=void 0),typeof n=="function"&&(s=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const o={type:e,data:t,options:n};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(ss.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Sf&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=Gc.indexOf(this._offlineEventListener);n!==-1&&Gc.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}ss.protocol=Ib;class CP extends ss{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;ss.priorWebsocketSuccess=!1;const s=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",p=>{if(!n)if(p.type==="pong"&&p.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;ss.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(f(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const v=new Error("probe error");v.transport=t.name,this.emitReserved("upgradeError",v)}}))};function o(){n||(n=!0,f(),t.close(),t=null)}const l=p=>{const v=new Error("probe error: "+p);v.transport=t.name,o(),this.emitReserved("upgradeError",v)};function c(){l("transport closed")}function u(){l("socket closed")}function h(p){t&&p.name!==t.name&&o()}const f=()=>{t.removeListener("open",s),t.removeListener("error",l),t.removeListener("close",c),this.off("close",u),this.off("upgrading",h)};t.once("open",s),t.once("error",l),t.once("close",c),this.once("close",u),this.once("upgrading",h),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{n||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}let TP=class extends CP{constructor(e,t={}){const n=typeof e=="object"?e:t;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(s=>xP[s]).filter(s=>!!s)),super(e,n)}};function kP(r,e="",t){let n=r;t=t||typeof location<"u"&&location,r==null&&(r=t.protocol+"//"+t.host),typeof r=="string"&&(r.charAt(0)==="/"&&(r.charAt(1)==="/"?r=t.protocol+r:r=t.host+r),/^(https?|wss?):\/\//.test(r)||(typeof t<"u"?r=t.protocol+"//"+r:r="https://"+r),n=xf(r)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const o=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+o+":"+n.port+e,n.href=n.protocol+"://"+o+(t&&t.port===n.port?"":":"+n.port),n}const PP=typeof ArrayBuffer=="function",RP=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r.buffer instanceof ArrayBuffer,Hb=Object.prototype.toString,NP=typeof Blob=="function"||typeof Blob<"u"&&Hb.call(Blob)==="[object BlobConstructor]",DP=typeof File=="function"||typeof File<"u"&&Hb.call(File)==="[object FileConstructor]";function cp(r){return PP&&(r instanceof ArrayBuffer||RP(r))||NP&&r instanceof Blob||DP&&r instanceof File}function Yc(r,e){if(!r||typeof r!="object")return!1;if(Array.isArray(r)){for(let t=0,n=r.length;t<n;t++)if(Yc(r[t]))return!0;return!1}if(cp(r))return!0;if(r.toJSON&&typeof r.toJSON=="function"&&arguments.length===1)return Yc(r.toJSON(),!0);for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&Yc(r[t]))return!0;return!1}function OP(r){const e=[],t=r.data,n=r;return n.data=_f(t,e),n.attachments=e.length,{packet:n,buffers:e}}function _f(r,e){if(!r)return r;if(cp(r)){const t={_placeholder:!0,num:e.length};return e.push(r),t}else if(Array.isArray(r)){const t=new Array(r.length);for(let n=0;n<r.length;n++)t[n]=_f(r[n],e);return t}else if(typeof r=="object"&&!(r instanceof Date)){const t={};for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=_f(r[n],e));return t}return r}function MP(r,e){return r.data=Ef(r.data,e),delete r.attachments,r}function Ef(r,e){if(!r)return r;if(r&&r._placeholder===!0){if(typeof r.num=="number"&&r.num>=0&&r.num<e.length)return e[r.num];throw new Error("illegal attachments")}else if(Array.isArray(r))for(let t=0;t<r.length;t++)r[t]=Ef(r[t],e);else if(typeof r=="object")for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&(r[t]=Ef(r[t],e));return r}const Wb=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],LP=5;var Ne;(function(r){r[r.CONNECT=0]="CONNECT",r[r.DISCONNECT=1]="DISCONNECT",r[r.EVENT=2]="EVENT",r[r.ACK=3]="ACK",r[r.CONNECT_ERROR=4]="CONNECT_ERROR",r[r.BINARY_EVENT=5]="BINARY_EVENT",r[r.BINARY_ACK=6]="BINARY_ACK"})(Ne||(Ne={}));class IP{constructor(e){this.replacer=e}encode(e){return(e.type===Ne.EVENT||e.type===Ne.ACK)&&Yc(e)?this.encodeAsBinary({type:e.type===Ne.EVENT?Ne.BINARY_EVENT:Ne.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===Ne.BINARY_EVENT||e.type===Ne.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=OP(e),n=this.encodeAsString(t.packet),s=t.buffers;return s.unshift(n),s}}class up extends vt{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===Ne.BINARY_EVENT;n||t.type===Ne.BINARY_ACK?(t.type=n?Ne.EVENT:Ne.ACK,this.reconstructor=new FP(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(cp(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(Ne[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Ne.BINARY_EVENT||n.type===Ne.BINARY_ACK){const o=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const l=e.substring(o,t);if(l!=Number(l)||e.charAt(t)!=="-")throw new Error("Illegal attachments");n.attachments=Number(l)}if(e.charAt(t+1)==="/"){const o=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););n.nsp=e.substring(o,t)}else n.nsp="/";const s=e.charAt(t+1);if(s!==""&&Number(s)==s){const o=t+1;for(;++t;){const l=e.charAt(t);if(l==null||Number(l)!=l){--t;break}if(t===e.length)break}n.id=Number(e.substring(o,t+1))}if(e.charAt(++t)){const o=this.tryParse(e.substr(t));if(up.isPayloadValid(n.type,o))n.data=o;else throw new Error("invalid payload")}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case Ne.CONNECT:return ru(t);case Ne.DISCONNECT:return t===void 0;case Ne.CONNECT_ERROR:return typeof t=="string"||ru(t);case Ne.EVENT:case Ne.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&Wb.indexOf(t[0])===-1);case Ne.ACK:case Ne.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class FP{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=MP(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function jP(r){return typeof r=="string"}const BP=Number.isInteger||function(r){return typeof r=="number"&&isFinite(r)&&Math.floor(r)===r};function UP(r){return r===void 0||BP(r)}function ru(r){return Object.prototype.toString.call(r)==="[object Object]"}function zP(r,e){switch(r){case Ne.CONNECT:return e===void 0||ru(e);case Ne.DISCONNECT:return e===void 0;case Ne.EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&Wb.indexOf(e[0])===-1);case Ne.ACK:return Array.isArray(e);case Ne.CONNECT_ERROR:return typeof e=="string"||ru(e);default:return!1}}function HP(r){return jP(r.nsp)&&UP(r.id)&&zP(r.type,r.data)}const WP=Object.freeze(Object.defineProperty({__proto__:null,Decoder:up,Encoder:IP,get PacketType(){return Ne},isPacketValid:HP,protocol:LP},Symbol.toStringTag,{value:"Module"}));function Un(r,e,t){return r.on(e,t),function(){r.off(e,t)}}const VP=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Vb extends vt{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Un(e,"open",this.onopen.bind(this)),Un(e,"packet",this.onpacket.bind(this)),Un(e,"error",this.onerror.bind(this)),Un(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var n,s,o;if(VP.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const l={type:Ne.EVENT,data:t};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const f=this.ids++,p=t.pop();this._registerAckCallback(f,p),l.id=f}const c=(s=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||s===void 0?void 0:s.writable,u=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!c||(u?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(e,t){var n;const s=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(s===void 0){this.acks[e]=t;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===e&&this.sendBuffer.splice(c,1);t.call(this,new Error("operation has timed out"))},s),l=(...c)=>{this.io.clearTimeoutFn(o),t.apply(this,c)};l.withError=!0,this.acks[e]=l}emitWithAck(e,...t){return new Promise((n,s)=>{const o=(l,c)=>l?s(l):n(c);o.withError=!0,t.push(o),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((s,...o)=>(this._queue[0],s!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(s)):(this._queue.shift(),t&&t(null,...o)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Ne.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(n=>String(n.id)===e)){const n=this.acks[e];delete this.acks[e],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Ne.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ne.EVENT:case Ne.BINARY_EVENT:this.onevent(e);break;case Ne.ACK:case Ne.BINARY_ACK:this.onack(e);break;case Ne.DISCONNECT:this.ondisconnect();break;case Ne.CONNECT_ERROR:this.destroy();const n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(...s){n||(n=!0,t.packet({type:Ne.ACK,id:e,data:s}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ne.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function Xi(r){r=r||{},this.ms=r.min||100,this.max=r.max||1e4,this.factor=r.factor||2,this.jitter=r.jitter>0&&r.jitter<=1?r.jitter:0,this.attempts=0}Xi.prototype.duration=function(){var r=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*r);r=(Math.floor(e*10)&1)==0?r-t:r+t}return Math.min(r,this.max)|0};Xi.prototype.reset=function(){this.attempts=0};Xi.prototype.setMin=function(r){this.ms=r};Xi.prototype.setMax=function(r){this.max=r};Xi.prototype.setJitter=function(r){this.jitter=r};class Af extends vt{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,xu(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((n=t.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Xi({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const s=t.parser||WP;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new TP(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const s=Un(t,"open",function(){n.onopen(),e&&e()}),o=c=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",c),e?e(c):this.maybeReconnectOnOpen()},l=Un(t,"error",o);if(this._timeout!==!1){const c=this._timeout,u=this.setTimeoutFn(()=>{s(),o(new Error("timeout")),t.close()},c);this.opts.autoUnref&&u.unref(),this.subs.push(()=>{this.clearTimeoutFn(u)})}return this.subs.push(s),this.subs.push(l),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Un(e,"ping",this.onping.bind(this)),Un(e,"data",this.ondata.bind(this)),Un(e,"error",this.onerror.bind(this)),Un(e,"close",this.onclose.bind(this)),Un(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){bu(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new Vb(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t)if(this.nsps[n].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},t);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Ho={};function ea(r,e){typeof r=="object"&&(e=r,r=void 0),e=e||{};const t=kP(r,e.path||"/socket.io"),n=t.source,s=t.id,o=t.path,l=Ho[s]&&o in Ho[s].nsps,c=e.forceNew||e["force new connection"]||e.multiplex===!1||l;let u;return c?u=new Af(n,e):(Ho[s]||(Ho[s]=new Af(n,e)),u=Ho[s]),t.query&&!e.query&&(e.query=t.queryKey),u.socket(t.path,e)}Object.assign(ea,{Manager:Af,Socket:Vb,io:ea,connect:ea});function $P(r){const[e,t]=T.useState([]),[n,s]=T.useState(!0),[o,l]=T.useState(null),c=T.useRef(null),u=async()=>{try{l(null),s(!0);const h=await fetch("/api/delivery-runs/active");if(h.ok){const f=await h.json();t(f)}else console.warn("HTTP fallback failed:",h.status),t([]);s(!1)}catch(h){console.error("Failed to fetch delivery runs via HTTP:",h),l("Failed to load delivery runs"),s(!1)}};return T.useEffect(()=>{u();const h=`${window.location.protocol}//${window.location.host}`;let f;try{f=ea(h,{path:"/socket.io",transports:["websocket","polling"],reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3}),c.current=f}catch(p){console.debug("Socket.IO connection failed (expected if backend not running)",p);return}return f.on("connect",()=>{console.debug("DeliveryRuns Socket.IO connected"),l(null),f.emit("join",{room:"delivery-runs"})}),f.on("active_runs",p=>{try{p.type==="active_runs"&&(t(p.data||[]),s(!1))}catch(v){console.warn("Failed to parse Socket.IO message",v)}}),f.on("disconnect",()=>{console.debug("DeliveryRuns Socket.IO disconnected")}),f.on("connect_error",p=>{console.debug("DeliveryRuns Socket.IO error (expected if backend not running)",p),l("Socket.IO connection failed - using cached data")}),()=>{try{f.disconnect()}catch{}}},[r]),{runs:e,loading:n,error:o,refetch:u}}function qP(){const{runs:r,loading:e,error:t}=$P();return g.jsxs("div",{className:"p-4",children:[t&&g.jsx("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded text-sm text-yellow-800",children:t}),e?g.jsx("div",{className:"text-sm text-gray-600",children:"Loading delivery runs..."}):r.length===0?g.jsx("div",{className:"text-sm text-gray-600",children:"No active delivery runs"}):g.jsx("div",{className:"grid grid-cols-1 gap-4",children:r.map(n=>g.jsx(rn,{to:`/delivery/runs/${n.id}`,children:g.jsxs("div",{className:"border p-3 rounded hover:bg-gray-50 cursor-pointer transition-colors bg-white",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("div",{children:[g.jsx("div",{className:"text-sm text-gray-500",children:"Run"}),g.jsx("div",{className:"font-medium",children:n.name})]}),g.jsxs("div",{className:"text-right",children:[g.jsx("div",{className:"text-sm text-gray-500",children:"Vehicle"}),g.jsx("div",{className:"font-medium capitalize",children:n.vehicle.replace("_"," ")})]})]}),g.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-2 text-sm text-gray-700",children:[g.jsxs("div",{children:[g.jsx("div",{className:"text-xs text-gray-500",children:"Runner"}),g.jsx("div",{children:n.runner})]}),g.jsxs("div",{children:[g.jsx("div",{className:"text-xs text-gray-500",children:"Status"}),g.jsx("div",{children:n.status})]}),g.jsxs("div",{children:[g.jsx("div",{className:"text-xs text-gray-500",children:"Orders"}),g.jsx("div",{children:n.order_ids.length})]})]})]})},n.id))})]})}const Su={createRun:async r=>(await He.post("/delivery-runs",r)).data,getRun:async r=>(await He.get(`/delivery-runs/${r}`)).data,finishRun:async(r,e=!0)=>(await He.put(`/delivery-runs/${r}/finish`,{create_remainders:e})).data,getRuns:async r=>{const e=new URLSearchParams;return r&&r.forEach(n=>e.append("status",n)),(await He.get("/delivery-runs",{params:e})).data}};function GP(r,e=globalThis?.document){const t=Bi(r);T.useEffect(()=>{const n=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[t,e])}var YP="DismissableLayer",Cf="dismissableLayer.update",XP="dismissableLayer.pointerDownOutside",KP="dismissableLayer.focusOutside",o0,$b=T.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),qb=T.forwardRef((r,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:l,onDismiss:c,...u}=r,h=T.useContext($b),[f,p]=T.useState(null),v=f?.ownerDocument??globalThis?.document,[,b]=T.useState({}),_=ar(e,D=>p(D)),w=Array.from(h.layers),[x]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),E=w.indexOf(x),A=f?w.indexOf(f):-1,C=h.layersWithOutsidePointerEventsDisabled.size>0,k=A>=E,N=ZP(D=>{const F=D.target,U=[...h.branches].some(q=>q.contains(F));!k||U||(s?.(D),l?.(D),D.defaultPrevented||c?.())},v),R=eR(D=>{const F=D.target;[...h.branches].some(q=>q.contains(F))||(o?.(D),l?.(D),D.defaultPrevented||c?.())},v);return GP(D=>{A===h.layers.size-1&&(n?.(D),!D.defaultPrevented&&c&&(D.preventDefault(),c()))},v),T.useEffect(()=>{if(f)return t&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(o0=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(f)),h.layers.add(f),a0(),()=>{t&&h.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=o0)}},[f,v,t,h]),T.useEffect(()=>()=>{f&&(h.layers.delete(f),h.layersWithOutsidePointerEventsDisabled.delete(f),a0())},[f,h]),T.useEffect(()=>{const D=()=>b({});return document.addEventListener(Cf,D),()=>document.removeEventListener(Cf,D)},[]),g.jsx(qt.div,{...u,ref:_,style:{pointerEvents:C?k?"auto":"none":void 0,...r.style},onFocusCapture:Dt(r.onFocusCapture,R.onFocusCapture),onBlurCapture:Dt(r.onBlurCapture,R.onBlurCapture),onPointerDownCapture:Dt(r.onPointerDownCapture,N.onPointerDownCapture)})});qb.displayName=YP;var QP="DismissableLayerBranch",JP=T.forwardRef((r,e)=>{const t=T.useContext($b),n=T.useRef(null),s=ar(e,n);return T.useEffect(()=>{const o=n.current;if(o)return t.branches.add(o),()=>{t.branches.delete(o)}},[t.branches]),g.jsx(qt.div,{...r,ref:s})});JP.displayName=QP;function ZP(r,e=globalThis?.document){const t=Bi(r),n=T.useRef(!1),s=T.useRef(()=>{});return T.useEffect(()=>{const o=c=>{if(c.target&&!n.current){let u=function(){Gb(XP,t,h,{discrete:!0})};const h={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=u,e.addEventListener("click",s.current,{once:!0})):u()}else e.removeEventListener("click",s.current);n.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",o),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>n.current=!0}}function eR(r,e=globalThis?.document){const t=Bi(r),n=T.useRef(!1);return T.useEffect(()=>{const s=o=>{o.target&&!n.current&&Gb(KP,t,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function a0(){const r=new CustomEvent(Cf);document.dispatchEvent(r)}function Gb(r,e,t,{discrete:n}){const s=t.originalEvent.target,o=new CustomEvent(r,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(r,e,{once:!0}),n?Ek(s,o):s.dispatchEvent(o)}var Vh="focusScope.autoFocusOnMount",$h="focusScope.autoFocusOnUnmount",l0={bubbles:!1,cancelable:!0},tR="FocusScope",Yb=T.forwardRef((r,e)=>{const{loop:t=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...l}=r,[c,u]=T.useState(null),h=Bi(s),f=Bi(o),p=T.useRef(null),v=ar(e,w=>u(w)),b=T.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;T.useEffect(()=>{if(n){let w=function(C){if(b.paused||!c)return;const k=C.target;c.contains(k)?p.current=k:Jr(p.current,{select:!0})},x=function(C){if(b.paused||!c)return;const k=C.relatedTarget;k!==null&&(c.contains(k)||Jr(p.current,{select:!0}))},E=function(C){if(document.activeElement===document.body)for(const N of C)N.removedNodes.length>0&&Jr(c)};document.addEventListener("focusin",w),document.addEventListener("focusout",x);const A=new MutationObserver(E);return c&&A.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",x),A.disconnect()}}},[n,c,b.paused]),T.useEffect(()=>{if(c){u0.add(b);const w=document.activeElement;if(!c.contains(w)){const E=new CustomEvent(Vh,l0);c.addEventListener(Vh,h),c.dispatchEvent(E),E.defaultPrevented||(nR(aR(Xb(c)),{select:!0}),document.activeElement===w&&Jr(c))}return()=>{c.removeEventListener(Vh,h),setTimeout(()=>{const E=new CustomEvent($h,l0);c.addEventListener($h,f),c.dispatchEvent(E),E.defaultPrevented||Jr(w??document.body,{select:!0}),c.removeEventListener($h,f),u0.remove(b)},0)}}},[c,h,f,b]);const _=T.useCallback(w=>{if(!t&&!n||b.paused)return;const x=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,E=document.activeElement;if(x&&E){const A=w.currentTarget,[C,k]=rR(A);C&&k?!w.shiftKey&&E===k?(w.preventDefault(),t&&Jr(C,{select:!0})):w.shiftKey&&E===C&&(w.preventDefault(),t&&Jr(k,{select:!0})):E===A&&w.preventDefault()}},[t,n,b.paused]);return g.jsx(qt.div,{tabIndex:-1,...l,ref:v,onKeyDown:_})});Yb.displayName=tR;function nR(r,{select:e=!1}={}){const t=document.activeElement;for(const n of r)if(Jr(n,{select:e}),document.activeElement!==t)return}function rR(r){const e=Xb(r),t=c0(e,r),n=c0(e.reverse(),r);return[t,n]}function Xb(r){const e=[],t=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function c0(r,e){for(const t of r)if(!sR(t,{upTo:e}))return t}function sR(r,{upTo:e}){if(getComputedStyle(r).visibility==="hidden")return!0;for(;r;){if(e!==void 0&&r===e)return!1;if(getComputedStyle(r).display==="none")return!0;r=r.parentElement}return!1}function iR(r){return r instanceof HTMLInputElement&&"select"in r}function Jr(r,{select:e=!1}={}){if(r&&r.focus){const t=document.activeElement;r.focus({preventScroll:!0}),r!==t&&iR(r)&&e&&r.select()}}var u0=oR();function oR(){let r=[];return{add(e){const t=r[0];e!==t&&t?.pause(),r=d0(r,e),r.unshift(e)},remove(e){r=d0(r,e),r[0]?.resume()}}}function d0(r,e){const t=[...r],n=t.indexOf(e);return n!==-1&&t.splice(n,1),t}function aR(r){return r.filter(e=>e.tagName!=="A")}var lR="Portal",Kb=T.forwardRef((r,e)=>{const{container:t,...n}=r,[s,o]=T.useState(!1);aa(()=>o(!0),[]);const l=t||s&&globalThis?.document?.body;return l?DE.createPortal(g.jsx(qt.div,{...n,ref:e}),l):null});Kb.displayName=lR;var qh=0;function cR(){T.useEffect(()=>{const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",r[0]??h0()),document.body.insertAdjacentElement("beforeend",r[1]??h0()),qh++,()=>{qh===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),qh--}},[])}function h0(){const r=document.createElement("span");return r.setAttribute("data-radix-focus-guard",""),r.tabIndex=0,r.style.outline="none",r.style.opacity="0",r.style.position="fixed",r.style.pointerEvents="none",r}var es=function(){return es=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},es.apply(this,arguments)};function uR(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t}function dR(r,e,t){if(t||arguments.length===2)for(var n=0,s=e.length,o;n<s;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))}var Xc="right-scroll-bar-position",Kc="width-before-scroll-bar",hR="with-scroll-bars-hidden",fR="--removed-body-scroll-bar-size";function Gh(r,e){return typeof r=="function"?r(e):r&&(r.current=e),r}function pR(r,e){var t=T.useState(function(){return{value:r,callback:e,facade:{get current(){return t.value},set current(n){var s=t.value;s!==n&&(t.value=n,t.callback(n,s))}}}})[0];return t.callback=e,t.facade}var mR=typeof window<"u"?T.useLayoutEffect:T.useEffect,f0=new WeakMap;function gR(r,e){var t=pR(null,function(n){return r.forEach(function(s){return Gh(s,n)})});return mR(function(){var n=f0.get(t);if(n){var s=new Set(n),o=new Set(r),l=t.current;s.forEach(function(c){o.has(c)||Gh(c,null)}),o.forEach(function(c){s.has(c)||Gh(c,l)})}f0.set(t,r)},[r]),t}var su=function(){return su=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},su.apply(this,arguments)};function vR(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t}function yR(r){return r}function wR(r,e){e===void 0&&(e=yR);var t=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:r},useMedium:function(o){var l=e(o,n);return t.push(l),function(){t=t.filter(function(c){return c!==l})}},assignSyncMedium:function(o){for(n=!0;t.length;){var l=t;t=[],l.forEach(o)}t={push:function(c){return o(c)},filter:function(){return t}}},assignMedium:function(o){n=!0;var l=[];if(t.length){var c=t;t=[],c.forEach(o),l=t}var u=function(){var f=l;l=[],f.forEach(o)},h=function(){return Promise.resolve().then(u)};h(),t={push:function(f){l.push(f),h()},filter:function(f){return l=l.filter(f),t}}}};return s}function bR(r){r===void 0&&(r={});var e=wR(null);return e.options=su({async:!0,ssr:!1},r),e}var Qb=function(r){var e=r.sideCar,t=vR(r,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return T.createElement(n,su({},t))};Qb.isSideCarExport=!0;function xR(r,e){return r.useMedium(e),Qb}var Jb=bR(),Yh=function(){},_u=T.forwardRef(function(r,e){var t=T.useRef(null),n=T.useState({onScrollCapture:Yh,onWheelCapture:Yh,onTouchMoveCapture:Yh}),s=n[0],o=n[1],l=r.forwardProps,c=r.children,u=r.className,h=r.removeScrollBar,f=r.enabled,p=r.shards,v=r.sideCar,b=r.noRelative,_=r.noIsolation,w=r.inert,x=r.allowPinchZoom,E=r.as,A=E===void 0?"div":E,C=r.gapMode,k=uR(r,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=v,R=gR([t,e]),D=es(es({},k),s);return T.createElement(T.Fragment,null,f&&T.createElement(N,{sideCar:Jb,removeScrollBar:h,shards:p,noRelative:b,noIsolation:_,inert:w,setCallbacks:o,allowPinchZoom:!!x,lockRef:t,gapMode:C}),l?T.cloneElement(T.Children.only(c),es(es({},D),{ref:R})):T.createElement(A,es({},D,{className:u,ref:R}),c))});_u.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};_u.classNames={fullWidth:Kc,zeroRight:Xc};var SR=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function _R(){if(!document)return null;var r=document.createElement("style");r.type="text/css";var e=SR();return e&&r.setAttribute("nonce",e),r}function ER(r,e){r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}function AR(r){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(r)}var CR=function(){var r=0,e=null;return{add:function(t){r==0&&(e=_R())&&(ER(e,t),AR(e)),r++},remove:function(){r--,!r&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},TR=function(){var r=CR();return function(e,t){T.useEffect(function(){return r.add(e),function(){r.remove()}},[e&&t])}},Zb=function(){var r=TR(),e=function(t){var n=t.styles,s=t.dynamic;return r(n,s),null};return e},kR={left:0,top:0,right:0,gap:0},Xh=function(r){return parseInt(r||"",10)||0},PR=function(r){var e=window.getComputedStyle(document.body),t=e[r==="padding"?"paddingLeft":"marginLeft"],n=e[r==="padding"?"paddingTop":"marginTop"],s=e[r==="padding"?"paddingRight":"marginRight"];return[Xh(t),Xh(n),Xh(s)]},RR=function(r){if(r===void 0&&(r="margin"),typeof window>"u")return kR;var e=PR(r),t=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-t+e[2]-e[0])}},NR=Zb(),Ci="data-scroll-locked",DR=function(r,e,t,n){var s=r.left,o=r.top,l=r.right,c=r.gap;return t===void 0&&(t="margin"),`
  .`.concat(hR,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(c,"px ").concat(n,`;
  }
  body[`).concat(Ci,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(n,`;
    `),t==="padding"&&"padding-right: ".concat(c,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Xc,` {
    right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(Kc,` {
    margin-right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(Xc," .").concat(Xc,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Kc," .").concat(Kc,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Ci,`] {
    `).concat(fR,": ").concat(c,`px;
  }
`)},p0=function(){var r=parseInt(document.body.getAttribute(Ci)||"0",10);return isFinite(r)?r:0},OR=function(){T.useEffect(function(){return document.body.setAttribute(Ci,(p0()+1).toString()),function(){var r=p0()-1;r<=0?document.body.removeAttribute(Ci):document.body.setAttribute(Ci,r.toString())}},[])},MR=function(r){var e=r.noRelative,t=r.noImportant,n=r.gapMode,s=n===void 0?"margin":n;OR();var o=T.useMemo(function(){return RR(s)},[s]);return T.createElement(NR,{styles:DR(o,!e,s,t?"":"!important")})},Tf=!1;if(typeof window<"u")try{var Tc=Object.defineProperty({},"passive",{get:function(){return Tf=!0,!0}});window.addEventListener("test",Tc,Tc),window.removeEventListener("test",Tc,Tc)}catch{Tf=!1}var hi=Tf?{passive:!1}:!1,LR=function(r){return r.tagName==="TEXTAREA"},ex=function(r,e){if(!(r instanceof Element))return!1;var t=window.getComputedStyle(r);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!LR(r)&&t[e]==="visible")},IR=function(r){return ex(r,"overflowY")},FR=function(r){return ex(r,"overflowX")},m0=function(r,e){var t=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=tx(r,n);if(s){var o=nx(r,n),l=o[1],c=o[2];if(l>c)return!0}n=n.parentNode}while(n&&n!==t.body);return!1},jR=function(r){var e=r.scrollTop,t=r.scrollHeight,n=r.clientHeight;return[e,t,n]},BR=function(r){var e=r.scrollLeft,t=r.scrollWidth,n=r.clientWidth;return[e,t,n]},tx=function(r,e){return r==="v"?IR(e):FR(e)},nx=function(r,e){return r==="v"?jR(e):BR(e)},UR=function(r,e){return r==="h"&&e==="rtl"?-1:1},zR=function(r,e,t,n,s){var o=UR(r,window.getComputedStyle(e).direction),l=o*n,c=t.target,u=e.contains(c),h=!1,f=l>0,p=0,v=0;do{if(!c)break;var b=nx(r,c),_=b[0],w=b[1],x=b[2],E=w-x-o*_;(_||E)&&tx(r,c)&&(p+=E,v+=_);var A=c.parentNode;c=A&&A.nodeType===Node.DOCUMENT_FRAGMENT_NODE?A.host:A}while(!u&&c!==document.body||u&&(e.contains(c)||e===c));return(f&&Math.abs(p)<1||!f&&Math.abs(v)<1)&&(h=!0),h},kc=function(r){return"changedTouches"in r?[r.changedTouches[0].clientX,r.changedTouches[0].clientY]:[0,0]},g0=function(r){return[r.deltaX,r.deltaY]},v0=function(r){return r&&"current"in r?r.current:r},HR=function(r,e){return r[0]===e[0]&&r[1]===e[1]},WR=function(r){return`
  .block-interactivity-`.concat(r,` {pointer-events: none;}
  .allow-interactivity-`).concat(r,` {pointer-events: all;}
`)},VR=0,fi=[];function $R(r){var e=T.useRef([]),t=T.useRef([0,0]),n=T.useRef(),s=T.useState(VR++)[0],o=T.useState(Zb)[0],l=T.useRef(r);T.useEffect(function(){l.current=r},[r]),T.useEffect(function(){if(r.inert){document.body.classList.add("block-interactivity-".concat(s));var w=dR([r.lockRef.current],(r.shards||[]).map(v0),!0).filter(Boolean);return w.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),w.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[r.inert,r.lockRef.current,r.shards]);var c=T.useCallback(function(w,x){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!l.current.allowPinchZoom;var E=kc(w),A=t.current,C="deltaX"in w?w.deltaX:A[0]-E[0],k="deltaY"in w?w.deltaY:A[1]-E[1],N,R=w.target,D=Math.abs(C)>Math.abs(k)?"h":"v";if("touches"in w&&D==="h"&&R.type==="range")return!1;var F=window.getSelection(),U=F&&F.anchorNode,q=U?U===R||U.contains(R):!1;if(q)return!1;var Y=m0(D,R);if(!Y)return!0;if(Y?N=D:(N=D==="v"?"h":"v",Y=m0(D,R)),!Y)return!1;if(!n.current&&"changedTouches"in w&&(C||k)&&(n.current=N),!N)return!0;var ne=n.current||N;return zR(ne,x,w,ne==="h"?C:k)},[]),u=T.useCallback(function(w){var x=w;if(!(!fi.length||fi[fi.length-1]!==o)){var E="deltaY"in x?g0(x):kc(x),A=e.current.filter(function(N){return N.name===x.type&&(N.target===x.target||x.target===N.shadowParent)&&HR(N.delta,E)})[0];if(A&&A.should){x.cancelable&&x.preventDefault();return}if(!A){var C=(l.current.shards||[]).map(v0).filter(Boolean).filter(function(N){return N.contains(x.target)}),k=C.length>0?c(x,C[0]):!l.current.noIsolation;k&&x.cancelable&&x.preventDefault()}}},[]),h=T.useCallback(function(w,x,E,A){var C={name:w,delta:x,target:E,should:A,shadowParent:qR(E)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(k){return k!==C})},1)},[]),f=T.useCallback(function(w){t.current=kc(w),n.current=void 0},[]),p=T.useCallback(function(w){h(w.type,g0(w),w.target,c(w,r.lockRef.current))},[]),v=T.useCallback(function(w){h(w.type,kc(w),w.target,c(w,r.lockRef.current))},[]);T.useEffect(function(){return fi.push(o),r.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:v}),document.addEventListener("wheel",u,hi),document.addEventListener("touchmove",u,hi),document.addEventListener("touchstart",f,hi),function(){fi=fi.filter(function(w){return w!==o}),document.removeEventListener("wheel",u,hi),document.removeEventListener("touchmove",u,hi),document.removeEventListener("touchstart",f,hi)}},[]);var b=r.removeScrollBar,_=r.inert;return T.createElement(T.Fragment,null,_?T.createElement(o,{styles:WR(s)}):null,b?T.createElement(MR,{noRelative:r.noRelative,gapMode:r.gapMode}):null)}function qR(r){for(var e=null;r!==null;)r instanceof ShadowRoot&&(e=r.host,r=r.host),r=r.parentNode;return e}const GR=xR(Jb,$R);var rx=T.forwardRef(function(r,e){return T.createElement(_u,es({},r,{ref:e,sideCar:GR}))});rx.classNames=_u.classNames;var YR=function(r){if(typeof document>"u")return null;var e=Array.isArray(r)?r[0]:r;return e.ownerDocument.body},pi=new WeakMap,Pc=new WeakMap,Rc={},Kh=0,sx=function(r){return r&&(r.host||sx(r.parentNode))},XR=function(r,e){return e.map(function(t){if(r.contains(t))return t;var n=sx(t);return n&&r.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",r,". Doing nothing"),null)}).filter(function(t){return!!t})},KR=function(r,e,t,n){var s=XR(e,Array.isArray(r)?r:[r]);Rc[t]||(Rc[t]=new WeakMap);var o=Rc[t],l=[],c=new Set,u=new Set(s),h=function(p){!p||c.has(p)||(c.add(p),h(p.parentNode))};s.forEach(h);var f=function(p){!p||u.has(p)||Array.prototype.forEach.call(p.children,function(v){if(c.has(v))f(v);else try{var b=v.getAttribute(n),_=b!==null&&b!=="false",w=(pi.get(v)||0)+1,x=(o.get(v)||0)+1;pi.set(v,w),o.set(v,x),l.push(v),w===1&&_&&Pc.set(v,!0),x===1&&v.setAttribute(t,"true"),_||v.setAttribute(n,"true")}catch(E){console.error("aria-hidden: cannot operate on ",v,E)}})};return f(e),c.clear(),Kh++,function(){l.forEach(function(p){var v=pi.get(p)-1,b=o.get(p)-1;pi.set(p,v),o.set(p,b),v||(Pc.has(p)||p.removeAttribute(n),Pc.delete(p)),b||p.removeAttribute(t)}),Kh--,Kh||(pi=new WeakMap,pi=new WeakMap,Pc=new WeakMap,Rc={})}},QR=function(r,e,t){t===void 0&&(t="data-aria-hidden");var n=Array.from(Array.isArray(r)?r:[r]),s=YR(r);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live], script"))),KR(n,s,t,"aria-hidden")):function(){return null}},Eu="Dialog",[ix]=yu(Eu),[JR,Wn]=ix(Eu),ox=r=>{const{__scopeDialog:e,children:t,open:n,defaultOpen:s,onOpenChange:o,modal:l=!0}=r,c=T.useRef(null),u=T.useRef(null),[h,f]=sp({prop:n,defaultProp:s??!1,onChange:o,caller:Eu});return g.jsx(JR,{scope:e,triggerRef:c,contentRef:u,contentId:Zo(),titleId:Zo(),descriptionId:Zo(),open:h,onOpenChange:f,onOpenToggle:T.useCallback(()=>f(p=>!p),[f]),modal:l,children:t})};ox.displayName=Eu;var ax="DialogTrigger",ZR=T.forwardRef((r,e)=>{const{__scopeDialog:t,...n}=r,s=Wn(ax,t),o=ar(e,s.triggerRef);return g.jsx(qt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":fp(s.open),...n,ref:o,onClick:Dt(r.onClick,s.onOpenToggle)})});ZR.displayName=ax;var dp="DialogPortal",[eN,lx]=ix(dp,{forceMount:void 0}),cx=r=>{const{__scopeDialog:e,forceMount:t,children:n,container:s}=r,o=Wn(dp,e);return g.jsx(eN,{scope:e,forceMount:t,children:T.Children.map(n,l=>g.jsx(ba,{present:t||o.open,children:g.jsx(Kb,{asChild:!0,container:s,children:l})}))})};cx.displayName=dp;var iu="DialogOverlay",ux=T.forwardRef((r,e)=>{const t=lx(iu,r.__scopeDialog),{forceMount:n=t.forceMount,...s}=r,o=Wn(iu,r.__scopeDialog);return o.modal?g.jsx(ba,{present:n||o.open,children:g.jsx(nN,{...s,ref:e})}):null});ux.displayName=iu;var tN=oa("DialogOverlay.RemoveScroll"),nN=T.forwardRef((r,e)=>{const{__scopeDialog:t,...n}=r,s=Wn(iu,t);return g.jsx(rx,{as:tN,allowPinchZoom:!0,shards:[s.contentRef],children:g.jsx(qt.div,{"data-state":fp(s.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),Ms="DialogContent",dx=T.forwardRef((r,e)=>{const t=lx(Ms,r.__scopeDialog),{forceMount:n=t.forceMount,...s}=r,o=Wn(Ms,r.__scopeDialog);return g.jsx(ba,{present:n||o.open,children:o.modal?g.jsx(rN,{...s,ref:e}):g.jsx(sN,{...s,ref:e})})});dx.displayName=Ms;var rN=T.forwardRef((r,e)=>{const t=Wn(Ms,r.__scopeDialog),n=T.useRef(null),s=ar(e,t.contentRef,n);return T.useEffect(()=>{const o=n.current;if(o)return QR(o)},[]),g.jsx(hx,{...r,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Dt(r.onCloseAutoFocus,o=>{o.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:Dt(r.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0;(l.button===2||c)&&o.preventDefault()}),onFocusOutside:Dt(r.onFocusOutside,o=>o.preventDefault())})}),sN=T.forwardRef((r,e)=>{const t=Wn(Ms,r.__scopeDialog),n=T.useRef(!1),s=T.useRef(!1);return g.jsx(hx,{...r,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{r.onCloseAutoFocus?.(o),o.defaultPrevented||(n.current||t.triggerRef.current?.focus(),o.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:o=>{r.onInteractOutside?.(o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const l=o.target;t.triggerRef.current?.contains(l)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),hx=T.forwardRef((r,e)=>{const{__scopeDialog:t,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:o,...l}=r,c=Wn(Ms,t),u=T.useRef(null),h=ar(e,u);return cR(),g.jsxs(g.Fragment,{children:[g.jsx(Yb,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:o,children:g.jsx(qb,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":fp(c.open),...l,ref:h,onDismiss:()=>c.onOpenChange(!1)})}),g.jsxs(g.Fragment,{children:[g.jsx(iN,{titleId:c.titleId}),g.jsx(aN,{contentRef:u,descriptionId:c.descriptionId})]})]})}),hp="DialogTitle",fx=T.forwardRef((r,e)=>{const{__scopeDialog:t,...n}=r,s=Wn(hp,t);return g.jsx(qt.h2,{id:s.titleId,...n,ref:e})});fx.displayName=hp;var px="DialogDescription",mx=T.forwardRef((r,e)=>{const{__scopeDialog:t,...n}=r,s=Wn(px,t);return g.jsx(qt.p,{id:s.descriptionId,...n,ref:e})});mx.displayName=px;var gx="DialogClose",vx=T.forwardRef((r,e)=>{const{__scopeDialog:t,...n}=r,s=Wn(gx,t);return g.jsx(qt.button,{type:"button",...n,ref:e,onClick:Dt(r.onClick,()=>s.onOpenChange(!1))})});vx.displayName=gx;function fp(r){return r?"open":"closed"}var yx="DialogTitleWarning",[DM,wx]=yk(yx,{contentName:Ms,titleName:hp,docsSlug:"dialog"}),iN=({titleId:r})=>{const e=wx(yx),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return T.useEffect(()=>{r&&(document.getElementById(r)||console.error(t))},[t,r]),null},oN="DialogDescriptionWarning",aN=({contentRef:r,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${wx(oN).contentName}}.`;return T.useEffect(()=>{const s=r.current?.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(n))},[n,r,e]),null},lN=ox,cN=cx,bx=ux,xx=dx,Sx=fx,_x=mx,uN=vx;var dN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const hN=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Rr=(r,e)=>{const t=T.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:c="",children:u,...h},f)=>T.createElement("svg",{ref:f,...dN,width:s,height:s,stroke:n,strokeWidth:l?Number(o)*24/Number(s):o,className:["lucide",`lucide-${hN(r)}`,c].join(" "),...h},[...e.map(([p,v])=>T.createElement(p,v)),...Array.isArray(u)?u:[u]]));return t.displayName=`${r}`,t};const fN=Rr("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const y0=Rr("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const w0=Rr("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const pN=Rr("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const kf=Rr("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const mN=Rr("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);const Pf=Rr("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);const Ex=Rr("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const gN=Rr("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ta=lN,vN=cN,Ax=T.forwardRef(({className:r,...e},t)=>g.jsx(bx,{ref:t,className:Xe("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...e}));Ax.displayName=bx.displayName;const Ti=T.forwardRef(({className:r,children:e,...t},n)=>g.jsxs(vN,{children:[g.jsx(Ax,{}),g.jsxs(xx,{ref:n,className:Xe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...t,children:[e,g.jsxs(uN,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[g.jsx(gN,{className:"h-4 w-4"}),g.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ti.displayName=xx.displayName;const ki=({className:r,...e})=>g.jsx("div",{className:Xe("flex flex-col space-y-1.5 text-center sm:text-left",r),...e});ki.displayName="DialogHeader";const Pi=({className:r,...e})=>g.jsx("div",{className:Xe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",r),...e});Pi.displayName="DialogFooter";const Ri=T.forwardRef(({className:r,...e},t)=>g.jsx(Sx,{ref:t,className:Xe("text-lg font-semibold leading-none tracking-tight",r),...e}));Ri.displayName=Sx.displayName;const Ni=T.forwardRef(({className:r,...e},t)=>g.jsx(_x,{ref:t,className:Xe("text-sm text-muted-foreground",r),...e}));Ni.displayName=_x.displayName;function yN({isOpen:r,onClose:e,onCreateDelivery:t,selectedOrdersCount:n}){const[s,o]=T.useState(""),[l,c]=T.useState(""),[u,h]=T.useState(!1),f=async v=>{if(v.preventDefault(),!s.trim()){alert("Please enter a deliverer name");return}if(!l){alert("Please select a vehicle");return}h(!0);try{await t(s.trim(),l),o(""),c(""),e()}catch(b){console.error("Failed to create delivery:",b),alert("Failed to start delivery")}finally{h(!1)}},p=()=>{o(""),c(""),e()};return g.jsx(ta,{open:r,onOpenChange:p,children:g.jsxs(Ti,{className:"sm:max-w-[425px]",children:[g.jsxs(ki,{children:[g.jsx(Ri,{children:"Start Delivery"}),g.jsxs(Ni,{children:["Create a delivery run for ",n," selected order",n!==1?"s":"","."]})]}),g.jsxs("form",{onSubmit:f,children:[g.jsxs("div",{className:"grid gap-4 py-4",children:[g.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[g.jsx("label",{htmlFor:"runner",className:"text-right",children:"Deliverer"}),g.jsx("input",{id:"runner",type:"text",placeholder:"Enter deliverer name",value:s,onChange:v=>o(v.target.value),className:"col-span-3 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",disabled:u})]}),g.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[g.jsx("label",{htmlFor:"vehicle",className:"text-right",children:"Vehicle"}),g.jsxs("select",{id:"vehicle",value:l,onChange:v=>c(v.target.value),className:"col-span-3 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",disabled:u,children:[g.jsx("option",{value:"",children:"Select a vehicle"}),g.jsx("option",{value:"van",children:"Van"}),g.jsx("option",{value:"golf_cart",children:"Golf Cart"})]})]})]}),g.jsxs(Pi,{children:[g.jsx(xt,{type:"button",variant:"outline",onClick:p,disabled:u,children:"Cancel"}),g.jsx(xt,{type:"submit",disabled:u,children:u?"Starting...":"Start Delivery"})]})]})]})})}function wN(r){const[e,t]=T.useState([]),[n,s]=T.useState(!0),[o,l]=T.useState(null),c=T.useRef(null),u=async()=>{try{l(null),s(!0);const h=await fetch("/api/orders");if(h.ok){const f=await h.json();t(f)}else console.warn("HTTP fallback failed:",h.status),t([]);s(!1)}catch(h){console.error("Failed to fetch orders via HTTP:",h),l("Failed to load orders"),s(!1)}};return T.useEffect(()=>{u();const h=`${window.location.protocol}//${window.location.host}`;let f;try{f=ea(h,{path:"/socket.io",transports:["websocket","polling"],reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3}),c.current=f}catch(p){console.debug("Socket.IO connection failed (expected if backend not running)",p);return}return f.on("connect",()=>{console.debug("Orders Socket.IO connected"),l(null),f.emit("join",{room:"orders"})}),f.on("orders_update",p=>{try{p.type==="orders_update"&&(t(p.data||[]),s(!1))}catch(v){console.warn("Failed to parse Socket.IO message",v)}}),f.on("disconnect",()=>{console.debug("Orders Socket.IO disconnected")}),f.on("connect_error",p=>{console.debug("Orders Socket.IO error (expected if backend not running)",p),l("Socket.IO connection failed - using cached data")}),()=>{try{f.disconnect()}catch{}}},[r]),{orders:e,loading:n,error:o,refetch:u}}function Cx(){const[r,e]=T.useState([]),[t,n]=T.useState(!0),[s,o]=T.useState(new Set),[l,c]=T.useState(!1),{orders:u}=wN(),[h,f]=T.useState(!1),[p,v]=T.useState(""),[b,_]=T.useState(""),[w,x]=T.useState(!1),[E,A]=T.useState(""),[C,k]=T.useState(null),[N,R]=T.useState(!1),[D,F]=T.useState([]),U=cr();T.useEffect(()=>{q()},[u]);const q=async()=>{n(!0);try{const $=await it.getOrders({status:Te.PRE_DELIVERY});e($)}catch($){console.error("Failed to load orders:",$)}finally{n(!1)}},Y=$=>{const Q=new Set(s);Q.has($)?Q.delete($):Q.add($),o(Q)},ne=()=>{if(s.size===0){v("Selection Required"),_("Please select at least one order to start a delivery."),f(!0);return}const Q=r.filter(M=>s.has(M.id)).filter(M=>M.pick_status&&!M.pick_status.is_fully_picked);if(Q.length>0){F(Q),R(!0);return}c(!0)},oe=()=>{R(!1),c(!0)},te=async($,Q)=>{try{await Su.createRun({runner:$,order_ids:Array.from(s),vehicle:Q}),o(new Set),q(),c(!1),v("Success"),_("Delivery started successfully!"),f(!0)}catch(M){throw console.error("Failed to start delivery:",M),M}},ae=$=>{k($),A(""),x(!0)},G=async()=>{C&&(await K(C,Te.ISSUE,E),x(!1),k(null))},K=async($,Q,M)=>{try{await it.updateOrderStatus($,{status:Q,reason:M}),q()}catch(H){console.error("Failed to update status:",H),v("Error"),_("Failed to update order status."),f(!0)}},V=$=>{U(`/orders/${$}`)};return t?g.jsx("div",{className:"flex items-center justify-center py-8",children:g.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading..."})}):g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("h2",{className:"text-lg font-semibold",children:"Pre-Delivery Queue"}),g.jsxs(xt,{onClick:ne,disabled:s.size===0,className:"bg-orange-500 hover:bg-orange-600",children:["Start Delivery (",s.size," selected)"]})]}),r.length===0?g.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"No orders in pre-delivery queue"}):g.jsx("div",{className:"rounded-md border",children:g.jsxs("table",{className:"w-full",children:[g.jsx("thead",{children:g.jsxs("tr",{className:"border-b",children:[g.jsx("th",{className:"h-12 px-4 text-left align-middle",children:g.jsx("input",{type:"checkbox",checked:s.size===r.length&&r.length>0,onChange:$=>{$.target.checked?o(new Set(r.map(Q=>Q.id))):o(new Set)}})}),g.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Order ID"}),g.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Recipient"}),g.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Location"}),g.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Deliverer"}),g.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Actions"})]})}),g.jsx("tbody",{children:r.map($=>g.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[g.jsx("td",{className:"p-4 align-middle",children:g.jsx("input",{type:"checkbox",checked:s.has($.id),onChange:()=>Y($.id)})}),g.jsx("td",{className:"p-4 align-middle",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(xt,{variant:"link",onClick:()=>V($.id),className:"p-0 h-auto font-normal",children:$.inflow_order_id}),$.pick_status&&!$.pick_status.is_fully_picked&&g.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800",title:`Partial pick: ${$.pick_status.total_picked}/${$.pick_status.total_ordered} items picked`,children:[g.jsx(y0,{className:"h-3 w-3"}),"Partial"]})]})}),g.jsx("td",{className:"p-4 align-middle",children:$.recipient_name||"N/A"}),g.jsx("td",{className:"p-4 align-middle",children:rp($)}),g.jsx("td",{className:"p-4 align-middle",children:$.assigned_deliverer||"Unassigned"}),g.jsx("td",{className:"p-4 align-middle",children:g.jsx(xt,{variant:"destructive",size:"sm",onClick:()=>ae($.id),children:"Flag Issue"})})]},$.id))})]})}),g.jsx(yN,{isOpen:l,onClose:()=>c(!1),onCreateDelivery:te,selectedOrdersCount:s.size}),g.jsx(ta,{open:h,onOpenChange:f,children:g.jsxs(Ti,{children:[g.jsxs(ki,{children:[g.jsx(Ri,{children:p}),g.jsx(Ni,{children:b})]}),g.jsx(Pi,{children:g.jsx(xt,{onClick:()=>f(!1),children:"OK"})})]})}),g.jsx(ta,{open:w,onOpenChange:x,children:g.jsxs(Ti,{children:[g.jsxs(ki,{children:[g.jsx(Ri,{children:"Flag Order as Issue"}),g.jsx(Ni,{children:"Please provide a reason for flagging this order."})]}),g.jsxs("div",{className:"grid gap-4 py-4",children:[g.jsx("label",{htmlFor:"issue-reason",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Reason"}),g.jsx("textarea",{id:"issue-reason",value:E,onChange:$=>A($.target.value),placeholder:"e.g., Wrong address, Recipient unavailable...",className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),g.jsxs(Pi,{children:[g.jsx(xt,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),g.jsx(xt,{onClick:G,children:"Submit"})]})]})}),g.jsx(ta,{open:N,onOpenChange:R,children:g.jsxs(Ti,{children:[g.jsxs(ki,{children:[g.jsxs(Ri,{className:"flex items-center gap-2",children:[g.jsx(y0,{className:"h-5 w-5 text-amber-500"}),"Partial Pick Warning"]}),g.jsxs(Ni,{children:[D.length," order",D.length>1?"s are":" is"," only partially picked. Only the picked items will be delivered. Remainder orders will be created for unpicked items."]})]}),g.jsx("div",{className:"max-h-48 overflow-y-auto py-2",children:g.jsx("ul",{className:"space-y-1 text-sm",children:D.map($=>g.jsxs("li",{className:"flex justify-between items-center px-2 py-1 bg-muted rounded",children:[g.jsx("span",{className:"font-medium",children:$.inflow_order_id}),g.jsxs("span",{className:"text-muted-foreground",children:[$.pick_status?.total_picked,"/",$.pick_status?.total_ordered," items"]})]},$.id))})}),g.jsxs(Pi,{children:[g.jsx(xt,{variant:"outline",onClick:()=>R(!1),children:"Cancel"}),g.jsx(xt,{onClick:oe,className:"bg-amber-500 hover:bg-amber-600",children:"Continue Anyway"})]})]})})]})}function Tx(){const[r,e]=T.useState([]),[t,n]=T.useState(!0),s=cr();T.useEffect(()=>{o()},[]);const o=async()=>{n(!0);try{const c=await it.getOrders({status:Te.IN_DELIVERY});e(c)}catch(c){console.error("Failed to load orders:",c)}finally{n(!1)}},l=c=>{s(`/orders/${c}`)};return t?g.jsx("div",{className:"flex items-center justify-center py-8",children:g.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading..."})}):g.jsxs("div",{className:"space-y-4",children:[g.jsx("h2",{className:"text-lg font-semibold",children:"Active Deliveries"}),g.jsx(ab,{orders:r,onViewDetail:l})]})}function kx(){const[r,e]=T.useState([]),[t,n]=T.useState(!0),[s,o]=T.useState(""),[l,c]=T.useState(null);T.useEffect(()=>{u()},[s]);const u=async()=>{n(!0);try{const f=await it.getOrders({status:Te.SHIPPING,search:s.trim()?s.trim():void 0});e(f)}catch(f){console.error("Failed to load orders:",f),alert("Failed to load orders")}finally{n(!1)}},h=async(f,p,v,b)=>{c(f);try{await it.updateShippingWorkflow(f,{status:p,carrier_name:v,tracking_number:b,updated_by:"shipping_coordinator"}),await u()}catch(_){console.error("Failed to update shipping workflow:",_),alert("Failed to update shipping status")}finally{c(null)}};return g.jsx("div",{className:"space-y-4",children:g.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[g.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-end md:justify-between",children:[g.jsx("h2",{className:"text-lg font-semibold",children:"Shipping"}),g.jsx("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-end",children:g.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:["Search",g.jsx("input",{className:"rounded-md border px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#800000]",value:s,onChange:f=>o(f.target.value),placeholder:"Order ID / recipient / location..."})]})})]}),t?g.jsx("div",{className:"p-4",children:"Loading..."}):g.jsx("div",{className:"mt-4 overflow-x-auto",children:g.jsxs("table",{className:"min-w-full border-collapse border border-gray-200",children:[g.jsx("thead",{children:g.jsxs("tr",{className:"bg-gray-50",children:[g.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Order"}),g.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Location / City"}),g.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Dock Status"}),g.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"FedEx"})]})}),g.jsxs("tbody",{children:[r.map(f=>{const p=f.shipping_workflow_status||xr.WORK_AREA,v=l===f.id;return g.jsxs("tr",{className:"hover:bg-gray-50",children:[g.jsx("td",{className:"border border-gray-200 px-4 py-2 font-medium text-gray-900",children:f.inflow_order_id||f.id}),g.jsx("td",{className:"border border-gray-200 px-4 py-2 text-gray-800",children:rp(f)}),g.jsx("td",{className:"border border-gray-200 px-4 py-2",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-semibold ${p===xr.DOCK?"bg-blue-100 text-blue-700":p===xr.SHIPPED?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:p1[p]}),p===xr.WORK_AREA&&g.jsx("button",{type:"button",onClick:()=>h(f.id,xr.DOCK),disabled:v,className:"rounded-md border border-gray-200 px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:v?"Moving...":"Move to Dock"})]})}),g.jsx("td",{className:"border border-gray-200 px-4 py-2",children:g.jsxs("div",{className:"flex flex-col gap-2",children:[p===xr.DOCK&&g.jsx("button",{type:"button",onClick:()=>{const b=prompt("Carrier name (FedEx, UPS, etc.):");b&&h(f.id,xr.SHIPPED,b)},disabled:v,className:"w-fit rounded-md bg-[#800000] px-3 py-1.5 text-sm font-semibold text-white hover:bg-[#660000] disabled:opacity-50 disabled:cursor-not-allowed",children:v?"Shipping...":"Mark as Shipped"}),p===xr.SHIPPED&&f.carrier_name&&g.jsxs("div",{className:"text-xs text-gray-600",children:[g.jsxs("div",{children:["Shipped to: ",f.carrier_name]}),f.tracking_number&&g.jsxs("div",{children:["Tracking: ",f.tracking_number]}),f.shipped_to_carrier_at&&g.jsxs("div",{children:["At: ",new Date(f.shipped_to_carrier_at).toLocaleString()]})]})]})})]},f.id)}),!r.length&&g.jsx("tr",{children:g.jsx("td",{className:"border border-gray-200 px-4 py-6 text-center text-gray-600",colSpan:4,children:"No orders found."})})]})]})})]})})}function bN(){const[r,e]=T.useState([]),[t,n]=T.useState(!0);T.useEffect(()=>{(async()=>{try{n(!0);const u=await Su.getRuns(["Completed","Cancelled"]);e(u)}catch(u){console.error("Failed to fetch past runs:",u)}finally{n(!1)}})()},[]);const s=c=>c?new Date(c).toLocaleString():"N/A",o=c=>{switch(c.toLowerCase()){case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},l=c=>c.split("_").map(u=>u.charAt(0).toUpperCase()+u.slice(1)).join(" ");return t?g.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading past delivery runs..."}):r.length===0?g.jsx("div",{className:"text-center py-12 border rounded-lg bg-muted/10",children:g.jsx("p",{className:"text-muted-foreground",children:"No past delivery runs found"})}):g.jsx("div",{className:"space-y-4",children:r.map(c=>g.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-white hover:bg-gray-50",children:[g.jsxs("div",{className:"flex items-center gap-6",children:[g.jsxs("div",{children:[g.jsx("div",{className:"font-medium text-lg",children:c.name||`Run ${c.id.slice(0,8)}`}),g.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[g.jsx(kf,{className:"w-3 h-3"}),s(c.end_time||c.start_time)]})]}),g.jsxs("div",{className:"flex gap-4 text-sm text-gray-600",children:[g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx(Ex,{className:"w-4 h-4"}),c.runner]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx(Pf,{className:"w-4 h-4"}),l(c.vehicle)]})]})]}),g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx(tu,{className:o(c.status),children:c.status}),g.jsx(rn,{to:`/delivery/runs/${c.id}`,children:g.jsx(xt,{variant:"outline",size:"sm",children:"View Details"})})]})]},c.id))})}function xN(){const[r,e]=T.useState({readyForDelivery:0,activeDeliveries:0,shippingQueue:0,completedToday:0}),[t,n]=T.useState(!0);return T.useEffect(()=>{const s=async()=>{try{n(!0);const[l,c,u,h]=await Promise.all([it.getOrders({status:Te.PRE_DELIVERY}),it.getOrders({status:Te.IN_DELIVERY}),it.getOrders({status:Te.SHIPPING}),it.getOrders({status:Te.DELIVERED})]),f=new Date;f.setHours(0,0,0,0);const p=h.filter(v=>{let b=null;if(v.signature_captured_at?b=v.signature_captured_at:v.shipped_to_carrier_at?b=v.shipped_to_carrier_at:v.updated_at&&(b=v.updated_at),!b)return!1;const _=new Date(b);return _.setHours(0,0,0,0),_.getTime()===f.getTime()}).length;e({readyForDelivery:l.length,activeDeliveries:c.length,shippingQueue:u.length,completedToday:p})}catch(l){console.error("Failed to fetch delivery stats:",l)}finally{n(!1)}};s();const o=setInterval(s,3e4);return()=>clearInterval(o)},[]),g.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[g.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Delivery Dashboard"}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[g.jsx("div",{className:"lg:col-span-1",children:g.jsxs(rr,{children:[g.jsx(Er,{className:"pb-2",children:g.jsx(Ar,{children:"Live Status"})}),g.jsx(sr,{children:g.jsx(qP,{})})]})}),g.jsx("div",{className:"lg:col-span-2",children:g.jsxs(rr,{children:[g.jsx(Er,{className:"pb-2",children:g.jsx(Ar,{children:"Operations"})}),g.jsx(sr,{children:g.jsxs(Gk,{defaultValue:"pre-delivery",className:"w-full",children:[g.jsxs(Rb,{className:"grid w-full grid-cols-4",children:[g.jsx(Go,{value:"pre-delivery",children:"Pre-Delivery"}),g.jsx(Go,{value:"in-delivery",children:"In Delivery"}),g.jsx(Go,{value:"shipping",children:"Shipping"}),g.jsx(Go,{value:"history",children:"History"})]}),g.jsx(Yo,{value:"pre-delivery",className:"mt-4",children:g.jsx(Cx,{})}),g.jsx(Yo,{value:"in-delivery",className:"mt-4",children:g.jsx(Tx,{})}),g.jsx(Yo,{value:"shipping",className:"mt-4",children:g.jsx(kx,{})}),g.jsx(Yo,{value:"history",className:"mt-4",children:g.jsx(bN,{})})]})})]})})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[g.jsxs(rr,{children:[g.jsx(Er,{className:"pb-2",children:g.jsx(Ar,{className:"text-sm font-medium",children:"Ready for Delivery"})}),g.jsx(sr,{children:g.jsx("div",{className:"text-2xl font-bold",children:t?"...":r.readyForDelivery})})]}),g.jsxs(rr,{children:[g.jsx(Er,{className:"pb-2",children:g.jsx(Ar,{className:"text-sm font-medium",children:"Active Deliveries"})}),g.jsx(sr,{children:g.jsx("div",{className:"text-2xl font-bold",children:t?"...":r.activeDeliveries})})]}),g.jsxs(rr,{children:[g.jsx(Er,{className:"pb-2",children:g.jsx(Ar,{className:"text-sm font-medium",children:"Shipping Queue"})}),g.jsx(sr,{children:g.jsx("div",{className:"text-2xl font-bold",children:t?"...":r.shippingQueue})})]}),g.jsxs(rr,{children:[g.jsx(Er,{className:"pb-2",children:g.jsx(Ar,{className:"text-sm font-medium",children:"Completed Today"})}),g.jsx(sr,{children:g.jsx("div",{className:"text-2xl font-bold",children:t?"...":r.completedToday})})]})]})]})}const Nc={sync:async()=>(await He.post("/inflow/sync")).data,getSyncStatus:async()=>(await He.get("/inflow/sync-status")).data,registerWebhook:async r=>(await He.post("/inflow/webhooks/register",r)).data,listWebhooks:async()=>(await He.get("/inflow/webhooks")).data,getWebhookDefaults:async()=>(await He.get("/inflow/webhooks/defaults")).data,deleteWebhook:async r=>(await He.delete(`/inflow/webhooks/${r}`)).data,testWebhook:async()=>(await He.post("/inflow/webhooks/test")).data};function SN(){const{user:r}=ya(),[e,t]=T.useState(null),[n,s]=T.useState(!0),[o,l]=T.useState(null),[c,u]=T.useState([]),[h,f]=T.useState(!1);T.useEffect(()=>{p(),v()},[]);const p=async()=>{s(!0);try{const A=await He.get("/system/status");t(A.data)}catch(A){console.error("Failed to load system status:",A),t({saml_auth:{name:"TAMU SSO",enabled:!1,configured:!1,status:"disabled"},graph_api:{name:"Microsoft Graph",enabled:!1,configured:!1,status:"disabled"},sharepoint:{name:"SharePoint Storage",enabled:!1,configured:!1,status:"disabled"},inflow_sync:{name:"Inflow Sync",enabled:!0,configured:!0,status:"active"},inflow_webhook:{name:"Inflow Webhooks",enabled:!1,configured:!1,status:"disabled"}})}finally{s(!1)}},v=async()=>{try{const A=await Nc.listWebhooks();u(A.webhooks)}catch(A){console.error("Failed to load Inflow webhooks:",A)}},b=async()=>{f(!0),l(null);try{const A=await Nc.getWebhookDefaults();await Nc.registerWebhook({url:A.url||"",events:A.events||[]}),l({type:"success",text:"Inflow webhook registered successfully"}),await v()}catch(A){console.error("Failed to register webhook:",A),l({type:"error",text:A.response?.data?.detail||"Failed to register webhook"})}finally{f(!1)}},_=async A=>{if(confirm("Are you sure you want to delete this webhook?"))try{await Nc.deleteWebhook(A),l({type:"success",text:"Webhook deleted successfully"}),await v()}catch(C){console.error("Failed to delete webhook:",C),l({type:"error",text:C.response?.data?.detail||"Failed to delete webhook"})}},w=A=>{switch(A){case"active":return"bg-green-100 border-green-300 text-green-800";case"warning":return"bg-yellow-100 border-yellow-300 text-yellow-800";case"disabled":return"bg-gray-100 border-gray-300 text-gray-600";case"error":return"bg-red-100 border-red-300 text-red-800"}},x=A=>{switch(A){case"active":return"";case"warning":return"";case"disabled":return"";case"error":return""}};if(n)return g.jsx("div",{className:"p-4",children:"Loading..."});const E=c.find(A=>A.status==="active");return g.jsxs("div",{className:"p-4 max-w-4xl space-y-6",children:[g.jsxs("div",{className:"flex items-center justify-between mb-6",children:[g.jsx("h1",{className:"text-2xl font-bold",children:"System Status"}),r&&g.jsxs("span",{className:"text-sm text-gray-500",children:["Logged in as ",r.email]})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e&&Object.values(e).map(A=>g.jsxs("div",{className:`border rounded-lg p-4 ${w(A.status)}`,children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-lg",children:x(A.status)}),g.jsx("h3",{className:"font-semibold",children:A.name})]}),A.details&&g.jsx("p",{className:"text-sm mt-1 opacity-80",children:A.details}),A.error&&g.jsx("p",{className:"text-sm mt-1 text-red-600",children:A.error})]},A.name))}),g.jsxs("div",{className:"bg-white rounded-lg shadow p-6 space-y-4",children:[g.jsx("h2",{className:"text-xl font-semibold",children:"Inflow Webhook"}),E?g.jsx("div",{className:"bg-green-50 border border-green-200 rounded p-4",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"font-medium text-green-800",children:" Webhook Active"}),g.jsx("p",{className:"text-sm text-green-600 mt-1",children:E.url}),g.jsxs("p",{className:"text-sm text-green-600",children:["Events: ",E.events.join(", ")]}),E.last_received_at&&g.jsxs("p",{className:"text-sm text-green-600",children:["Last event: ",new Date(E.last_received_at).toLocaleString()]})]}),g.jsx("button",{onClick:()=>_(E.webhook_id),className:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 text-sm",children:"Delete"})]})}):g.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-4",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("p",{className:"text-yellow-800",children:"No active webhook registered"}),g.jsx("button",{onClick:b,disabled:h,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:bg-gray-400",children:h?"Registering...":"Register Webhook"})]})})]}),o&&g.jsx("div",{className:`p-3 rounded ${o.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:o.text})]})}const Ht=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Rf=[.001,0,0,.001,0,0],Qh=1.35,fn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ir={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},la="pdfjs_internal_editor_",Ae={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Me={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},Px={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Rt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},na={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ht={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},xi={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},xa={ERRORS:0,WARNINGS:1,INFOS:5},Ui={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Dc={moveTo:0,lineTo:1,curveTo:2,closePath:3},Rx={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Au=xa.WARNINGS;function _N(r){Number.isInteger(r)&&(Au=r)}function EN(){return Au}function Cu(r){Au>=xa.INFOS&&console.info(`Info: ${r}`)}function Ce(r){Au>=xa.WARNINGS&&console.warn(`Warning: ${r}`)}function Ve(r){throw new Error(r)}function Ie(r,e){r||Ve(e)}function AN(r){switch(r?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function pp(r,e=null,t=null){if(!r)return null;if(t&&typeof r=="string"&&(t.addDefaultProtocol&&r.startsWith("www.")&&r.match(/\./g)?.length>=2&&(r=`http://${r}`),t.tryConvertEncoding))try{r=RN(r)}catch{}const n=e?URL.parse(r,e):URL.parse(r);return AN(n)?n:null}function mp(r,e,t=!1){const n=URL.parse(r);return n?(n.hash=e,n.href):t&&pp(r,"http://example.com")?r.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Re(r,e,t,n=!1){return Object.defineProperty(r,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const Bs=(function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e})();class b0 extends Bs{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Jh extends Bs{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class ou extends Bs{constructor(e){super(e,"InvalidPDFException")}}class ca extends Bs{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class CN extends Bs{constructor(e){super(e,"FormatError")}}class Tr extends Bs{constructor(e){super(e,"AbortException")}}function Nx(r){(typeof r!="object"||r?.length===void 0)&&Ve("Invalid argument for bytesToString");const e=r.length,t=8192;if(e<t)return String.fromCharCode.apply(null,r);const n=[];for(let s=0;s<e;s+=t){const o=Math.min(s+t,e),l=r.subarray(s,o);n.push(String.fromCharCode.apply(null,l))}return n.join("")}function Sa(r){typeof r!="string"&&Ve("Invalid argument for stringToBytes");const e=r.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=r.charCodeAt(n)&255;return t}function TN(r){return String.fromCharCode(r>>24&255,r>>16&255,r>>8&255,r&255)}function kN(){const r=new Uint8Array(4);return r[0]=1,new Uint32Array(r.buffer,0,1)[0]===1}function PN(){try{return new Function(""),!0}catch{return!1}}class Tt{static get isLittleEndian(){return Re(this,"isLittleEndian",kN())}static get isEvalSupported(){return Re(this,"isEvalSupported",PN())}static get isOffscreenCanvasSupported(){return Re(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Re(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return Re(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){return Re(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Zh=Array.from(Array(256).keys(),r=>r.toString(16).padStart(2,"0"));class fe{static makeHexColor(e,t,n){return`#${Zh[e]}${Zh[t]}${Zh[n]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,n=0){const s=e[n],o=e[n+1];e[n]=s*t[0]+o*t[2]+t[4],e[n+1]=s*t[1]+o*t[3]+t[5]}static applyTransformToBezier(e,t,n=0){const s=t[0],o=t[1],l=t[2],c=t[3],u=t[4],h=t[5];for(let f=0;f<6;f+=2){const p=e[n+f],v=e[n+f+1];e[n+f]=p*s+v*l+u,e[n+f+1]=p*o+v*c+h}}static applyInverseTransform(e,t){const n=e[0],s=e[1],o=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-s*t[2]+t[2]*t[5]-t[4]*t[3])/o,e[1]=(-n*t[1]+s*t[0]+t[4]*t[1]-t[5]*t[0])/o}static axialAlignedBoundingBox(e,t,n){const s=t[0],o=t[1],l=t[2],c=t[3],u=t[4],h=t[5],f=e[0],p=e[1],v=e[2],b=e[3];let _=s*f+u,w=_,x=s*v+u,E=x,A=c*p+h,C=A,k=c*b+h,N=k;if(o!==0||l!==0){const R=o*f,D=o*v,F=l*p,U=l*b;_+=F,E+=F,x+=U,w+=U,A+=R,N+=R,k+=D,C+=D}n[0]=Math.min(n[0],_,x,w,E),n[1]=Math.min(n[1],A,k,C,N),n[2]=Math.max(n[2],_,x,w,E),n[3]=Math.max(n[3],A,k,C,N)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],s=e[1],o=e[2],l=e[3],c=n**2+s**2,u=n*o+s*l,h=o**2+l**2,f=(c+h)/2,p=Math.sqrt(f**2-(c*h-u**2));t[0]=Math.sqrt(f+p||1),t[1]=Math.sqrt(f-p||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>s)return null;const o=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),l=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return o>l?null:[n,o,s,l]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,s,o){o[0]=Math.min(o[0],e,n),o[1]=Math.min(o[1],t,s),o[2]=Math.max(o[2],e,n),o[3]=Math.max(o[3],t,s)}static#e(e,t,n,s,o,l,c,u,h,f){if(h<=0||h>=1)return;const p=1-h,v=h*h,b=v*h,_=p*(p*(p*e+3*h*t)+3*v*n)+b*s,w=p*(p*(p*o+3*h*l)+3*v*c)+b*u;f[0]=Math.min(f[0],_),f[1]=Math.min(f[1],w),f[2]=Math.max(f[2],_),f[3]=Math.max(f[3],w)}static#t(e,t,n,s,o,l,c,u,h,f,p,v){if(Math.abs(h)<1e-12){Math.abs(f)>=1e-12&&this.#e(e,t,n,s,o,l,c,u,-p/f,v);return}const b=f**2-4*p*h;if(b<0)return;const _=Math.sqrt(b),w=2*h;this.#e(e,t,n,s,o,l,c,u,(-f+_)/w,v),this.#e(e,t,n,s,o,l,c,u,(-f-_)/w,v)}static bezierBoundingBox(e,t,n,s,o,l,c,u,h){h[0]=Math.min(h[0],e,c),h[1]=Math.min(h[1],t,u),h[2]=Math.max(h[2],e,c),h[3]=Math.max(h[3],t,u),this.#t(e,n,o,c,t,s,l,u,3*(-e+3*(n-o)+c),6*(e-2*n+o),3*(n-e),h),this.#t(e,n,o,c,t,s,l,u,3*(-t+3*(s-l)+u),6*(t-2*s+l),3*(s-t),h)}}function RN(r){return decodeURIComponent(escape(r))}let ef=null,x0=null;function Dx(r){return ef||(ef=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,x0=new Map([["","t"]])),r.replaceAll(ef,(e,t,n)=>t?t.normalize("NFKC"):x0.get(n))}function gp(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const r=new Uint8Array(32);return crypto.getRandomValues(r),Nx(r)}const vp="pdfjs_internal_id_";function NN(r,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[n,s,...o]=t;if(!r(n)&&!Number.isInteger(n)||!e(s))return!1;const l=o.length;let c=!0;switch(s.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;c=!1;break;default:return!1}for(const u of o)if(!(typeof u=="number"||c&&u===null))return!1;return!0}function Ft(r,e,t){return Math.min(Math.max(r,e),t)}function Ox(r){return Uint8Array.prototype.toBase64?r.toBase64():btoa(Nx(r))}function DN(r){return Uint8Array.fromBase64?Uint8Array.fromBase64(r):Sa(atob(r))}typeof Promise.try!="function"&&(Promise.try=function(r,...e){return new Promise(t=>{t(r(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(r){return r.reduce((e,t)=>e+t,0)});class ua{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function s(o){if(!o)return;let l=null;const c=o.name;if(c==="#text")l=o.value;else if(ua.shouldBuildText(c))o?.attributes?.textContent?l=o.attributes.textContent:o.value&&(l=o.value);else return;if(l!==null&&t.push({str:l}),!!o.children)for(const u of o.children)s(u)}return s(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class yp{static setupStorage(e,t,n,s,o){const l=s.getValue(t,{value:null});switch(n.name){case"textarea":if(l.value!==null&&(e.textContent=l.value),o==="print")break;e.addEventListener("input",c=>{s.setValue(t,{value:c.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(l.value===n.attributes.xfaOn?e.setAttribute("checked",!0):l.value===n.attributes.xfaOff&&e.removeAttribute("checked"),o==="print")break;e.addEventListener("change",c=>{s.setValue(t,{value:c.target.checked?c.target.getAttribute("xfaOn"):c.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&e.setAttribute("value",l.value),o==="print")break;e.addEventListener("input",c=>{s.setValue(t,{value:c.target.value})})}break;case"select":if(l.value!==null){e.setAttribute("value",l.value);for(const c of n.children)c.attributes.value===l.value?c.attributes.selected=!0:c.attributes.hasOwnProperty("selected")&&delete c.attributes.selected}e.addEventListener("input",c=>{const u=c.target.options,h=u.selectedIndex===-1?"":u[u.selectedIndex].value;s.setValue(t,{value:h})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:s,linkService:o}){const{attributes:l}=t,c=e instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${s}`);for(const[u,h]of Object.entries(l))if(h!=null)switch(u){case"class":h.length&&e.setAttribute(u,h.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",h);break;case"style":Object.assign(e.style,h);break;case"textContent":e.textContent=h;break;default:(!c||u!=="href"&&u!=="newWindow")&&e.setAttribute(u,h)}c&&o.addLinkAttributes(e,l.href,l.newWindow),n&&l.dataId&&this.setupStorage(e,l.dataId,t,n)}static render(e){const t=e.annotationStorage,n=e.linkService,s=e.xfaHtml,o=e.intent||"display",l=document.createElement(s.name);s.attributes&&this.setAttributes({html:l,element:s,intent:o,linkService:n});const c=o!=="richText",u=e.div;if(u.append(l),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;u.style.transform=p}c&&u.setAttribute("class","xfaLayer xfaFont");const h=[];if(s.children.length===0){if(s.value){const p=document.createTextNode(s.value);l.append(p),c&&ua.shouldBuildText(s.name)&&h.push(p)}return{textDivs:h}}const f=[[s,-1,l]];for(;f.length>0;){const[p,v,b]=f.at(-1);if(v+1===p.children.length){f.pop();continue}const _=p.children[++f.at(-1)[1]];if(_===null)continue;const{name:w}=_;if(w==="#text"){const E=document.createTextNode(_.value);h.push(E),b.append(E);continue}const x=_?.attributes?.xmlns?document.createElementNS(_.attributes.xmlns,w):document.createElement(w);if(b.append(x),_.attributes&&this.setAttributes({html:x,element:_,storage:t,intent:o,linkService:n}),_.children?.length>0)f.push([_,-1,x]);else if(_.value){const E=document.createTextNode(_.value);c&&ua.shouldBuildText(w)&&h.push(E),x.append(E)}}for(const p of u.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:h}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Sr="http://www.w3.org/2000/svg";class Ls{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Ki(r,e="text"){if(Ko(r,document.baseURI)){const t=await fetch(r);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const s=new XMLHttpRequest;s.open("GET",r,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}n(new Error(s.statusText))}},s.send(null)})}class _a{constructor({viewBox:e,userUnit:t,scale:n,rotation:s,offsetX:o=0,offsetY:l=0,dontFlip:c=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=s,this.offsetX=o,this.offsetY=l,n*=t;const u=(e[2]+e[0])/2,h=(e[3]+e[1])/2;let f,p,v,b;switch(s%=360,s<0&&(s+=360),s){case 180:f=-1,p=0,v=0,b=1;break;case 90:f=0,p=1,v=1,b=0;break;case 270:f=0,p=-1,v=-1,b=0;break;case 0:f=1,p=0,v=0,b=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(v=-v,b=-b);let _,w,x,E;f===0?(_=Math.abs(h-e[1])*n+o,w=Math.abs(u-e[0])*n+l,x=(e[3]-e[1])*n,E=(e[2]-e[0])*n):(_=Math.abs(u-e[0])*n+o,w=Math.abs(h-e[1])*n+l,x=(e[2]-e[0])*n,E=(e[3]-e[1])*n),this.transform=[f*n,p*n,v*n,b*n,_-f*n*u-v*n*h,w-p*n*u-b*n*h],this.width=x,this.height=E}get rawDims(){const e=this.viewBox;return Re(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:s=this.offsetY,dontFlip:o=!1}={}){return new _a({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:s,dontFlip:o})}convertToViewportPoint(e,t){const n=[e,t];return fe.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];fe.applyTransform(t,this.transform);const n=[e[2],e[3]];return fe.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return fe.applyInverseTransform(n,this.transform),n}}class Tu extends Bs{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Ea(r){const e=r.length;let t=0;for(;t<e&&r[t].trim()==="";)t++;return r.substring(t,t+5).toLowerCase()==="data:"}function ku(r){return typeof r=="string"&&/\.pdf$/i.test(r)}function Mx(r){return[r]=r.split(/[#?]/,1),r.substring(r.lastIndexOf("/")+1)}function Lx(r,e="document.pdf"){if(typeof r!="string")return e;if(Ea(r))return Ce('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=(c=>{try{return new URL(c)}catch{try{return new URL(decodeURIComponent(c))}catch{try{return new URL(c,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(c),"https://foo.bar")}catch{return null}}}}})(r);if(!n)return e;const s=c=>{try{let u=decodeURIComponent(c);return u.includes("/")?(u=u.split("/").at(-1),u.test(/^\.pdf$/i)?u:c):u}catch{return c}},o=/\.pdf$/i,l=n.pathname.split("/").at(-1);if(o.test(l))return s(l);if(n.searchParams.size>0){const c=Array.from(n.searchParams.values()).reverse();for(const h of c)if(o.test(h))return s(h);const u=Array.from(n.searchParams.keys()).reverse();for(const h of u)if(o.test(h))return s(h)}if(n.hash){const u=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(u)return s(u[0])}return e}class S0{started=Object.create(null);times=[];time(e){e in this.started&&Ce(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Ce(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:s,end:o}of this.times)e.push(`${n.padEnd(t)} ${o-s}ms
`);return e.join("")}}function Ko(r,e){const t=e?URL.parse(r,e):URL.parse(r);return t?.protocol==="http:"||t?.protocol==="https:"}function gn(r){r.preventDefault()}function st(r){r.preventDefault(),r.stopPropagation()}function ON(r){console.log("Deprecated API usage: "+r)}class au{static#e;static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=this.#e.exec(e);if(!t)return null;const n=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let o=parseInt(t[3],10);o=o>=1&&o<=31?o:1;let l=parseInt(t[4],10);l=l>=0&&l<=23?l:0;let c=parseInt(t[5],10);c=c>=0&&c<=59?c:0;let u=parseInt(t[6],10);u=u>=0&&u<=59?u:0;const h=t[7]||"Z";let f=parseInt(t[8],10);f=f>=0&&f<=23?f:0;let p=parseInt(t[9],10)||0;return p=p>=0&&p<=59?p:0,h==="-"?(l+=f,c+=p):h==="+"&&(l-=f,c-=p),new Date(Date.UTC(n,s,o,l,c,u))}}function Ix(r,{scale:e=1,rotation:t=0}){const{width:n,height:s}=r.attributes.style,o=[0,0,parseInt(n),parseInt(s)];return new _a({viewBox:o,userUnit:1,scale:e,rotation:t})}function Qi(r){if(r.startsWith("#")){const e=parseInt(r.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return r.startsWith("rgb(")?r.slice(4,-1).split(",").map(e=>parseInt(e)):r.startsWith("rgba(")?r.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Ce(`Not a valid color format: "${r}"`),[0,0,0])}function MN(r){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of r.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;r.set(t,Qi(n))}e.remove()}function rt(r){const{a:e,b:t,c:n,d:s,e:o,f:l}=r.getTransform();return[e,t,n,s,o,l]}function Jn(r){const{a:e,b:t,c:n,d:s,e:o,f:l}=r.getTransform().invertSelf();return[e,t,n,s,o,l]}function os(r,e,t=!1,n=!0){if(e instanceof _a){const{pageWidth:s,pageHeight:o}=e.rawDims,{style:l}=r,c=Tt.isCSSRoundSupported,u=`var(--total-scale-factor) * ${s}px`,h=`var(--total-scale-factor) * ${o}px`,f=c?`round(down, ${u}, var(--scale-round-x))`:`calc(${u})`,p=c?`round(down, ${h}, var(--scale-round-y))`:`calc(${h})`;!t||e.rotation%180===0?(l.width=f,l.height=p):(l.width=p,l.height=f)}n&&r.setAttribute("data-main-rotation",e.rotation)}class zn{constructor(){const{pixelRatio:e}=zn;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,s,o=-1){let l=1/0,c=1/0,u=1/0;n=zn.capPixels(n,o),n>0&&(l=Math.sqrt(n/(e*t))),s!==-1&&(c=s/e,u=s/t);const h=Math.min(l,c,u);return this.sx>h||this.sy>h?(this.sx=h,this.sy=h,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const lu=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class LN{static get isDarkMode(){return Re(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class Fx{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:n}=window.getComputedStyle(e);return e.remove(),Re(this,"commentForegroundColor",Qi(n))}}function jx(r,e,t,n){n=Math.min(Math.max(n??1,0),1);const s=255*(1-n);return r=Math.round(r*n+s),e=Math.round(e*n+s),t=Math.round(t*n+s),[r,e,t]}function _0(r,e){const t=r[0]/255,n=r[1]/255,s=r[2]/255,o=Math.max(t,n,s),l=Math.min(t,n,s),c=(o+l)/2;if(o===l)e[0]=e[1]=0;else{const u=o-l;switch(e[1]=c<.5?u/(o+l):u/(2-o-l),o){case t:e[0]=((n-s)/u+(n<s?6:0))*60;break;case n:e[0]=((s-t)/u+2)*60;break;case s:e[0]=((t-n)/u+4)*60;break}}e[2]=c}function Nf(r,e){const t=r[0],n=r[1],s=r[2],o=(1-Math.abs(2*s-1))*n,l=o*(1-Math.abs(t/60%2-1)),c=s-o/2;switch(Math.floor(t/60)){case 0:e[0]=o+c,e[1]=l+c,e[2]=c;break;case 1:e[0]=l+c,e[1]=o+c,e[2]=c;break;case 2:e[0]=c,e[1]=o+c,e[2]=l+c;break;case 3:e[0]=c,e[1]=l+c,e[2]=o+c;break;case 4:e[0]=l+c,e[1]=c,e[2]=o+c;break;case 5:case 6:e[0]=o+c,e[1]=c,e[2]=l+c;break}}function E0(r){return r<=.03928?r/12.92:((r+.055)/1.055)**2.4}function A0(r,e,t){Nf(r,t),t.map(E0);const n=.2126*t[0]+.7152*t[1]+.0722*t[2];Nf(e,t),t.map(E0);const s=.2126*t[0]+.7152*t[1]+.0722*t[2];return n>s?(n+.05)/(s+.05):(s+.05)/(n+.05)}const C0=new Map;function Bx(r,e){const t=r[0]+r[1]*256+r[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let n=C0.get(t);if(n)return n;const s=new Float32Array(9),o=s.subarray(0,3),l=s.subarray(3,6);_0(r,l);const c=s.subarray(6,9);_0(e,c);const u=c[2]<.5,h=u?12:4.5;if(l[2]=u?Math.sqrt(l[2]):1-Math.sqrt(1-l[2]),A0(l,c,o)<h){let f,p;u?(f=l[2],p=1):(f=0,p=l[2]);const v=.005;for(;p-f>v;){const b=l[2]=(f+p)/2;u===A0(l,c,o)<h?f=b:p=b}l[2]=u?p:f}return Nf(l,o),n=fe.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),C0.set(t,n),n}function wp({html:r,dir:e,className:t},n){const s=document.createDocumentFragment();if(typeof r=="string"){const o=document.createElement("p");o.dir=e||"auto";const l=r.split(/(?:\r\n?|\n)/);for(let c=0,u=l.length;c<u;++c){const h=l[c];o.append(document.createTextNode(h)),c<u-1&&o.append(document.createElement("br"))}s.append(o)}else yp.render({xfaHtml:r,div:s,intent:"richText"});s.firstChild.classList.add("richText",t),n.append(s)}class ra{#e=null;#t=null;#r;#n=null;#o=null;#s=null;#i=null;#a=null;static#c=null;constructor(e){this.#r=e,ra.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=this.#r._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",gn,{signal:t}),e.addEventListener("pointerdown",ra.#l,{signal:t}));const n=this.#n=document.createElement("div");n.className="buttons",e.append(n);const s=this.#r.toolbarPosition;if(s){const{style:o}=e,l=this.#r._uiManager.direction==="ltr"?1-s[0]:s[0];o.insetInlineEnd=`${100*l}%`,o.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return this.#e}static#l(e){e.stopPropagation()}#h(e){this.#r._focusEventsAllowed=!1,st(e)}#d(e){this.#r._focusEventsAllowed=!0,st(e)}#f(e){const t=this.#r._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",this.#h.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#d.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",gn,{signal:t}),!0)}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#o?.shown(),this.#s?.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=this.#r,n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",ra.#c[e]),this.#f(n)&&n.addEventListener("click",s=>{t.delete()},{signal:t._signal}),this.#n.append(n)}get#g(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const t=await e.render();this.#f(t),this.#n.append(t,this.#g),this.#o=e}addComment(e,t=null){if(this.#s)return;const n=e.renderForToolbar();if(!n)return;this.#f(n);const s=this.#i=this.#g;t?(this.#n.insertBefore(n,t),this.#n.insertBefore(s,t)):this.#n.append(n,s),this.#s=e,e.toolbar=this}addColorPicker(e){if(this.#t)return;this.#t=e;const t=e.renderButton();this.#f(t),this.#n.append(t,this.#g)}async addEditSignatureButton(e){const t=this.#a=await e.renderEditButton(this.#r);this.#f(t),this.#n.append(t,this.#g)}removeButton(e){e==="comment"&&(this.#s?.removeToolbarCommentButton(),this.#s=null,this.#i?.remove(),this.#i=null)}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}async addButtonBefore(e,t,n){const s=this.#n.querySelector(n);s&&e==="comment"&&this.addComment(t,s)}updateEditSignatureButton(e){this.#a&&(this.#a.title=e)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class IN{#e=null;#t=null;#r;constructor(e){this.#r=e}#n(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar");const t=this.#r._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",gn,{signal:t});const n=this.#e=document.createElement("div");return n.className="buttons",e.append(n),this.#r.hasCommentManager()&&this.#s("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#r.commentSelection("floating_button")}),this.#s("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#r.highlightSelection("floating_button")}),e}#o(e,t){let n=0,s=0;for(const o of e){const l=o.y+o.height;if(l<n)continue;const c=o.x+(t?o.width:0);if(l>n){s=c,n=l;continue}t?c>s&&(s=c):c<s&&(s=c)}return[t?1-s:s,n]}show(e,t,n){const[s,o]=this.#o(t,n),{style:l}=this.#t||=this.#n();e.append(this.#t),l.insetInlineEnd=`${100*s}%`,l.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#s(e,t,n,s){const o=document.createElement("button");o.classList.add("basic",e),o.tabIndex=0,o.setAttribute("data-l10n-id",t);const l=document.createElement("span");o.append(l),l.className="visuallyHidden",l.setAttribute("data-l10n-id",n);const c=this.#r._signal;c instanceof AbortSignal&&!c.aborted&&(o.addEventListener("contextmenu",gn,{signal:c}),o.addEventListener("click",s,{signal:c})),this.#e.append(o)}}function Ux(r,e,t){for(const n of t)e.addEventListener(n,r[n].bind(r))}class FN{#e=0;get id(){return`${la}${this.#e++}`}}class bp{#e=gp();#t=0;#r=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const o=s.decode().then(()=>(n.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Re(this,"_isSVGFittingCanvas",o)}async#n(e,t){this.#r||=new Map;let n=this.#r.get(e);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let s;if(typeof t=="string"?(n.url=t,s=await Ki(t,"blob")):t instanceof File?s=n.file=t:t instanceof Blob&&(s=t),s.type==="image/svg+xml"){const o=bp._isSVGFittingCanvas,l=new FileReader,c=new Image,u=new Promise((h,f)=>{c.onload=()=>{n.bitmap=c,n.isSvg=!0,h()},l.onload=async()=>{const p=n.svgUrl=l.result;c.src=await o?`${p}#svgView(preserveAspectRatio(none))`:p},c.onerror=l.onerror=f});l.readAsDataURL(s),await u}else n.bitmap=await createImageBitmap(s);n.refCounter=1}catch(s){Ce(s),n=null}return this.#r.set(e,n),n&&this.#r.set(n.id,n),n}async getFromFile(e){const{lastModified:t,name:n,size:s,type:o}=e;return this.#n(`${t}_${n}_${s}_${o}`,e)}async getFromUrl(e){return this.#n(e,e)}async getFromBlob(e,t){const n=await t;return this.#n(e,n)}async getFromId(e){this.#r||=new Map;const t=this.#r.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){this.#r||=new Map;let n=this.#r.get(e);if(n?.bitmap)return n.refCounter+=1,n;const s=new OffscreenCanvas(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),n={bitmap:s.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#r.set(e,n),this.#r.set(n.id,n),n}getSvgUrl(e){const t=this.#r.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#r||=new Map;const t=this.#r.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const s=new OffscreenCanvas(n.width,n.height);s.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=s.convertToBlob()}n.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class jN{#e=[];#t=!1;#r;#n=-1;constructor(e=128){this.#r=e}add({cmd:e,undo:t,post:n,mustExec:s,type:o=NaN,overwriteIfSameType:l=!1,keepUndo:c=!1}){if(s&&e(),this.#t)return;const u={cmd:e,undo:t,post:n,type:o};if(this.#n===-1){this.#e.length>0&&(this.#e.length=0),this.#n=0,this.#e.push(u);return}if(l&&this.#e[this.#n].type===o){c&&(u.undo=this.#e[this.#n].undo),this.#e[this.#n]=u;return}const h=this.#n+1;h===this.#r?this.#e.splice(0,1):(this.#n=h,h<this.#e.length&&this.#e.splice(h)),this.#e.push(u)}undo(){if(this.#n===-1)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1,this.#n-=1}redo(){if(this.#n<this.#e.length-1){this.#n+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#e.length-1}cleanType(e){if(this.#n!==-1){for(let t=this.#n;t>=0;t--)if(this.#e[t].type!==e){this.#e.splice(t+1,this.#n-t),this.#n=t;return}this.#e.length=0,this.#n=-1}}destroy(){this.#e=null}}class Aa{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Tt.platform;for(const[n,s,o={}]of e)for(const l of n){const c=l.startsWith("mac+");t&&c?(this.callbacks.set(l.slice(4),{callback:s,options:o}),this.allKeys.add(l.split("+").at(-1))):!t&&!c&&(this.callbacks.set(l,{callback:s,options:o}),this.allKeys.add(l.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(this.#e(t));if(!n)return;const{callback:s,options:{bubbles:o=!1,args:l=[],checker:c=null}}=n;c&&!c(e,t)||(s.bind(e,...l,t)(),o||st(t))}}class xp{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return MN(e),Re(this,"_colors",e)}convert(e){const t=Qi(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,s]of this._colors)if(s.every((o,l)=>o===t[l]))return xp._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?fe.makeHexColor(...t):e}}class kr{#e=new AbortController;#t=null;#r=null;#n=new Map;#o=new Map;#s=null;#i=null;#a=null;#c=new jN;#l=null;#h=null;#d=null;#f=0;#g=new Set;#p=null;#u=null;#m=new Set;_editorUndoBar=null;#v=!1;#w=!1;#y=!1;#A=null;#_=null;#b=null;#T=null;#S=!1;#E=null;#R=new FN;#k=!1;#P=!1;#F=!1;#D=null;#M=null;#j=null;#L=null;#V=null;#C=Ae.NONE;#x=new Set;#O=null;#B=null;#z=null;#G=null;#q=null;#Y={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#H=[0,0];#I=null;#$=null;#J=null;#Z=null;#U=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=kr.prototype,t=l=>l.#$.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),n=(l,{target:c})=>{if(c instanceof HTMLInputElement){const{type:u}=c;return u!=="text"&&u!=="number"}return!0},s=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return Re(this,"_keyboardManager",new Aa([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(l,{target:c})=>!(c instanceof HTMLButtonElement)&&l.#$.contains(c)&&!l.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(l,{target:c})=>!(c instanceof HTMLButtonElement)&&l.#$.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-o,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[o,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-o],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,o],checker:t}]]))}constructor(e,t,n,s,o,l,c,u,h,f,p,v,b,_,w,x){const E=this._signal=this.#e.signal;this.#$=e,this.#J=t,this.#Z=n,this.#s=s,this.#l=o,this.#B=l,this.#q=u,this._eventBus=c,c._on("editingaction",this.onEditingAction.bind(this),{signal:E}),c._on("pagechanging",this.onPageChanging.bind(this),{signal:E}),c._on("scalechanging",this.onScaleChanging.bind(this),{signal:E}),c._on("rotationchanging",this.onRotationChanging.bind(this),{signal:E}),c._on("setpreference",this.onSetPreference.bind(this),{signal:E}),c._on("switchannotationeditorparams",A=>this.updateParams(A.type,A.value),{signal:E}),window.addEventListener("pointerdown",()=>{this.#P=!0},{capture:!0,signal:E}),window.addEventListener("pointerup",()=>{this.#P=!1},{capture:!0,signal:E}),this.#le(),this.#he(),this.#te(),this.#i=u.annotationStorage,this.#A=u.filterFactory,this.#z=h,this.#T=f||null,this.#v=p,this.#w=v,this.#y=b,this.#V=_||null,this.viewParameters={realScale:Ls.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=w||null,this._supportsPinchToZoom=x!==!1,o?.setSidebarUiManager(this)}destroy(){this.#U?.resolve(),this.#U=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#o.values())e.destroy();this.#o.clear(),this.#n.clear(),this.#m.clear(),this.#L?.clear(),this.#t=null,this.#x.clear(),this.#c.destroy(),this.#s?.destroy(),this.#l?.destroy(),this.#B?.destroy(),this.#E?.hide(),this.#E=null,this.#j?.destroy(),this.#j=null,this.#r=null,this.#_&&(clearTimeout(this.#_),this.#_=null),this.#I&&(clearTimeout(this.#I),this.#I=null),this._editorUndoBar?.destroy(),this.#q=null}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#V}get useNewAltTextFlow(){return this.#w}get useNewAltTextWhenAddingImage(){return this.#y}get hcmFilter(){return Re(this,"hcmFilter",this.#z?this.#A.addHCMFilter(this.#z.foreground,this.#z.background):"none")}get direction(){return Re(this,"direction",getComputedStyle(this.#$).direction)}get _highlightColors(){return Re(this,"_highlightColors",this.#T?new Map(this.#T.split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Re(this,"highlightColors",null);const t=new Map,n=!!this.#z;for(const[s,o]of e){const l=s.endsWith("_HCM");if(n&&l){t.set(s.replace("_HCM",""),o);continue}!n&&!l&&t.set(s,o)}return Re(this,"highlightColors",t)}get highlightColorNames(){return Re(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#d=e}setMainHighlightColorPicker(e){this.#j=e}editAltText(e,t=!1){this.#s?.editAltText(this,e,t)}hasCommentManager(){return!!this.#l}editComment(e,t,n,s){this.#l?.showDialog(this,e,t,n,s)}selectComment(e,t){this.#o.get(e)?.getEditorByUID(t)?.toggleComment(!0,!0)}updateComment(e){this.#l?.updateComment(e.getData())}updatePopupColor(e){this.#l?.updatePopupColor(e)}removeComment(e){this.#l?.removeComments([e.uid])}toggleComment(e,t,n=void 0){this.#l?.toggleCommentPopup(e,t,n)}makeCommentColor(e,t){return e&&this.#l?.makeCommentColor(e,t)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(e){if(this.#o.has(e-1))return;const{resolve:t,promise:n}=Promise.withResolvers(),s=o=>{o.pageNumber===e&&(this._eventBus._off("editorsrendered",s),t())};this._eventBus.on("editorsrendered",s),await n}getSignature(e){this.#B?.getSignature({uiManager:this,editor:e})}get signatureManager(){return this.#B}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){e==="enableNewAltTextWhenAddingImage"&&(this.#y=t)}onPageChanging({pageNumber:e}){this.#f=e-1}focusMainContainer(){this.#$.focus()}findParent(e,t){for(const n of this.#o.values()){const{x:s,y:o,width:l,height:c}=n.div.getBoundingClientRect();if(e>=s&&e<=s+l&&t>=o&&t<=o+c)return n}return null}disableUserSelect(e=!1){this.#J.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#m.add(e)}removeShouldRescale(e){this.#m.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Ls.PDF_TO_CSS_UNITS;for(const t of this.#m)t.onScaleChanging();this.#d?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#Q({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#ee(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of this.#o.values())if(n.hasTextLayer(e))return n;return null}highlightSelection(e="",t=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:s,anchorOffset:o,focusNode:l,focusOffset:c}=n,u=n.toString(),f=this.#Q(n).closest(".textLayer"),p=this.getSelectionBoxes(f);if(!p)return;n.empty();const v=this.#ee(f),b=this.#C===Ae.NONE,_=()=>{const w=v?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:p,anchorNode:s,anchorOffset:o,focusNode:l,focusOffset:c,text:u});b&&this.showAllEditors("highlight",!0,!0),t&&w?.editComment()};if(b){this.switchToMode(Ae.HIGHLIGHT,_);return}_()}commentSelection(e=""){this.highlightSelection(e,!0)}#oe(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=this.#Q(e).closest(".textLayer"),s=this.getSelectionBoxes(n);s&&(this.#E||=new IN(this),this.#E.show(n,s,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(e){if(!this.#i)return null;const t=`${la}${e}`,n=this.#i.getRawValue(t);return n&&this.#i.remove(t),n}addToAnnotationStorage(e){!e.isEmpty()&&this.#i&&!this.#i.has(e.id)&&this.#i.setValue(e.id,e)}a11yAlert(e,t=null){const n=this.#Z;n&&(n.setAttribute("data-l10n-id",e),t?n.setAttribute("data-l10n-args",JSON.stringify(t)):n.removeAttribute("data-l10n-args"))}#ae(){const e=document.getSelection();if(!e||e.isCollapsed){this.#O&&(this.#E?.hide(),this.#O=null,this.#N({hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===this.#O)return;const s=this.#Q(e).closest(".textLayer");if(!s){this.#O&&(this.#E?.hide(),this.#O=null,this.#N({hasSelectedText:!1}));return}if(this.#E?.hide(),this.#O=t,this.#N({hasSelectedText:!0}),!(this.#C!==Ae.HIGHLIGHT&&this.#C!==Ae.NONE)&&(this.#C===Ae.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#S=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#C===Ae.HIGHLIGHT?this.#ee(s):null;if(o?.toggleDrawing(),this.#P){const l=new AbortController,c=this.combinedSignal(l),u=h=>{h.type==="pointerup"&&h.button!==0||(l.abort(),o?.toggleDrawing(!0),h.type==="pointerup"&&this.#X("main_toolbar"))};window.addEventListener("pointerup",u,{signal:c}),window.addEventListener("blur",u,{signal:c})}else o?.toggleDrawing(!0),this.#X("main_toolbar")}}#X(e=""){this.#C===Ae.HIGHLIGHT?this.highlightSelection(e):this.#v&&this.#oe()}#le(){document.addEventListener("selectionchange",this.#ae.bind(this),{signal:this._signal})}#ce(){if(this.#b)return;this.#b=new AbortController;const e=this.combinedSignal(this.#b);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#ue(){this.#b?.abort(),this.#b=null}blur(){if(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#X("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of this.#x)if(t.div.contains(e)){this.#M=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#M)return;const[e,t]=this.#M;this.#M=null,t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}#te(){if(this.#D)return;this.#D=new AbortController;const e=this.combinedSignal(this.#D);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#de(){this.#D?.abort(),this.#D=null}#ne(){if(this.#h)return;this.#h=new AbortController;const e=this.combinedSignal(this.#h);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#re(){this.#h?.abort(),this.#h=null}#he(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#te(),this.#ne()}removeEditListeners(){this.#de(),this.#re()}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of this.#u)if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of this.#u)if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const t=[];for(const n of this.#x){const s=n.serialize(!0);s&&t.push(s)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const o of t.items)for(const l of this.#u)if(l.isHandlingMimeForPasting(o.type)){l.paste(o,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(o){Ce(`paste: "${o.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const s=this.currentLayer;try{const o=[];for(const u of n){const h=await s.deserialize(u);if(!h)return;o.push(h)}const l=()=>{for(const u of o)this.#se(u);this.#ie(o)},c=()=>{for(const u of o)u.remove()};this.addCommands({cmd:l,undo:c,mustExec:!0})}catch(o){Ce(`paste: "${o.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#C!==Ae.NONE&&!this.isEditorHandlingKeyboard&&kr._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#X("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#N(e){Object.entries(e).some(([n,s])=>this.#Y[n]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#Y,e)}),this.#C===Ae.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#W([[Me.HIGHLIGHT_FREE,!0]]))}#W(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#ce(),this.#ne(),this.#N({isEditing:this.#C!==Ae.NONE,isEmpty:this.#K(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ue(),this.#re(),this.#N({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#u){this.#u=e;for(const t of this.#u)this.#W(t.defaultPropertiesToUpdate)}}getId(){return this.#R.id}get currentLayer(){return this.#o.get(this.#f)}getLayer(e){return this.#o.get(e)}get currentPageIndex(){return this.#f}addLayer(e){this.#o.set(e.pageIndex,e),this.#k?e.enable():e.disable()}removeLayer(e){this.#o.delete(e.pageIndex)}async updateMode(e,t=null,n=!1,s=!1,o=!1){if(this.#C!==e&&!(this.#U&&(await this.#U.promise,!this.#U))){if(this.#U=Promise.withResolvers(),this.#d?.commitOrRemove(),this.#C===Ae.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#C=e,e===Ae.NONE){this.setEditingState(!1),this.#pe();for(const l of this.#n.values())l.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#U.resolve();return}for(const l of this.#n.values())l.addStandaloneCommentButton();e===Ae.SIGNATURE&&await this.#B?.loadSignatures(),this.setEditingState(!0),await this.#fe(),this.unselectAll();for(const l of this.#o.values())l.updateMode(e);if(e===Ae.POPUP){this.#r||=await this.#q.getAnnotationsByType(new Set(this.#u.map(u=>u._editorType)));const l=new Set,c=[];for(const u of this.#n.values()){const{annotationElementId:h,hasComment:f,deleted:p}=u;h&&l.add(h),f&&!p&&c.push(u.getData())}for(const u of this.#r){const{id:h,popupRef:f,contentsObj:p}=u;f&&p?.str&&!l.has(h)&&!this.#g.has(h)&&c.push(u)}this.#l?.showSidebar(c)}if(!t){n&&this.addNewEditorFromKeyboard(),this.#U.resolve();return}for(const l of this.#n.values())l.uid===t?(this.setSelected(l),o?l.editComment():s?l.enterInEditMode():l.focus()):l.unselect();this.#U.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==this.#C&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(this.#u){switch(e){case Me.CREATE:this.currentLayer.addNewEditor(t);return;case Me.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#G||=new Map).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const n of this.#x)n.updateParams(e,t);else for(const n of this.#u)n.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){for(const o of this.#n.values())o.editorType===e&&o.show(t);(this.#G?.get(Me.HIGHLIGHT_SHOW_ALL)??!0)!==t&&this.#W([[Me.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(this.#F!==e){this.#F=e;for(const t of this.#o.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}async#fe(){if(!this.#k){this.#k=!0;const e=[];for(const t of this.#o.values())e.push(t.enable());await Promise.all(e);for(const t of this.#n.values())t.enable()}}#pe(){if(this.unselectAll(),this.#k){this.#k=!1;for(const e of this.#o.values())e.disable();for(const e of this.#n.values())e.disable()}}*getEditors(e){for(const t of this.#n.values())t.pageIndex===e&&(yield t)}getEditor(e){return this.#n.get(e)}addEditor(e){this.#n.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#_&&clearTimeout(this.#_),this.#_=setTimeout(()=>{this.focusMainContainer(),this.#_=null},0)),this.#n.delete(e.id),e.annotationElementId&&this.#L?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!this.#g.has(e.annotationElementId))&&this.#i?.remove(e.id)}addDeletedAnnotationElement(e){this.#g.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#g.has(e)}removeDeletedAnnotationElement(e){this.#g.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#se(e){const t=this.#o.get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#W(e.propertiesToUpdate))}get#me(){let e=null;for(e of this.#x);return e}updateUI(e){this.#me===e&&this.#W(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#W(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#x.has(e)){this.#x.delete(e),e.unselect(),this.#N({hasSelectedEditor:this.hasSelection});return}this.#x.add(e),e.select(),this.#W(e.propertiesToUpdate),this.#N({hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.id}),this.#d?.commitOrRemove();for(const t of this.#x)t!==e&&t.unselect();this.#x.clear(),this.#x.add(e),e.select(),this.#W(e.propertiesToUpdate),this.#N({hasSelectedEditor:!0})}isSelected(e){return this.#x.has(e)}get firstSelectedEditor(){return this.#x.values().next().value}unselect(e){e.unselect(),this.#x.delete(e),this.#N({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#x.size!==0}get isEnterHandled(){return this.#x.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#N({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#K()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#N({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#K()})}addCommands(e){this.#c.add(e),this.#N({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#K()})}cleanUndoStack(e){this.#c.cleanType(e)}#K(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const e of this.#n.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();const e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...this.#x],n=()=>{this._editorUndoBar?.show(s,t.length===1?t[0].editorType:t.length);for(const o of t)o.remove()},s=()=>{for(const o of t)this.#se(o)};this.addCommands({cmd:n,undo:s,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#ie(e){for(const t of this.#x)t.unselect();this.#x.clear();for(const t of e)t.isEmpty()||(this.#x.add(t),t.select());this.#N({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#x)e.commit();this.#ie(this.#n.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#C!==Ae.NONE))&&!this.#d?.commitOrRemove()&&this.hasSelection){for(const e of this.#x)e.unselect();this.#x.clear(),this.#N({hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;this.#H[0]+=e,this.#H[1]+=t;const[s,o]=this.#H,l=[...this.#x],c=1e3;this.#I&&clearTimeout(this.#I),this.#I=setTimeout(()=>{this.#I=null,this.#H[0]=this.#H[1]=0,this.addCommands({cmd:()=>{for(const u of l)this.#n.has(u.id)&&(u.translateInPage(s,o),u.translationDone())},undo:()=>{for(const u of l)this.#n.has(u.id)&&(u.translateInPage(-s,-o),u.translationDone())},mustExec:!1})},c);for(const u of l)u.translateInPage(e,t),u.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#p=new Map;for(const e of this.#x)this.#p.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#p)return!1;this.disableUserSelect(!1);const e=this.#p;this.#p=null;let t=!1;for(const[{x:s,y:o,pageIndex:l},c]of e)c.newX=s,c.newY=o,c.newPageIndex=l,t||=s!==c.savedX||o!==c.savedY||l!==c.savedPageIndex;if(!t)return!1;const n=(s,o,l,c)=>{if(this.#n.has(s.id)){const u=this.#o.get(c);u?s._setParentAndPosition(u,o,l):(s.pageIndex=c,s.x=o,s.y=l)}};return this.addCommands({cmd:()=>{for(const[s,{newX:o,newY:l,newPageIndex:c}]of e)n(s,o,l,c)},undo:()=>{for(const[s,{savedX:o,savedY:l,savedPageIndex:c}]of e)n(s,o,l,c)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#p)for(const n of this.#p.keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#x.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#C}isEditingMode(){return this.#C!==Ae.NONE}get imageManager(){return Re(this,"imageManager",new bp)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let h=0,f=t.rangeCount;h<f;h++)if(!e.contains(t.getRangeAt(h).commonAncestorContainer))return null;const{x:n,y:s,width:o,height:l}=e.getBoundingClientRect();let c;switch(e.getAttribute("data-main-rotation")){case"90":c=(h,f,p,v)=>({x:(f-s)/l,y:1-(h+p-n)/o,width:v/l,height:p/o});break;case"180":c=(h,f,p,v)=>({x:1-(h+p-n)/o,y:1-(f+v-s)/l,width:p/o,height:v/l});break;case"270":c=(h,f,p,v)=>({x:1-(f+v-s)/l,y:(h-n)/o,width:v/l,height:p/o});break;default:c=(h,f,p,v)=>({x:(h-n)/o,y:(f-s)/l,width:p/o,height:v/l});break}const u=[];for(let h=0,f=t.rangeCount;h<f;h++){const p=t.getRangeAt(h);if(!p.collapsed)for(const{x:v,y:b,width:_,height:w}of p.getClientRects())_===0||w===0||u.push(c(v,b,_,w))}return u.length===0?null:u}addChangedExistingAnnotation({annotationElementId:e,id:t}){(this.#a||=new Map).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){this.#a?.delete(e)}renderAnnotationElement(e){const t=this.#a?.get(e.data.id);if(!t)return;const n=this.#i.getRawValue(t);n&&(this.#C===Ae.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}setMissingCanvas(e,t,n){const s=this.#L?.get(e);s&&(s.setCanvas(t,n),this.#L.delete(e))}addMissingCanvas(e,t){(this.#L||=new Map).set(e,t)}}class tr{#e=null;#t=!1;#r=null;#n=null;#o=null;#s=null;#i=!1;#a=null;#c=null;#l=null;#h=null;#d=!1;static#f=null;static _l10n=null;constructor(e){this.#c=e,this.#d=e._uiManager.useNewAltTextFlow,tr.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){tr._l10n??=e}async render(){const e=this.#r=document.createElement("button");e.className="altText",e.tabIndex="0";const t=this.#n=document.createElement("span");e.append(t),this.#d?(e.classList.add("new"),e.setAttribute("data-l10n-id",tr.#f.missing),t.setAttribute("data-l10n-id",tr.#f["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=this.#c._uiManager._signal;e.addEventListener("contextmenu",gn,{signal:n}),e.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const s=o=>{o.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#d&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return e.addEventListener("click",s,{capture:!0,signal:n}),e.addEventListener("keydown",o=>{o.target===e&&o.key==="Enter"&&(this.#i=!0,s(o))},{signal:n}),await this.#p(),e}get#g(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#r&&(this.#r.focus({focusVisible:this.#i}),this.#i=!1)}isEmpty(){return this.#d?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#d?this.#e!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(e){this.#e===null&&(this.#l=e,this.#h=await tr._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#p())}toggleAltTextBadge(e=!1){if(!this.#d||this.#e){this.#a?.remove(),this.#a=null;return}if(!this.#a){const t=this.#a=document.createElement("div");t.className="noAltTextBadge",this.#c.div.append(t)}this.#a.classList.toggle("hidden",!e)}serialize(e){let t=this.#e;return!e&&this.#l===t&&(t=this.#h),{altText:t,decorative:this.#t,guessedText:this.#l,textWithDisclaimer:this.#h}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:s,cancel:o=!1}){n&&(this.#l=n,this.#h=s),!(this.#e===e&&this.#t===t)&&(o||(this.#e=e,this.#t=t),this.#p())}toggle(e=!1){this.#r&&(!e&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#r.disabled=!e)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#r?.remove(),this.#r=null,this.#n=null,this.#o=null,this.#a?.remove(),this.#a=null}async#p(){const e=this.#r;if(!e)return;if(this.#d){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",tr.#f[this.#g]),this.#n?.setAttribute("data-l10n-id",tr.#f[`${this.#g}-label`]),!this.#e){this.#o?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#o?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=this.#o;if(!t){this.#o=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${this.#c.id}`;const s=100,o=this.#c._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#o.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},s)},{signal:o}),e.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#o?.classList.remove("show")},{signal:o})}this.#t?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=this.#e),t.parentNode||e.append(t),this.#c.getElementForAltText()?.setAttribute("aria-describedby",t.id)}}class Oc{#e=null;#t=null;#r=!1;#n=null;#o=null;#s=null;#i=null;#a=null;#c=!1;#l=null;constructor(e){this.#n=e}renderForToolbar(){const e=this.#t=document.createElement("button");return e.className="comment",this.#h(e,!1)}renderForStandalone(){const e=this.#e=document.createElement("button");e.className="annotationCommentButton";const t=this.#n.commentButtonPosition;if(t){const{style:n}=e;n.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const s=this.#n.commentButtonColor;s&&(n.backgroundColor=s)}return this.#h(e,!0)}focusButton(){setTimeout(()=>{(this.#e??this.#t)?.focus()},0)}onUpdatedColor(){if(!this.#e)return;const e=this.#n.commentButtonColor;e&&(this.#e.style.backgroundColor=e),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#e?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#e)return null;const{x:e,y:t,height:n}=this.#e.getBoundingClientRect(),{x:s,y:o,width:l,height:c}=this.#n.parent.boundingClientRect;return[(e-s)/l,(t+n-o)/c]}set commentPopupPositionInLayer(e){this.#l=e}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#e?.remove(),this.#e=null}removeToolbarCommentButton(){this.#t?.remove(),this.#t=null}setCommentButtonStates({selected:e,hasPopup:t}){this.#e&&(this.#e.classList.toggle("selected",e),this.#e.ariaExpanded=t)}#h(e,t){if(!this.#n._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const n=this.#n._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return e;e.addEventListener("contextmenu",gn,{signal:n}),t&&(e.addEventListener("focusin",o=>{this.#n._focusEventsAllowed=!1,st(o)},{capture:!0,signal:n}),e.addEventListener("focusout",o=>{this.#n._focusEventsAllowed=!0,st(o)},{capture:!0,signal:n})),e.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const s=o=>{o.preventDefault(),e===this.#t?this.edit():this.#n.toggleComment(!0)};return e.addEventListener("click",s,{capture:!0,signal:n}),e.addEventListener("keydown",o=>{o.target===e&&o.key==="Enter"&&(this.#r=!0,s(o))},{signal:n}),e.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:n}),e.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:n}),e}edit(e){const t=this.commentPopupPositionInLayer;let n,s;if(t)[n,s]=t;else{[n,s]=this.#n.commentButtonPosition;const{width:f,height:p,x:v,y:b}=this.#n;n=v+n*f,s=b+s*p}const o=this.#n.parent.boundingClientRect,{x:l,y:c,width:u,height:h}=o;this.#n._uiManager.editComment(this.#n,l+n*u,c+s*h,{...e,parentDimensions:o})}finish(){this.#t&&(this.#t.focus({focusVisible:this.#r}),this.#r=!1)}isDeleted(){return this.#c||this.#i===""}isEmpty(){return this.#i===null}hasBeenEdited(){return this.isDeleted()||this.#i!==this.#o}serialize(){return this.data}get data(){return{text:this.#i,richText:this.#s,date:this.#a,deleted:this.isDeleted()}}set data(e){if(e!==this.#i&&(this.#s=null),e===null){this.#i="",this.#c=!0;return}this.#i=e,this.#a=new Date,this.#c=!1}setInitialText(e,t=null){this.#o=e,this.data=e,this.#a=null,this.#s=t}shown(){}destroy(){this.#t?.remove(),this.#t=null,this.#e?.remove(),this.#e=null,this.#i="",this.#s=null,this.#a=null,this.#n=null,this.#r=!1,this.#c=!1}}class Ca{#e;#t=!1;#r=null;#n;#o;#s;#i;#a=null;#c;#l=null;#h;#d=null;constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:s=null,onPinching:o=null,onPinchEnd:l=null,signal:c}){this.#e=e,this.#r=n,this.#n=t,this.#o=s,this.#s=o,this.#i=l,this.#h=new AbortController,this.#c=AbortSignal.any([c,this.#h.signal]),e.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/zn.pixelRatio}#f(e){if(this.#n?.())return;if(e.touches.length===1){if(this.#a)return;const s=this.#a=new AbortController,o=AbortSignal.any([this.#c,s.signal]),l=this.#e,c={capture:!0,signal:o,passive:!1},u=h=>{h.pointerType==="touch"&&(this.#a?.abort(),this.#a=null)};l.addEventListener("pointerdown",h=>{h.pointerType==="touch"&&(st(h),u(h))},c),l.addEventListener("pointerup",u,c),l.addEventListener("pointercancel",u,c);return}if(!this.#d){this.#d=new AbortController;const s=AbortSignal.any([this.#c,this.#d.signal]),o=this.#e,l={signal:s,capture:!1,passive:!1};o.addEventListener("touchmove",this.#g.bind(this),l);const c=this.#p.bind(this);o.addEventListener("touchend",c,l),o.addEventListener("touchcancel",c,l),l.capture=!0,o.addEventListener("pointerdown",st,l),o.addEventListener("pointermove",st,l),o.addEventListener("pointercancel",st,l),o.addEventListener("pointerup",st,l),this.#o?.()}if(st(e),e.touches.length!==2||this.#r?.()){this.#l=null;return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),this.#l={touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY}}#g(e){if(!this.#l||e.touches.length!==2)return;st(e);let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:s,screenY:o}=t,{screenX:l,screenY:c}=n,u=this.#l,{touch0X:h,touch0Y:f,touch1X:p,touch1Y:v}=u,b=p-h,_=v-f,w=l-s,x=c-o,E=Math.hypot(w,x)||1,A=Math.hypot(b,_)||1;if(!this.#t&&Math.abs(A-E)<=Ca.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(u.touch0X=s,u.touch0Y=o,u.touch1X=l,u.touch1Y=c,!this.#t){this.#t=!0;return}const C=[(s+l)/2,(o+c)/2];this.#s?.(C,A,E)}#p(e){e.touches.length>=2||(this.#d&&(this.#d.abort(),this.#d=null,this.#i?.()),this.#l&&(st(e),this.#l=null,this.#t=!1))}destroy(){this.#h?.abort(),this.#h=null,this.#a?.abort(),this.#a=null}}class we{#e=null;#t=null;#r=null;#n=null;#o=null;#s=!1;#i=null;#a="";#c=null;#l=null;#h=null;#d=null;#f=null;#g="";#p=!1;#u=null;#m=!1;#v=!1;#w=!1;#y=null;#A=0;#_=0;#b=null;#T=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#S=!1;#E=we._zIndex++;static _borderLineWidth=-1;static _colorManager=new xp;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=we.prototype._resizeWithKeyboard,t=kr.TRANSLATE_SMALL,n=kr.TRANSLATE_BIG;return Re(this,"_resizerKeyboardManager",new Aa([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],we.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:s,pageX:o,pageY:l}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,s],this.pageTranslation=[o,l];const[c,u]=this.parentDimensions;this.x=e.x/c,this.y=e.y/u,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Re(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new BN({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(we._l10n??=e,we._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),we._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);we._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Ve("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#S}set _isDraggable(e){this.#S=e,this.div?.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#E}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(this.#I(),this.#d?.remove(),this.#d=null),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#p?this.#p=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,s){const[o,l]=this.parentDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x=(e+n)/o,this.y=(t+s)/l,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,s]=this.parentDimensions;this.setAt(e*n,t*s,this.width*n,this.height*s),this._onTranslated()}#R([e,t],n,s){[n,s]=this.screenToPageTranslation(n,s),this.x+=n/e,this.y+=s/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,t){this.#R(this.parentDimensions,e,t)}translateInPage(e,t){this.#u||=[this.x,this.y,this.width,this.height],this.#R(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){this.#u||=[this.x,this.y,this.width,this.height];const{div:n,parentDimensions:[s,o]}=this;if(this.x+=e/s,this.y+=t/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:p,y:v}=this.div.getBoundingClientRect();this.parent.findNewParent(this,p,v)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:c}=this;const[u,h]=this.getBaseTranslation();l+=u,c+=h;const{style:f}=n;f.left=`${(100*l).toFixed(2)}%`,f.top=`${(100*c).toFixed(2)}%`,this._onTranslating(l,c),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=we,s=n/e,o=n/t;switch(this.rotation){case 90:return[-s,o];case 180:return[s,o];case 270:return[s,-o];default:return[-s,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,s]}=this;let{x:o,y:l,width:c,height:u}=this;if(c*=n,u*=s,o*=n,l*=s,this._mustFixPosition)switch(e){case 0:o=Ft(o,0,n-c),l=Ft(l,0,s-u);break;case 90:o=Ft(o,0,n-u),l=Ft(l,c,s);break;case 180:o=Ft(o,c,n),l=Ft(l,u,s);break;case 270:o=Ft(o,u,n),l=Ft(l,0,s-c);break}this.x=o/=n,this.y=l/=s;const[h,f]=this.getBaseTranslation();o+=h,l+=f,t.left=`${(100*o).toFixed(2)}%`,t.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}static#k(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return we.#k(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return we.#k(e,t,360-this.parentRotation)}#P(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(){const{div:{style:e},width:t,height:n}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#F(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const s=document.createElement("div");this.#c.append(s),s.classList.add("resizer",n),s.setAttribute("data-resizer-name",n),s.addEventListener("pointerdown",this.#D.bind(this,n),{signal:t}),s.addEventListener("contextmenu",gn,{signal:t}),s.tabIndex=-1}this.div.prepend(this.#c)}#D(e,t){t.preventDefault();const{isMac:n}=Tt.platform;if(t.button!==0||t.ctrlKey&&n)return;this.#r?.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,this.#l=[t.screenX,t.screenY];const o=new AbortController,l=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#L.bind(this,e),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",st,{passive:!1,signal:l}),window.addEventListener("contextmenu",gn,{signal:l}),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const c=this.parent.div.style.cursor,u=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const h=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#r?.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=c,this.div.style.cursor=u,this.#j()};window.addEventListener("pointerup",h,{signal:l}),window.addEventListener("blur",h,{signal:l})}#M(e,t,n,s){this.width=n,this.height=s,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#j(){if(!this.#h)return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:s}=this.#h;this.#h=null;const o=this.x,l=this.y,c=this.width,u=this.height;o===e&&l===t&&c===n&&u===s||this.addCommands({cmd:this.#M.bind(this,o,l,c,u),undo:this.#M.bind(this,e,t,n,s),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#L(e,t){const[n,s]=this.parentDimensions,o=this.x,l=this.y,c=this.width,u=this.height,h=we.MIN_SIZE/n,f=we.MIN_SIZE/s,p=this.#P(this.rotation),v=(G,K)=>[p[0]*G+p[2]*K,p[1]*G+p[3]*K],b=this.#P(360-this.rotation),_=(G,K)=>[b[0]*G+b[2]*K,b[1]*G+b[3]*K];let w,x,E=!1,A=!1;switch(e){case"topLeft":E=!0,w=(G,K)=>[0,0],x=(G,K)=>[G,K];break;case"topMiddle":w=(G,K)=>[G/2,0],x=(G,K)=>[G/2,K];break;case"topRight":E=!0,w=(G,K)=>[G,0],x=(G,K)=>[0,K];break;case"middleRight":A=!0,w=(G,K)=>[G,K/2],x=(G,K)=>[0,K/2];break;case"bottomRight":E=!0,w=(G,K)=>[G,K],x=(G,K)=>[0,0];break;case"bottomMiddle":w=(G,K)=>[G/2,K],x=(G,K)=>[G/2,0];break;case"bottomLeft":E=!0,w=(G,K)=>[0,K],x=(G,K)=>[G,0];break;case"middleLeft":A=!0,w=(G,K)=>[0,K/2],x=(G,K)=>[G,K/2];break}const C=w(c,u),k=x(c,u);let N=v(...k);const R=we._round(o+N[0]),D=we._round(l+N[1]);let F=1,U=1,q,Y;if(t.fromKeyboard)({deltaX:q,deltaY:Y}=t);else{const{screenX:G,screenY:K}=t,[V,$]=this.#l;[q,Y]=this.screenToPageTranslation(G-V,K-$),this.#l[0]=G,this.#l[1]=K}if([q,Y]=_(q/n,Y/s),E){const G=Math.hypot(c,u);F=U=Math.max(Math.min(Math.hypot(k[0]-C[0]-q,k[1]-C[1]-Y)/G,1/c,1/u),h/c,f/u)}else A?F=Ft(Math.abs(k[0]-C[0]-q),h,1)/c:U=Ft(Math.abs(k[1]-C[1]-Y),f,1)/u;const ne=we._round(c*F),oe=we._round(u*U);N=v(...x(ne,oe));const te=R-N[0],ae=D-N[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=ne,this.height=oe,this.x=te,this.y=ae,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#r?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#v)return this._editToolbar;this._editToolbar=new ra(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,n]of e)await this._editToolbar.addButton(t,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#r?.destroy()}addContainer(e){const t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#r||(tr.initialize(we._l10n),this.#r=new tr(this),this.#e&&(this.#r.data=this.#e,this.#e=null)),this.#r}get altTextData(){return this.#r?.data}set altTextData(e){this.#r&&(this.#r.data=e)}get guessedAltText(){return this.#r?.guessedText}async setGuessedAltText(e){await this.#r?.setGuessedText(e)}serializeAltText(e){return this.#r?.serialize(e)}hasAltText(){return!!this.#r&&!this.#r.isEmpty()}hasAltTextData(){return this.#r?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.#n||=new Oc(this)}addStandaloneCommentButton(){if(this.#o){this._uiManager.isEditingMode()&&this.#o.classList.remove("hidden");return}this.hasComment&&(this.#o=this.#n.renderForStandalone(),this.div.append(this.#o))}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#o=null}hideStandaloneCommentButton(){this.#o?.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:n,deleted:s}}=this.#n;return{text:t,richText:e,date:n,deleted:s,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){this.#n||=new Oc(this),this.#n.data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:n}){if(!t||(this.#n||=new Oc(this),this.#n.setInitialText(e,n),!this.annotationElementId))return;const s=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);s&&this.updateFromAnnotationLayer(s)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(e){this.#n||=new Oc(this),this.#n.edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){this.#n.setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,s]=e.rect,[o]=this.pageDimensions,[l]=this.pageTranslation,c=l+o+1,u=s-100,h=c+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[c,u,h,s]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){this.#n.data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=this.#s?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),this.#z();const[t,n]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*n/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/n).toFixed(2)}%`);const[s,o]=this.getInitialTranslation();return this.translate(s,o),Ux(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#T||=new Ca({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#V.bind(this),onPinching:this.#C.bind(this),onPinchEnd:this.#x.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),e}#V(){this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#r?.toggle(!1),this.parent.togglePointerEvents(!1)}#C(e,t,n){let o=.7*(n/t)+1-.7;if(o===1)return;const l=this.#P(this.rotation),c=(R,D)=>[l[0]*R+l[2]*D,l[1]*R+l[3]*D],[u,h]=this.parentDimensions,f=this.x,p=this.y,v=this.width,b=this.height,_=we.MIN_SIZE/u,w=we.MIN_SIZE/h;o=Math.max(Math.min(o,1/v,1/b),_/v,w/b);const x=we._round(v*o),E=we._round(b*o);if(x===v&&E===b)return;this.#u||=[f,p,v,b];const A=c(v/2,b/2),C=we._round(f+A[0]),k=we._round(p+A[1]),N=c(x/2,E/2);this.x=C-N[0],this.y=k-N[1],this.width=x,this.height=E,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#x(){this.#r?.toggle(!0),this.parent.togglePointerEvents(!0),this.#j()}pointerdown(e){const{isMac:t}=Tt.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#p=!0,this._isDraggable){this.#B(e);return}this.#O(e)}#O(e){const{isMac:t}=Tt.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#B(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const s=new AbortController,o=this._uiManager.combinedSignal(s),l={capture:!0,passive:!1,signal:o},c=h=>{s.abort(),this.#i=null,this.#p=!1,this._uiManager.endDragSession()||this.#O(h),n&&this._onStopDragging()};t&&(this.#A=e.clientX,this.#_=e.clientY,this.#i=e.pointerId,this.#a=e.pointerType,window.addEventListener("pointermove",h=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:f,clientY:p,pointerId:v}=h;if(v!==this.#i){st(h);return}const[b,_]=this.screenToPageTranslation(f-this.#A,p-this.#_);this.#A=f,this.#_=p,this._uiManager.dragSelectedEditors(b,_)},l),window.addEventListener("touchmove",st,l),window.addEventListener("pointerdown",h=>{h.pointerType===this.#a&&(this.#T||h.isPrimary)&&c(h),st(h)},l));const u=h=>{if(!this.#i||this.#i===h.pointerId){c(h);return}st(h)};window.addEventListener("pointerup",u,{signal:o}),window.addEventListener("blur",u,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const s=this.parentScale,[o,l]=this.pageDimensions,[c,u]=this.pageTranslation,h=e/s,f=t/s,p=this.x*o,v=this.y*l,b=this.width*o,_=this.height*l;switch(n){case 0:return[p+h+c,l-v-f-_+u,p+h+b+c,l-v-f+u];case 90:return[p+f+c,l-v+h+u,p+f+_+c,l-v+h+b+u];case 180:return[p-h-b+c,l-v+f+u,p-h+c,l-v+f+_+u];case 270:return[p-f-_+c,l-v-h-b+u,p-f+c,l-v-h+u];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,s,o,l]=e,c=o-n,u=l-s;switch(this.rotation){case 0:return[n,t-l,c,u];case 90:return[n,t-s,u,c];case 180:return[o,t-s,c,u];case 270:return[o,t-l,u,c];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&we._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:n,opacity:s,deleted:o,richText:l},uid:c,pageIndex:u,creationDate:h,modificationDate:f}=this;return{id:c,pageIndex:u,rect:this.getPDFRect(),richText:l,contentsObj:{str:e},creationDate:h,modificationDate:n||f,popupRef:!o,color:t,opacity:s}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#v=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#v=!1,!0):!1}isInEditMode(){return this.#v}shouldGetKeyboardEvents(){return this.#w}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:s}=this.getClientDimensions(),{innerHeight:o,innerWidth:l}=window;return t<l&&s>0&&e<o&&n>0}#z(){if(this.#f||!this.div)return;this.#f=new AbortController;const e=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#z()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(e,t,n){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});s.rotation=e.rotation,s.#e=e.accessibilityData,s._isCopy=e.isCopy||!1;const[o,l]=s.pageDimensions,[c,u,h,f]=s.getRectInCurrentCoords(e.rect,l);return s.x=c/o,s.y=u/l,s.width=h/o,s.height=f/l,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#y&&(clearTimeout(this.#y),this.#y=null),this.#I(),this.removeEditToolbar(),this.#b){for(const e of this.#b.values())clearTimeout(e);this.#b=null}this.parent=null,this.#T?.destroy(),this.#T=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#F(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[n,s,o,l]=this.getPDFRect();return[we._round(n+(o-n)*e),we._round(s+(l-s)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(e){this.#n.commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){this.#n.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#c.children;if(!this.#t){this.#t=Array.from(t);const l=this.#G.bind(this),c=this.#q.bind(this),u=this._uiManager._signal;for(const h of this.#t){const f=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",l,{signal:u}),h.addEventListener("blur",c,{signal:u}),h.addEventListener("focus",this.#Y.bind(this,f),{signal:u}),h.setAttribute("data-l10n-id",we._l10nResizer[f])}}const n=this.#t[0];let s=0;for(const l of t){if(l===n)break;s++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(o!==s){if(o<s)for(let c=0;c<s-o;c++)this.#c.append(this.#c.firstChild);else if(o>s)for(let c=0;c<o-s;c++)this.#c.firstChild.before(this.#c.lastChild);let l=0;for(const c of t){const h=this.#t[l++].getAttribute("data-resizer-name");c.setAttribute("data-l10n-id",we._l10nResizer[h])}}this.#H(0),this.#w=!0,this.#c.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#G(e){we._resizerKeyboardManager.exec(this,e)}#q(e){this.#w&&e.relatedTarget?.parentNode!==this.#c&&this.#I()}#Y(e){this.#g=this.#w?e:""}#H(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#w&&this.#L(this.#g,{deltaX:e,deltaY:t,fromKeyboard:!0})}#I(){this.#w=!1,this.#H(-1),this.#j()}_stopResizingWithKeyboard(){this.#I(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#r?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#r?.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#m}set isEditing(e){this.#m=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#b||=new Map;const{action:n}=e;let s=this.#b.get(n);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),this.#b.delete(n),this.#b.size===0&&(this.#b=null)},we._telemetryTimeout),this.#b.set(n,s);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#s=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#s=!0}updateFakeAnnotationElement(e){if(!this.#d&&!this.deleted){this.#d=e.addFakeAnnotation(this);return}if(this.deleted){this.#d.remove(),this.#d=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#d.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}}class BN extends we{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const T0=3285377520,En=4294901760,Zn=65535;class zx{constructor(e){this.h1=e?e&4294967295:T0,this.h2=e?e&4294967295:T0}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let w=0,x=e.length;w<x;w++){const E=e.charCodeAt(w);E<=255?t[n++]=E:(t[n++]=E>>>8,t[n++]=E&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=n>>2,o=n-s*4,l=new Uint32Array(t.buffer,0,s);let c=0,u=0,h=this.h1,f=this.h2;const p=3432918353,v=461845907,b=p&Zn,_=v&Zn;for(let w=0;w<s;w++)w&1?(c=l[w],c=c*p&En|c*b&Zn,c=c<<15|c>>>17,c=c*v&En|c*_&Zn,h^=c,h=h<<13|h>>>19,h=h*5+3864292196):(u=l[w],u=u*p&En|u*b&Zn,u=u<<15|u>>>17,u=u*v&En|u*_&Zn,f^=u,f=f<<13|f>>>19,f=f*5+3864292196);switch(c=0,o){case 3:c^=t[s*4+2]<<16;case 2:c^=t[s*4+1]<<8;case 1:c^=t[s*4],c=c*p&En|c*b&Zn,c=c<<15|c>>>17,c=c*v&En|c*_&Zn,s&1?h^=c:f^=c}this.h1=h,this.h2=f}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&En|e*36045&Zn,t=t*4283543511&En|((t<<16|e>>>16)*2950163797&En)>>>16,e^=t>>>1,e=e*444984403&En|e*60499&Zn,t=t*3301882366&En|((t<<16|e>>>16)*3120437893&En)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Df=Object.freeze({map:null,hash:"",transfer:void 0});class Sp{#e=!1;#t=null;#r=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=this.#n.get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return this.#n.get(e)}remove(e){const t=this.#n.get(e);if(t!==void 0&&(t instanceof we&&this.#r.delete(t.annotationElementId),this.#n.delete(e),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of this.#n.values())if(n instanceof we)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=this.#n.get(e);let s=!1;if(n!==void 0)for(const[o,l]of Object.entries(t))n[o]!==l&&(s=!0,n[o]=l);else s=!0,this.#n.set(e,t);s&&this.#o(),t instanceof we&&((this.#r||=new Map).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return this.#n.has(e)}get size(){return this.#n.size}#o(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Hx(this)}get serializable(){if(this.#n.size===0)return Df;const e=new Map,t=new zx,n=[],s=Object.create(null);let o=!1;for(const[l,c]of this.#n){const u=c instanceof we?c.serialize(!1,s):c;u&&(e.set(l,u),t.update(`${l}:${JSON.stringify(u)}`),o||=!!u.bitmap)}if(o)for(const l of e.values())l.bitmap&&n.push(l.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:Df}get editorStats(){let e=null;const t=new Map;let n=0,s=0;for(const o of this.#n.values()){if(!(o instanceof we)){o.popup&&(o.popup.deleted?s+=1:n+=1);continue}o.isCommentDeleted?s+=1:o.hasEditedComment&&(n+=1);const l=o.telemetryFinalData;if(!l)continue;const{type:c}=l;t.has(c)||t.set(c,Object.getPrototypeOf(o).constructor),e||=Object.create(null);const u=e[c]||=new Map;for(const[h,f]of Object.entries(l)){if(h==="type")continue;let p=u.get(h);p||(p=new Map,u.set(h,p));const v=p.get(f)??0;p.set(f,v+1)}}if((s>0||n>0)&&(e||=Object.create(null),e.comments={deleted:s,edited:n}),!e)return null;for(const[o,l]of t)e[o]=l.computeTelemetryFinalData(e[o]);return e}resetModifiedIds(){this.#t=null}updateEditor(e,t){const n=this.#r?.get(e);return n?(n.updateFromAnnotationLayer(t),!0):!1}getEditor(e){return this.#r?.get(e)||null}get modifiedIds(){if(this.#t)return this.#t;const e=[];if(this.#r)for(const t of this.#r.values())t.serialize()&&e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class Hx extends Sp{#e;constructor(e){super();const{map:t,hash:n,transfer:s}=e.serializable,o=structuredClone(t,s?{transfer:s}:null);this.#e={map:o,hash:n,transfer:s}}get print(){Ve("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return Re(this,"modifiedIds",{ids:new Set,hash:""})}}class UN{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:n}){if(!(!e||this.#e.has(e.loadedName))){if(Ie(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:o,style:l}=e,c=new FontFace(s,o,l);this.addNativeFontFace(c);try{await c.load(),this.#e.add(s),n?.(e)}catch{Ce(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}Ve("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(s){throw Ce(`Failed to load font '${n.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const s=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return Re(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Re(this,"isSyncFontLoadingSupported",Ht||Tt.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Ie(!s.done,"completeRequest() cannot be called twice."),s.done=!0;n.length>0&&n[0].done;){const o=n.shift();setTimeout(o.callback,0)}}const{loadingRequests:n}=this,s={done:!1,complete:t,callback:e};return n.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Re(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(k,N){return k.charCodeAt(N)<<24|k.charCodeAt(N+1)<<16|k.charCodeAt(N+2)<<8|k.charCodeAt(N+3)&255}function s(k,N,R,D){const F=k.substring(0,N),U=k.substring(N+R);return F+D+U}let o,l;const c=this._document.createElement("canvas");c.width=1,c.height=1;const u=c.getContext("2d");let h=0;function f(k,N){if(++h>30){Ce("Load test font never loaded."),N();return}if(u.font="30px "+k,u.fillText(".",0,20),u.getImageData(0,0,1,1).data[3]>0){N();return}setTimeout(f.bind(null,k,N))}const p=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=s(v,976,p.length,p);const _=16,w=1482184792;let x=n(v,_);for(o=0,l=p.length-3;o<l;o+=4)x=x-w+n(p,o)|0;o<p.length&&(x=x-w+n(p+"XXX",o)|0),v=s(v,_,4,TN(x));const E=`url(data:font/opentype;base64,${btoa(v)});`,A=`@font-face {font-family:"${p}";src:${E}}`;this.insertRule(A);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const k of[e.loadedName,p]){const N=this._document.createElement("span");N.textContent="Hi",N.style.fontFamily=k,C.append(N)}this._document.body.append(C),f(p,()=>{C.remove(),t.complete()})}}class zN{#e;constructor(e,t=null,n,s){this.compiledGlyphs=Object.create(null),this.#e=e,this._inspectFont=t,n&&Object.assign(this,n),s&&(this.charProcOperatorList=s)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${Ox(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let s;try{s=e.get(n)}catch(l){Ce(`getPathGenerator - ignoring character: "${l}".`)}const o=new Path2D(s||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=o}get black(){return this.#e.black}get bold(){return this.#e.bold}get disableFontFace(){return this.#e.disableFontFace??!1}get fontExtraProperties(){return this.#e.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#e.isInvalidPDFjsFont}get isType3Font(){return this.#e.isType3Font}get italic(){return this.#e.italic}get missingFile(){return this.#e.missingFile}get remeasure(){return this.#e.remeasure}get vertical(){return this.#e.vertical}get ascent(){return this.#e.ascent}get defaultWidth(){return this.#e.defaultWidth}get descent(){return this.#e.descent}get bbox(){return this.#e.bbox}get fontMatrix(){return this.#e.fontMatrix}get fallbackName(){return this.#e.fallbackName}get loadedName(){return this.#e.loadedName}get mimetype(){return this.#e.mimetype}get name(){return this.#e.name}get data(){return this.#e.data}clearData(){this.#e.clearData()}get cssFontInfo(){return this.#e.cssFontInfo}get systemFontInfo(){return this.#e.systemFontInfo}get defaultVMetrics(){return this.#e.defaultVMetrics}}function HN(r){if(r instanceof URL)return r.href;if(typeof r=="string"){if(Ht)return r;const e=URL.parse(r,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function WN(r){if(Ht&&typeof Buffer<"u"&&r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return Sa(r);if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)||typeof r=="object"&&!isNaN(r?.length))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Mc(r){if(typeof r!="string")return null;if(r.endsWith("/"))return r;throw new Error(`Invalid factory url: "${r}" must include trailing slash.`)}const Of=r=>typeof r=="object"&&Number.isInteger(r?.num)&&r.num>=0&&Number.isInteger(r?.gen)&&r.gen>=0,VN=r=>typeof r=="object"&&typeof r?.name=="string",Wx=NN.bind(null,Of,VN);class $N{#e=new Map;#t=Promise.resolve();postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const[s]of this.#e)s.call(this,n)})}addEventListener(e,t,n=null){let s=null;if(n?.signal instanceof AbortSignal){const{signal:o}=n;if(o.aborted){Ce("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(e,t);s=()=>o.removeEventListener("abort",l),o.addEventListener("abort",l)}this.#e.set(t,s)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}const Lc={DATA:1,ERROR:2},gt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function k0(){}function tn(r){if(r instanceof Tr||r instanceof ou||r instanceof b0||r instanceof ca||r instanceof Jh)return r;switch(r instanceof Error||typeof r=="object"&&r!==null||Ve('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new Tr(r.message);case"InvalidPDFException":return new ou(r.message);case"PasswordException":return new b0(r.message,r.code);case"ResponseException":return new ca(r.message,r.status,r.missing);case"UnknownErrorException":return new Jh(r.message,r.details)}return new Jh(r.message,r.toString())}class Qo{#e=new AbortController;constructor(e,t,n){this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#n(e);return}if(e.callback){const n=e.callbackId,s=this.callbackCapabilities[n];if(!s)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===Lc.DATA)s.resolve(e.data);else if(e.callback===Lc.ERROR)s.reject(tn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,s=e.sourceName,o=this.comObj;Promise.try(t,e.data).then(function(l){o.postMessage({sourceName:n,targetName:s,callback:Lc.DATA,callbackId:e.callbackId,data:l})},function(l){o.postMessage({sourceName:n,targetName:s,callback:Lc.ERROR,callbackId:e.callbackId,reason:tn(l)})});return}if(e.streamId){this.#r(e);return}t(e.data)}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const s=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[s]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},n)}catch(l){o.reject(l)}return o.promise}sendWithStream(e,t,n,s){const o=this.streamId++,l=this.sourceName,c=this.targetName,u=this.comObj;return new ReadableStream({start:h=>{const f=Promise.withResolvers();return this.streamControllers[o]={controller:h,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},u.postMessage({sourceName:l,targetName:c,action:e,streamId:o,data:t,desiredSize:h.desiredSize},s),f.promise},pull:h=>{const f=Promise.withResolvers();return this.streamControllers[o].pullCall=f,u.postMessage({sourceName:l,targetName:c,stream:gt.PULL,streamId:o,desiredSize:h.desiredSize}),f.promise},cancel:h=>{Ie(h instanceof Error,"cancel must have a valid reason");const f=Promise.withResolvers();return this.streamControllers[o].cancelCall=f,this.streamControllers[o].isClosed=!0,u.postMessage({sourceName:l,targetName:c,stream:gt.CANCEL,streamId:o,reason:tn(h)}),f.promise}},n)}#r(e){const t=e.streamId,n=this.sourceName,s=e.sourceName,o=this.comObj,l=this,c=this.actionHandler[e.action],u={enqueue(h,f=1,p){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=f,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:s,stream:gt.ENQUEUE,streamId:t,chunk:h},p)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:s,stream:gt.CLOSE,streamId:t}),delete l.streamSinks[t])},error(h){Ie(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:s,stream:gt.ERROR,streamId:t,reason:tn(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[t]=u,Promise.try(c,e.data,u).then(function(){o.postMessage({sourceName:n,targetName:s,stream:gt.START_COMPLETE,streamId:t,success:!0})},function(h){o.postMessage({sourceName:n,targetName:s,stream:gt.START_COMPLETE,streamId:t,reason:tn(h)})})}#n(e){const t=e.streamId,n=this.sourceName,s=e.sourceName,o=this.comObj,l=this.streamControllers[t],c=this.streamSinks[t];switch(e.stream){case gt.START_COMPLETE:e.success?l.startCall.resolve():l.startCall.reject(tn(e.reason));break;case gt.PULL_COMPLETE:e.success?l.pullCall.resolve():l.pullCall.reject(tn(e.reason));break;case gt.PULL:if(!c){o.postMessage({sourceName:n,targetName:s,stream:gt.PULL_COMPLETE,streamId:t,success:!0});break}c.desiredSize<=0&&e.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=e.desiredSize,Promise.try(c.onPull||k0).then(function(){o.postMessage({sourceName:n,targetName:s,stream:gt.PULL_COMPLETE,streamId:t,success:!0})},function(h){o.postMessage({sourceName:n,targetName:s,stream:gt.PULL_COMPLETE,streamId:t,reason:tn(h)})});break;case gt.ENQUEUE:if(Ie(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(e.chunk);break;case gt.CLOSE:if(Ie(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#o(l,t);break;case gt.ERROR:Ie(l,"error should have stream controller"),l.controller.error(tn(e.reason)),this.#o(l,t);break;case gt.CANCEL_COMPLETE:e.success?l.cancelCall.resolve():l.cancelCall.reject(tn(e.reason)),this.#o(l,t);break;case gt.CANCEL:if(!c)break;const u=tn(e.reason);Promise.try(c.onCancel||k0,u).then(function(){o.postMessage({sourceName:n,targetName:s,stream:gt.CANCEL_COMPLETE,streamId:t,success:!0})},function(h){o.postMessage({sourceName:n,targetName:s,stream:gt.CANCEL_COMPLETE,streamId:t,reason:tn(h)})}),c.sinkCapability.reject(u),c.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#o(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.#e?.abort(),this.#e=null}}class Vx{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Ve("Abstract method `_createCanvas` called.")}}class qN extends Vx{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class $x{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Ve("Abstract method `_fetch` called.")}}class P0 extends $x{async _fetch(e){const t=await Ki(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Sa(t)}}class qx{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,s,o){return"none"}destroy(e=!1){}}class GN extends qx{#e;#t;#r;#n;#o;#s;#i=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#n=e,this.#o=t}get#a(){return this.#t||=new Map}get#c(){return this.#s||=new Map}get#l(){if(!this.#r){const e=this.#o.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const n=this.#o.createElementNS(Sr,"svg");n.setAttribute("width",0),n.setAttribute("height",0),this.#r=this.#o.createElementNS(Sr,"defs"),e.append(n),n.append(this.#r),this.#o.body.append(e)}return this.#r}#h(e){if(e.length===1){const u=e[0],h=new Array(256);for(let p=0;p<256;p++)h[p]=u[p]/255;const f=h.join(",");return[f,f,f]}const[t,n,s]=e,o=new Array(256),l=new Array(256),c=new Array(256);for(let u=0;u<256;u++)o[u]=t[u]/255,l[u]=n[u]/255,c[u]=s[u]/255;return[o.join(","),l.join(","),c.join(",")]}#d(e){if(this.#e===void 0){this.#e="";const t=this.#o.URL;t!==this.#o.baseURI&&(Ea(t)?Ce('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=mp(t,""))}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#a.get(e);if(t)return t;const[n,s,o]=this.#h(e),l=e.length===1?n:`${n}${s}${o}`;if(t=this.#a.get(l),t)return this.#a.set(e,t),t;const c=`g_${this.#n}_transfer_map_${this.#i++}`,u=this.#d(c);this.#a.set(e,u),this.#a.set(l,u);const h=this.#p(c);return this.#m(n,s,o,h),u}addHCMFilter(e,t){const n=`${e}-${t}`,s="base";let o=this.#c.get(s);if(o?.key===n||(o?(o.filter?.remove(),o.key=n,o.url="none",o.filter=null):(o={key:n,url:"none",filter:null},this.#c.set(s,o)),!e||!t))return o.url;const l=this.#w(e);e=fe.makeHexColor(...l);const c=this.#w(t);if(t=fe.makeHexColor(...c),this.#l.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return o.url;const u=new Array(256);for(let b=0;b<=255;b++){const _=b/255;u[b]=_<=.03928?_/12.92:((_+.055)/1.055)**2.4}const h=u.join(","),f=`g_${this.#n}_hcm_filter`,p=o.filter=this.#p(f);this.#m(h,h,h,p),this.#g(p);const v=(b,_)=>{const w=l[b]/255,x=c[b]/255,E=new Array(_+1);for(let A=0;A<=_;A++)E[A]=w+A/_*(x-w);return E.join(",")};return this.#m(v(0,5),v(1,5),v(2,5),p),o.url=this.#d(f),o.url}addAlphaFilter(e){let t=this.#a.get(e);if(t)return t;const[n]=this.#h([e]),s=`alpha_${n}`;if(t=this.#a.get(s),t)return this.#a.set(e,t),t;const o=`g_${this.#n}_alpha_map_${this.#i++}`,l=this.#d(o);this.#a.set(e,l),this.#a.set(s,l);const c=this.#p(o);return this.#v(n,c),l}addLuminosityFilter(e){let t=this.#a.get(e||"luminosity");if(t)return t;let n,s;if(e?([n]=this.#h([e]),s=`luminosity_${n}`):s="luminosity",t=this.#a.get(s),t)return this.#a.set(e,t),t;const o=`g_${this.#n}_luminosity_map_${this.#i++}`,l=this.#d(o);this.#a.set(e,l),this.#a.set(s,l);const c=this.#p(o);return this.#f(c),e&&this.#v(n,c),l}addHighlightHCMFilter(e,t,n,s,o){const l=`${t}-${n}-${s}-${o}`;let c=this.#c.get(e);if(c?.key===l||(c?(c.filter?.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},this.#c.set(e,c)),!t||!n))return c.url;const[u,h]=[t,n].map(this.#w.bind(this));let f=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),p=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[v,b]=[s,o].map(this.#w.bind(this));p<f&&([f,p,v,b]=[p,f,b,v]),this.#l.style.color="";const _=(E,A,C)=>{const k=new Array(256),N=(p-f)/C,R=E/255,D=(A-E)/(255*C);let F=0;for(let U=0;U<=C;U++){const q=Math.round(f+U*N),Y=R+U*D;for(let ne=F;ne<=q;ne++)k[ne]=Y;F=q+1}for(let U=F;U<256;U++)k[U]=k[F-1];return k.join(",")},w=`g_${this.#n}_hcm_${e}_filter`,x=c.filter=this.#p(w);return this.#g(x),this.#m(_(v[0],b[0],5),_(v[1],b[1],5),_(v[2],b[2],5),x),c.url=this.#d(w),c.url}destroy(e=!1){e&&this.#s?.size||(this.#r?.parentNode.parentNode.remove(),this.#r=null,this.#t?.clear(),this.#t=null,this.#s?.clear(),this.#s=null,this.#i=0)}#f(e){const t=this.#o.createElementNS(Sr,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#g(e){const t=this.#o.createElementNS(Sr,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#p(e){const t=this.#o.createElementNS(Sr,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#l.append(t),t}#u(e,t,n){const s=this.#o.createElementNS(Sr,t);s.setAttribute("type","discrete"),s.setAttribute("tableValues",n),e.append(s)}#m(e,t,n,s){const o=this.#o.createElementNS(Sr,"feComponentTransfer");s.append(o),this.#u(o,"feFuncR",e),this.#u(o,"feFuncG",t),this.#u(o,"feFuncB",n)}#v(e,t){const n=this.#o.createElementNS(Sr,"feComponentTransfer");t.append(n),this.#u(n,"feFuncA",e)}#w(e){return this.#l.style.color=e,Qi(getComputedStyle(this.#l).getPropertyValue("color"))}}class Gx{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Ve("Abstract method `_fetch` called.")}}class R0 extends Gx{async _fetch(e){const t=await Ki(e,"arraybuffer");return new Uint8Array(t)}}class Yx{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){Ve("Abstract method `_fetch` called.")}}class N0 extends Yx{async _fetch(e){const t=await Ki(e,"arraybuffer");return new Uint8Array(t)}}Ht&&Ce("Please use the `legacy` build in Node.js environments.");async function _p(r){const t=await process.getBuiltinModule("fs").promises.readFile(r);return new Uint8Array(t)}class YN extends qx{}class XN extends Vx{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class KN extends $x{async _fetch(e){return _p(e)}}class QN extends Gx{async _fetch(e){return _p(e)}}class JN extends Yx{async _fetch(e){return _p(e)}}const mi="__forcedDependency",{floor:D0,ceil:O0}=Math;function Ic(r,e,t,n,s,o){r[e*4+0]=Math.min(r[e*4+0],t),r[e*4+1]=Math.min(r[e*4+1],n),r[e*4+2]=Math.max(r[e*4+2],s),r[e*4+3]=Math.max(r[e*4+3],o)}const Mf=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class ZN{#e;#t;constructor(e,t){this.#e=e,this.#t=t}get length(){return this.#e.length}isEmpty(e){return this.#e[e]===Mf}minX(e){return this.#t[e*4+0]/256}minY(e){return this.#t[e*4+1]/256}maxX(e){return(this.#t[e*4+2]+1)/256}maxY(e){return(this.#t[e*4+3]+1)/256}}const Fc=(r,e)=>{if(!r)return;let t=r.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},r.set(e,t)),t};class eD{#e={__proto__:null};#t={__proto__:null,transform:[],moveText:[],sameLineText:[],[mi]:[]};#r=new Map;#n=[];#o=[];#s=[[1,0,0,1,0,0]];#i=[-1/0,-1/0,1/0,1/0];#a=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#h=new Map;#d=new Map;#f;#g;#p;#u;#m;constructor(e,t,n=!1){this.#f=e.width,this.#g=e.height,this.#v(t),n&&(this.#m=new Map)}growOperationsCount(e){e>=this.#u.length&&this.#v(e,this.#u)}#v(e,t){const n=new ArrayBuffer(e*4);this.#p=new Uint8ClampedArray(n),this.#u=new Uint32Array(n),t&&t.length>0?(this.#u.set(t),this.#u.fill(Mf,t.length)):this.#u.fill(Mf)}save(e){return this.#e={__proto__:this.#e},this.#t={__proto__:this.#t,transform:{__proto__:this.#t.transform},moveText:{__proto__:this.#t.moveText},sameLineText:{__proto__:this.#t.sameLineText},[mi]:{__proto__:this.#t[mi]}},this.#i={__proto__:this.#i},this.#n.push(e),this}restore(e){const t=Object.getPrototypeOf(this.#e);if(t===null)return this;this.#e=t,this.#t=Object.getPrototypeOf(this.#t),this.#i=Object.getPrototypeOf(this.#i);const n=this.#n.pop();return n!==void 0&&(Fc(this.#m,e)?.dependencies.add(n),this.#u[e]=this.#u[n]),this}recordOpenMarker(e){return this.#n.push(e),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(e){const t=this.#n.pop();return t!==void 0&&(Fc(this.#m,e)?.dependencies.add(t),this.#u[e]=this.#u[t]),this}beginMarkedContent(e){return this.#o.push(e),this}endMarkedContent(e){const t=this.#o.pop();return t!==void 0&&(Fc(this.#m,e)?.dependencies.add(t),this.#u[e]=this.#u[t]),this}pushBaseTransform(e){return this.#s.push(fe.multiplyByDOMMatrix(this.#s.at(-1),e.getTransform())),this}popBaseTransform(){return this.#s.length>1&&this.#s.pop(),this}recordSimpleData(e,t){return this.#e[e]=t,this}recordIncrementalData(e,t){return this.#t[e].push(t),this}resetIncrementalData(e,t){return this.#t[e].length=0,this}recordNamedData(e,t){return this.#r.set(e,t),this}recordSimpleDataFromNamed(e,t,n){this.#e[e]=this.#r.get(t)??n}recordFutureForcedDependency(e,t){return this.recordIncrementalData(mi,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in this.#e&&this.recordFutureForcedDependency(t,this.#e[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of this.#l)this.recordFutureForcedDependency(mi,e);return this}resetBBox(e){return this.#c!==e&&(this.#c=e,this.#a[0]=1/0,this.#a[1]=1/0,this.#a[2]=-1/0,this.#a[3]=-1/0),this}recordClipBox(e,t,n,s,o,l){const c=fe.multiplyByDOMMatrix(this.#s.at(-1),t.getTransform()),u=[1/0,1/0,-1/0,-1/0];fe.axialAlignedBoundingBox([n,o,s,l],c,u);const h=fe.intersect(this.#i,u);return h?(this.#i[0]=h[0],this.#i[1]=h[1],this.#i[2]=h[2],this.#i[3]=h[3]):(this.#i[0]=this.#i[1]=1/0,this.#i[2]=this.#i[3]=-1/0),this}recordBBox(e,t,n,s,o,l){const c=this.#i;if(c[0]===1/0)return this;const u=fe.multiplyByDOMMatrix(this.#s.at(-1),t.getTransform());if(c[0]===-1/0)return fe.axialAlignedBoundingBox([n,o,s,l],u,this.#a),this;const h=[1/0,1/0,-1/0,-1/0];return fe.axialAlignedBoundingBox([n,o,s,l],u,h),this.#a[0]=Math.min(this.#a[0],Math.max(h[0],c[0])),this.#a[1]=Math.min(this.#a[1],Math.max(h[1],c[1])),this.#a[2]=Math.max(this.#a[2],Math.min(h[2],c[2])),this.#a[3]=Math.max(this.#a[3],Math.min(h[3],c[3])),this}recordCharacterBBox(e,t,n,s=1,o=0,l=0,c){const u=n.bbox;let h,f;if(u&&(h=u[2]!==u[0]&&u[3]!==u[1]&&this.#d.get(n),h!==!1&&(f=[0,0,0,0],fe.axialAlignedBoundingBox(u,n.fontMatrix,f),(s!==1||o!==0||l!==0)&&fe.scaleMinMax([s,0,0,-s,o,l],f),h)))return this.recordBBox(e,t,f[0],f[2],f[1],f[3]);if(!c)return this.recordFullPageBBox(e);const p=c();return u&&f&&h===void 0&&(h=f[0]<=o-p.actualBoundingBoxLeft&&f[2]>=o+p.actualBoundingBoxRight&&f[1]<=l-p.actualBoundingBoxAscent&&f[3]>=l+p.actualBoundingBoxDescent,this.#d.set(n,h),h)?this.recordBBox(e,t,f[0],f[2],f[1],f[3]):this.recordBBox(e,t,o-p.actualBoundingBoxLeft,o+p.actualBoundingBoxRight,l-p.actualBoundingBoxAscent,l+p.actualBoundingBoxDescent)}recordFullPageBBox(e){return this.#a[0]=Math.max(0,this.#i[0]),this.#a[1]=Math.max(0,this.#i[1]),this.#a[2]=Math.min(this.#f,this.#i[2]),this.#a[3]=Math.min(this.#g,this.#i[3]),this}getSimpleIndex(e){return this.#e[e]}recordDependencies(e,t){const n=this.#l,s=this.#e,o=this.#t;for(const l of t)l in this.#e?n.add(s[l]):l in o&&o[l].forEach(n.add,n);return this}recordNamedDependency(e,t){return this.#r.has(t)&&this.#l.add(this.#r.get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[mi]),this.#m){const n=Fc(this.#m,e),{dependencies:s}=n;this.#l.forEach(s.add,s),this.#n.forEach(s.add,s),this.#o.forEach(s.add,s),s.delete(e),n.isRenderingOperation=!0}if(this.#c===e){const n=D0(this.#a[0]*256/this.#f),s=D0(this.#a[1]*256/this.#g),o=O0(this.#a[2]*256/this.#f),l=O0(this.#a[3]*256/this.#g);Ic(this.#p,e,n,s,o,l);for(const c of this.#l)c!==e&&Ic(this.#p,c,n,s,o,l);for(const c of this.#n)c!==e&&Ic(this.#p,c,n,s,o,l);for(const c of this.#o)c!==e&&Ic(this.#p,c,n,s,o,l);t||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(e,t=!1){const n=Array.from(this.#l);this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const s of n)this.recordIncrementalData("sameLineText",s);return this}bboxToClipBoxDropOperation(e,t=!1){return this.#c===e&&(this.#c=-1,this.#i[0]=Math.max(this.#i[0],this.#a[0]),this.#i[1]=Math.max(this.#i[1],this.#a[1]),this.#i[2]=Math.min(this.#i[2],this.#a[2]),this.#i[3]=Math.min(this.#i[3],this.#a[3]),t||this.#l.clear()),this}_takePendingDependencies(){const e=this.#l;return this.#l=new Set,e}_extractOperation(e){const t=this.#h.get(e);return this.#h.delete(e),t}_pushPendingDependencies(e){for(const t of e)this.#l.add(t)}take(){return this.#d.clear(),new ZN(this.#u,this.#p)}takeDebugMetadata(){return this.#m}}class cu{#e;#t;#r;#n=0;#o=0;constructor(e,t,n){if(e instanceof cu&&e.#r===!!n)return e;this.#e=e,this.#t=t,this.#r=!!n}growOperationsCount(){throw new Error("Unreachable")}save(e){return this.#o++,this.#e.save(this.#t),this}restore(e){return this.#o>0&&(this.#e.restore(this.#t),this.#o--),this}recordOpenMarker(e){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#t:this.#e.getOpenMarker()}recordCloseMarker(e){return this.#n--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return this.#e.pushBaseTransform(e),this}popBaseTransform(){return this.#e.popBaseTransform(),this}recordSimpleData(e,t){return this.#e.recordSimpleData(e,this.#t),this}recordIncrementalData(e,t){return this.#e.recordIncrementalData(e,this.#t),this}resetIncrementalData(e,t){return this.#e.resetIncrementalData(e,this.#t),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,n){return this.#e.recordSimpleDataFromNamed(e,t,this.#t),this}recordFutureForcedDependency(e,t){return this.#e.recordFutureForcedDependency(e,this.#t),this}inheritSimpleDataAsFutureForcedDependencies(e){return this.#e.inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#e.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return this.#r||this.#e.resetBBox(this.#t),this}recordClipBox(e,t,n,s,o,l){return this.#r||this.#e.recordClipBox(this.#t,t,n,s,o,l),this}recordBBox(e,t,n,s,o,l){return this.#r||this.#e.recordBBox(this.#t,t,n,s,o,l),this}recordCharacterBBox(e,t,n,s,o,l,c){return this.#r||this.#e.recordCharacterBBox(this.#t,t,n,s,o,l,c),this}recordFullPageBBox(e){return this.#r||this.#e.recordFullPageBBox(this.#t),this}getSimpleIndex(e){return this.#e.getSimpleIndex(e)}recordDependencies(e,t){return this.#e.recordDependencies(this.#t,t),this}recordNamedDependency(e,t){return this.#e.recordNamedDependency(this.#t,t),this}recordOperation(e){return this.#e.recordOperation(this.#t,!0),this}recordShowTextOperation(e){return this.#e.recordShowTextOperation(this.#t,!0),this}bboxToClipBoxDropOperation(e){return this.#r||this.#e.bboxToClipBoxDropOperation(this.#t,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const An={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Nt={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Lf(r,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,n),r.clip(s)}class Ep{isModifyingCurrentTransform(){return!1}getPattern(){Ve("Abstract method `getPattern` called.")}}class tD extends Ep{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,s){let o;if(s===Nt.STROKE||s===Nt.FILL){const l=t.current.getClippedPathBoundingBox(s,rt(e))||[0,0,0,0],c=Math.ceil(l[2]-l[0])||1,u=Math.ceil(l[3]-l[1])||1,h=t.cachedCanvases.getCanvas("pattern",c,u),f=h.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-l[0],-l[1]),n=fe.transform(n,[1,0,0,1,l[0],l[1]]),f.transform(...t.baseTransform),this.matrix&&f.transform(...this.matrix),Lf(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),o=e.createPattern(h.canvas,"no-repeat");const p=new DOMMatrix(n);o.setTransform(p)}else Lf(e,this._bbox),o=this._createGradient(e);return o}}function tf(r,e,t,n,s,o,l,c){const u=e.coords,h=e.colors,f=r.data,p=r.width*4;let v;u[t+1]>u[n+1]&&(v=t,t=n,n=v,v=o,o=l,l=v),u[n+1]>u[s+1]&&(v=n,n=s,s=v,v=l,l=c,c=v),u[t+1]>u[n+1]&&(v=t,t=n,n=v,v=o,o=l,l=v);const b=(u[t]+e.offsetX)*e.scaleX,_=(u[t+1]+e.offsetY)*e.scaleY,w=(u[n]+e.offsetX)*e.scaleX,x=(u[n+1]+e.offsetY)*e.scaleY,E=(u[s]+e.offsetX)*e.scaleX,A=(u[s+1]+e.offsetY)*e.scaleY;if(_>=A)return;const C=h[o],k=h[o+1],N=h[o+2],R=h[l],D=h[l+1],F=h[l+2],U=h[c],q=h[c+1],Y=h[c+2],ne=Math.round(_),oe=Math.round(A);let te,ae,G,K,V,$,Q,M;for(let H=ne;H<=oe;H++){if(H<x){const ge=H<_?0:(_-H)/(_-x);te=b-(b-w)*ge,ae=C-(C-R)*ge,G=k-(k-D)*ge,K=N-(N-F)*ge}else{let ge;H>A?ge=1:x===A?ge=0:ge=(x-H)/(x-A),te=w-(w-E)*ge,ae=R-(R-U)*ge,G=D-(D-q)*ge,K=F-(F-Y)*ge}let ie;H<_?ie=0:H>A?ie=1:ie=(_-H)/(_-A),V=b-(b-E)*ie,$=C-(C-U)*ie,Q=k-(k-q)*ie,M=N-(N-Y)*ie;const ce=Math.round(Math.min(te,V)),ye=Math.round(Math.max(te,V));let be=p*H+ce*4;for(let ge=ce;ge<=ye;ge++)ie=(te-ge)/(te-V),ie<0?ie=0:ie>1&&(ie=1),f[be++]=ae-(ae-$)*ie|0,f[be++]=G-(G-Q)*ie|0,f[be++]=K-(K-M)*ie|0,f[be++]=255}}function nD(r,e,t){const n=e.coords,s=e.colors;let o,l;switch(e.type){case"lattice":const c=e.verticesPerRow,u=Math.floor(n.length/c)-1,h=c-1;for(o=0;o<u;o++){let f=o*c;for(let p=0;p<h;p++,f++)tf(r,t,n[f],n[f+1],n[f+c],s[f],s[f+1],s[f+c]),tf(r,t,n[f+c+1],n[f+1],n[f+c],s[f+c+1],s[f+1],s[f+c])}break;case"triangles":for(o=0,l=n.length;o<l;o+=3)tf(r,t,n[o],n[o+1],n[o+2],s[o],s[o+1],s[o+2]);break;default:throw new Error("illegal figure")}}class rD extends Ep{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const c=Math.floor(this._bounds[0]),u=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-c,f=Math.ceil(this._bounds[3])-u,p=Math.min(Math.ceil(Math.abs(h*e[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(f*e[1]*1.1)),3e3),b=h/p,_=f/v,w={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-u,scaleX:1/b,scaleY:1/_},x=p+4,E=v+4,A=n.getCanvas("mesh",x,E),C=A.context,k=C.createImageData(p,v);if(t){const R=k.data;for(let D=0,F=R.length;D<F;D+=4)R[D]=t[0],R[D+1]=t[1],R[D+2]=t[2],R[D+3]=255}for(const R of this._figures)nD(k,R,w);return C.putImageData(k,2,2),{canvas:A.canvas,offsetX:c-2*b,offsetY:u-2*_,scaleX:b,scaleY:_}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,s){Lf(e,this._bbox);const o=new Float32Array(2);if(s===Nt.SHADING)fe.singularValueDecompose2dScale(rt(e),o);else if(this.matrix){fe.singularValueDecompose2dScale(this.matrix,o);const[c,u]=o;fe.singularValueDecompose2dScale(t.baseTransform,o),o[0]*=c,o[1]*=u}else fe.singularValueDecompose2dScale(t.baseTransform,o);const l=this._createMeshCanvas(o,s===Nt.SHADING?null:this._background,t.cachedCanvases);return s!==Nt.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(l.offsetX,l.offsetY),e.scale(l.scaleX,l.scaleY),e.createPattern(l.canvas,"no-repeat")}}class sD extends Ep{getPattern(){return"hotpink"}}function iD(r){switch(r[0]){case"RadialAxial":return new tD(r);case"Mesh":return new rD(r);case"Dummy":return new sD}throw new Error(`Unknown IR type: ${r[0]}`)}const M0={COLORED:1,UNCOLORED:2};class Ap{static MAX_PATTERN_SIZE=3e3;constructor(e,t,n,s){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=s}createPatternCanvas(e,t){const{bbox:n,operatorList:s,paintType:o,tilingType:l,color:c,canvasGraphicsFactory:u}=this;let{xstep:h,ystep:f}=this;h=Math.abs(h),f=Math.abs(f),Cu("TilingType: "+l);const p=n[0],v=n[1],b=n[2],_=n[3],w=b-p,x=_-v,E=new Float32Array(2);fe.singularValueDecompose2dScale(this.matrix,E);const[A,C]=E;fe.singularValueDecompose2dScale(this.baseTransform,E);const k=A*E[0],N=C*E[1];let R=w,D=x,F=!1,U=!1;const q=Math.ceil(h*k),Y=Math.ceil(f*N),ne=Math.ceil(w*k),oe=Math.ceil(x*N);q>=ne?R=h:F=!0,Y>=oe?D=f:U=!0;const te=this.getSizeAndScale(R,this.ctx.canvas.width,k),ae=this.getSizeAndScale(D,this.ctx.canvas.height,N),G=e.cachedCanvases.getCanvas("pattern",te.size,ae.size),K=G.context,V=u.createCanvasGraphics(K,t);if(V.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(V,o,c),K.translate(-te.scale*p,-ae.scale*v),V.transform(0,te.scale,0,0,ae.scale,0,0),K.save(),V.dependencyTracker?.save(),this.clipBbox(V,p,v,b,_),V.baseTransform=rt(V.ctx),V.executeOperatorList(s),V.endDrawing(),V.dependencyTracker?.restore(),K.restore(),F||U){const $=G.canvas;F&&(R=h),U&&(D=f);const Q=this.getSizeAndScale(R,this.ctx.canvas.width,k),M=this.getSizeAndScale(D,this.ctx.canvas.height,N),H=Q.size,ie=M.size,ce=e.cachedCanvases.getCanvas("pattern-workaround",H,ie),ye=ce.context,be=F?Math.floor(w/h):0,ge=U?Math.floor(x/f):0;for(let X=0;X<=be;X++)for(let se=0;se<=ge;se++)ye.drawImage($,H*X,ie*se,H,ie,0,0,H,ie);return{canvas:ce.canvas,scaleX:Q.scale,scaleY:M.scale,offsetX:p,offsetY:v}}return{canvas:G.canvas,scaleX:te.scale,scaleY:ae.scale,offsetX:p,offsetY:v}}getSizeAndScale(e,t,n){const s=Math.max(Ap.MAX_PATTERN_SIZE,t);let o=Math.ceil(e*n);return o>=s?o=s:n=o/e,{scale:n,size:o}}clipBbox(e,t,n,s,o){const l=s-t,c=o-n;e.ctx.rect(t,n,l,c),fe.axialAlignedBoundingBox([t,n,s,o],rt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const s=e.ctx,o=e.current;switch(t){case M0.COLORED:const{fillStyle:l,strokeStyle:c}=this.ctx;s.fillStyle=o.fillColor=l,s.strokeStyle=o.strokeColor=c;break;case M0.UNCOLORED:s.fillStyle=s.strokeStyle=n,o.fillColor=o.strokeColor=n;break;default:throw new CN(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,s,o){let l=n;s!==Nt.SHADING&&(l=fe.transform(l,t.baseTransform),this.matrix&&(l=fe.transform(l,this.matrix)));const c=this.createPatternCanvas(t,o);let u=new DOMMatrix(l);u=u.translate(c.offsetX,c.offsetY),u=u.scale(1/c.scaleX,1/c.scaleY);const h=e.createPattern(c.canvas,"repeat");return h.setTransform(u),h}}function oD({src:r,srcPos:e=0,dest:t,width:n,height:s,nonBlackColor:o=4294967295,inverseDecode:l=!1}){const c=Tt.isLittleEndian?4278190080:255,[u,h]=l?[o,c]:[c,o],f=n>>3,p=n&7,v=r.length;t=new Uint32Array(t.buffer);let b=0;for(let _=0;_<s;_++){for(const x=e+f;e<x;e++){const E=e<v?r[e]:255;t[b++]=E&128?h:u,t[b++]=E&64?h:u,t[b++]=E&32?h:u,t[b++]=E&16?h:u,t[b++]=E&8?h:u,t[b++]=E&4?h:u,t[b++]=E&2?h:u,t[b++]=E&1?h:u}if(p===0)continue;const w=e<v?r[e++]:255;for(let x=0;x<p;x++)t[b++]=w&1<<7-x?h:u}return{srcPos:e,destPos:b}}const L0=16,I0=100,aD=15,F0=10,nn=16,nf=new DOMMatrix,mn=new Float32Array(2),_i=new Float32Array([1/0,1/0,-1/0,-1/0]);function lD(r,e){if(r._removeMirroring)throw new Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){e.save(),this.__originalSave()},r.restore=function(){e.restore(),this.__originalRestore()},r.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},r.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},r.transform=function(t,n,s,o,l,c){e.transform(t,n,s,o,l,c),this.__originalTransform(t,n,s,o,l,c)},r.setTransform=function(t,n,s,o,l,c){e.setTransform(t,n,s,o,l,c),this.__originalSetTransform(t,n,s,o,l,c)},r.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},r.rotate=function(t){e.rotate(t),this.__originalRotate(t)},r.clip=function(t){e.clip(t),this.__originalClip(t)},r.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},r.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},r.bezierCurveTo=function(t,n,s,o,l,c){e.bezierCurveTo(t,n,s,o,l,c),this.__originalBezierCurveTo(t,n,s,o,l,c)},r.rect=function(t,n,s,o){e.rect(t,n,s,o),this.__originalRect(t,n,s,o)},r.closePath=function(){e.closePath(),this.__originalClosePath()},r.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class cD{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,n)):(s=this.canvasFactory.create(t,n),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function jc(r,e,t,n,s,o,l,c,u,h){const[f,p,v,b,_,w]=rt(r);if(p===0&&v===0){const A=l*f+_,C=Math.round(A),k=c*b+w,N=Math.round(k),R=(l+u)*f+_,D=Math.abs(Math.round(R)-C)||1,F=(c+h)*b+w,U=Math.abs(Math.round(F)-N)||1;return r.setTransform(Math.sign(f),0,0,Math.sign(b),C,N),r.drawImage(e,t,n,s,o,0,0,D,U),r.setTransform(f,p,v,b,_,w),[D,U]}if(f===0&&b===0){const A=c*v+_,C=Math.round(A),k=l*p+w,N=Math.round(k),R=(c+h)*v+_,D=Math.abs(Math.round(R)-C)||1,F=(l+u)*p+w,U=Math.abs(Math.round(F)-N)||1;return r.setTransform(0,Math.sign(p),Math.sign(v),0,C,N),r.drawImage(e,t,n,s,o,0,0,U,D),r.setTransform(f,p,v,b,_,w),[U,D]}r.drawImage(e,t,n,s,o,l,c,u,h);const x=Math.hypot(f,p),E=Math.hypot(v,b);return[x*u,E*h]}class j0{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Rf;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Rt.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(e,t,n){n?.(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=_i.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Nt.FILL,t=null){const n=this.minMax.slice();if(e===Nt.STROKE){t||Ve("Stroke bounding box must include transform."),fe.singularValueDecompose2dScale(t,mn);const s=mn[0]*this.lineWidth/2,o=mn[1]*this.lineWidth/2;n[0]-=s,n[1]-=o,n[2]+=s,n[3]+=o}return n}updateClipFromPath(){const e=fe.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(_i,0)}getClippedPathBoundingBox(e=Nt.FILL,t=null){return fe.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function B0(r,e){if(e instanceof ImageData){r.putImageData(e,0,0);return}const t=e.height,n=e.width,s=t%nn,o=(t-s)/nn,l=s===0?o:o+1,c=r.createImageData(n,nn);let u=0,h;const f=e.data,p=c.data;let v,b,_,w;if(e.kind===na.GRAYSCALE_1BPP){const x=f.byteLength,E=new Uint32Array(p.buffer,0,p.byteLength>>2),A=E.length,C=n+7>>3,k=4294967295,N=Tt.isLittleEndian?4278190080:255;for(v=0;v<l;v++){for(_=v<o?nn:s,h=0,b=0;b<_;b++){const R=x-u;let D=0;const F=R>C?n:R*8-7,U=F&-8;let q=0,Y=0;for(;D<U;D+=8)Y=f[u++],E[h++]=Y&128?k:N,E[h++]=Y&64?k:N,E[h++]=Y&32?k:N,E[h++]=Y&16?k:N,E[h++]=Y&8?k:N,E[h++]=Y&4?k:N,E[h++]=Y&2?k:N,E[h++]=Y&1?k:N;for(;D<F;D++)q===0&&(Y=f[u++],q=128),E[h++]=Y&q?k:N,q>>=1}for(;h<A;)E[h++]=0;r.putImageData(c,0,v*nn)}}else if(e.kind===na.RGBA_32BPP){for(b=0,w=n*nn*4,v=0;v<o;v++)p.set(f.subarray(u,u+w)),u+=w,r.putImageData(c,0,b),b+=nn;v<l&&(w=n*s*4,p.set(f.subarray(u,u+w)),r.putImageData(c,0,b))}else if(e.kind===na.RGB_24BPP)for(_=nn,w=n*_,v=0;v<l;v++){for(v>=o&&(_=s,w=n*_),h=0,b=w;b--;)p[h++]=f[u++],p[h++]=f[u++],p[h++]=f[u++],p[h++]=255;r.putImageData(c,0,v*nn)}else throw new Error(`bad image kind: ${e.kind}`)}function U0(r,e){if(e.bitmap){r.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,s=t%nn,o=(t-s)/nn,l=s===0?o:o+1,c=r.createImageData(n,nn);let u=0;const h=e.data,f=c.data;for(let p=0;p<l;p++){const v=p<o?nn:s;({srcPos:u}=oD({src:h,srcPos:u,dest:f,width:n,height:v,nonBlackColor:0})),r.putImageData(c,0,p*nn)}}function Wo(r,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)r[n]!==void 0&&(e[n]=r[n]);r.setLineDash!==void 0&&(e.setLineDash(r.getLineDash()),e.lineDashOffset=r.lineDashOffset)}function Bc(r){r.strokeStyle=r.fillStyle="#000000",r.fillRule="nonzero",r.globalAlpha=1,r.lineWidth=1,r.lineCap="butt",r.lineJoin="miter",r.miterLimit=10,r.globalCompositeOperation="source-over",r.font="10px sans-serif",r.setLineDash!==void 0&&(r.setLineDash([]),r.lineDashOffset=0);const{filter:e}=r;e!=="none"&&e!==""&&(r.filter="none")}function z0(r,e){if(e)return!0;fe.singularValueDecompose2dScale(r,mn);const t=Math.fround(zn.pixelRatio*Ls.PDF_TO_CSS_UNITS);return mn[0]<=t&&mn[1]<=t}const uD=["butt","round","square"],dD=["miter","round","bevel"],hD={},H0={};class Di{constructor(e,t,n,s,o,{optionalContentConfig:l,markedContentStack:c=null},u,h,f){this.ctx=e,this.current=new j0(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=s,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=l,this.cachedCanvases=new cD(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=u,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=f??null}getObject(e,t,n=null){return typeof t=="string"?(this.dependencyTracker?.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):n}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:s=null}){const o=this.ctx.canvas.width,l=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,o,l),this.ctx.fillStyle=c,n){const u=this.cachedCanvases.getCanvas("transparent",o,l);this.compositeCtx=this.ctx,this.transparentCanvas=u.canvas,this.ctx=u.context,this.ctx.save(),this.ctx.transform(...rt(this.compositeCtx))}this.ctx.save(),Bc(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=rt(this.ctx)}executeOperatorList(e,t,n,s,o){const l=e.argsArray,c=e.fnArray;let u=t||0;const h=l.length;if(h===u)return u;const f=h-u>F0&&typeof n=="function",p=f?Date.now()+aD:0;let v=0;const b=this.commonObjs,_=this.objs;let w,x;for(;;){if(s!==void 0&&u===s.nextBreakPoint)return s.breakIt(u,n),u;if(!o||o(u))if(w=c[u],x=l[u]??null,w!==Ui.dependency)x===null?this[w](u):this[w](u,...x);else for(const E of x){this.dependencyTracker?.recordNamedData(E,u);const A=E.startsWith("g_")?b:_;if(!A.has(E))return A.get(E,n),u}if(u++,u===h)return u;if(f&&++v>F0){if(Date.now()>p)return n(),u;v=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const n=e.width??e.displayWidth,s=e.height??e.displayHeight;let o=Math.max(Math.hypot(t[0],t[1]),1),l=Math.max(Math.hypot(t[2],t[3]),1),c=n,u=s,h="prescale1",f,p;for(;o>2&&c>1||l>2&&u>1;){let v=c,b=u;o>2&&c>1&&(v=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),o/=c/v),l>2&&u>1&&(b=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u)/2,l/=u/b),f=this.cachedCanvases.getCanvas(h,v,b),p=f.context,p.clearRect(0,0,v,b),p.drawImage(e,0,0,c,u,0,0,v,b),e=f.canvas,c=v,u=b,h=h==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:c,paintHeight:u}}_createMaskCanvas(e,t){const n=this.ctx,{width:s,height:o}=t,l=this.current.fillColor,c=this.current.patternFill,u=rt(n);let h,f,p,v;if((t.bitmap||t.data)&&t.count>1){const q=t.bitmap||t.data.buffer;f=JSON.stringify(c?u:[u.slice(0,4),l]),h=this._cachedBitmapsMap.get(q),h||(h=new Map,this._cachedBitmapsMap.set(q,h));const Y=h.get(f);if(Y&&!c){const ne=Math.round(Math.min(u[0],u[2])+u[4]),oe=Math.round(Math.min(u[1],u[3])+u[5]);return this.dependencyTracker?.recordDependencies(e,An.transformAndFill),{canvas:Y,offsetX:ne,offsetY:oe}}p=Y}p||(v=this.cachedCanvases.getCanvas("maskCanvas",s,o),U0(v.context,t));let b=fe.transform(u,[1/s,0,0,-1/o,0,0]);b=fe.transform(b,[1,0,0,1,0,-o]);const _=_i.slice();fe.axialAlignedBoundingBox([0,0,s,o],b,_);const[w,x,E,A]=_,C=Math.round(E-w)||1,k=Math.round(A-x)||1,N=this.cachedCanvases.getCanvas("fillCanvas",C,k),R=N.context,D=w,F=x;R.translate(-D,-F),R.transform(...b),p||(p=this._scaleImage(v.canvas,Jn(R)),p=p.img,h&&c&&h.set(f,p)),R.imageSmoothingEnabled=z0(rt(R),t.interpolate),jc(R,p,0,0,p.width,p.height,0,0,s,o),R.globalCompositeOperation="source-in";const U=fe.transform(Jn(R),[1,0,0,1,-D,-F]);return R.fillStyle=c?l.getPattern(n,this,U,Nt.FILL,e):l,R.fillRect(0,0,s,o),h&&!c&&(this.cachedCanvases.delete("fillCanvas"),h.set(f,N.canvas)),this.dependencyTracker?.recordDependencies(e,An.transformAndFill),{canvas:N.canvas,offsetX:Math.round(D),offsetY:Math.round(F)}}setLineWidth(e,t){this.dependencyTracker?.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){this.dependencyTracker?.recordSimpleData("lineCap",e),this.ctx.lineCap=uD[t]}setLineJoin(e,t){this.dependencyTracker?.recordSimpleData("lineJoin",e),this.ctx.lineJoin=dD[t]}setMiterLimit(e,t){this.dependencyTracker?.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,n){this.dependencyTracker?.recordSimpleData("dash",e);const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(t),s.lineDashOffset=n)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){for(const[n,s]of t)switch(n){case"LW":this.setLineWidth(e,s);break;case"LC":this.setLineCap(e,s);break;case"LJ":this.setLineJoin(e,s);break;case"ML":this.setMiterLimit(e,s);break;case"D":this.setDash(e,s[0],s[1]);break;case"RI":this.setRenderingIntent(e,s);break;case"FL":this.setFlatness(e,s);break;case"Font":this.setFont(e,s[0],s[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=s;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=s;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=s;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",e),this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,n=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(s,t,n);this.suspendedCtx=this.ctx;const l=this.ctx=o.context;l.setTransform(this.suspendedCtx.getTransform()),Wo(this.suspendedCtx,l),lD(l,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Wo(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,s){const o=s[0],l=s[1],c=s[2]-o,u=s[3]-l;c===0||u===0||(this.genericComposeSMask(t.context,n,c,u,t.subtype,t.backdrop,t.transferMap,o,l,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,s,o,l,c,u,h,f,p){let v=e.canvas,b=u-f,_=h-p;if(l)if(b<0||_<0||b+n>v.width||_+s>v.height){const x=this.cachedCanvases.getCanvas("maskExtension",n,s),E=x.context;E.drawImage(v,-b,-_),E.globalCompositeOperation="destination-atop",E.fillStyle=l,E.fillRect(0,0,n,s),E.globalCompositeOperation="source-over",v=x.canvas,b=_=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const x=new Path2D;x.rect(b,_,n,s),e.clip(x),e.globalCompositeOperation="destination-atop",e.fillStyle=l,e.fillRect(b,_,n,s),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),o==="Alpha"&&c?t.filter=this.filterFactory.addAlphaFilter(c):o==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(c));const w=new Path2D;w.rect(u,h,n,s),t.clip(w),t.globalCompositeOperation="destination-in",t.drawImage(v,b,_,n,s,u,h,n,s),t.restore()}save(e){this.inSMaskMode&&Wo(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),this.dependencyTracker?.save(e)}restore(e){if(this.dependencyTracker?.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Wo(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,n,s,o,l,c){this.dependencyTracker?.recordIncrementalData("transform",e),this.ctx.transform(t,n,s,o,l,c),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n,s){let[o]=n;if(!s){o||=n[0]=new Path2D,this[t](e,o);return}if(this.dependencyTracker!==null){const l=t===Ui.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,s[0]-l,s[2]+l,s[1]-l,s[3]+l).recordDependencies(e,["transform"])}if(!(o instanceof Path2D)){const l=n[0]=new Path2D;for(let c=0,u=o.length;c<u;)switch(o[c++]){case Dc.moveTo:l.moveTo(o[c++],o[c++]);break;case Dc.lineTo:l.lineTo(o[c++],o[c++]);break;case Dc.curveTo:l.bezierCurveTo(o[c++],o[c++],o[c++],o[c++],o[c++],o[c++]);break;case Dc.closePath:l.closePath();break;default:Ce(`Unrecognized drawing path operator: ${o[c-1]}`);break}o=l}fe.axialAlignedBoundingBox(s,rt(this.ctx),this.current.minMax),this[t](e,o),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,n=!0){const s=this.ctx,o=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){const l=o.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=o.getPattern(s,this,Jn(s),Nt.STROKE,e),l){const c=new Path2D;c.addPath(t,s.getTransform().invertSelf().multiplySelf(l)),t=c}this.rescaleAndStroke(t,!1),s.restore()}else this.rescaleAndStroke(t,!0);this.dependencyTracker?.recordDependencies(e,An.stroke),n&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(Nt.STROKE,rt(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,n=!0){const s=this.ctx,o=this.current.fillColor,l=this.current.patternFill;let c=!1;if(l){const h=o.isModifyingCurrentTransform()?s.getTransform():null;if(this.dependencyTracker?.save(e),s.save(),s.fillStyle=o.getPattern(s,this,Jn(s),Nt.FILL,e),h){const f=new Path2D;f.addPath(t,s.getTransform().invertSelf().multiplySelf(h)),t=f}c=!0}const u=this.current.getClippedPathBoundingBox();this.contentVisible&&u!==null&&(this.pendingEOFill?(s.fill(t,"evenodd"),this.pendingEOFill=!1):s.fill(t)),this.dependencyTracker?.recordDependencies(e,An.fill),c&&(s.restore(),this.dependencyTracker?.restore(e)),n&&this.consumePath(e,t,u)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){this.ctx.fill(t),this.dependencyTracker?.recordDependencies(e,An.rawFillPath).recordOperation(e)}clip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=hD}eoClip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=H0}beginText(e){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:s}=this;t!==void 0&&s.recordFutureForcedDependency("textClip",s.getOpenMarker()).recordFutureForcedDependency("textClip",e),s.recordCloseMarker(e)}if(t!==void 0){const s=new Path2D,o=n.getTransform().invertSelf();for(const{transform:l,x:c,y:u,fontSize:h,path:f}of t)f&&s.addPath(f,new DOMMatrix(l).preMultiplySelf(o).translate(c,u).scale(h,-h));n.clip(s)}delete this.pendingTextPaths}setCharSpacing(e,t){this.dependencyTracker?.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){this.dependencyTracker?.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){this.dependencyTracker?.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){this.dependencyTracker?.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,n){this.dependencyTracker?.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const s=this.commonObjs.get(t),o=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(o.fontMatrix=s.fontMatrix||Rf,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&Ce("Invalid font matrix for font "+t),n<0?(n=-n,o.fontDirection=-1):o.fontDirection=1,this.current.font=s,this.current.fontSize=n,s.isType3Font)return;const l=s.loadedName||"sans-serif",c=s.systemFontInfo?.css||`"${l}", ${s.fallbackName}`;let u="normal";s.black?u="900":s.bold&&(u="bold");const h=s.italic?"italic":"normal";let f=n;n<L0?f=L0:n>I0&&(f=I0),this.current.fontSizeScale=n/f,this.ctx.font=`${h} ${u} ${f}px ${c}`}setTextRenderingMode(e,t){this.dependencyTracker?.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){this.dependencyTracker?.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,n){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,t,n){this.setLeading(e,-n),this.moveText(e,t,n)}setTextMatrix(e,t){this.dependencyTracker?.recordSimpleData("textMatrix",e);const{current:n}=this;n.textMatrix=t,n.textMatrixScale=Math.hypot(t[0],t[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(e){this.moveText(e,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}#r(e,t,n){const s=new Path2D;return s.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),s}paintChar(e,t,n,s,o,l){const c=this.ctx,u=this.current,h=u.font,f=u.textRenderingMode,p=u.fontSize/u.fontSizeScale,v=f&Rt.FILL_STROKE_MASK,b=!!(f&Rt.ADD_TO_PATH_FLAG),_=u.patternFill&&!h.missingFile,w=u.patternStroke&&!h.missingFile;let x;if((h.disableFontFace||b||_||w)&&!h.missingFile&&(x=h.getPathGenerator(this.commonObjs,t)),x&&(h.disableFontFace||_||w)){c.save(),c.translate(n,s),c.scale(p,-p),this.dependencyTracker?.recordCharacterBBox(e,c,h);let E;if(v===Rt.FILL||v===Rt.FILL_STROKE)if(o){E=c.getTransform(),c.setTransform(...o);const A=this.#r(x,E,o);c.fill(A)}else c.fill(x);if(v===Rt.STROKE||v===Rt.FILL_STROKE)if(l){E||=c.getTransform(),c.setTransform(...l);const{a:A,b:C,c:k,d:N}=E,R=fe.inverseTransform(l),D=fe.transform([A,C,k,N,0,0],R);fe.singularValueDecompose2dScale(D,mn),c.lineWidth*=Math.max(mn[0],mn[1])/p,c.stroke(this.#r(x,E,l))}else c.lineWidth/=p,c.stroke(x);c.restore()}else(v===Rt.FILL||v===Rt.FILL_STROKE)&&(c.fillText(t,n,s),this.dependencyTracker?.recordCharacterBBox(e,c,h,p,n,s,()=>c.measureText(t))),(v===Rt.STROKE||v===Rt.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(e,c,h,p,n,s,()=>c.measureText(t)).recordDependencies(e,An.stroke),c.strokeText(t,n,s));b&&((this.pendingTextPaths||=[]).push({transform:rt(c),x:n,y:s,fontSize:p,path:x}),this.dependencyTracker?.recordCharacterBBox(e,c,h,p,n,s))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){n=!0;break}return Re(this,"isFontSubpixelAAEnabled",n)}showText(e,t){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,An.showText).resetBBox(e),this.current.textRenderingMode&Rt.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,s=n.font;if(s.isType3Font){this.showType3Text(e,t),this.dependencyTracker?.recordShowTextOperation(e);return}const o=n.fontSize;if(o===0){this.dependencyTracker?.recordOperation(e);return}const l=this.ctx,c=n.fontSizeScale,u=n.charSpacing,h=n.wordSpacing,f=n.fontDirection,p=n.textHScale*f,v=t.length,b=s.vertical,_=b?1:-1,w=s.defaultVMetrics,x=o*n.fontMatrix[0],E=n.textRenderingMode===Rt.FILL&&!s.disableFontFace&&!n.patternFill;l.save(),n.textMatrix&&l.transform(...n.textMatrix),l.translate(n.x,n.y+n.textRise),f>0?l.scale(p,-1):l.scale(p,1);let A,C;if(n.patternFill){l.save();const F=n.fillColor.getPattern(l,this,Jn(l),Nt.FILL,e);A=rt(l),l.restore(),l.fillStyle=F}if(n.patternStroke){l.save();const F=n.strokeColor.getPattern(l,this,Jn(l),Nt.STROKE,e);C=rt(l),l.restore(),l.strokeStyle=F}let k=n.lineWidth;const N=n.textMatrixScale;if(N===0||k===0){const F=n.textRenderingMode&Rt.FILL_STROKE_MASK;(F===Rt.STROKE||F===Rt.FILL_STROKE)&&(k=this.getSinglePixelWidth())}else k/=N;if(c!==1&&(l.scale(c,c),k/=c),l.lineWidth=k,s.isInvalidPDFjsFont){const F=[];let U=0;for(const Y of t)F.push(Y.unicode),U+=Y.width;const q=F.join("");if(l.fillText(q,0,0),this.dependencyTracker!==null){const Y=l.measureText(q);this.dependencyTracker.recordBBox(e,this.ctx,-Y.actualBoundingBoxLeft,Y.actualBoundingBoxRight,-Y.actualBoundingBoxAscent,Y.actualBoundingBoxDescent).recordShowTextOperation(e)}n.x+=U*x*p,l.restore(),this.compose();return}let R=0,D;for(D=0;D<v;++D){const F=t[D];if(typeof F=="number"){R+=_*F*o/1e3;continue}let U=!1;const q=(F.isSpace?h:0)+u,Y=F.fontChar,ne=F.accent;let oe,te,ae=F.width;if(b){const V=F.vmetric||w,$=-(F.vmetric?V[1]:ae*.5)*x,Q=V[2]*x;ae=V?-V[0]:ae,oe=$/c,te=(R+Q)/c}else oe=R/c,te=0;let G;if(s.remeasure&&ae>0){G=l.measureText(Y);const V=G.width*1e3/o*c;if(ae<V&&this.isFontSubpixelAAEnabled){const $=ae/V;U=!0,l.save(),l.scale($,1),oe/=$}else ae!==V&&(oe+=(ae-V)/2e3*o/c)}if(this.contentVisible&&(F.isInFont||s.missingFile)){if(E&&!ne)l.fillText(Y,oe,te),this.dependencyTracker?.recordCharacterBBox(e,l,G?{bbox:null}:s,o/c,oe,te,()=>G??l.measureText(Y));else if(this.paintChar(e,Y,oe,te,A,C),ne){const V=oe+o*ne.offset.x/c,$=te-o*ne.offset.y/c;this.paintChar(e,ne.fontChar,V,$,A,C)}}const K=b?ae*x-q*f:ae*x+q*f;R+=K,U&&l.restore()}b?n.y-=R:n.x+=R*p,l.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(e)}showType3Text(e,t){const n=this.ctx,s=this.current,o=s.font,l=s.fontSize,c=s.fontDirection,u=o.vertical?1:-1,h=s.charSpacing,f=s.wordSpacing,p=s.textHScale*c,v=s.fontMatrix||Rf,b=t.length,_=s.textRenderingMode===Rt.INVISIBLE;let w,x,E,A;if(_||l===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),s.textMatrix&&n.transform(...s.textMatrix),n.translate(s.x,s.y+s.textRise),n.scale(p,c);const C=this.dependencyTracker;for(this.dependencyTracker=C?new cu(C,e):null,w=0;w<b;++w){if(x=t[w],typeof x=="number"){A=u*x*l/1e3,this.ctx.translate(A,0),s.x+=A*p;continue}const k=(x.isSpace?f:0)+h,N=o.charProcOperatorList[x.operatorListId];N?this.contentVisible&&(this.save(),n.scale(l,l),n.transform(...v),this.executeOperatorList(N),this.restore()):Ce(`Type3 character "${x.operatorListId}" is not available.`);const R=[x.width,0];fe.applyTransform(R,v),E=R[0]*l+k,n.translate(E,0),s.x+=E*p}n.restore(),C&&(this.dependencyTracker=C)}setCharWidth(e,t,n){}setCharWidthAndBounds(e,t,n,s,o,l,c){const u=new Path2D;u.rect(s,o,l-s,c-o),this.ctx.clip(u),this.dependencyTracker?.recordBBox(e,this.ctx,s,l,o,c).recordClipBox(e,this.ctx,s,l,o,c),this.endPath(e)}getColorN_Pattern(e,t){let n;if(t[0]==="TilingPattern"){const s=this.baseTransform||rt(this.ctx),o={createCanvasGraphics:(l,c)=>new Di(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new cu(this.dependencyTracker,c,!0):null)};n=new Ap(t,this.ctx,o,s)}else n=this._getPattern(e,t[1],t[2]);return n}setStrokeColorN(e,...t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,n=null){let s;return this.cachedPatterns.has(t)?s=this.cachedPatterns.get(t):(s=iD(this.getObject(e,t)),this.cachedPatterns.set(t,s)),n&&(s.matrix=n),s}shadingFill(e,t){if(!this.contentVisible)return;const n=this.ctx;this.save(e);const s=this._getPattern(e,t);n.fillStyle=s.getPattern(n,this,Jn(n),Nt.SHADING,e);const o=Jn(n);if(o){const{width:l,height:c}=n.canvas,u=_i.slice();fe.axialAlignedBoundingBox([0,0,l,c],o,u);const[h,f,p,v]=u;this.ctx.fillRect(h,f,p-h,v-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,An.transform).recordDependencies(e,An.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){Ve("Should not call beginInlineImage")}beginImageData(){Ve("Should not call beginImageData")}paintFormXObjectBegin(e,t,n){if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=rt(this.ctx),n)){fe.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[s,o,l,c]=n,u=new Path2D;u.rect(s,o,l-s,c-o),this.ctx.clip(u),this.dependencyTracker?.recordClipBox(e,this.ctx,s,l,o,c),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;t.isolated||Cu("TODO: Support non-isolated groups."),t.knockout&&Ce("Knockout groups not supported.");const s=rt(n);if(t.matrix&&n.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let o=_i.slice();fe.axialAlignedBoundingBox(t.bbox,rt(n),o);const l=[0,0,n.canvas.width,n.canvas.height];o=fe.intersect(o,l)||[0,0,0,0];const c=Math.floor(o[0]),u=Math.floor(o[1]),h=Math.max(Math.ceil(o[2])-c,1),f=Math.max(Math.ceil(o[3])-u,1);this.current.startNewPathAndClipBox([0,0,h,f]);let p="groupAt"+this.groupLevel;t.smask&&(p+="_smask_"+this.smaskCounter++%2);const v=this.cachedCanvases.getCanvas(p,h,f),b=v.context;b.translate(-c,-u),b.transform(...s);let _=new Path2D;const[w,x,E,A]=t.bbox;if(_.rect(w,x,E-w,A-x),t.matrix){const C=new Path2D;C.addPath(_,new DOMMatrix(t.matrix)),_=C}b.clip(_),t.smask&&this.smaskStack.push({canvas:v.canvas,context:b,offsetX:c,offsetY:u,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(c,u),n.save()),Wo(n,b),this.ctx=b,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(e,t){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=rt(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...o);const l=_i.slice();fe.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],o,l),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(e,t,n,s,o,l){if(this.#e(),Bc(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const c=n[2]-n[0],u=n[3]-n[1];if(l&&this.annotationCanvasMap){s=s.slice(),s[4]-=n[0],s[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=c,n[3]=u,fe.singularValueDecompose2dScale(rt(this.ctx),mn);const{viewportScale:h}=this,f=Math.ceil(c*this.outputScaleX*h),p=Math.ceil(u*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(f,p);const{canvas:v,context:b}=this.annotationCanvas;this.annotationCanvasMap.set(t,v),this.annotationCanvas.savedCtx=this.ctx,this.ctx=b,this.ctx.save(),this.ctx.setTransform(mn[0],0,0,-mn[1],0,u*mn[1]),Bc(this.ctx)}else{Bc(this.ctx),this.endPath(e);const h=new Path2D;h.rect(n[0],n[1],c,u),this.ctx.clip(h)}}this.current=new j0(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...s),this.transform(e,...o)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){if(!this.contentVisible)return;const n=t.count;t=this.getObject(e,t.data,t),t.count=n;const s=this.ctx,o=this._createMaskCanvas(e,t),l=o.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(l,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,o.offsetX,o.offsetX+l.width,o.offsetY,o.offsetY+l.height).recordOperation(e),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n,s=0,o=0,l,c){if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const u=this.ctx;u.save();const h=rt(u);u.transform(n,s,o,l,0,0);const f=this._createMaskCanvas(e,t);u.setTransform(1,0,0,1,f.offsetX-h[4],f.offsetY-h[5]),this.dependencyTracker?.resetBBox(e);for(let p=0,v=c.length;p<v;p+=2){const b=fe.transform(h,[n,s,o,l,c[p],c[p+1]]);u.drawImage(f.canvas,b[4],b[5]),this.dependencyTracker?.recordBBox(e,this.ctx,b[4],b[4]+f.canvas.width,b[5],b[5]+f.canvas.height)}u.restore(),this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageMaskXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx,s=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(e).recordDependencies(e,An.transformAndFill);for(const l of t){const{data:c,width:u,height:h,transform:f}=l,p=this.cachedCanvases.getCanvas("maskCanvas",u,h),v=p.context;v.save();const b=this.getObject(e,c,l);U0(v,b),v.globalCompositeOperation="source-in",v.fillStyle=o?s.getPattern(v,this,Jn(n),Nt.FILL,e):s,v.fillRect(0,0,u,h),v.restore(),n.save(),n.transform(...f),n.scale(1,-1),jc(n,p.canvas,0,0,u,h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,n,0,u,0,h),n.restore()}this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const n=this.getObject(e,t);if(!n){Ce("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,n)}paintImageXObjectRepeat(e,t,n,s,o){if(!this.contentVisible)return;const l=this.getObject(e,t);if(!l){Ce("Dependent image isn't ready yet");return}const c=l.width,u=l.height,h=[];for(let f=0,p=o.length;f<p;f+=2)h.push({transform:[n,0,0,s,o[f],o[f+1]],x:0,y:0,w:c,h:u});this.paintInlineImageXObjectGroup(e,l,h)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:s}=e,o=this.cachedCanvases.getCanvas("inlineImage",n,s),l=o.context;return l.filter=this.current.transferMaps,l.drawImage(t,0,0),l.filter="none",o.canvas}paintInlineImageXObject(e,t){if(!this.contentVisible)return;const n=t.width,s=t.height,o=this.ctx;this.save(e);const{filter:l}=o;l!=="none"&&l!==""&&(o.filter="none"),o.scale(1/n,-1/s);let c;if(t.bitmap)c=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)c=t;else{const f=this.cachedCanvases.getCanvas("inlineImage",n,s).context;B0(f,t),c=this.applyTransferMapsToCanvas(f)}const u=this._scaleImage(c,Jn(o));o.imageSmoothingEnabled=z0(rt(o),t.interpolate),this.dependencyTracker?.resetBBox(e).recordBBox(e,o,0,n,-s,0).recordDependencies(e,An.imageXObject).recordOperation(e),jc(o,u.img,0,0,u.paintWidth,u.paintHeight,0,-s,n,s),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,n){if(!this.contentVisible)return;const s=this.ctx;let o;if(t.bitmap)o=t.bitmap;else{const l=t.width,c=t.height,h=this.cachedCanvases.getCanvas("inlineImage",l,c).context;B0(h,t),o=this.applyTransferMapsToCanvas(h)}this.dependencyTracker?.resetBBox(e);for(const l of n)s.save(),s.transform(...l.transform),s.scale(1,-1),jc(s,o,l.x,l.y,l.w,l.h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,s,0,1,-1,0),s.restore();this.dependencyTracker?.recordOperation(e),this.compose()}paintSolidColorImageMask(e){this.contentVisible&&(this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,An.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,n){}beginMarkedContent(e,t){this.dependencyTracker?.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,n){this.dependencyTracker?.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){this.dependencyTracker?.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,n){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const o=this.ctx;this.pendingClip?(s||(this.pendingClip===H0?o.clip(t,"evenodd"):o.clip(t)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):this.dependencyTracker?.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=rt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:s,d:o}=this.ctx.getTransform();let l,c;if(n===0&&s===0){const u=Math.abs(t),h=Math.abs(o);if(u===h)if(e===0)l=c=1/u;else{const f=u*e;l=c=f<1?1/f:1}else if(e===0)l=1/u,c=1/h;else{const f=u*e,p=h*e;l=f<1?1/f:1,c=p<1?1/p:1}}else{const u=Math.abs(t*o-n*s),h=Math.hypot(t,n),f=Math.hypot(s,o);if(e===0)l=f/u,c=h/u;else{const p=e*u;l=f>p?f/p:1,c=h>p?h/p:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=c}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:s}}=this,[o,l]=this.getScaleForStroking();if(o===l){n.lineWidth=(s||1)*o,n.stroke(e);return}const c=n.getLineDash();t&&n.save(),n.scale(o,l),nf.a=1/o,nf.d=1/l;const u=new Path2D;if(u.addPath(e,nf),c.length>0){const h=Math.max(o,l);n.setLineDash(c.map(f=>f/h)),n.lineDashOffset/=h}n.lineWidth=s||1,n.stroke(u),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const r in Ui)Di.prototype[r]!==void 0&&(Di.prototype[Ui[r]]=Di.prototype[r]);class Oi{#e;#t;#r;static strings=["fontFamily","fontWeight","italicAngle"];static write(e){const t=new TextEncoder,n={};let s=0;for(const h of Oi.strings){const f=t.encode(e[h]);n[h]=f,s+=4+f.length}const o=new ArrayBuffer(s),l=new Uint8Array(o),c=new DataView(o);let u=0;for(const h of Oi.strings){const f=n[h],p=f.length;c.setUint32(u,p),l.set(f,u+4),u+=4+p}return Ie(u===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#r=new TextDecoder}#n(e){Ie(e<Oi.strings.length,"Invalid string index");let t=0;for(let s=0;s<e;s++)t+=this.#t.getUint32(t)+4;const n=this.#t.getUint32(t);return this.#r.decode(new Uint8Array(this.#e,t+4,n))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class Mi{#e;#t;#r;static strings=["css","loadedName","baseFontName","src"];static write(e){const t=new TextEncoder,n={};let s=0;for(const v of Mi.strings){const b=t.encode(e[v]);n[v]=b,s+=4+b.length}s+=4;let o,l,c=1+s;e.style&&(o=t.encode(e.style.style),l=t.encode(e.style.weight),c+=4+o.length+4+l.length);const u=new ArrayBuffer(c),h=new Uint8Array(u),f=new DataView(u);let p=0;f.setUint8(p++,e.guessFallback?1:0),f.setUint32(p,0),p+=4,s=0;for(const v of Mi.strings){const b=n[v],_=b.length;s+=4+_,f.setUint32(p,_),h.set(b,p+4),p+=4+_}return f.setUint32(p-s-4,s),e.style&&(f.setUint32(p,o.length),h.set(o,p+4),p+=4+o.length,f.setUint32(p,l.length),h.set(l,p+4),p+=4+l.length),Ie(p<=u.byteLength,"SubstitionInfo.write: Buffer overflow"),u.transferToFixedLength(p)}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#r=new TextDecoder}get guessFallback(){return this.#t.getUint8(0)!==0}#n(e){Ie(e<Mi.strings.length,"Invalid string index");let t=5;for(let s=0;s<e;s++)t+=this.#t.getUint32(t)+4;const n=this.#t.getUint32(t);return this.#r.decode(new Uint8Array(this.#e,t+4,n))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let e=1;e+=4+this.#t.getUint32(e);const t=this.#t.getUint32(e),n=this.#r.decode(new Uint8Array(this.#e,e+4,t));e+=4+t;const s=this.#t.getUint32(e),o=this.#r.decode(new Uint8Array(this.#e,e+4,s));return{style:n,weight:o}}}class ze{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#e=Math.ceil(this.bools.length*2/8);static#t=this.#e+this.numbers.length*8;static#r=this.#t+1+8;static#n=this.#r+1+48;static#o=this.#n+1+6;#s;#i;#a;constructor({data:e,extra:t}){this.#s=e,this.#i=new TextDecoder,this.#a=new DataView(this.#s),t&&Object.assign(this,t)}#c(e){Ie(e<ze.bools.length,"Invalid boolean index");const t=Math.floor(e/4),n=e*2%8,s=this.#a.getUint8(t)>>n&3;return s===0?void 0:s===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(e){return Ie(e<ze.numbers.length,"Invalid number index"),this.#a.getFloat64(ze.#e+e*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let e=ze.#t;if(this.#a.getUint8(e)===0)return;e+=1;const n=[];for(let s=0;s<4;s++)n.push(this.#a.getInt16(e,!0)),e+=2;return n}get fontMatrix(){let e=ze.#r;if(this.#a.getUint8(e)===0)return;e+=1;const n=[];for(let s=0;s<6;s++)n.push(this.#a.getFloat64(e,!0)),e+=8;return n}get defaultVMetrics(){let e=ze.#n;if(this.#a.getUint8(e)===0)return;e+=1;const n=[];for(let s=0;s<3;s++)n.push(this.#a.getInt16(e,!0)),e+=2;return n}#h(e){Ie(e<ze.strings.length,"Invalid string index");let t=ze.#o+4;for(let o=0;o<e;o++)t+=this.#a.getUint32(t)+4;const n=this.#a.getUint32(t),s=new Uint8Array(n);return s.set(new Uint8Array(this.#s,t+4,n)),this.#i.decode(s)}get fallbackName(){return this.#h(0)}get loadedName(){return this.#h(1)}get mimetype(){return this.#h(2)}get name(){return this.#h(3)}get data(){let e=ze.#o;const t=this.#a.getUint32(e);e+=4+t;const n=this.#a.getUint32(e);e+=4+n;const s=this.#a.getUint32(e);e+=4+s;const o=this.#a.getUint32(e);if(o!==0)return new Uint8Array(this.#s,e+4,o)}clearData(){let e=ze.#o;const t=this.#a.getUint32(e);e+=4+t;const n=this.#a.getUint32(e);e+=4+n;const s=this.#a.getUint32(e);e+=4+s;const o=this.#a.getUint32(e);new Uint8Array(this.#s,e+4,o).fill(0),this.#a.setUint32(e,0)}get cssFontInfo(){let e=ze.#o;const t=this.#a.getUint32(e);e+=4+t;const n=this.#a.getUint32(e);e+=4+n;const s=this.#a.getUint32(e);if(s===0)return null;const o=new Uint8Array(s);return o.set(new Uint8Array(this.#s,e+4,s)),new Oi(o.buffer)}get systemFontInfo(){let e=ze.#o;const t=this.#a.getUint32(e);e+=4+t;const n=this.#a.getUint32(e);if(n===0)return null;const s=new Uint8Array(n);return s.set(new Uint8Array(this.#s,e+4,n)),new Mi(s.buffer)}static write(e){const t=e.systemFontInfo?Mi.write(e.systemFontInfo):null,n=e.cssFontInfo?Oi.write(e.cssFontInfo):null,s=new TextEncoder,o={};let l=0;for(const w of ze.strings)o[w]=s.encode(e[w]),l+=4+o[w].length;const c=ze.#o+4+l+4+(t?t.byteLength:0)+4+(n?n.byteLength:0)+4+(e.data?e.data.length:0),u=new ArrayBuffer(c),h=new Uint8Array(u),f=new DataView(u);let p=0;const v=ze.bools.length;let b=0,_=0;for(let w=0;w<v;w++){const x=e[ze.bools[w]];b|=(x===void 0?0:x?2:1)<<_,_+=2,(_===8||w===v-1)&&(f.setUint8(p++,b),b=0,_=0)}Ie(p===ze.#e,"FontInfo.write: Boolean properties offset mismatch");for(const w of ze.numbers)f.setFloat64(p,e[w]),p+=8;if(Ie(p===ze.#t,"FontInfo.write: Number properties offset mismatch"),e.bbox){f.setUint8(p++,4);for(const w of e.bbox)f.setInt16(p,w,!0),p+=2}else f.setUint8(p++,0),p+=8;if(Ie(p===ze.#r,"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){f.setUint8(p++,6);for(const w of e.fontMatrix)f.setFloat64(p,w,!0),p+=8}else f.setUint8(p++,0),p+=48;if(Ie(p===ze.#n,"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){f.setUint8(p++,1);for(const w of e.defaultVMetrics)f.setInt16(p,w,!0),p+=2}else f.setUint8(p++,0),p+=6;Ie(p===ze.#o,"FontInfo.write: DefaultVMetrics properties offset mismatch"),f.setUint32(ze.#o,0),p+=4;for(const w of ze.strings){const x=o[w],E=x.length;f.setUint32(p,E),h.set(x,p+4),p+=4+E}if(f.setUint32(ze.#o,p-ze.#o-4),!t)f.setUint32(p,0),p+=4;else{const w=t.byteLength;f.setUint32(p,w),Ie(p+4+w<=u.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),h.set(new Uint8Array(t),p+4),p+=4+w}if(!n)f.setUint32(p,0),p+=4;else{const w=n.byteLength;f.setUint32(p,w),Ie(p+4+w<=u.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),h.set(new Uint8Array(n),p+4),p+=4+w}return e.data===void 0?(f.setUint32(p,0),p+=4):(f.setUint32(p,e.data.length),h.set(e.data,p+4),p+=4+e.data.length),Ie(p<=u.byteLength,"FontInfo.write: Buffer overflow"),u.transferToFixedLength(p)}}class is{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}class fD{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}[Symbol.iterator](){return this.#e.entries()}}const Si=Symbol("INTERNAL");class pD{#e=!1;#t=!1;#r=!1;#n=!0;constructor(e,{name:t,intent:n,usage:s,rbGroups:o}){this.#e=!!(e&fn.DISPLAY),this.#t=!!(e&fn.PRINT),this.name=t,this.intent=n,this.usage=s,this.rbGroups=o}get visible(){if(this.#r)return this.#n;if(!this.#n)return!1;const{print:e,view:t}=this.usage;return this.#e?t?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,t,n=!1){e!==Si&&Ve("Internal method `_setVisible` called."),this.#r=n,this.#n=t}}class mD{#e=null;#t=new Map;#r=null;#n=null;constructor(e,t=fn.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#n=e.order;for(const n of e.groups)this.#t.set(n.id,new pD(t,n));if(e.baseState==="OFF")for(const n of this.#t.values())n._setVisible(Si,!1);for(const n of e.on)this.#t.get(n)._setVisible(Si,!0);for(const n of e.off)this.#t.get(n)._setVisible(Si,!1);this.#r=this.getHash()}}#o(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let s=1;s<t;s++){const o=e[s];let l;if(Array.isArray(o))l=this.#o(o);else if(this.#t.has(o))l=this.#t.get(o).visible;else return Ce(`Optional content group not found: ${o}`),!0;switch(n){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return n==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return Cu("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(Ce(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#o(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!this.#t.has(t))return Ce(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!this.#t.has(t))return Ce(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!this.#t.has(t))return Ce(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!this.#t.has(t))return Ce(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return Ce(`Unknown optional content policy ${e.policy}.`),!0}return Ce(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){const s=this.#t.get(e);if(!s){Ce(`Optional content group not found: ${e}`);return}if(n&&t&&s.rbGroups.length)for(const o of s.rbGroups)for(const l of o)l!==e&&this.#t.get(l)?._setVisible(Si,!1,!0);s._setVisible(Si,!!t,!0),this.#e=null}setOCGState({state:e,preserveRB:t}){let n;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":n=s;continue}const o=this.#t.get(s);if(o)switch(n){case"ON":this.setVisibility(s,!0,t);break;case"OFF":this.setVisibility(s,!1,t);break;case"Toggle":this.setVisibility(s,!o.visible,t);break}}this.#e=null}get hasInitialVisibility(){return this.#r===null||this.getHash()===this.#r}getOrder(){return this.#t.size?this.#n?this.#n.slice():[...this.#t.keys()]:null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new zx;for(const[t,n]of this.#t)e.update(`${t}:${n.visible}`);return this.#e=e.hexdigest()}[Symbol.iterator](){return this.#t.entries()}}class gD{constructor(e,{disableRange:t=!1,disableStream:n=!1}){Ie(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:o,progressiveDone:l,contentDispositionFilename:c}=e;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=c,o?.length>0){const u=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(u)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((u,h)=>{this._onReceiveData({begin:u,chunk:h})}),e.addProgressListener((u,h)=>{this._onProgress({loaded:u,total:h})}),e.addProgressiveReadListener(u=>{this._onReceiveData({chunk:u})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const s=this._rangeReaders.some(function(o){return o._begin!==e?!1:(o._enqueue(n),!0)});Ie(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Ie(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new vD(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new yD(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}class vD{constructor(e,t,n=!1,s=null){this._stream=e,this._done=n||!1,this._filename=ku(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class yD{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function wD(r){let e=!0,t=n("filename\\*","i").exec(r);if(t){t=t[1];let f=c(t);return f=unescape(f),f=u(f),f=h(f),o(f)}if(t=l(r),t){const f=h(t);return o(f)}if(t=n("filename","i").exec(r),t){t=t[1];let f=c(t);return f=h(f),o(f)}function n(f,p){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',p)}function s(f,p){if(f){if(!/^[\x00-\xFF]+$/.test(p))return p;try{const v=new TextDecoder(f,{fatal:!0}),b=Sa(p);p=v.decode(b),e=!1}catch{}}return p}function o(f){return e&&/[\x80-\xff]/.test(f)&&(f=s("utf-8",f),e&&(f=s("iso-8859-1",f))),f}function l(f){const p=[];let v;const b=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=b.exec(f))!==null;){let[,w,x,E]=v;if(w=parseInt(w,10),w in p){if(w===0)break;continue}p[w]=[x,E]}const _=[];for(let w=0;w<p.length&&w in p;++w){let[x,E]=p[w];E=c(E),x&&(E=unescape(E),w===0&&(E=u(E))),_.push(E)}return _.join("")}function c(f){if(f.startsWith('"')){const p=f.slice(1).split('\\"');for(let v=0;v<p.length;++v){const b=p[v].indexOf('"');b!==-1&&(p[v]=p[v].slice(0,b),p.length=v+1),p[v]=p[v].replaceAll(/\\(.)/g,"$1")}f=p.join('"')}return f}function u(f){const p=f.indexOf("'");if(p===-1)return f;const v=f.slice(0,p),_=f.slice(p+1).replace(/^[^']*'/,"");return s(v,_)}function h(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(p,v,b,_){if(b==="q"||b==="Q")return _=_.replaceAll("_"," "),_=_.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,x){return String.fromCharCode(parseInt(x,16))}),s(v,_);try{_=atob(_)}catch{}return s(v,_)})}return""}function Xx(r,e){const t=new Headers;if(!r||!e||typeof e!="object")return t;for(const n in e){const s=e[n];s!==void 0&&t.append(n,s)}return t}function Pu(r){return URL.parse(r)?.origin??null}function Kx({responseHeaders:r,isHttp:e,rangeChunkSize:t,disableRange:n}){const s={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(r.get("Content-Length"),10);return!Number.isInteger(o)||(s.suggestedLength=o,o<=2*t)||n||!e||r.get("Accept-Ranges")!=="bytes"||(r.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function Qx(r){const e=r.get("Content-Disposition");if(e){let t=wD(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(ku(t))return t}return null}function Ta(r,e){return new ca(`Unexpected server response (${r}) while retrieving PDF "${e}".`,r,r===404||r===0&&e.startsWith("file:"))}function Jx(r){return r===200||r===206}function Zx(r,e,t){return{method:"GET",headers:r,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function eS(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(Ce(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}class bD{_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=Xx(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Ie(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new xD(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new SD(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class xD{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),s=t.url;fetch(s,Zx(n,this._withCredentials,this._abortController)).then(o=>{if(e._responseOrigin=Pu(o.url),!Jx(o.status))throw Ta(o.status,s);this._reader=o.body.getReader(),this._headersCapability.resolve();const l=o.headers,{allowRangeRequests:c,suggestedLength:u}=Kx({responseHeaders:l,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=u||this._contentLength,this._filename=Qx(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Tr("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:eS(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class SD{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const o=new Headers(e.headers);o.append("Range",`bytes=${t}-${n-1}`);const l=s.url;fetch(l,Zx(o,this._withCredentials,this._abortController)).then(c=>{const u=Pu(c.url);if(u!==e._responseOrigin)throw new Error(`Expected range response-origin "${u}" to match "${e._responseOrigin}".`);if(!Jx(c.status))throw Ta(c.status,l);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:eS(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const rf=200,sf=206;function _D(r){const e=r.response;return typeof e!="string"?e:Sa(e).buffer}class ED{_responseOrigin=null;constructor({url:e,httpHeaders:t,withCredentials:n}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=Xx(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,s=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[o,l]of this.headers)t.setRequestHeader(o,l);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=sf):s.expectedStatus=rf,t.responseType="arraybuffer",Ie(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){const n=this.pendingRequests[e];n&&n.onProgress?.(t)}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const s=n.xhr;if(s.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){n.onError(s.status);return}const o=s.status||rf;if(!(o===rf&&n.expectedStatus===sf)&&o!==n.expectedStatus){n.onError(s.status);return}const c=_D(s);if(o===sf){const u=s.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(u);h?n.onDone({begin:parseInt(h[1],10),chunk:c}):(Ce('Missing or invalid "Content-Range" header.'),n.onError(0))}else c?n.onDone({begin:0,chunk:c}):n.onError(s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class AD{constructor(e){this._source=e,this._manager=new ED(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Ie(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new CD(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new TD(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class CD{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=Pu(t.responseURL);const n=t.getAllResponseHeaders(),s=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(c=>{const[u,...h]=c.split(": ");return[u,h.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:l}=Kx({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=Qx(s),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Ta(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class TD{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const e=Pu(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=Ta(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const kD=/^[a-z][a-z0-9\-+.]+:/i;function PD(r){if(kD.test(r))return new URL(r);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(r))}class RD{constructor(e){this.source=e,this.url=PD(e.url),Ie(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Ie(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new ND(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new DD(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class ND{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=Ta(0,this._url.href)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Tr("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class DD{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=e.source;this._isStreamingSupported=!s.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Vo=Symbol("INITIAL_DATA");class tS{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:Vo}}get(e,t=null){if(t){const s=this.#t(e);return s.promise.then(()=>t(s.data)),null}const n=this.#e[e];if(!n||n.data===Vo)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=this.#e[e];return!!t&&t.data!==Vo}delete(e){const t=this.#e[e];return!t||t.data===Vo?!1:(delete this.#e[e],!0)}resolve(e,t=null){const n=this.#t(e);n.data=t,n.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==Vo&&(yield[e,t])}}}const OD=1e5,W0=30;let da=class Cn{#e=Promise.withResolvers();#t=null;#r=!1;#n=!!globalThis.FontInspector?.enabled;#o=null;#s=null;#i=0;#a=0;#c=null;#l=null;#h=0;#d=0;#f=Object.create(null);#g=[];#p=null;#u=[];#m=new WeakMap;#v=null;static#w=new Map;static#y=new Map;static#A=new WeakMap;static#_=null;static#b=new Set;constructor({textContentSource:e,container:t,viewport:n}){if(e instanceof ReadableStream)this.#p=e;else if(typeof e=="object")this.#p=new ReadableStream({start(u){u.enqueue(e),u.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#l=t,this.#d=n.scale*zn.pixelRatio,this.#h=n.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:s,pageHeight:o,pageX:l,pageY:c}=n.rawDims;this.#v=[1,0,0,-1,-l,c+o],this.#a=s,this.#i=o,Cn.#P(),os(t,n),this.#e.promise.finally(()=>{Cn.#b.delete(this),this.#s=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Tt.platform;return Re(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#c.read().then(({value:t,done:n})=>{if(n){this.#e.resolve();return}this.#o??=t.lang,Object.assign(this.#f,t.styles),this.#T(t.items),e()},this.#e.reject)};return this.#c=this.#p.getReader(),Cn.#b.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const n=e.scale*zn.pixelRatio,s=e.rotation;if(s!==this.#h&&(t?.(),this.#h=s,os(this.#l,{rotation:s})),n!==this.#d){t?.(),this.#d=n;const o={div:null,properties:null,ctx:Cn.#R(this.#o)};for(const l of this.#u)o.properties=this.#m.get(l),o.div=l,this.#E(o)}}cancel(){const e=new Tr("TextLayer task cancelled.");this.#c?.cancel(e).catch(()=>{}),this.#c=null,this.#e.reject(e)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#g}#T(e){if(this.#r)return;this.#s.ctx??=Cn.#R(this.#o);const t=this.#u,n=this.#g;for(const s of e){if(t.length>OD){Ce("Ignoring additional textDivs for performance reasons."),this.#r=!0;return}if(s.str===void 0){if(s.type==="beginMarkedContentProps"||s.type==="beginMarkedContent"){const o=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),s.id&&this.#t.setAttribute("id",`${s.id}`),o.append(this.#t)}else s.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}n.push(s.str),this.#S(s)}}#S(e){const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#u.push(t);const s=fe.transform(this.#v,e.transform);let o=Math.atan2(s[1],s[0]);const l=this.#f[e.fontName];l.vertical&&(o+=Math.PI/2);let c=this.#n&&l.fontSubstitution||l.fontFamily;c=Cn.fontFamilyMap.get(c)||c;const u=Math.hypot(s[2],s[3]),h=u*Cn.#F(c,l,this.#o);let f,p;o===0?(f=s[4],p=s[5]-h):(f=s[4]+h*Math.sin(o),p=s[5]-h*Math.cos(o));const v="calc(var(--total-scale-factor) *",b=t.style;this.#t===this.#l?(b.left=`${(100*f/this.#a).toFixed(2)}%`,b.top=`${(100*p/this.#i).toFixed(2)}%`):(b.left=`${v}${f.toFixed(2)}px)`,b.top=`${v}${p.toFixed(2)}px)`),b.fontSize=`${v}${(Cn.#_*u).toFixed(2)}px)`,b.fontFamily=c,n.fontSize=u,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#n&&(t.dataset.fontName=l.fontSubstitutionLoadedName||e.fontName),o!==0&&(n.angle=o*(180/Math.PI));let _=!1;if(e.str.length>1)_=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const w=Math.abs(e.transform[0]),x=Math.abs(e.transform[3]);w!==x&&Math.max(w,x)/Math.min(w,x)>1.5&&(_=!0)}if(_&&(n.canvasWidth=l.vertical?e.height:e.width),this.#m.set(t,n),this.#s.div=t,this.#s.properties=n,this.#E(this.#s),n.hasText&&this.#t.append(t),n.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),this.#t.append(w)}}#E(e){const{div:t,properties:n,ctx:s}=e,{style:o}=t;let l="";if(Cn.#_>1&&(l=`scale(${1/Cn.#_})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:c}=o,{canvasWidth:u,fontSize:h}=n;Cn.#k(s,h*this.#d,c);const{width:f}=s.measureText(t.textContent);f>0&&(l=`scaleX(${u*this.#d/f}) ${l}`)}n.angle!==0&&(l=`rotate(${n.angle}deg) ${l}`),l.length>0&&(o.transform=l)}static cleanup(){if(!(this.#b.size>0)){this.#w.clear();for(const{canvas:e}of this.#y.values())e.remove();this.#y.clear()}}static#R(e=null){let t=this.#y.get(e||="");if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#y.set(e,t),this.#A.set(t,{size:0,family:""})}return t}static#k(e,t,n){const s=this.#A.get(e);t===s.size&&n===s.family||(e.font=`${t}px ${n}`,s.size=t,s.family=n)}static#P(){if(this.#_!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#_=e.getBoundingClientRect().height,e.remove()}static#F(e,t,n){const s=this.#w.get(e);if(s)return s;const o=this.#R(n);o.canvas.width=o.canvas.height=W0,this.#k(o,W0,e);const l=o.measureText(""),c=l.fontBoundingBoxAscent,u=Math.abs(l.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let h=.8;return c?h=c/(c+u):(Tt.platform.isFirefox&&Ce("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?h=t.ascent:t.descent&&(h=1+t.descent)),this.#w.set(e,h),h}};const MD=100;function Cp(r={}){typeof r=="string"||r instanceof URL?r={url:r}:(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r={data:r});const e=new Tp,{docId:t}=e,n=r.url?HN(r.url):null,s=r.data?WN(r.data):null,o=r.httpHeaders||null,l=r.withCredentials===!0,c=r.password??null,u=r.range instanceof kp?r.range:null,h=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:2**16;let f=r.worker instanceof zi?r.worker:null;const p=r.verbosity,v=typeof r.docBaseUrl=="string"&&!Ea(r.docBaseUrl)?r.docBaseUrl:null,b=Mc(r.cMapUrl),_=r.cMapPacked!==!1,w=r.CMapReaderFactory||(Ht?KN:P0),x=Mc(r.iccUrl),E=Mc(r.standardFontDataUrl),A=r.StandardFontDataFactory||(Ht?QN:R0),C=Mc(r.wasmUrl),k=r.WasmFactory||(Ht?JN:N0),N=r.stopAtErrors!==!0,R=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,D=r.isEvalSupported!==!1,F=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!Ht,U=typeof r.isImageDecoderSupported=="boolean"?r.isImageDecoderSupported:!Ht&&(Tt.platform.isFirefox||!globalThis.chrome),q=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,Y=typeof r.disableFontFace=="boolean"?r.disableFontFace:Ht,ne=r.fontExtraProperties===!0,oe=r.enableXfa===!0,te=r.ownerDocument||globalThis.document,ae=r.disableRange===!0,G=r.disableStream===!0,K=r.disableAutoFetch===!0,V=r.pdfBug===!0,$=r.CanvasFactory||(Ht?XN:qN),Q=r.FilterFactory||(Ht?YN:GN),M=r.enableHWA===!0,H=r.useWasm!==!1,ie=u?u.length:r.length??NaN,ce=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!Ht&&!Y,ye=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:!!(w===P0&&A===R0&&k===N0&&b&&E&&C&&Ko(b,document.baseURI)&&Ko(E,document.baseURI)&&Ko(C,document.baseURI)),be=null;_N(p);const ge={canvasFactory:new $({ownerDocument:te,enableHWA:M}),filterFactory:new Q({docId:t,ownerDocument:te}),cMapReaderFactory:ye?null:new w({baseUrl:b,isCompressed:_}),standardFontDataFactory:ye?null:new A({baseUrl:E}),wasmFactory:ye?null:new k({baseUrl:C})};f||(f=zi.create({verbosity:p,port:is.workerPort}),e._worker=f);const X={docId:t,apiVersion:"5.4.296",data:s,password:c,disableAutoFetch:K,rangeChunkSize:h,length:ie,docBaseUrl:v,enableXfa:oe,evaluatorOptions:{maxImageSize:R,disableFontFace:Y,ignoreErrors:N,isEvalSupported:D,isOffscreenCanvasSupported:F,isImageDecoderSupported:U,canvasMaxAreaInBytes:q,fontExtraProperties:ne,useSystemFonts:ce,useWasm:H,useWorkerFetch:ye,cMapUrl:b,iccUrl:x,standardFontDataUrl:E,wasmUrl:C}},se={ownerDocument:te,pdfBug:V,styleElement:be,loadingParams:{disableAutoFetch:K,enableXfa:oe}};return f.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const ue=f.messageHandler.sendWithPromise("GetDocRequest",X,s?[s.buffer]:null);let et;if(u)et=new gD(u,{disableRange:ae,disableStream:G});else if(!s){if(!n)throw new Error("getDocument - no `url` parameter provided.");const Gt=Ko(n)?bD:Ht?RD:AD;et=new Gt({url:n,length:ie,httpHeaders:o,withCredentials:l,rangeChunkSize:h,disableRange:ae,disableStream:G})}return ue.then(Gt=>{if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const De=new Qo(t,Gt,f.port),Be=new FD(De,e,et,se,ge,M);e._transport=Be,De.send("Ready",null)})}).catch(e._capability.reject),e}class Tp{static#e=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${Tp.#e++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let kp=class{#e=Promise.withResolvers();#t=[];#r=[];#n=[];#o=[];constructor(e,t,n=!1,s=null){this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=s}addRangeListener(e){this.#o.push(e)}addProgressListener(e){this.#n.push(e)}addProgressiveReadListener(e){this.#r.push(e)}addProgressiveDoneListener(e){this.#t.push(e)}onDataRange(e,t){for(const n of this.#o)n(e,t)}onDataProgress(e,t){this.#e.promise.then(()=>{for(const n of this.#n)n(e,t)})}onDataProgressiveRead(e){this.#e.promise.then(()=>{for(const t of this.#r)t(e)})}onDataProgressiveDone(){this.#e.promise.then(()=>{for(const e of this.#t)e()})}transportReady(){this.#e.resolve()}requestDataRange(e,t){Ve("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class LD{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Re(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class ID{#e=!1;constructor(e,t,n,s=!1){this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=s?new S0:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new tS,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:o=!1}={}){return new _a({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:s,dontFlip:o})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Re(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,canvas:t=e.canvas,viewport:n,intent:s="display",annotationMode:o=ir.ENABLE,transform:l=null,background:c=null,optionalContentConfigPromise:u=null,annotationCanvasMap:h=null,pageColors:f=null,printAnnotationStorage:p=null,isEditing:v=!1,recordOperations:b=!1,operationsFilter:_=null}){this._stats?.time("Overall");const w=this._transport.getRenderingIntent(s,o,p,v),{renderingIntent:x,cacheKey:E}=w;this.#e=!1,u||=this._transport.getOptionalContentConfig(x);let A=this._intentStates.get(E);A||(A=Object.create(null),this._intentStates.set(E,A)),A.streamReaderCancelTimeout&&(clearTimeout(A.streamReaderCancelTimeout),A.streamReaderCancelTimeout=null);const C=!!(x&fn.PRINT);A.displayReadyCapability||(A.displayReadyCapability=Promise.withResolvers(),A.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(w));const k=!!(this._pdfBug&&globalThis.StepperManager?.enabled),N=!this.recordedBBoxes&&(b||k),R=U=>{if(A.renderTasks.delete(D),N){const q=D.gfx?.dependencyTracker.take();q&&(D.stepper&&D.stepper.setOperatorBBoxes(q,D.gfx.dependencyTracker.takeDebugMetadata()),b&&(this.recordedBBoxes=q))}C&&(this.#e=!0),this.#t(),U?(D.capability.reject(U),this._abortOperatorList({intentState:A,reason:U instanceof Error?U:new Error(U)})):D.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},D=new Ei({callback:R,params:{canvas:t,canvasContext:e,dependencyTracker:N?new eD(t,A.operatorList.length,k):null,viewport:n,transform:l,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:A.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!C,pdfBug:this._pdfBug,pageColors:f,enableHWA:this._transport.enableHWA,operationsFilter:_});(A.renderTasks||=new Set).add(D);const F=D.task;return Promise.all([A.displayReadyCapability.promise,u]).then(([U,q])=>{if(this.destroyed){R();return}if(this._stats?.time("Rendering"),!(q.renderingIntent&x))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");D.initializeGraphics({transparency:U,optionalContentConfig:q}),D.operatorListChanged()}).catch(R),F}getOperatorList({intent:e="display",annotationMode:t=ir.ENABLE,printAnnotationStorage:n=null,isEditing:s=!1}={}){function o(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(u))}const l=this._transport.getRenderingIntent(e,t,n,s,!0);let c=this._intentStates.get(l.cacheKey);c||(c=Object.create(null),this._intentStates.set(l.cacheKey,c));let u;return c.opListReadCapability||(u=Object.create(null),u.operatorListChanged=o,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||=new Set).add(u),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>ua.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,s){function o(){l.read().then(function({value:u,done:h}){if(h){n(c);return}c.lang??=u.lang,Object.assign(c.styles,u.styles),c.items.push(...u.items),o()},s)}const l=t.getReader(),c={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),this.#e=!1,Promise.all(e)}cleanup(e=!1){this.#e=!0;const t=this.#t();return e&&t&&(this._stats&&=new S0),t}#t(){if(!this.#e||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}_startRenderPage(e,t){const n=this._intentStates.get(t);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let n=0,s=e.length;n<s;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&this.#t()}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:s}){const{map:o,transfer:l}=n,u=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:o,modifiedIds:s},l).getReader(),h=this._intentStates.get(t);h.streamReader=u;const f=()=>{u.read().then(({value:p,done:v})=>{if(v){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(p,h),f())},p=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const v of h.renderTasks)v.operatorListChanged();this.#t()}if(h.displayReadyCapability)h.displayReadyCapability.reject(p);else if(h.opListReadCapability)h.opListReadCapability.reject(p);else throw p}})};f()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof Tu){let s=MD;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new Tr(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,o]of this._intentStates)if(o===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}var ts,Bn,Cr,Ps,uu,Rs,Ns,Vt,Qc,nS,rS,Jo,Fi,Jc;const Ze=class Ze{constructor({name:e=null,port:t=null,verbosity:n=EN()}={}){Xn(this,Vt);Xn(this,ts,Promise.withResolvers());Xn(this,Bn,null);Xn(this,Cr,null);Xn(this,Ps,null);if(this.name=e,this.destroyed=!1,this.verbosity=n,t){if(Je(Ze,Ns).has(t))throw new Error("Cannot use more than one PDFWorker per port.");Je(Ze,Ns).set(t,this),Kn(this,Vt,nS).call(this,t)}else Kn(this,Vt,rS).call(this)}get promise(){return Je(this,ts).promise}get port(){return Je(this,Cr)}get messageHandler(){return Je(this,Bn)}destroy(){this.destroyed=!0,Je(this,Ps)?.terminate(),Zt(this,Ps,null),Je(Ze,Ns).delete(Je(this,Cr)),Zt(this,Cr,null),Je(this,Bn)?.destroy(),Zt(this,Bn,null)}static create(e){const t=Je(this,Ns).get(e?.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Ze(e)}static get workerSrc(){if(is.workerSrc)return is.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Re(this,"_setupFakeWorkerGlobal",(async()=>Je(this,Fi,Jc)?Je(this,Fi,Jc):(await import(this.workerSrc)).WorkerMessageHandler)())}};ts=new WeakMap,Bn=new WeakMap,Cr=new WeakMap,Ps=new WeakMap,uu=new WeakMap,Rs=new WeakMap,Ns=new WeakMap,Vt=new WeakSet,Qc=function(){Je(this,ts).resolve(),Je(this,Bn).send("configure",{verbosity:this.verbosity})},nS=function(e){Zt(this,Cr,e),Zt(this,Bn,new Qo("main","worker",e)),Je(this,Bn).on("ready",()=>{}),Kn(this,Vt,Qc).call(this)},rS=function(){if(Je(Ze,Rs)||Je(Ze,Fi,Jc)){Kn(this,Vt,Jo).call(this);return}let{workerSrc:e}=Ze;try{Ze._isSameOrigin(window.location,e)||(e=Ze._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new Qo("main","worker",t),s=()=>{o.abort(),n.destroy(),t.terminate(),this.destroyed?Je(this,ts).reject(new Error("Worker was destroyed")):Kn(this,Vt,Jo).call(this)},o=new AbortController;t.addEventListener("error",()=>{Je(this,Ps)||s()},{signal:o.signal}),n.on("test",c=>{if(o.abort(),this.destroyed||!c){s();return}Zt(this,Bn,n),Zt(this,Cr,t),Zt(this,Ps,t),Kn(this,Vt,Qc).call(this)}),n.on("ready",c=>{if(o.abort(),this.destroyed){s();return}try{l()}catch{Kn(this,Vt,Jo).call(this)}});const l=()=>{const c=new Uint8Array;n.send("test",c,[c.buffer])};l();return}catch{Cu("The worker has been disabled.")}Kn(this,Vt,Jo).call(this)},Jo=function(){Je(Ze,Rs)||(Ce("Setting up fake worker."),Zt(Ze,Rs,!0)),Ze._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){Je(this,ts).reject(new Error("Worker was destroyed"));return}const t=new $N;Zt(this,Cr,t);const n=`fake${xv(Ze,uu)._++}`,s=new Qo(n+"_worker",n,t);e.setup(s,t),Zt(this,Bn,new Qo(n,n+"_worker",t)),Kn(this,Vt,Qc).call(this)}).catch(e=>{Je(this,ts).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Fi=new WeakSet,Jc=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Xn(Ze,Fi),Xn(Ze,uu,0),Xn(Ze,Rs,!1),Xn(Ze,Ns,new WeakMap),Ht&&(Zt(Ze,Rs,!0),is.workerSrc||="./pdf.worker.mjs"),Ze._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(!n?.origin||n.origin==="null")return!1;const s=new URL(t,n);return n.origin===s.origin},Ze._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},Ze.fromPort=e=>{if(ON("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Ze.create(e)};let zi=Ze;class FD{#e=new Map;#t=new Map;#r=new Map;#n=new Map;#o=null;constructor(e,t,n,s,o,l){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new tS,this.fontLoader=new UN({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=l,this.setupMessageHandler()}#s(e,t=null){const n=this.#e.get(e);if(n)return n;const s=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,s),s}get annotationStorage(){return Re(this,"annotationStorage",new Sp)}getRenderingIntent(e,t=ir.ENABLE,n=null,s=!1,o=!1){let l=fn.DISPLAY,c=Df;switch(e){case"any":l=fn.ANY;break;case"display":break;case"print":l=fn.PRINT;break;default:Ce(`getRenderingIntent - invalid intent: ${e}`)}const u=l&fn.PRINT&&n instanceof Hx?n:this.annotationStorage;switch(t){case ir.DISABLE:l+=fn.ANNOTATIONS_DISABLE;break;case ir.ENABLE:break;case ir.ENABLE_FORMS:l+=fn.ANNOTATIONS_FORMS;break;case ir.ENABLE_STORAGE:l+=fn.ANNOTATIONS_STORAGE,c=u.serializable;break;default:Ce(`getRenderingIntent - invalid annotationMode: ${t}`)}s&&(l+=fn.IS_EDITING),o&&(l+=fn.OPLIST);const{ids:h,hash:f}=u.modifiedIds,p=[l,c.hash,f];return{renderingIntent:l,cacheKey:p.join("_"),annotationStorageSerializable:c,modifiedIds:h}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#o?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const n of this.#t.values())e.push(n._destroy());this.#t.clear(),this.#r.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),da.cleanup(),this._networkStream?.cancelAllRequests(new Tr("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,s)=>{Ie(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},s.onPull=()=>{this._fullReader.read().then(function({value:o,done:l}){if(l){s.close();return}Ie(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{this._fullReader.cancel(o),s.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("ReaderHeadersReady",async n=>{await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:o,contentLength:l}=this._fullReader;return(!s||!o)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=c=>{t.onProgress?.({loaded:c.loaded,total:c.total})}),{isStreamingSupported:s,isRangeSupported:o,contentLength:l}}),e.on("GetRangeReader",(n,s)=>{Ie(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(n.begin,n.end);if(!o){s.close();return}s.onPull=()=>{o.read().then(function({value:l,done:c}){if(c){s.close();return}Ie(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{s.error(l)})},s.onCancel=l=>{o.cancel(l),s.ready.catch(c=>{if(!this.destroyed)throw c})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new LD(n,this))}),e.on("DocException",n=>{t._capability.reject(tn(n))}),e.on("PasswordRequest",n=>{this.#o=Promise.withResolvers();try{if(!t.onPassword)throw tn(n);const s=o=>{o instanceof Error?this.#o.reject(o):this.#o.resolve({password:o})};t.onPassword(s,n.code)}catch(s){this.#o.reject(s)}return this.#o.promise}),e.on("DataLoaded",n=>{t.onProgress?.({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;this.#t.get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,s,o])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(s){case"Font":if("error"in o){const f=o.error;Ce(`Error during font loading: ${f}`),this.commonObjs.resolve(n,f);break}const l=new ze(o),c=this._params.pdfBug&&globalThis.FontInspector?.enabled?(f,p)=>globalThis.FontInspector.fontAdded(f,p):null,u=new zN(l,c,o.extra,o.charProcOperatorList);this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!u.fontExtraProperties&&u.data&&u.clearData(),this.commonObjs.resolve(n,u)});break;case"CopyLocalImage":const{imageRef:h}=o;Ie(h,"The imageRef must be defined.");for(const f of this.#t.values())for(const[,p]of f.objs)if(p?.ref===h)return p.dataLen?(this.commonObjs.resolve(n,structuredClone(p)),p.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,o);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([n,s,o,l])=>{if(this.destroyed)return;const c=this.#t.get(s);if(!c.objs.has(n)){if(c._intentStates.size===0){l?.bitmap?.close();return}switch(o){case"Image":case"Pattern":c.objs.resolve(n,l);break;default:throw new Error(`Got unknown object type ${o}`)}}}),e.on("DocProgress",n=>{this.destroyed||t.onProgress?.({loaded:n.loaded,total:n.total})}),e.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[n.type];if(!s)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Ce("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=this.#r.get(t);if(n)return n;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&this.#n.set(o.refStr,e);const l=new ID(t,o,this,this._params.pdfBug);return this.#t.set(t,l),l});return this.#r.set(t,s),s}getPageIndex(e){return Of(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#s("GetOptionalContentConfig").then(t=>new mD(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#e.get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(s=>({info:s[0],metadata:s[1]?new fD(s[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#t.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),da.cleanup()}}cachedPageNumber(e){if(!Of(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#n.get(t)??null}}class jD{#e=null;onContinue=null;onError=null;constructor(e){this.#e=e}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}}class Ei{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:n,commonObjs:s,annotationCanvasMap:o,operatorList:l,pageIndex:c,canvasFactory:u,filterFactory:h,useRequestAnimationFrame:f=!1,pdfBug:p=!1,pageColors:v=null,enableHWA:b=!1,operationsFilter:_=null}){this.callback=e,this.params=t,this.objs=n,this.commonObjs=s,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=c,this.canvasFactory=u,this.filterFactory=h,this._pdfBug=p,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new jD(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=b,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=_}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(Ei.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Ei.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:s,background:o,dependencyTracker:l}=this.params,c=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Di(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:s,viewport:n,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),Ei.#t.delete(this._canvas),e||=new Tu(`Rendering cancelled, page ${this._pageIndex+1}`,t),this.callback(e),this.task.onError?.(e)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Ei.#t.delete(this._canvas),this.callback())))}}const sS="5.4.296",iS="f56dc8601";class pn{#e=null;#t=null;#r;#n=null;#o=!1;#s=!1;#i=null;#a;#c=null;#l=null;static#h=null;static get _keyboardManager(){return Re(this,"_keyboardManager",new Aa([[["Escape","mac+Escape"],pn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],pn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],pn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],pn.prototype._moveToPrevious],[["Home","mac+Home"],pn.prototype._moveToBeginning],[["End","mac+End"],pn.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#s=!1,this.#i=e):this.#s=!0,this.#l=e?._uiManager||t,this.#a=this.#l._eventBus,this.#r=e?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",pn.#h||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",this.#i&&(e.ariaControls=`${this.#i.id}_colorpicker_dropdown`);const t=this.#l._signal;e.addEventListener("click",this.#p.bind(this),{signal:t}),e.addEventListener("keydown",this.#g.bind(this),{signal:t});const n=this.#t=document.createElement("span");return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=this.#r,e.append(n),e}renderMainDropdown(){const e=this.#n=this.#d();return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}#d(){const e=document.createElement("div"),t=this.#l._signal;e.addEventListener("contextmenu",gn,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#i&&(e.id=`${this.#i.id}_colorpicker_dropdown`);for(const[n,s]of this.#l.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",s),o.title=n,o.setAttribute("data-l10n-id",pn.#h[n]);const l=document.createElement("span");o.append(l),l.className="swatch",l.style.backgroundColor=s,o.ariaSelected=s===this.#r,o.addEventListener("click",this.#f.bind(this,s),{signal:t}),e.append(o)}return e.addEventListener("keydown",this.#g.bind(this),{signal:t}),e}#f(e,t){t.stopPropagation(),this.#a.dispatch("switchannotationeditorparams",{source:this,type:Me.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#p(e);return}const t=e.target.getAttribute("data-color");t&&this.#f(t,e)}_moveToNext(e){if(!this.#m){this.#p(e);return}if(e.target===this.#e){this.#n.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#n?.firstChild||e.target===this.#e){this.#m&&this._hideDropdownFromKeyboard();return}this.#m||this.#p(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#m){this.#p(e);return}this.#n.firstChild?.focus()}_moveToEnd(e){if(!this.#m){this.#p(e);return}this.#n.lastChild?.focus()}#g(e){pn._keyboardManager.exec(this,e)}#p(e){if(this.#m){this.hideDropdown();return}if(this.#o=e.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#e.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const t=this.#n=this.#d();this.#e.append(t)}#u(e){this.#n?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#e.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#m(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#m){this.#i?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#o})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#n)return;const t=this.#l.highlightColors.values();for(const n of this.#n.children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#n?.remove(),this.#n=null}}class ha{#e=null;#t=null;#r=null;static#n=null;constructor(e){this.#t=e,this.#r=e._uiManager,ha.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#e)return this.#e;const{editorType:e,colorType:t,colorValue:n}=this.#t,s=this.#e=document.createElement("input");return s.type="color",s.value=n||"#000000",s.className="basicColorPicker",s.tabIndex=0,s.setAttribute("data-l10n-id",ha.#n[e]),s.addEventListener("input",()=>{this.#r.updateParams(t,s.value)},{signal:this.#r._signal}),s}update(e){this.#e&&(this.#e.value=e)}destroy(){this.#e?.remove(),this.#e=null}hideDropdown(){}}function V0(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function $o(r){return Math.max(0,Math.min(255,255*r))}class $0{static CMYK_G([e,t,n,s]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=$o(e),[e,e,e]}static G_HTML([e]){const t=V0(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map($o)}static RGB_HTML(e){return`#${e.map(V0).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,n+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,n,s]){return[$o(1-Math.min(1,e+s)),$o(1-Math.min(1,n+s)),$o(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const s=1-e,o=1-t,l=1-n,c=Math.min(s,o,l);return["CMYK",s,o,l,c]}}class BD{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),n||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Ve("Abstract method `_createSVG` called.")}}class fa extends BD{_createSVG(e){return document.createElementNS(Sr,e)}}const UD=9,Is=new WeakSet,zD=new Date().getTimezoneOffset()*60*1e3;class q0{static create(e){switch(e.data.annotationType){case ht.LINK:return new Pp(e);case ht.TEXT:return new WD(e);case ht.WIDGET:switch(e.data.fieldType){case"Tx":return new VD(e);case"Btn":return e.data.radioButton?new oS(e):e.data.checkBox?new qD(e):new GD(e);case"Ch":return new YD(e);case"Sig":return new $D(e)}return new Us(e);case ht.POPUP:return new If(e);case ht.FREETEXT:return new aS(e);case ht.LINE:return new KD(e);case ht.SQUARE:return new QD(e);case ht.CIRCLE:return new JD(e);case ht.POLYLINE:return new lS(e);case ht.CARET:return new eO(e);case ht.INK:return new Rp(e);case ht.POLYGON:return new ZD(e);case ht.HIGHLIGHT:return new cS(e);case ht.UNDERLINE:return new tO(e);case ht.SQUIGGLY:return new nO(e);case ht.STRIKEOUT:return new rO(e);case ht.STAMP:return new uS(e);case ht.FILEATTACHMENT:return new sO(e);default:return new ot(e)}}}class ot{#e=null;#t=!1;#r=null;constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:s=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),s&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e?.str||t?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return ot._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:e}=this,t=this.annotationStorage?.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const e=this.annotationStorage?.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:n,rect:s}=this.data;let o=-1/0,l=-1/0;if(t?.length>=8){for(let c=0;c<t.length;c+=8)t[c+1]>l?(l=t[c+1],o=t[c+2]):t[c+1]===l&&(o=Math.max(o,t[c+2]));return[o,l]}if(n?.length>=1){for(const c of n)for(let u=0,h=c.length;u<h;u+=2)c[u+1]>l?(l=c[u+1],o=c[u]):c[u+1]===l&&(o=Math.max(o,c[u]));if(o!==1/0)return[o,l]}return s?[s[2],s[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:s,pageX:o,pageY:l}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-o)/n,e[1]=100*(e[1]-l)/s,e}get commentText(){const{data:e}=this;return this.annotationStorage.getRawValue(`${la}${e.id}`)?.popup?.contents||e.contentsObj?.str||""}set commentText(e){const{data:t}=this,n={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:n})||this.annotationStorage.setValue(`${la}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){(this.#r?.popup||this.popup)?.remove(),this.#r=this.popup=null}updateEdited(e){if(!this.container)return;e.rect&&(this.#e||={rect:this.data.rect.slice(0)});const{rect:t,popup:n}=e;t&&this.#n(t);let s=this.#r?.popup||this.popup;!s&&n?.text&&(this._createPopup(n),s=this.#r.popup),s&&(s.updateEdited(e),n?.deleted&&(s.remove(),this.#r=null,this.popup=null))}resetEdited(){this.#e&&(this.#n(this.#e.rect),this.#r?.popup.resetEdited(),this.#e=null)}#n(e){const{container:{style:t},data:{rect:n,rotation:s},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:l,pageX:c,pageY:u}}}}=this;n?.splice(0,4,...e),t.left=`${100*(e[0]-c)/o}%`,t.top=`${100*(l-e[3]+u)/l}%`,s===0?(t.width=`${100*(e[2]-e[0])/o}%`,t.height=`${100*(e[3]-e[1])/l}%`):this.setRotation(s)}_createContainer(e){const{data:t,parent:{page:n,viewport:s}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",t.id),!(this instanceof Us)&&!(this instanceof Pp)&&(o.tabIndex=0);const{style:l}=o;if(l.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(o.title=t.alternativeText),t.noRotate&&o.classList.add("norotate"),!t.rect||this instanceof If){const{rotation:w}=t;return!t.hasOwnCanvas&&w!==0&&this.setRotation(w,o),o}const{width:c,height:u}=this;if(!e&&t.borderStyle.width>0){l.borderWidth=`${t.borderStyle.width}px`;const w=t.borderStyle.horizontalCornerRadius,x=t.borderStyle.verticalCornerRadius;if(w>0||x>0){const A=`calc(${w}px * var(--total-scale-factor)) / calc(${x}px * var(--total-scale-factor))`;l.borderRadius=A}else if(this instanceof oS){const A=`calc(${c}px * var(--total-scale-factor)) / calc(${u}px * var(--total-scale-factor))`;l.borderRadius=A}switch(t.borderStyle.style){case xi.SOLID:l.borderStyle="solid";break;case xi.DASHED:l.borderStyle="dashed";break;case xi.BEVELED:Ce("Unimplemented border style: beveled");break;case xi.INSET:Ce("Unimplemented border style: inset");break;case xi.UNDERLINE:l.borderBottomStyle="solid";break}const E=t.borderColor||null;E?(this.#t=!0,l.borderColor=fe.makeHexColor(E[0]|0,E[1]|0,E[2]|0)):l.borderWidth=0}const h=fe.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:f,pageHeight:p,pageX:v,pageY:b}=s.rawDims;l.left=`${100*(h[0]-v)/f}%`,l.top=`${100*(h[1]-b)/p}%`;const{rotation:_}=t;return t.hasOwnCanvas||_===0?(l.width=`${100*c/f}%`,l.height=`${100*u/p}%`):this.setRotation(_,o),o}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:s}=this.parent.viewport.rawDims;let{width:o,height:l}=this;e%180!==0&&([o,l]=[l,o]),t.style.width=`${100*o/n}%`,t.style.height=`${100*l/s}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,s)=>{const o=s.detail[t],l=o[0],c=o.slice(1);s.target.style[n]=$0[`${l}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[n]:$0[`${l}_rgb`](c)})};return Re(this,"_commonActions",{display:t=>{const{display:n}=t.detail,s=n%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const s of Object.keys(t.detail))(e[s]||n[s])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[s,o]of Object.entries(t)){const l=n[s];if(l){const c={detail:{[s]:o},target:e};l(c),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,s,o]=this.data.rect.map(w=>Math.fround(w));if(e.length===8){const[w,x,E,A]=e.subarray(2,6);if(s===w&&o===x&&t===E&&n===A)return}const{style:l}=this.container;let c;if(this.#t){const{borderColor:w,borderWidth:x}=l;l.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${x}">`],this.container.classList.add("hasBorder")}const u=s-t,h=o-n,{svgFactory:f}=this,p=f.createElement("svg");p.classList.add("quadrilateralsContainer"),p.setAttribute("width",0),p.setAttribute("height",0),p.role="none";const v=f.createElement("defs");p.append(v);const b=f.createElement("clipPath"),_=`clippath_${this.data.id}`;b.setAttribute("id",_),b.setAttribute("clipPathUnits","objectBoundingBox"),v.append(b);for(let w=2,x=e.length;w<x;w+=8){const E=e[w],A=e[w+1],C=e[w+2],k=e[w+3],N=f.createElement("rect"),R=(C-t)/u,D=(o-A)/h,F=(E-C)/u,U=(A-k)/h;N.setAttribute("x",R),N.setAttribute("y",D),N.setAttribute("width",F),N.setAttribute("height",U),b.append(N),c?.push(`<rect vector-effect="non-scaling-stroke" x="${R}" y="${D}" width="${F}" height="${U}"/>`)}this.#t&&(c.push("</g></svg>')"),l.backgroundImage=c.join("")),this.container.append(p),this.container.style.clipPath=`url(#${_})`}_createPopup(e=null){const{data:t}=this;let n,s;e?(n={str:e.text},s=e.date):(n=t.contentsObj,s=t.modificationDate);const o=this.#r=new If({data:{color:t.color,titleObj:t.titleObj,modificationDate:s,contentsObj:n,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent._commentManager||this.parent.div.append(o.render())}get hasPopupElement(){return!!(this.#r||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#r}render(){Ve("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:o,id:l,exportValues:c}of s){if(o===-1||l===t)continue;const u=typeof c=="string"?c:null,h=document.querySelector(`[data-element-id="${l}"]`);if(h&&!Is.has(h)){Ce(`_getElementsByName - element not allowed: ${l}`);continue}n.push({id:l,exportValue:u,domElement:h})}return n}for(const s of document.getElementsByName(e)){const{exportValue:o}=s,l=s.getAttribute("data-element-id");l!==t&&Is.has(s)&&n.push({id:l,exportValue:o,domElement:s})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class HD extends ot{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&(this._createPopup(e.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}class Pp extends ot{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let s=!1;return e.url?(t.addLinkAttributes(n,e.url,e.newWindow),s=!0):e.action?(this._bindNamedAction(n,e.action,e.overlaidText),s=!0):e.attachment?(this.#t(n,e.attachment,e.overlaidText,e.attachmentDest),s=!0):e.setOCGState?(this.#r(n,e.setOCGState,e.overlaidText),s=!0):e.dest?(this._bindLink(n,e.dest,e.overlaidText),s=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),s=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(n,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(n),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t,n=""){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#e(),n&&(e.title=n)}_bindNamedAction(e,t,n=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),n&&(e.title=n),this.#e()}#t(e,t,n="",s=null){e.href=this.linkService.getAnchorUrl(""),t.description?e.title=t.description:n&&(e.title=n),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,s),!1),this.#e()}#r(e,t,n=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),n&&(e.title=n),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(t.actions)){const o=n.get(s);o&&(e[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:s}}),!1))}t.overlaidText&&(e.title=t.overlaidText),e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){Ce('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(e.onclick=()=>!1);return}e.onclick=()=>{n?.();const{fields:s,refs:o,include:l}=t,c=[];if(s.length!==0||o.length!==0){const f=new Set(o);for(const p of s){const v=this._fieldObjects[p]||[];for(const{id:b}of v)f.add(b)}for(const p of Object.values(this._fieldObjects))for(const v of p)f.has(v.id)===l&&c.push(v)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const u=this.annotationStorage,h=[];for(const f of c){const{id:p}=f;switch(h.push(p),f.type){case"text":{const b=f.defaultValue||"";u.setValue(p,{value:b});break}case"checkbox":case"radiobutton":{const b=f.defaultValue===f.exportValues;u.setValue(p,{value:b});break}case"combobox":case"listbox":{const b=f.defaultValue||"";u.setValue(p,{value:b});break}default:continue}const v=document.querySelector(`[data-element-id="${p}"]`);if(v){if(!Is.has(v)){Ce(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}}),!1}}}class WD extends ot{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Us extends ot{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Tt.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,s,o){n.includes("mouse")?e.addEventListener(n,l=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:o(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):e.addEventListener(n,l=>{if(n==="blur"){if(!t.focused||!l.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:o(l)}})})}_setEventListeners(e,t,n,s){for(const[o,l]of n)(l==="Action"||this.data.actions?.[l])&&((l==="Focus"||l==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,o,l,s),l==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):l==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":fe.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||UD,o=e.style;let l;const c=2,u=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-c),f=Math.round(h/(Qh*s))||1,p=h/f;l=Math.min(s,u(p/Qh))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-c);l=Math.min(s,u(h/Qh))}o.fontSize=`calc(${l}px * var(--total-scale-factor))`,o.color=fe.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(o.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class VD extends Us{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,s){const o=this.annotationStorage;for(const l of this._getElementsByName(e.name,e.id))l.domElement&&(l.domElement[t]=n),o.setValue(l.id,{[s]:n})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const s=e.getValue(t,{value:this.data.fieldValue});let o=s.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let c=s.formattedValue||this.data.textContent?.join(`
`)||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const u={userValue:o,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=c??o,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",c??o),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Is.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:h,datetimeType:f,timeStep:p}=this.data,v=!!f&&this.enableScripting;h&&(n.title=h),this._setRequired(n,this.data.required),l&&(n.maxLength=l),n.addEventListener("input",_=>{e.setValue(t,{value:_.target.value}),this.setPropertyOnSiblings(n,"value",_.target.value,"value"),u.formattedValue=null}),n.addEventListener("resetform",_=>{const w=this.data.defaultFieldValue??"";n.value=u.userValue=w,u.formattedValue=null});let b=_=>{const{formattedValue:w}=u;w!=null&&(_.target.value=w),_.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",w=>{if(u.focused)return;const{target:x}=w;if(v&&(x.type=f,p&&(x.step=p)),u.userValue){const E=u.userValue;if(v)if(f==="time"){const A=new Date(E),C=[A.getHours(),A.getMinutes(),A.getSeconds()];x.value=C.map(k=>k.toString().padStart(2,"0")).join(":")}else x.value=new Date(E-zD).toISOString().split(f==="date"?"T":".",1)[0];else x.value=E}u.lastCommittedValue=x.value,u.commitKey=1,this.data.actions?.Focus||(u.focused=!0)}),n.addEventListener("updatefromsandbox",w=>{this.showElementAndHideCanvas(w.target);const x={value(E){u.userValue=E.detail.value??"",v||e.setValue(t,{value:u.userValue.toString()}),E.target.value=u.userValue},formattedValue(E){const{formattedValue:A}=E.detail;u.formattedValue=A,A!=null&&E.target!==document.activeElement&&(E.target.value=A);const C={formattedValue:A};v&&(C.value=A),e.setValue(t,C)},selRange(E){E.target.setSelectionRange(...E.detail.selRange)},charLimit:E=>{const{charLimit:A}=E.detail,{target:C}=E;if(A===0){C.removeAttribute("maxLength");return}C.setAttribute("maxLength",A);let k=u.userValue;!k||k.length<=A||(k=k.slice(0,A),C.value=u.userValue=k,e.setValue(t,{value:k}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:k,willCommit:!0,commitKey:1,selStart:C.selectionStart,selEnd:C.selectionEnd}}))}};this._dispatchEventFromSandbox(x,w)}),n.addEventListener("keydown",w=>{u.commitKey=1;let x=-1;if(w.key==="Escape"?x=0:w.key==="Enter"&&!this.data.multiLine?x=2:w.key==="Tab"&&(u.commitKey=3),x===-1)return;const{value:E}=w.target;u.lastCommittedValue!==E&&(u.lastCommittedValue=E,u.userValue=E,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,willCommit:!0,commitKey:x,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}))});const _=b;b=null,n.addEventListener("blur",w=>{if(!u.focused||!w.relatedTarget)return;this.data.actions?.Blur||(u.focused=!1);const{target:x}=w;let{value:E}=x;if(v){if(E&&f==="time"){const A=E.split(":").map(C=>parseInt(C,10));E=new Date(2e3,0,1,A[0],A[1],A[2]||0).valueOf(),x.step=""}else E.includes("T")||(E=`${E}T00:00`),E=new Date(E).valueOf();x.type="text"}u.userValue=E,u.lastCommittedValue!==E&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,willCommit:!0,commitKey:u.commitKey,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}),_(w)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",w=>{u.lastCommittedValue=null;const{data:x,target:E}=w,{value:A,selectionStart:C,selectionEnd:k}=E;let N=C,R=k;switch(w.inputType){case"deleteWordBackward":{const D=A.substring(0,C).match(/\w*[^\w]*$/);D&&(N-=D[0].length);break}case"deleteWordForward":{const D=A.substring(C).match(/^[^\w]*\w*/);D&&(R+=D[0].length);break}case"deleteContentBackward":C===k&&(N-=1);break;case"deleteContentForward":C===k&&(R+=1);break}w.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,change:x||"",willCommit:!1,selStart:N,selEnd:R}})}),this._setEventListeners(n,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],w=>w.target.value)}if(b&&n.addEventListener("blur",b),this.data.comb){const w=(this.data.rect[2]-this.data.rect[0])/l;n.classList.add("comb"),n.style.letterSpacing=`calc(${w}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class $D extends Us{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class qD extends Us{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let s=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(n,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return Is.add(o),o.setAttribute("data-element-id",n),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=t.fieldName,s&&o.setAttribute("checked",!0),o.setAttribute("exportValue",t.exportValue),o.tabIndex=0,o.addEventListener("change",l=>{const{name:c,checked:u}=l.target;for(const h of this._getElementsByName(c,n)){const f=u&&h.exportValue===t.exportValue;h.domElement&&(h.domElement.checked=f),e.setValue(h.id,{value:f})}e.setValue(n,{value:u})}),o.addEventListener("resetform",l=>{const c=t.defaultFieldValue||"Off";l.target.checked=c===t.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",l=>{const c={value(u){u.target.checked=u.detail.value!=="Off",e.setValue(n,{value:u.target.checked})}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class oS extends Us{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let s=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(n,{value:s})),s)for(const l of this._getElementsByName(t.fieldName,n))e.setValue(l.id,{value:!1});const o=document.createElement("input");if(Is.add(o),o.setAttribute("data-element-id",n),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=t.fieldName,s&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",l=>{const{name:c,checked:u}=l.target;for(const h of this._getElementsByName(c,n))e.setValue(h.id,{value:!1});e.setValue(n,{value:u})}),o.addEventListener("resetform",l=>{const c=t.defaultFieldValue;l.target.checked=c!=null&&c===t.buttonValue}),this.enableScripting&&this.hasJSActions){const l=t.buttonValue;o.addEventListener("updatefromsandbox",c=>{const u={value:h=>{const f=l===h.detail.value;for(const p of this._getElementsByName(h.target.name)){const v=f&&p.id===n;p.domElement&&(p.domElement.checked=v),e.setValue(p.id,{value:v})}}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class GD extends Pp{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class YD extends Us{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");Is.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",f=>{const p=this.data.defaultFieldValue;for(const v of s.options)v.selected=v.value===p});for(const f of this.data.options){const p=document.createElement("option");p.textContent=f.displayValue,p.value=f.exportValue,n.value.includes(f.exportValue)&&(p.setAttribute("selected",!0),o=!1),s.append(p)}let l=null;if(o){const f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),s.prepend(f),l=()=>{f.remove(),s.removeEventListener("input",l),l=null},s.addEventListener("input",l)}const c=f=>{const p=f?"value":"textContent",{options:v,multiple:b}=s;return b?Array.prototype.filter.call(v,_=>_.selected).map(_=>_[p]):v.selectedIndex===-1?null:v[v.selectedIndex][p]};let u=c(!1);const h=f=>{const p=f.target.options;return Array.prototype.map.call(p,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",f=>{const p={value(v){l?.();const b=v.detail.value,_=new Set(Array.isArray(b)?b:[b]);for(const w of s.options)w.selected=_.has(w.value);e.setValue(t,{value:c(!0)}),u=c(!1)},multipleSelection(v){s.multiple=!0},remove(v){const b=s.options,_=v.detail.remove;b[_].selected=!1,s.remove(_),b.length>0&&Array.prototype.findIndex.call(b,x=>x.selected)===-1&&(b[0].selected=!0),e.setValue(t,{value:c(!0),items:h(v)}),u=c(!1)},clear(v){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),u=c(!1)},insert(v){const{index:b,displayValue:_,exportValue:w}=v.detail.insert,x=s.children[b],E=document.createElement("option");E.textContent=_,E.value=w,x?x.before(E):s.append(E),e.setValue(t,{value:c(!0),items:h(v)}),u=c(!1)},items(v){const{items:b}=v.detail;for(;s.length!==0;)s.remove(0);for(const _ of b){const{displayValue:w,exportValue:x}=_,E=document.createElement("option");E.textContent=w,E.value=x,s.append(E)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:c(!0),items:h(v)}),u=c(!1)},indices(v){const b=new Set(v.detail.indices);for(const _ of v.target.options)_.selected=b.has(_.index);e.setValue(t,{value:c(!0)}),u=c(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(p,f)}),s.addEventListener("input",f=>{const p=c(!0),v=c(!1);e.setValue(t,{value:p}),f.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:u,change:v,changeEx:p,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):s.addEventListener("input",function(f){e.setValue(t,{value:c(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class If extends ot{constructor(e){const{data:t,elements:n,parent:s}=e,o=!!s._commentManager;if(super(e,{isRenderable:!o&&ot._hasPopupData(t)}),this.elements=n,o&&ot._hasPopupData(t)){const l=this.popup=this.#e();for(const c of n)c.popup=l}else this.popup=null}#e(){return new XD({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=this.#e(),n=[];for(const s of this.elements)s.popup=t,s.container.ariaHasPopup="dialog",n.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(s=>`${vp}${s}`).join(",")),this.container}}class XD{#e=null;#t=this.#V.bind(this);#r=this.#B.bind(this);#n=this.#O.bind(this);#o=this.#x.bind(this);#s=null;#i=null;#a=null;#c=null;#l=null;#h=null;#d=null;#f=!1;#g=null;#p=null;#u=null;#m=null;#v=null;#w=null;#y=null;#A=null;#_=null;#b=null;#T=!1;#S=null;#E=null;constructor({container:e,color:t,elements:n,titleObj:s,modificationDate:o,contentsObj:l,richText:c,parent:u,rect:h,parentRect:f,open:p,commentManager:v=null}){this.#i=e,this.#_=s,this.#a=l,this.#A=c,this.#h=u,this.#s=t,this.#y=h,this.#d=f,this.#l=n,this.#e=v,this.#S=n[0],this.#c=au.toDateObject(o),this.trigger=n.flatMap(b=>b.getElementsToTriggerPopup()),v?this.renderCommentButton():(this.#R(),this.#i.hidden=!0,p&&this.#x())}#R(){if(this.#p)return;this.#p=new AbortController;const{signal:e}=this.#p;for(const t of this.trigger)t.addEventListener("click",this.#o,{signal:e}),t.addEventListener("pointerenter",this.#n,{signal:e}),t.addEventListener("pointerleave",this.#r,{signal:e}),t.classList.add("popupTriggerArea");for(const t of this.#l)t.container?.addEventListener("keydown",this.#t,{signal:e})}#k(){const e=this.#l.find(t=>t.hasCommentButton);e&&(this.#v=e._normalizePoint(e.commentButtonPosition))}renderCommentButton(){if(this.#m||(this.#v||this.#k(),!this.#v))return;const{signal:e}=this.#p=new AbortController,t=!!this.#S.extraPopupElement,n=()=>{this.#e.toggleCommentPopup(this,!0,void 0,!t)},s=()=>{this.#e.toggleCommentPopup(this,!1,!0,!t)},o=()=>{this.#e.toggleCommentPopup(this,!1,!1)};if(t){this.#m=this.#S.container;for(const l of this.trigger)l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.addEventListener("keydown",this.#t,{signal:e}),l.addEventListener("click",n,{signal:e}),l.addEventListener("pointerenter",s,{signal:e}),l.addEventListener("pointerleave",o,{signal:e}),l.classList.add("popupTriggerArea")}else{const l=this.#m=document.createElement("button");l.className="annotationCommentButton";const c=this.#S.container;l.style.zIndex=c.style.zIndex+1,l.tabIndex=0,l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#F(),this.#P(),l.addEventListener("keydown",this.#t,{signal:e}),l.addEventListener("click",n,{signal:e}),l.addEventListener("pointerenter",s,{signal:e}),l.addEventListener("pointerleave",o,{signal:e}),c.after(l)}}#P(){if(this.#S.extraPopupElement&&!this.#S.editor)return;this.renderCommentButton();const[e,t]=this.#v,{style:n}=this.#m;n.left=`calc(${e}%)`,n.top=`calc(${t}% - var(--comment-button-dim))`}#F(){this.#S.extraPopupElement||(this.renderCommentButton(),this.#m.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:e,opacity:t}=this.#S.commentData;return e?this.#h._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{this.#m?.focus()},0)}getData(){const{richText:e,color:t,opacity:n,creationDate:s,modificationDate:o}=this.#S.commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:n,creationDate:s,modificationDate:o}}get elementBeforePopup(){return this.#m}get comment(){return this.#E||=this.#S.commentText,this.#E}set comment(e){e!==this.comment&&(this.#S.commentText=this.#E=e)}get parentBoundingClientRect(){return this.#S.layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){this.#m&&(this.#m.classList.toggle("selected",e),this.#m.ariaExpanded=t)}setSelectedCommentButton(e){this.#m.classList.toggle("selected",e)}get commentPopupPosition(){if(this.#w)return this.#w;const{x:e,y:t,height:n}=this.#m.getBoundingClientRect(),{x:s,y:o,width:l,height:c}=this.#S.layer.getBoundingClientRect();return[(e-s)/l,(t+n-o)/c]}set commentPopupPosition(e){this.#w=e}hasDefaultPopupPosition(){return this.#w===null}get commentButtonPosition(){return this.#v}get commentButtonWidth(){return this.#m.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,n]=this.#w||this.commentButtonPosition.map(h=>h/100),s=this.parentBoundingClientRect,{x:o,y:l,width:c,height:u}=s;this.#e.showDialog(null,this,o+t*c,l+n*u,{...e,parentDimensions:s})}render(){if(this.#g)return;const e=this.#g=document.createElement("div");if(e.className="popup",this.#s){const n=e.style.outlineColor=fe.makeHexColor(...this.#s);e.style.backgroundColor=`color-mix(in srgb, ${n} 30%, white)`}const t=document.createElement("span");if(t.className="header",this.#_?.str){const n=document.createElement("span");n.className="title",t.append(n),{dir:n.dir,str:n.textContent}=this.#_}if(e.append(t),this.#c){const n=document.createElement("time");n.className="popupDate",n.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),n.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),n.dateTime=this.#c.toISOString(),t.append(n)}wp({html:this.#D||this.#a.str,dir:this.#a?.dir,className:"popupContent"},e),this.#i.append(e)}get#D(){const e=this.#A,t=this.#a;return e?.str&&(!t?.str||t.str===e.str)&&this.#A.html||null}get#M(){return this.#D?.attributes?.style?.fontSize||0}get#j(){return this.#D?.attributes?.style?.color||null}#L(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:this.#j,fontSize:this.#M?`calc(${this.#M}px * var(--total-scale-factor))`:""}};for(const o of e.split(`
`))t.push({name:"span",value:o,attributes:s});return n}#V(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#f)&&this.#x()}updateEdited({rect:e,popup:t,deleted:n}){if(this.#e){n?(this.remove(),this.#E=null):t&&(t.deleted?this.remove():(this.#F(),this.#E=t.text)),e&&(this.#v=null,this.#k(),this.#P());return}if(n||t?.deleted){this.remove();return}this.#R(),this.#b||={contentsObj:this.#a,richText:this.#A},e&&(this.#u=null),t&&t.text&&(this.#A=this.#L(t.text),this.#c=au.toDateObject(t.date),this.#a=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#b&&({contentsObj:this.#a,richText:this.#A}=this.#b,this.#b=null,this.#g?.remove(),this.#g=null,this.#u=null)}remove(){if(this.#p?.abort(),this.#p=null,this.#g?.remove(),this.#g=null,this.#T=!1,this.#f=!1,this.#m?.remove(),this.#m=null,this.trigger)for(const e of this.trigger)e.classList.remove("popupTriggerArea")}#C(){if(this.#u!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:s,pageY:o}}}=this.#h;let l=!!this.#d,c=l?this.#d:this.#y;for(const _ of this.#l)if(!c||fe.intersect(_.data.rect,c)!==null){c=_.data.rect,l=!0;break}const u=fe.normalizeRect([c[0],e[3]-c[1]+e[1],c[2],e[3]-c[3]+e[1]]),f=l?c[2]-c[0]+5:0,p=u[0]+f,v=u[1];this.#u=[100*(p-s)/t,100*(v-o)/n];const{style:b}=this.#i;b.left=`${this.#u[0]}%`,b.top=`${this.#u[1]}%`}#x(){if(this.#e){this.#e.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#O(),this.#i.addEventListener("click",this.#o),this.#i.addEventListener("keydown",this.#t)):(this.#B(),this.#i.removeEventListener("click",this.#o),this.#i.removeEventListener("keydown",this.#t))}#O(){this.#g||this.render(),this.isVisible?this.#f&&this.#i.classList.add("focused"):(this.#C(),this.#i.hidden=!1,this.#i.style.zIndex=parseInt(this.#i.style.zIndex)+1e3)}#B(){this.#i.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#i.hidden=!0,this.#i.style.zIndex=parseInt(this.#i.style.zIndex)-1e3)}forceHide(){this.#T=this.isVisible,this.#T&&(this.#i.hidden=!0)}maybeShow(){this.#e||(this.#R(),this.#T&&(this.#g||this.#O(),this.#T=!1,this.#i.hidden=!1))}get isVisible(){return this.#e?!1:this.#i.hidden===!1}}class aS extends ot{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Ae.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class KD extends ot{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:e,width:t,height:n}=this,s=this.svgFactory.create(t,n,!0),o=this.#e=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class QD extends ot{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:e,width:t,height:n}=this,s=this.svgFactory.create(t,n,!0),o=e.borderStyle.width,l=this.#e=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",t-o),l.setAttribute("height",n-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),s.append(l),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class JD extends ot{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:e,width:t,height:n}=this,s=this.svgFactory.create(t,n,!0),o=e.borderStyle.width,l=this.#e=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",t/2),l.setAttribute("cy",n/2),l.setAttribute("rx",t/2-o/2),l.setAttribute("ry",n/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),s.append(l),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class lS extends ot{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:n,popupRef:s},width:o,height:l}=this;if(!t)return this.container;const c=this.svgFactory.create(o,l,!0);let u=[];for(let f=0,p=t.length;f<p;f+=2){const v=t[f]-e[0],b=e[3]-t[f+1];u.push(`${v},${b}`)}u=u.join(" ");const h=this.#e=this.svgFactory.createElement(this.svgElementName);return h.setAttribute("points",u),h.setAttribute("stroke-width",n.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class ZD extends lS{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class eO extends ot{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Rp extends ot{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Ae.HIGHLIGHT:Ae.INK}#r(e,t){switch(e){case 90:return{transform:`rotate(90) translate(${-t[0]},${t[1]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:`rotate(180) translate(${-t[2]},${t[1]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:`rotate(270) translate(${-t[2]},${t[3]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:`translate(${-t[0]},${t[3]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:n,borderStyle:s,popupRef:o}}=this,{transform:l,width:c,height:u}=this.#r(t,e),h=this.svgFactory.create(c,u,!0),f=this.#e=this.svgFactory.createElement("svg:g");h.append(f),f.setAttribute("stroke-width",s.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",l);for(let p=0,v=n.length;p<v;p++){const b=this.svgFactory.createElement(this.svgElementName);this.#t.push(b),b.setAttribute("points",n[p].join(",")),f.append(b)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:n,rect:s}=e,o=this.#e;if(t>=0&&o.setAttribute("stroke-width",t||1),n)for(let l=0,c=this.#t.length;l<c;l++)this.#t[l].setAttribute("points",n[l].join(","));if(s){const{transform:l,width:c,height:u}=this.#r(this.data.rotation,s);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${u}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class cS extends ot{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Ae.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class tO extends ot{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class nO extends ot{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class rO extends ot{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class uS extends ot{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Ae.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class sO extends ot{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let n;t.hasAppearance||t.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),n.addEventListener("dblclick",this.#t.bind(this)),this.#e=n;const{isMac:s}=Tt.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(s?o.metaKey:o.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let Np=class dS{#e=null;#t=null;#r=null;#n=new Map;#o=null;#s=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:s,page:o,viewport:l,structTreeLayer:c,commentManager:u,linkService:h,annotationStorage:f}){this.div=e,this.#e=t,this.#t=n,this.#o=c||null,this.#s=h||null,this.#r=f||new Sp,this.page=o,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=s,this._commentManager=u||null}hasEditableAnnotations(){return this.#n.size>0}async#i(e,t,n){const s=e.firstChild||e,o=s.id=`${vp}${t}`,l=await this.#o?.getAriaAttributes(o);if(l)for(const[c,u]of l)s.setAttribute(c,u);n?n.at(-1).container.after(e):(this.div.append(e),this.#e?.moveElementInDOM(this.div,e,s,!1))}async render(e){const{annotations:t}=e,n=this.div;os(n,this.viewport);const s=new Map,o={data:null,layer:n,linkService:this.#s,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new fa,annotationStorage:this.#r,enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const l of t){if(l.noHTML)continue;const c=l.annotationType===ht.POPUP;if(c){const f=s.get(l.id);if(!f)continue;o.elements=f}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;o.data=l;const u=q0.create(o);if(!u.isRenderable)continue;if(!c&&l.popupRef){const f=s.get(l.popupRef);f?f.push(u):s.set(l.popupRef,[u])}const h=u.render();l.hidden&&(h.style.visibility="hidden"),await this.#i(h,l.id,o.elements),u.extraPopupElement?.popup?.renderCommentButton(),u._isEditable&&(this.#n.set(u.data.id,u),this._annotationEditorUIManager?.renderAnnotationElement(u))}this.#a()}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:this.#s,svgFactory:new fa,parent:this};for(const n of e){n.borderStyle||=dS._defaultBorderStyle,t.data=n;const s=q0.create(t);if(!s.isRenderable)continue;const o=s.render();await this.#i(o,n.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,os(t,{rotation:e.rotation}),this.#a(),t.hidden=!1}#a(){if(!this.#t)return;const e=this.div;for(const[t,n]of this.#t){const s=e.querySelector(`[data-annotation-id="${t}"]`);if(!s)continue;n.className="annotationContent";const{firstChild:o}=s;o?o.nodeName==="CANVAS"?o.replaceWith(n):o.classList.contains("annotationContent")?o.after(n):o.before(n):s.append(n);const l=this.#n.get(t);l&&(l._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(t,s.id,n),l._hasNoCanvas=!1):l.canvas=n)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}addFakeAnnotation(e){const{div:t}=this,{id:n,rotation:s}=e,o=new HD({data:{id:n,rect:e.getPDFRect(),rotation:s},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:this.#s,annotationStorage:this.#r}),l=o.render();return t.append(l),this.#e?.moveElementInDOM(t,l,l,!1),o.createOrUpdatePopup(),o}static get _defaultBorderStyle(){return Re(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:xi.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const Uc=/\r\n?|\n/g;class At extends we{#e="";#t=`${this.id}-editor`;#r=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=At.prototype,t=o=>o.isEmpty(),n=kr.TRANSLATE_SMALL,s=kr.TRANSLATE_BIG;return Re(this,"_keyboardManager",new Aa([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,s],checker:t}]]))}static _type="freetext";static _editorType=Ae.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.color=e.color||At._defaultColor||we._defaultLineColor,this.#n=e.fontSize||At._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(e,t){we.initialize(e,t);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case Me.FREETEXT_SIZE:At._defaultFontSize=t;break;case Me.FREETEXT_COLOR:At._defaultColor=t;break}}updateParams(e,t){switch(e){case Me.FREETEXT_SIZE:this.#o(t);break;case Me.FREETEXT_COLOR:this.#s(t);break}}static get defaultPropertiesToUpdate(){return[[Me.FREETEXT_SIZE,At._defaultFontSize],[Me.FREETEXT_COLOR,At._defaultColor||we._defaultLineColor]]}get propertiesToUpdate(){return[[Me.FREETEXT_SIZE,this.#n],[Me.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new ha(this),[["colorPicker",this._colorPicker]]}get colorType(){return Me.FREETEXT_COLOR}#o(e){const t=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--total-scale-factor))`,this.translate(0,-(s-this.#n)*this.parentScale),this.#n=s,this.#a()},n=this.#n;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Me.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#s(e){const t=s=>{this.color=s,this.onUpdatedColor()},n=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Me.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-At._internalPadding*e,-(At._internalPadding+this.#n)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#r=new AbortController;const e=this._uiManager.combinedSignal(this.#r);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#t),this._isDraggable=!0,this.#r?.abort(),this.#r=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#i(){const e=[];this.editorDiv.normalize();let t=null;for(const n of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&n.nodeName==="BR"||(e.push(At.#c(n)),t=n);return e.join(`
`)}#a(){const[e,t]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:s,div:o}=this,l=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",s.div.append(this.div),n=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/t):(this.width=n.height/e,this.height=n.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#e,t=this.#e=this.#i().trimEnd();if(e===t)return;const n=s=>{if(this.#e=s,!s){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#a()};this.addCommands({cmd:()=>{n(t)},undo:()=>{n(e)},mustExec:!1}),this.#a()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){At._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,t;(this._isCopy||this.annotationElementId)&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#t),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,n.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[s,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[h,f]=this.pageDimensions,[p,v]=this.pageTranslation;let b,_;switch(this.rotation){case 0:b=e+(l[0]-p)/h,_=t+this.height-(l[1]-v)/f;break;case 90:b=e+(l[0]-p)/h,_=t-(l[1]-v)/f,[c,u]=[u,-c];break;case 180:b=e-this.width+(l[0]-p)/h,_=t-(l[1]-v)/f,[c,u]=[-c,-u];break;case 270:b=e+(l[0]-p-this.height*f)/h,_=t+(l[1]-v-this.width*h)/f,[c,u]=[-u,c];break}this.setAt(b*s,_*o,c,u)}else this._moveAfterPaste(e,t);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Uc,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:n}=t;if(n.length===1&&n[0]==="text/plain")return;e.preventDefault();const s=At.#d(t.getData("text")||"").replaceAll(Uc,`
`);if(!s)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!s.includes(`
`)){l.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:u}=l,h=[],f=[];if(c.nodeType===Node.TEXT_NODE){const b=c.parentElement;if(f.push(c.nodeValue.slice(u).replaceAll(Uc,"")),b!==this.editorDiv){let _=h;for(const w of this.editorDiv.childNodes){if(w===b){_=f;continue}_.push(At.#c(w))}}h.push(c.nodeValue.slice(0,u).replaceAll(Uc,""))}else if(c===this.editorDiv){let b=h,_=0;for(const w of this.editorDiv.childNodes)_++===u&&(b=f),b.push(At.#c(w))}this.#e=`${h.join(`
`)}${s}${f.join(`
`)}`,this.#l();const p=new Range;let v=Math.sumPrecise(h.map(b=>b.length));for(const{firstChild:b}of this.editorDiv.childNodes)if(b.nodeType===Node.TEXT_NODE){const _=b.nodeValue.length;if(v<=_){p.setStart(b,v),p.setEnd(b,v);break}v-=_}o.removeAllRanges(),o.addRange(p)}#l(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const e of this.#e.split(`
`)){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#h(){return this.#e.replaceAll(""," ")}static#d(e){return e.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const e=At._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,t,n){let s=null;if(e instanceof aS){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:u,rotation:h,id:f,popupRef:p,richText:v,contentsObj:b,creationDate:_,modificationDate:w},textContent:x,textPosition:E,parent:{page:{pageNumber:A}}}=e;if(!x||x.length===0)return null;s=e={annotationType:Ae.FREETEXT,color:Array.from(c),fontSize:l,value:x.join(`
`),position:E,pageIndex:A-1,rect:u.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:p,comment:b?.str||null,richText:v,creationDate:_,modificationDate:w}}const o=await super.deserialize(e,t,n);return o.#n=e.fontSize,o.color=fe.makeHexColor(...e.color),o.#e=At.#d(e.value),o._initialData=s,e.comment&&o.setCommentData(e),o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=we._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),n=Object.assign(super.serialize(e),{color:t,fontSize:this.#n,value:this.#h()});return this.addComment(n),e?(n.isCopy=!0,n):this.annotationElementId&&!this.#f(n)?null:(n.id=this.annotationElementId,n)}#f(e){const{value:t,fontSize:n,color:s,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==t||e.fontSize!==n||e.color.some((l,c)=>l!==s[c])||e.pageIndex!==o}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(!t)return null;const{style:n}=t;n.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,n.color=this.color,t.replaceChildren();for(const s of this.#e.split(`
`)){const o=document.createElement("div");o.append(s?document.createTextNode(s):document.createElement("br")),t.append(o)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#e}}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class he{static PRECISION=1e-4;toSVGPath(){Ve("Abstract method `toSVGPath` must be implemented.")}get box(){Ve("Abstract getter `box` must be implemented.")}serialize(e,t){Ve("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,s,o,l){l||=new Float32Array(e.length);for(let c=0,u=e.length;c<u;c+=2)l[c]=t+e[c]*s,l[c+1]=n+e[c+1]*o;return l}static _rescaleAndSwap(e,t,n,s,o,l){l||=new Float32Array(e.length);for(let c=0,u=e.length;c<u;c+=2)l[c]=t+e[c+1]*s,l[c+1]=n+e[c]*o;return l}static _translate(e,t,n,s){s||=new Float32Array(e.length);for(let o=0,l=e.length;o<l;o+=2)s[o]=t+e[o],s[o+1]=n+e[o+1];return s}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,s,o){switch(o){case 90:return[1-t/n,e/s];case 180:return[1-e/n,1-t/s];case 270:return[t/n,1-e/s];default:return[e/n,t/s]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,s,o,l){return[(e+5*n)/6,(t+5*s)/6,(5*n+o)/6,(5*s+l)/6,(n+o)/2,(s+l)/2]}}class ks{#e;#t=[];#r;#n;#o=[];#s=new Float32Array(18);#i;#a;#c;#l;#h;#d;#f=[];static#g=8;static#p=2;static#u=ks.#g+ks.#p;constructor({x:e,y:t},n,s,o,l,c=0){this.#e=n,this.#d=o*s,this.#n=l,this.#s.set([NaN,NaN,NaN,NaN,e,t],6),this.#r=c,this.#l=ks.#g*s,this.#c=ks.#u*s,this.#h=s,this.#f.push(e,t)}isEmpty(){return isNaN(this.#s[8])}#m(){const e=this.#s.subarray(4,6),t=this.#s.subarray(16,18),[n,s,o,l]=this.#e;return[(this.#i+(e[0]-t[0])/2-n)/o,(this.#a+(e[1]-t[1])/2-s)/l,(this.#i+(t[0]-e[0])/2-n)/o,(this.#a+(t[1]-e[1])/2-s)/l]}add({x:e,y:t}){this.#i=e,this.#a=t;const[n,s,o,l]=this.#e;let[c,u,h,f]=this.#s.subarray(8,12);const p=e-h,v=t-f,b=Math.hypot(p,v);if(b<this.#c)return!1;const _=b-this.#l,w=_/b,x=w*p,E=w*v;let A=c,C=u;c=h,u=f,h+=x,f+=E,this.#f?.push(e,t);const k=-E/_,N=x/_,R=k*this.#d,D=N*this.#d;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([h+R,f+D],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([h-R,f-D],16),isNaN(this.#s[6])?(this.#o.length===0&&(this.#s.set([c+R,u+D],2),this.#o.push(NaN,NaN,NaN,NaN,(c+R-n)/o,(u+D-s)/l),this.#s.set([c-R,u-D],14),this.#t.push(NaN,NaN,NaN,NaN,(c-R-n)/o,(u-D-s)/l)),this.#s.set([A,C,c,u,h,f],6),!this.isEmpty()):(this.#s.set([A,C,c,u,h,f],6),Math.abs(Math.atan2(C-u,A-c)-Math.atan2(E,x))<Math.PI/2?([c,u,h,f]=this.#s.subarray(2,6),this.#o.push(NaN,NaN,NaN,NaN,((c+h)/2-n)/o,((u+f)/2-s)/l),[c,u,A,C]=this.#s.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((A+c)/2-n)/o,((C+u)/2-s)/l),!0):([A,C,c,u,h,f]=this.#s.subarray(0,6),this.#o.push(((A+5*c)/6-n)/o,((C+5*u)/6-s)/l,((5*c+h)/6-n)/o,((5*u+f)/6-s)/l,((c+h)/2-n)/o,((u+f)/2-s)/l),[h,f,c,u,A,C]=this.#s.subarray(12,18),this.#t.push(((A+5*c)/6-n)/o,((C+5*u)/6-s)/l,((5*c+h)/6-n)/o,((5*u+f)/6-s)/l,((c+h)/2-n)/o,((u+f)/2-s)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#o,t=this.#t;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#v();const n=[];n.push(`M${e[4]} ${e[5]}`);for(let s=6;s<e.length;s+=6)isNaN(e[s])?n.push(`L${e[s+4]} ${e[s+5]}`):n.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);this.#y(n);for(let s=t.length-6;s>=6;s-=6)isNaN(t[s])?n.push(`L${t[s+4]} ${t[s+5]}`):n.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);return this.#w(n),n.join(" ")}#v(){const[e,t,n,s]=this.#e,[o,l,c,u]=this.#m();return`M${(this.#s[2]-e)/n} ${(this.#s[3]-t)/s} L${(this.#s[4]-e)/n} ${(this.#s[5]-t)/s} L${o} ${l} L${c} ${u} L${(this.#s[16]-e)/n} ${(this.#s[17]-t)/s} L${(this.#s[14]-e)/n} ${(this.#s[15]-t)/s} Z`}#w(e){const t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#y(e){const[t,n,s,o]=this.#e,l=this.#s.subarray(4,6),c=this.#s.subarray(16,18),[u,h,f,p]=this.#m();e.push(`L${(l[0]-t)/s} ${(l[1]-n)/o} L${u} ${h} L${f} ${p} L${(c[0]-t)/s} ${(c[1]-n)/o}`)}newFreeDrawOutline(e,t,n,s,o,l){return new hS(e,t,n,s,o,l)}getOutlines(){const e=this.#o,t=this.#t,n=this.#s,[s,o,l,c]=this.#e,u=new Float32Array((this.#f?.length??0)+2);for(let p=0,v=u.length-2;p<v;p+=2)u[p]=(this.#f[p]-s)/l,u[p+1]=(this.#f[p+1]-o)/c;if(u[u.length-2]=(this.#i-s)/l,u[u.length-1]=(this.#a-o)/c,isNaN(n[6])&&!this.isEmpty())return this.#A(u);const h=new Float32Array(this.#o.length+24+this.#t.length);let f=e.length;for(let p=0;p<f;p+=2){if(isNaN(e[p])){h[p]=h[p+1]=NaN;continue}h[p]=e[p],h[p+1]=e[p+1]}f=this.#b(h,f);for(let p=t.length-6;p>=6;p-=6)for(let v=0;v<6;v+=2){if(isNaN(t[p+v])){h[f]=h[f+1]=NaN,f+=2;continue}h[f]=t[p+v],h[f+1]=t[p+v+1],f+=2}return this.#_(h,f),this.newFreeDrawOutline(h,u,this.#e,this.#h,this.#r,this.#n)}#A(e){const t=this.#s,[n,s,o,l]=this.#e,[c,u,h,f]=this.#m(),p=new Float32Array(36);return p.set([NaN,NaN,NaN,NaN,(t[2]-n)/o,(t[3]-s)/l,NaN,NaN,NaN,NaN,(t[4]-n)/o,(t[5]-s)/l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(t[16]-n)/o,(t[17]-s)/l,NaN,NaN,NaN,NaN,(t[14]-n)/o,(t[15]-s)/l],0),this.newFreeDrawOutline(p,e,this.#e,this.#h,this.#r,this.#n)}#_(e,t){const n=this.#t;return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6}#b(e,t){const n=this.#s.subarray(4,6),s=this.#s.subarray(16,18),[o,l,c,u]=this.#e,[h,f,p,v]=this.#m();return e.set([NaN,NaN,NaN,NaN,(n[0]-o)/c,(n[1]-l)/u,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,p,v,NaN,NaN,NaN,NaN,(s[0]-o)/c,(s[1]-l)/u],t),t+=24}}class hS extends he{#e;#t=new Float32Array(4);#r;#n;#o;#s;#i;constructor(e,t,n,s,o,l){super(),this.#i=e,this.#o=t,this.#e=n,this.#s=s,this.#r=o,this.#n=l,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#a(l);const[c,u,h,f]=this.#t;for(let p=0,v=e.length;p<v;p+=2)e[p]=(e[p]-c)/h,e[p+1]=(e[p+1]-u)/f;for(let p=0,v=t.length;p<v;p+=2)t[p]=(t[p]-c)/h,t[p+1]=(t[p+1]-u)/f}toSVGPath(){const e=[`M${this.#i[4]} ${this.#i[5]}`];for(let t=6,n=this.#i.length;t<n;t+=6){if(isNaN(this.#i[t])){e.push(`L${this.#i[t+4]} ${this.#i[t+5]}`);continue}e.push(`C${this.#i[t]} ${this.#i[t+1]} ${this.#i[t+2]} ${this.#i[t+3]} ${this.#i[t+4]} ${this.#i[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,n,s],o){const l=n-e,c=s-t;let u,h;switch(o){case 0:u=he._rescale(this.#i,e,s,l,-c),h=he._rescale(this.#o,e,s,l,-c);break;case 90:u=he._rescaleAndSwap(this.#i,e,t,l,c),h=he._rescaleAndSwap(this.#o,e,t,l,c);break;case 180:u=he._rescale(this.#i,n,t,-l,c),h=he._rescale(this.#o,n,t,-l,c);break;case 270:u=he._rescaleAndSwap(this.#i,n,s,-l,-c),h=he._rescaleAndSwap(this.#o,n,s,-l,-c);break}return{outline:Array.from(u),points:[Array.from(h)]}}#a(e){const t=this.#i;let n=t[4],s=t[5];const o=[n,s,n,s];let l=n,c=s,u=n,h=s;const f=e?Math.max:Math.min,p=new Float32Array(4);for(let b=6,_=t.length;b<_;b+=6){const w=t[b+4],x=t[b+5];isNaN(t[b])?(fe.pointBoundingBox(w,x,o),c>x?(l=w,c=x):c===x&&(l=f(l,w)),h<x?(u=w,h=x):h===x&&(u=f(u,w))):(p[0]=p[1]=1/0,p[2]=p[3]=-1/0,fe.bezierBoundingBox(n,s,...t.slice(b,b+6),p),fe.rectBoundingBox(p[0],p[1],p[2],p[3],o),c>p[1]?(l=p[0],c=p[1]):c===p[1]&&(l=f(l,p[0])),h<p[3]?(u=p[2],h=p[3]):h===p[3]&&(u=f(u,p[2]))),n=w,s=x}const v=this.#t;v[0]=o[0]-this.#r,v[1]=o[1]-this.#r,v[2]=o[2]-o[0]+2*this.#r,v[3]=o[3]-o[1]+2*this.#r,this.firstPoint=[l,c],this.lastPoint=[u,h]}get box(){return this.#t}newOutliner(e,t,n,s,o,l=0){return new ks(e,t,n,s,o,l)}getNewOutline(e,t){const[n,s,o,l]=this.#t,[c,u,h,f]=this.#e,p=o*h,v=l*f,b=n*h+c,_=s*f+u,w=this.newOutliner({x:this.#o[0]*p+b,y:this.#o[1]*v+_},this.#e,this.#s,e,this.#n,t??this.#r);for(let x=2;x<this.#o.length;x+=2)w.add({x:this.#o[x]*p+b,y:this.#o[x+1]*v+_});return w.getOutlines()}}class Ff{#e;#t;#r;#n=[];#o=[];constructor(e,t=0,n=0,s=!0){const o=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:w,y:x,width:E,height:A}of e){const C=Math.floor((w-t)/l)*l,k=Math.ceil((w+E+t)/l)*l,N=Math.floor((x-t)/l)*l,R=Math.ceil((x+A+t)/l)*l,D=[C,N,R,!0],F=[k,N,R,!1];this.#n.push(D,F),fe.rectBoundingBox(C,N,k,R,o)}const c=o[2]-o[0]+2*n,u=o[3]-o[1]+2*n,h=o[0]-n,f=o[1]-n;let p=s?-1/0:1/0,v=1/0;const b=this.#n.at(s?-1:-2),_=[b[0],b[2]];for(const w of this.#n){const[x,E,A,C]=w;!C&&s?E<v?(v=E,p=x):E===v&&(p=Math.max(p,x)):C&&!s&&(E<v?(v=E,p=x):E===v&&(p=Math.min(p,x))),w[0]=(x-h)/c,w[1]=(E-f)/u,w[2]=(A-f)/u}this.#e=new Float32Array([h,f,c,u]),this.#t=[p,v],this.#r=_}getOutlines(){this.#n.sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of this.#n)t[3]?(e.push(...this.#l(t)),this.#a(t)):(this.#c(t),e.push(...this.#l(t)));return this.#s(e)}#s(e){const t=[],n=new Set;for(const l of e){const[c,u,h]=l;t.push([c,u,l],[c,h,l])}t.sort((l,c)=>l[1]-c[1]||l[0]-c[0]);for(let l=0,c=t.length;l<c;l+=2){const u=t[l][2],h=t[l+1][2];u.push(h),h.push(u),n.add(u),n.add(h)}const s=[];let o;for(;n.size>0;){const l=n.values().next().value;let[c,u,h,f,p]=l;n.delete(l);let v=c,b=u;for(o=[c,h],s.push(o);;){let _;if(n.has(f))_=f;else if(n.has(p))_=p;else break;n.delete(_),[c,u,h,f,p]=_,v!==c&&(o.push(v,b,c,b===u?u:h),v=c),b=b===u?h:u}o.push(v,b)}return new iO(s,this.#e,this.#t,this.#r)}#i(e){const t=this.#o;let n=0,s=t.length-1;for(;n<=s;){const o=n+s>>1,l=t[o][0];if(l===e)return o;l<e?n=o+1:s=o-1}return s+1}#a([,e,t]){const n=this.#i(e);this.#o.splice(n,0,[e,t])}#c([,e,t]){const n=this.#i(e);for(let s=n;s<this.#o.length;s++){const[o,l]=this.#o[s];if(o!==e)break;if(o===e&&l===t){this.#o.splice(s,1);return}}for(let s=n-1;s>=0;s--){const[o,l]=this.#o[s];if(o!==e)break;if(o===e&&l===t){this.#o.splice(s,1);return}}}#l(e){const[t,n,s]=e,o=[[t,n,s]],l=this.#i(s);for(let c=0;c<l;c++){const[u,h]=this.#o[c];for(let f=0,p=o.length;f<p;f++){const[,v,b]=o[f];if(!(h<=v||b<=u)){if(v>=u){if(b>h)o[f][1]=h;else{if(p===1)return[];o.splice(f,1),f--,p--}continue}o[f][2]=u,b>h&&o.push([t,h,b])}}}return o}}class iO extends he{#e;#t;constructor(e,t,n,s){super(),this.#t=e,this.#e=t,this.firstPoint=n,this.lastPoint=s}toSVGPath(){const e=[];for(const t of this.#t){let[n,s]=t;e.push(`M${n} ${s}`);for(let o=2;o<t.length;o+=2){const l=t[o],c=t[o+1];l===n?(e.push(`V${c}`),s=c):c===s&&(e.push(`H${l}`),n=l)}e.push("Z")}return e.join(" ")}serialize([e,t,n,s],o){const l=[],c=n-e,u=s-t;for(const h of this.#t){const f=new Array(h.length);for(let p=0;p<h.length;p+=2)f[p]=e+h[p]*c,f[p+1]=s-h[p+1]*u;l.push(f)}return l}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}}class jf extends ks{newFreeDrawOutline(e,t,n,s,o,l){return new oO(e,t,n,s,o,l)}}class oO extends hS{newOutliner(e,t,n,s,o,l=0){return new jf(e,t,n,s,o,l)}}class ft extends we{#e=null;#t=0;#r;#n=null;#o=null;#s=null;#i=null;#a=0;#c=null;#l=null;#h=null;#d=!1;#f=null;#g=null;#p=null;#u="";#m;#v="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Ae.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=ft.prototype;return Re(this,"_keyboardManager",new Aa([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||ft._defaultColor,this.#m=e.thickness||ft._defaultThickness,this.opacity=e.opacity||ft._defaultOpacity,this.#r=e.boxes||null,this.#v=e.methodOfCreation||"",this.#u=e.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(this.#d=!0,this.#y(e),this.#S()):this.#r&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#i=e.focusNode,this.#a=e.focusOffset,this.#w(),this.#S(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#d?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#m,methodOfCreation:this.#v}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#w(){const e=new Ff(this.#r,.001);this.#l=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const t=new Ff(this.#r,.0025,.001,this._uiManager.direction==="ltr");this.#s=t.getOutlines();const{firstPoint:n}=this.#l;this.#f=[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height];const{lastPoint:s}=this.#s;this.#g=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height]}#y({highlightOutlines:e,highlightId:t,clipPathId:n}){this.#l=e;const s=1.5;if(this.#s=e.getNewOutline(this.#m/2+s,.0025),t>=0)this.#h=t,this.#n=n,this.parent.drawLayer.finalizeDraw(t,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:ft.#E(this.#l.box,(p-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:ft.#E(this.#s.box,p),path:{d:this.#s.toSVGPath()}})}const[o,l,c,u]=e.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=c,this.height=u;break;case 90:{const[p,v]=this.parentDimensions;this.x=l,this.y=1-o,this.width=c*v/p,this.height=u*p/v;break}case 180:this.x=1-o,this.y=1-l,this.width=c,this.height=u;break;case 270:{const[p,v]=this.parentDimensions;this.x=1-l,this.y=o,this.width=c*v/p,this.height=u*p/v;break}}const{firstPoint:h}=e;this.#f=[(h[0]-o)/c,(h[1]-l)/u];const{lastPoint:f}=this.#s;this.#g=[(f[0]-o)/c,(f[1]-l)/u]}static initialize(e,t){we.initialize(e,t),ft._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case Me.HIGHLIGHT_COLOR:ft._defaultColor=t;break;case Me.HIGHLIGHT_THICKNESS:ft._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#g}get commentButtonPosition(){return this.#f}updateParams(e,t){switch(e){case Me.HIGHLIGHT_COLOR:this.#A(t);break;case Me.HIGHLIGHT_THICKNESS:this.#_(t);break}}static get defaultPropertiesToUpdate(){return[[Me.HIGHLIGHT_COLOR,ft._defaultColor],[Me.HIGHLIGHT_THICKNESS,ft._defaultThickness]]}get propertiesToUpdate(){return[[Me.HIGHLIGHT_COLOR,this.color||ft._defaultColor],[Me.HIGHLIGHT_THICKNESS,this.#m||ft._defaultThickness],[Me.HIGHLIGHT_FREE,this.#d]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#o?.updateColor(this.color),super.onUpdatedColor()}#A(e){const t=(o,l)=>{this.color=o,this.opacity=l,this.onUpdatedColor()},n=this.color,s=this.opacity;this.addCommands({cmd:t.bind(this,e,ft._defaultOpacity),undo:t.bind(this,n,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Me.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)}#_(e){const t=this.#m,n=s=>{this.#m=s,this.#b(s)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Me.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#o=new pn({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#P())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#P())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#T(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#S(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#T():e&&(this.#S(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#b(e){this.#d&&(this.#y({highlightOutlines:this.#l.getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}#T(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#S(e=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#n}=e.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#d},path:{d:this.#l.toSVGPath()}},!1,!0),this.#p=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#d},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#d),this.#c&&(this.#c.style.clipPath=this.#n))}static#E([e,t,n,s],o){switch(o){case 90:return[1-t-s,e,s,n];case 180:return[1-e-n,1-t-s,n,s];case 270:return[t,1-e-n,s,n]}return[e,t,n,s]}rotate(e){const{drawLayer:t}=this.parent;let n;this.#d?(e=(e-this.rotation+360)%360,n=ft.#E(this.#l.box,e)):n=ft.#E([this.x,this.y,this.width,this.height],e),t.updateProperties(this.#h,{bbox:n,root:{"data-main-rotation":e}}),t.updateProperties(this.#p,{bbox:ft.#E(this.#s.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();this.#u&&(e.setAttribute("aria-label",this.#u),e.setAttribute("role","mark")),this.#d?e.classList.add("free"):this.div.addEventListener("keydown",this.#R.bind(this),{signal:this._uiManager._signal});const t=this.#c=document.createElement("div");return e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#n,this.setDims(this.width,this.height),Ux(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#R(e){ft._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#k(!0);break;case 1:case 3:this.#k(!1);break}}#k(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#i,this.#a)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#d||this.#k(!1))}get _mustFixPosition(){return!this.#d}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!e}}))}#P(){return this.#d?this.rotation:0}#F(){if(this.#d)return null;const[e,t]=this.pageDimensions,[n,s]=this.pageTranslation,o=this.#r,l=new Float32Array(o.length*8);let c=0;for(const{x:u,y:h,width:f,height:p}of o){const v=u*e+n,b=(1-h)*t+s;l[c]=l[c+4]=v,l[c+1]=l[c+3]=b,l[c+2]=l[c+6]=v+f*e,l[c+5]=l[c+7]=b-p*t,c+=8}return l}#D(e){return this.#l.serialize(e,this.#P())}static startHighlighting(e,t,{target:n,x:s,y:o}){const{x:l,y:c,width:u,height:h}=n.getBoundingClientRect(),f=new AbortController,p=e.combinedSignal(f),v=b=>{f.abort(),this.#j(e,b)};window.addEventListener("blur",v,{signal:p}),window.addEventListener("pointerup",v,{signal:p}),window.addEventListener("pointerdown",st,{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",gn,{signal:p}),n.addEventListener("pointermove",this.#M.bind(this,e),{signal:p}),this._freeHighlight=new jf({x:s,y:o},[l,c,u,h],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#M(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#j(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,t,n){let s=null;if(e instanceof cS){const{data:{quadPoints:_,rect:w,rotation:x,id:E,color:A,opacity:C,popupRef:k,richText:N,contentsObj:R,creationDate:D,modificationDate:F},parent:{page:{pageNumber:U}}}=e;s=e={annotationType:Ae.HIGHLIGHT,color:Array.from(A),opacity:C,quadPoints:_,boxes:null,pageIndex:U-1,rect:w.slice(0),rotation:x,annotationElementId:E,id:E,deleted:!1,popupRef:k,richText:N,comment:R?.str||null,creationDate:D,modificationDate:F}}else if(e instanceof Rp){const{data:{inkLists:_,rect:w,rotation:x,id:E,color:A,borderStyle:{rawWidth:C},popupRef:k,richText:N,contentsObj:R,creationDate:D,modificationDate:F},parent:{page:{pageNumber:U}}}=e;s=e={annotationType:Ae.HIGHLIGHT,color:Array.from(A),thickness:C,inkLists:_,boxes:null,pageIndex:U-1,rect:w.slice(0),rotation:x,annotationElementId:E,id:E,deleted:!1,popupRef:k,richText:N,comment:R?.str||null,creationDate:D,modificationDate:F}}const{color:o,quadPoints:l,inkLists:c,opacity:u}=e,h=await super.deserialize(e,t,n);h.color=fe.makeHexColor(...o),h.opacity=u||1,c&&(h.#m=e.thickness),h._initialData=s,e.comment&&h.setCommentData(e);const[f,p]=h.pageDimensions,[v,b]=h.pageTranslation;if(l){const _=h.#r=[];for(let w=0;w<l.length;w+=8)_.push({x:(l[w]-v)/f,y:1-(l[w+1]-b)/p,width:(l[w+2]-l[w])/f,height:(l[w+1]-l[w+5])/p});h.#w(),h.#S(),h.rotate(h.rotation)}else if(c){h.#d=!0;const _=c[0],w={x:_[0]-v,y:p-(_[1]-b)},x=new jf(w,[0,0,f,p],1,h.#m/2,!0,.001);for(let C=0,k=_.length;C<k;C+=2)w.x=_[C]-v,w.y=p-(_[C+1]-b),x.add(w);const{id:E,clipPathId:A}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:x.toSVGPath()}},!0,!0);h.#y({highlightOutlines:x.getOutlines(),highlightId:E,clipPathId:A}),h.#S(),h.rotate(h.parentRotation)}return h}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=we._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),n=super.serialize(e);return Object.assign(n,{color:t,opacity:this.opacity,thickness:this.#m,quadPoints:this.#F(),outlines:this.#D(n.rect)}),this.addComment(n),this.annotationElementId&&!this.#L(n)?null:(n.id=this.annotationElementId,n)}#L(e){const{color:t}=this._initialData;return this.hasEditedComment||e.color.some((n,s)=>n!==t[s])}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class fS{#e=Object.create(null);updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){this.#e[e]=t}toSVGProperties(){const e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){Ve("Not implemented")}}class _e extends we{#e=null;#t;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#r=null;static#n=null;static#o=null;static#s=NaN;static#i=null;static#a=null;static#c=NaN;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,this._addOutlines(e)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(this.#l(e),this.#f())}#l({drawOutlines:e,drawId:t,drawingOptions:n}){this.#e=e,this._drawingOptions||=n,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),t>=0?(this._drawId=t,this.parent.drawLayer.finalizeDraw(t,e.defaultProperties)):this._drawId=this.#h(e,this.parent),this.#u(e.box)}#h(e,t){const{id:n}=t.drawLayer.draw(_e._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return n}static _mergeSVGProperties(e,t){const n=new Set(Object.keys(e));for(const[s,o]of Object.entries(t))n.has(s)?Object.assign(e[s],o):e[s]=o;return e}static getDefaultDrawingOptions(e){Ve("Not implemented")}static get typesMap(){Ve("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){const n=this.typesMap.get(e);n&&this._defaultDrawingOptions.updateProperty(n,t),this._currentParent&&(_e.#r.updateProperty(n,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const n=this.constructor.typesMap.get(e);n&&this._updateProperty(e,n,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[n,s]of this.typesMap)e.push([n,t[s]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[n,s]of this.constructor.typesMap)e.push([n,t[s]]);return e}_updateProperty(e,t,n){const s=this._drawingOptions,o=s[t],l=c=>{s.updateProperty(t,c);const u=this.#e.updateProperty(t,c);u&&this.#u(u),this.parent?.drawLayer.updateProperties(this._drawId,s.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,n),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,_e._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#p()),{bbox:this.#m()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,_e._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#p()),{bbox:this.#m()}))}_onTranslating(e,t){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#m()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,_e._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#m()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#d(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#u(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#d()):e&&(this._uiManager.addShouldRescale(this),this.#f(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),t&&this.select()}#d(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#h(this.#e,e)}}#g([e,t,n,s]){const{parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[t,1-e,n*(l/o),s*(o/l)];case 180:return[1-e,1-t,n,s];case 270:return[1-t,e,n*(l/o),s*(o/l)];default:return[e,t,n,s]}}#p(){const{x:e,y:t,width:n,height:s,parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[1-t,e,n*(o/l),s*(l/o)];case 180:return[1-e,1-t,n,s];case 270:return[t,1-e,n*(o/l),s*(l/o)];default:return[e,t,n,s]}}#u(e){[this.x,this.y,this.width,this.height]=this.#g(e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#m(){const{x:e,y:t,width:n,height:s,rotation:o,parentRotation:l,parentDimensions:[c,u]}=this;switch((o*4+l)/90){case 1:return[1-t-s,e,s,n];case 2:return[1-e-n,1-t-s,n,s];case 3:return[t,1-e-n,s,n];case 4:return[e,t-n*(c/u),s*(u/c),n*(c/u)];case 5:return[1-t,e,n*(c/u),s*(u/c)];case 6:return[1-e-s*(u/c),1-t,s*(u/c),n*(c/u)];case 7:return[t-n*(c/u),1-e-s*(u/c),n*(c/u),s*(u/c)];case 8:return[e-n,t-s,n,s];case 9:return[1-t,e-n,s,n];case 10:return[1-e,1-t,n,s];case 11:return[t-s,1-e,s,n];case 12:return[e-s*(u/c),t,s*(u/c),n*(c/u)];case 13:return[1-t-n*(c/u),e-s*(u/c),n*(c/u),s*(u/c)];case 14:return[1-e,1-t-n*(c/u),s*(u/c),n*(c/u)];case 15:return[t,1-e,n*(c/u),s*(u/c)];default:return[e,t,n,s]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,_e._mergeSVGProperties({bbox:this.#m()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,t;this._isCopy&&(e=this.x,t=this.y);const n=super.render();n.classList.add("draw");const s=document.createElement("div");return n.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,t),n}static createDrawerInstance(e,t,n,s,o){Ve("Not implemented")}static startDrawing(e,t,n,s){const{target:o,offsetX:l,offsetY:c,pointerId:u,pointerType:h}=s;if(_e.#i&&_e.#i!==h)return;const{viewport:{rotation:f}}=e,{width:p,height:v}=o.getBoundingClientRect(),b=_e.#n=new AbortController,_=e.combinedSignal(b);if(_e.#s||=u,_e.#i??=h,window.addEventListener("pointerup",w=>{_e.#s===w.pointerId?this._endDraw(w):_e.#a?.delete(w.pointerId)},{signal:_}),window.addEventListener("pointercancel",w=>{_e.#s===w.pointerId?this._currentParent.endDrawingSession():_e.#a?.delete(w.pointerId)},{signal:_}),window.addEventListener("pointerdown",w=>{_e.#i===w.pointerType&&((_e.#a||=new Set).add(w.pointerId),_e.#r.isCancellable()&&(_e.#r.removeLastElement(),_e.#r.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:_}),window.addEventListener("contextmenu",gn,{signal:_}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:_}),o.addEventListener("touchmove",w=>{w.timeStamp===_e.#c&&st(w)},{signal:_}),e.toggleDrawing(),t._editorUndoBar?.hide(),_e.#r){e.drawLayer.updateProperties(this._currentDrawId,_e.#r.startNew(l,c,p,v,f));return}t.updateUIForDefaultProperties(this),_e.#r=this.createDrawerInstance(l,c,p,v,f),_e.#o=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(_e.#o.toSVGProperties(),_e.#r.defaultSVGProperties),!0,!1)}static _drawMove(e){if(_e.#c=-1,!_e.#r)return;const{offsetX:t,offsetY:n,pointerId:s}=e;if(_e.#s===s){if(_e.#a?.size>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,_e.#r.add(t,n)),_e.#c=e.timeStamp,st(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,_e.#r=null,_e.#o=null,_e.#i=null,_e.#c=NaN),_e.#n&&(_e.#n.abort(),_e.#n=null,_e.#s=NaN,_e.#a=null)}static _endDraw(e){const t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),e?.target===t.div&&t.drawLayer.updateProperties(this._currentDrawId,_e.#r.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const n=_e.#r,s=this._currentDrawId,o=n.getLastElement();t.addCommands({cmd:()=>{t.drawLayer.updateProperties(s,n.setLastElement(o))},undo:()=>{t.drawLayer.updateProperties(s,n.removeLastElement())},mustExec:!1,type:Me.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(Me.DRAW_STEP),!_e.#r.isEmpty()){const{pageDimensions:[n,s],scale:o}=t,l=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:_e.#r.getOutlines(n*o,s*o,o,this._INNER_MARGIN),drawingOptions:_e.#o,mustBeCommitted:!e});return this._cleanup(!0),l}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,n,s,o,l){Ve("Not implemented")}static async deserialize(e,t,n){const{rawDims:{pageWidth:s,pageHeight:o,pageX:l,pageY:c}}=t.viewport,u=this.deserializeDraw(l,c,s,o,this._INNER_MARGIN,e),h=await super.deserialize(e,t,n);return h.createDrawingOptions(e),h.#l({drawOutlines:u}),h.#f(),h.onScaleChanging(),h.rotate(),h}serializeDraw(e){const[t,n]=this.pageTranslation,[s,o]=this.pageDimensions;return this.#e.serialize([t,n,s,o],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class aO{#e=new Float64Array(6);#t;#r;#n;#o;#s;#i="";#a=0;#c=new ka;#l;#h;constructor(e,t,n,s,o,l){this.#l=n,this.#h=s,this.#n=o,this.#o=l,[e,t]=this.#d(e,t);const c=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#s=[e,t],this.#r=[{line:c,points:this.#s}],this.#e.set(c,0)}updateProperty(e,t){e==="stroke-width"&&(this.#o=t)}#d(e,t){return he._normalizePoint(e,t,this.#l,this.#h,this.#n)}isEmpty(){return!this.#r||this.#r.length===0}isCancellable(){return this.#s.length<=10}add(e,t){[e,t]=this.#d(e,t);const[n,s,o,l]=this.#e.subarray(2,6),c=e-o,u=t-l;return Math.hypot(this.#l*c,this.#h*u)<=2?null:(this.#s.push(e,t),isNaN(n)?(this.#e.set([o,l,e,t],2),this.#t.push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([n,s,o,l,e,t],0),this.#t.push(...he.createBezierPoints(n,s,o,l,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(this.#s.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,s,o){this.#l=n,this.#h=s,this.#n=o,[e,t]=this.#d(e,t);const l=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#s=[e,t];const c=this.#r.at(-1);return c&&(c.line=new Float32Array(c.line),c.points=new Float32Array(c.points)),this.#r.push({line:l,points:this.#s}),this.#e.set(l,0),this.#a=0,this.toSVGPath(),null}getLastElement(){return this.#r.at(-1)}setLastElement(e){return this.#r?(this.#r.push(e),this.#t=e.line,this.#s=e.points,this.#a=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(e)}removeLastElement(){if(!this.#r)return this.#c.removeLastElement();this.#r.pop(),this.#i="";for(let e=0,t=this.#r.length;e<t;e++){const{line:n,points:s}=this.#r[e];this.#t=n,this.#s=s,this.#a=0,this.toSVGPath()}return{path:{d:this.#i}}}toSVGPath(){const e=he.svgRound(this.#t[4]),t=he.svgRound(this.#t[5]);if(this.#s.length===2)return this.#i=`${this.#i} M ${e} ${t} Z`,this.#i;if(this.#s.length<=6){const s=this.#i.lastIndexOf("M");this.#i=`${this.#i.slice(0,s)} M ${e} ${t}`,this.#a=6}if(this.#s.length===4){const s=he.svgRound(this.#t[10]),o=he.svgRound(this.#t[11]);return this.#i=`${this.#i} L ${s} ${o}`,this.#a=12,this.#i}const n=[];this.#a===0&&(n.push(`M ${e} ${t}`),this.#a=6);for(let s=this.#a,o=this.#t.length;s<o;s+=6){const[l,c,u,h,f,p]=this.#t.slice(s,s+6).map(he.svgRound);n.push(`C${l} ${c} ${u} ${h} ${f} ${p}`)}return this.#i+=n.join(" "),this.#a=this.#t.length,this.#i}getOutlines(e,t,n,s){const o=this.#r.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#c.build(this.#r,e,t,n,this.#n,this.#o,s),this.#e=null,this.#t=null,this.#r=null,this.#i=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class ka extends he{#e;#t=0;#r;#n;#o;#s;#i;#a;#c;build(e,t,n,s,o,l,c){this.#o=t,this.#s=n,this.#i=s,this.#a=o,this.#c=l,this.#r=c??0,this.#n=e,this.#d()}get thickness(){return this.#c}setLastElement(e){return this.#n.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of this.#n){if(e.push(`M${he.svgRound(t[4])} ${he.svgRound(t[5])}`),t.length===6){e.push("Z");continue}if(t.length===12&&isNaN(t[6])){e.push(`L${he.svgRound(t[10])} ${he.svgRound(t[11])}`);continue}for(let n=6,s=t.length;n<s;n+=6){const[o,l,c,u,h,f]=t.subarray(n,n+6).map(he.svgRound);e.push(`C${o} ${l} ${c} ${u} ${h} ${f}`)}}return e.join("")}serialize([e,t,n,s],o){const l=[],c=[],[u,h,f,p]=this.#h();let v,b,_,w,x,E,A,C,k;switch(this.#a){case 0:k=he._rescale,v=e,b=t+s,_=n,w=-s,x=e+u*n,E=t+(1-h-p)*s,A=e+(u+f)*n,C=t+(1-h)*s;break;case 90:k=he._rescaleAndSwap,v=e,b=t,_=n,w=s,x=e+h*n,E=t+u*s,A=e+(h+p)*n,C=t+(u+f)*s;break;case 180:k=he._rescale,v=e+n,b=t,_=-n,w=s,x=e+(1-u-f)*n,E=t+h*s,A=e+(1-u)*n,C=t+(h+p)*s;break;case 270:k=he._rescaleAndSwap,v=e+n,b=t+s,_=-n,w=-s,x=e+(1-h-p)*n,E=t+(1-u-f)*s,A=e+(1-h)*n,C=t+(1-u)*s;break}for(const{line:N,points:R}of this.#n)l.push(k(N,v,b,_,w,o?new Array(N.length):null)),c.push(k(R,v,b,_,w,o?new Array(R.length):null));return{lines:l,points:c,rect:[x,E,A,C]}}static deserialize(e,t,n,s,o,{paths:{lines:l,points:c},rotation:u,thickness:h}){const f=[];let p,v,b,_,w;switch(u){case 0:w=he._rescale,p=-e/n,v=t/s+1,b=1/n,_=-1/s;break;case 90:w=he._rescaleAndSwap,p=-t/s,v=-e/n,b=1/s,_=1/n;break;case 180:w=he._rescale,p=e/n+1,v=-t/s,b=-1/n,_=1/s;break;case 270:w=he._rescaleAndSwap,p=t/s+1,v=e/n+1,b=-1/s,_=-1/n;break}if(!l){l=[];for(const E of c){const A=E.length;if(A===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1]]));continue}if(A===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1],NaN,NaN,NaN,NaN,E[2],E[3]]));continue}const C=new Float32Array(3*(A-2));l.push(C);let[k,N,R,D]=E.subarray(0,4);C.set([NaN,NaN,NaN,NaN,k,N],0);for(let F=4;F<A;F+=2){const U=E[F],q=E[F+1];C.set(he.createBezierPoints(k,N,R,D,U,q),(F-2)*3),[k,N,R,D]=[R,D,U,q]}}}for(let E=0,A=l.length;E<A;E++)f.push({line:w(l[E].map(C=>C??NaN),p,v,b,_),points:w(c[E].map(C=>C??NaN),p,v,b,_)});const x=new this.prototype.constructor;return x.build(f,n,s,1,u,h,o),x}#l(e=this.#c){const t=this.#r+e/2*this.#i;return this.#a%180===0?[t/this.#o,t/this.#s]:[t/this.#s,t/this.#o]}#h(){const[e,t,n,s]=this.#e,[o,l]=this.#l(0);return[e+o,t+l,n-2*o,s-2*l]}#d(){const e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:s}of this.#n){if(s.length<=12){for(let c=4,u=s.length;c<u;c+=6)fe.pointBoundingBox(s[c],s[c+1],e);continue}let o=s[4],l=s[5];for(let c=6,u=s.length;c<u;c+=6){const[h,f,p,v,b,_]=s.subarray(c,c+6);fe.bezierBoundingBox(o,l,h,f,p,v,b,_,e),o=b,l=_}}const[t,n]=this.#l();e[0]=Ft(e[0]-t,0,1),e[1]=Ft(e[1]-n,0,1),e[2]=Ft(e[2]+t,0,1),e[3]=Ft(e[3]+n,0,1),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,t){return e==="stroke-width"?this.#f(t):null}#f(e){const[t,n]=this.#l();this.#c=e;const[s,o]=this.#l(),[l,c]=[s-t,o-n],u=this.#e;return u[0]-=l,u[1]-=c,u[2]+=2*l,u[3]+=2*c,u}updateParentDimensions([e,t],n){const[s,o]=this.#l();this.#o=e,this.#s=t,this.#i=n;const[l,c]=this.#l(),u=l-s,h=c-o,f=this.#e;return f[0]-=u,f[1]-=h,f[2]+=2*u,f[3]+=2*h,f}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(he.svgRound).join(" ")}get defaultProperties(){const[e,t]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${he.svgRound(e)} ${he.svgRound(t)}`}}}get rotationTransform(){const[,,e,t]=this.#e;let n=0,s=0,o=0,l=0,c=0,u=0;switch(this.#t){case 90:s=t/e,o=-e/t,c=e;break;case 180:n=-1,l=-1,c=e,u=t;break;case 270:s=-t/e,o=e/t,u=t;break;default:return""}return`matrix(${n} ${s} ${o} ${l} ${he.svgRound(c)} ${he.svgRound(u)})`}getPathResizingSVGProperties([e,t,n,s]){const[o,l]=this.#l(),[c,u,h,f]=this.#e;if(Math.abs(h-o)<=he.PRECISION||Math.abs(f-l)<=he.PRECISION){const w=e+n/2-(c+h/2),x=t+s/2-(u+f/2);return{path:{"transform-origin":`${he.svgRound(e)} ${he.svgRound(t)}`,transform:`${this.rotationTransform} translate(${w} ${x})`}}}const p=(n-2*o)/(h-2*o),v=(s-2*l)/(f-2*l),b=h/n,_=f/s;return{path:{"transform-origin":`${he.svgRound(c)} ${he.svgRound(u)}`,transform:`${this.rotationTransform} scale(${b} ${_}) translate(${he.svgRound(o)} ${he.svgRound(l)}) scale(${p} ${v}) translate(${he.svgRound(-o)} ${he.svgRound(-l)})`}}}getPathResizedSVGProperties([e,t,n,s]){const[o,l]=this.#l(),c=this.#e,[u,h,f,p]=c;if(c[0]=e,c[1]=t,c[2]=n,c[3]=s,Math.abs(f-o)<=he.PRECISION||Math.abs(p-l)<=he.PRECISION){const x=e+n/2-(u+f/2),E=t+s/2-(h+p/2);for(const{line:A,points:C}of this.#n)he._translate(A,x,E,A),he._translate(C,x,E,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${he.svgRound(e)} ${he.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const v=(n-2*o)/(f-2*o),b=(s-2*l)/(p-2*l),_=-v*(u+o)+e+o,w=-b*(h+l)+t+l;if(v!==1||b!==1||_!==0||w!==0)for(const{line:x,points:E}of this.#n)he._rescale(x,_,w,v,b,x),he._rescale(E,_,w,v,b,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${he.svgRound(e)} ${he.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,t],n){const[s,o]=n,l=this.#e,c=e-l[0],u=t-l[1];if(this.#o===s&&this.#s===o)for(const{line:h,points:f}of this.#n)he._translate(h,c,u,h),he._translate(f,c,u,f);else{const h=this.#o/s,f=this.#s/o;this.#o=s,this.#s=o;for(const{line:p,points:v}of this.#n)he._rescale(p,c,u,h,f,p),he._rescale(v,c,u,h,f,v);l[2]*=h,l[3]*=f}return l[0]=e,l[1]=t,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${he.svgRound(e)} ${he.svgRound(t)}`}}}get defaultSVGProperties(){const e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${he.svgRound(e[0])} ${he.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}class Ru extends fS{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:we._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??=this["stroke-width"],t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new Ru(this._viewParameters);return e.updateAll(this),e}}class Dp extends _e{static _type="ink";static _editorType=Ae.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,t){we.initialize(e,t),this._defaultDrawingOptions=new Ru(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return Re(this,"typesMap",new Map([[Me.INK_THICKNESS,"stroke-width"],[Me.INK_COLOR,"stroke"],[Me.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,n,s,o){return new aO(e,t,n,s,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,n,s,o,l){return ka.deserialize(e,t,n,s,o,l)}static async deserialize(e,t,n){let s=null;if(e instanceof Rp){const{data:{inkLists:l,rect:c,rotation:u,id:h,color:f,opacity:p,borderStyle:{rawWidth:v},popupRef:b,richText:_,contentsObj:w,creationDate:x,modificationDate:E},parent:{page:{pageNumber:A}}}=e;s=e={annotationType:Ae.INK,color:Array.from(f),thickness:v,opacity:p,paths:{points:l},boxes:null,pageIndex:A-1,rect:c.slice(0),rotation:u,annotationElementId:h,id:h,deleted:!1,popupRef:b,richText:_,comment:w?.str||null,creationDate:x,modificationDate:E}}const o=await super.deserialize(e,t,n);return o._initialData=s,e.comment&&o.setCommentData(e),o}get toolbarButtons(){return this._colorPicker||=new ha(this),[["colorPicker",this._colorPicker]]}get colorType(){return Me.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:n}=this;t.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:t,opacity:n}){this._drawingOptions=Dp.getDefaultDrawingOptions({stroke:fe.makeHexColor(...e),"stroke-width":t,"stroke-opacity":n})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:n}=this.serializeDraw(e),{_drawingOptions:{stroke:s,"stroke-opacity":o,"stroke-width":l}}=this,c=Object.assign(super.serialize(e),{color:we._colorManager.convert(s),opacity:o,thickness:l,paths:{lines:t,points:n}});return this.addComment(c),e?(c.isCopy=!0,c):this.annotationElementId&&!this.#e(c)?null:(c.id=this.annotationElementId,c)}#e(e){const{color:t,thickness:n,opacity:s,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((l,c)=>l!==t[c])||e.thickness!==n||e.opacity!==s||e.pageIndex!==o}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:t,rect:n}=this.serializeDraw(!1);return e.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:t,popup:this.comment}),null}}class Bf extends ka{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const zc=8,qo=3;class Cs{static#e={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#t(e,t,n,s){return n-=e,s-=t,n===0?s>0?0:4:n===1?s+6:2-s}static#r=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(e,t,n,s,o,l,c){const u=this.#t(n,s,o,l);for(let h=0;h<8;h++){const f=(-h+u-c+16)%8,p=this.#r[2*f],v=this.#r[2*f+1];if(e[(n+p)*t+(s+v)]!==0)return f}return-1}static#o(e,t,n,s,o,l,c){const u=this.#t(n,s,o,l);for(let h=0;h<8;h++){const f=(h+u+c+16)%8,p=this.#r[2*f],v=this.#r[2*f+1];if(e[(n+p)*t+(s+v)]!==0)return f}return-1}static#s(e,t,n,s){const o=e.length,l=new Int32Array(o);for(let f=0;f<o;f++)l[f]=e[f]<=s?1:0;for(let f=1;f<n-1;f++)l[f*t]=l[f*t+t-1]=0;for(let f=0;f<t;f++)l[f]=l[t*n-1-f]=0;let c=1,u;const h=[];for(let f=1;f<n-1;f++){u=1;for(let p=1;p<t-1;p++){const v=f*t+p,b=l[v];if(b===0)continue;let _=f,w=p;if(b===1&&l[v-1]===0)c+=1,w-=1;else if(b>=1&&l[v+1]===0)c+=1,w+=1,b>1&&(u=b);else{b!==1&&(u=Math.abs(b));continue}const x=[p,f],E=w===p+1,A={isHole:E,points:x,id:c,parent:0};h.push(A);let C;for(const Y of h)if(Y.id===u){C=Y;break}C?C.isHole?A.parent=E?C.parent:u:A.parent=E?u:C.parent:A.parent=E?u:0;const k=this.#n(l,t,f,p,_,w,0);if(k===-1){l[v]=-c,l[v]!==1&&(u=Math.abs(l[v]));continue}let N=this.#r[2*k],R=this.#r[2*k+1];const D=f+N,F=p+R;_=D,w=F;let U=f,q=p;for(;;){const Y=this.#o(l,t,U,q,_,w,1);N=this.#r[2*Y],R=this.#r[2*Y+1];const ne=U+N,oe=q+R;x.push(oe,ne);const te=U*t+q;if(l[te+1]===0?l[te]=-c:l[te]===1&&(l[te]=c),ne===f&&oe===p&&U===D&&q===F){l[v]!==1&&(u=Math.abs(l[v]));break}else _=U,w=q,U=ne,q=oe}}}return h}static#i(e,t,n,s){if(n-t<=4){for(let D=t;D<n-2;D+=2)s.push(e[D],e[D+1]);return}const o=e[t],l=e[t+1],c=e[n-4]-o,u=e[n-3]-l,h=Math.hypot(c,u),f=c/h,p=u/h,v=f*l-p*o,b=u/c,_=1/h,w=Math.atan(b),x=Math.cos(w),E=Math.sin(w),A=_*(Math.abs(x)+Math.abs(E)),C=_*(1-A+A**2),k=Math.max(Math.atan(Math.abs(E+x)*C),Math.atan(Math.abs(E-x)*C));let N=0,R=t;for(let D=t+2;D<n-2;D+=2){const F=Math.abs(v-f*e[D+1]+p*e[D]);F>N&&(R=D,N=F)}N>(h*k)**2?(this.#i(e,t,R+2,s),this.#i(e,R,n,s)):s.push(o,l)}static#a(e){const t=[],n=e.length;return this.#i(e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t}static#c(e,t,n,s,o,l){const c=new Float32Array(l**2),u=-2*s**2,h=l>>1;for(let w=0;w<l;w++){const x=(w-h)**2;for(let E=0;E<l;E++)c[w*l+E]=Math.exp((x+(E-h)**2)/u)}const f=new Float32Array(256),p=-2*o**2;for(let w=0;w<256;w++)f[w]=Math.exp(w**2/p);const v=e.length,b=new Uint8Array(v),_=new Uint32Array(256);for(let w=0;w<n;w++)for(let x=0;x<t;x++){const E=w*t+x,A=e[E];let C=0,k=0;for(let R=0;R<l;R++){const D=w+R-h;if(!(D<0||D>=n))for(let F=0;F<l;F++){const U=x+F-h;if(U<0||U>=t)continue;const q=e[D*t+U],Y=c[R*l+F]*f[Math.abs(q-A)];C+=q*Y,k+=Y}}const N=b[E]=Math.round(C/k);_[N]++}return[b,_]}static#l(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t}static#h(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let s=-1/0,o=1/0;for(let c=0,u=n.length;c<u;c++){const h=n[c]=e[c<<2];s=Math.max(s,h),o=Math.min(o,h)}const l=255/(s-o);for(let c=0,u=n.length;c<u;c++)n[c]=(n[c]-o)*l;return n}static#d(e){let t,n=-1/0,s=-1/0;const o=e.findIndex(u=>u!==0);let l=o,c=o;for(t=o;t<256;t++){const u=e[t];u>n&&(t-l>s&&(s=t-l,c=t-1),n=u,l=t)}for(t=c-1;t>=0&&!(e[t]>e[t+1]);t--);return t}static#f(e){const t=e,{width:n,height:s}=e,{maxDim:o}=this.#e;let l=n,c=s;if(n>o||s>o){let v=n,b=s,_=Math.log2(Math.max(n,s)/o);const w=Math.floor(_);_=_===w?w-1:w;for(let E=0;E<_;E++){l=Math.ceil(v/2),c=Math.ceil(b/2);const A=new OffscreenCanvas(l,c);A.getContext("2d").drawImage(e,0,0,v,b,0,0,l,c),v=l,b=c,e!==t&&e.close(),e=A.transferToImageBitmap()}const x=Math.min(o/l,o/c);l=Math.round(l*x),c=Math.round(c*x)}const h=new OffscreenCanvas(l,c).getContext("2d",{willReadFrequently:!0});h.fillStyle="white",h.fillRect(0,0,l,c),h.filter="grayscale(1)",h.drawImage(e,0,0,e.width,e.height,0,0,l,c);const f=h.getImageData(0,0,l,c).data;return[this.#h(f),l,c]}static extractContoursFromText(e,{fontFamily:t,fontStyle:n,fontWeight:s},o,l,c,u){let h=new OffscreenCanvas(1,1),f=h.getContext("2d",{alpha:!1});const p=200,v=f.font=`${n} ${s} ${p}px ${t}`,{actualBoundingBoxLeft:b,actualBoundingBoxRight:_,actualBoundingBoxAscent:w,actualBoundingBoxDescent:x,fontBoundingBoxAscent:E,fontBoundingBoxDescent:A,width:C}=f.measureText(e),k=1.5,N=Math.ceil(Math.max(Math.abs(b)+Math.abs(_)||0,C)*k),R=Math.ceil(Math.max(Math.abs(w)+Math.abs(x)||p,Math.abs(E)+Math.abs(A)||p)*k);h=new OffscreenCanvas(N,R),f=h.getContext("2d",{alpha:!0,willReadFrequently:!0}),f.font=v,f.filter="grayscale(1)",f.fillStyle="white",f.fillRect(0,0,N,R),f.fillStyle="black",f.fillText(e,N*(k-1)/2,R*(3-k)/2);const D=this.#h(f.getImageData(0,0,N,R).data),F=this.#l(D),U=this.#d(F),q=this.#s(D,N,R,U);return this.processDrawnLines({lines:{curves:q,width:N,height:R},pageWidth:o,pageHeight:l,rotation:c,innerMargin:u,mustSmooth:!0,areContours:!0})}static process(e,t,n,s,o){const[l,c,u]=this.#f(e),[h,f]=this.#c(l,c,u,Math.hypot(c,u)*this.#e.sigmaSFactor,this.#e.sigmaR,this.#e.kernelSize),p=this.#d(f),v=this.#s(h,c,u,p);return this.processDrawnLines({lines:{curves:v,width:c,height:u},pageWidth:t,pageHeight:n,rotation:s,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:s,innerMargin:o,mustSmooth:l,areContours:c}){s%180!==0&&([t,n]=[n,t]);const{curves:u,width:h,height:f}=e,p=e.thickness??0,v=[],b=Math.min(t/h,n/f),_=b/t,w=b/n,x=[];for(const{points:A}of u){const C=l?this.#a(A):A;if(!C)continue;x.push(C);const k=C.length,N=new Float32Array(k),R=new Float32Array(3*(k===2?2:k-2));if(v.push({line:R,points:N}),k===2){N[0]=C[0]*_,N[1]=C[1]*w,R.set([NaN,NaN,NaN,NaN,N[0],N[1]],0);continue}let[D,F,U,q]=C;D*=_,F*=w,U*=_,q*=w,N.set([D,F,U,q],0),R.set([NaN,NaN,NaN,NaN,D,F],0);for(let Y=4;Y<k;Y+=2){const ne=N[Y]=C[Y]*_,oe=N[Y+1]=C[Y+1]*w;R.set(he.createBezierPoints(D,F,U,q,ne,oe),(Y-2)*3),[D,F,U,q]=[U,q,ne,oe]}}if(v.length===0)return null;const E=c?new Bf:new ka;return E.build(v,t,n,1,s,c?0:p,o),{outline:E,newCurves:x,areContours:c,thickness:p,width:h,height:f}}static async compressSignature({outlines:e,areContours:t,thickness:n,width:s,height:o}){let l=1/0,c=-1/0,u=0;for(const C of e){u+=C.length;for(let k=2,N=C.length;k<N;k++){const R=C[k]-C[k-2];l=Math.min(l,R),c=Math.max(c,R)}}let h;l>=-128&&c<=127?h=Int8Array:l>=-32768&&c<=32767?h=Int16Array:h=Int32Array;const f=e.length,p=zc+qo*f,v=new Uint32Array(p);let b=0;v[b++]=p*Uint32Array.BYTES_PER_ELEMENT+(u-2*f)*h.BYTES_PER_ELEMENT,v[b++]=0,v[b++]=s,v[b++]=o,v[b++]=t?0:1,v[b++]=Math.max(0,Math.floor(n??0)),v[b++]=f,v[b++]=h.BYTES_PER_ELEMENT;for(const C of e)v[b++]=C.length-2,v[b++]=C[0],v[b++]=C[1];const _=new CompressionStream("deflate-raw"),w=_.writable.getWriter();await w.ready,w.write(v);const x=h.prototype.constructor;for(const C of e){const k=new x(C.length-2);for(let N=2,R=C.length;N<R;N++)k[N-2]=C[N]-C[N-2];w.write(k)}w.close();const E=await new Response(_.readable).arrayBuffer(),A=new Uint8Array(E);return Ox(A)}static async decompressSignature(e){try{const t=DN(e),{readable:n,writable:s}=new DecompressionStream("deflate-raw"),o=s.getWriter();await o.ready,o.write(t).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let l=null,c=0;for await(const C of n)l||=new Uint8Array(new Uint32Array(C.buffer,0,4)[0]),l.set(C,c),c+=C.length;const u=new Uint32Array(l.buffer,0,l.length>>2),h=u[1];if(h!==0)throw new Error(`Invalid version: ${h}`);const f=u[2],p=u[3],v=u[4]===0,b=u[5],_=u[6],w=u[7],x=[],E=(zc+qo*_)*Uint32Array.BYTES_PER_ELEMENT;let A;switch(w){case Int8Array.BYTES_PER_ELEMENT:A=new Int8Array(l.buffer,E);break;case Int16Array.BYTES_PER_ELEMENT:A=new Int16Array(l.buffer,E);break;case Int32Array.BYTES_PER_ELEMENT:A=new Int32Array(l.buffer,E);break}c=0;for(let C=0;C<_;C++){const k=u[qo*C+zc],N=new Float32Array(k+2);x.push(N);for(let R=0;R<qo-1;R++)N[R]=u[qo*C+zc+R+1];for(let R=0;R<k;R++)N[R+2]=N[R]+A[c++]}return{areContours:v,thickness:b,outlines:x,width:f,height:p}}catch(t){return Ce(`decompressSignature: ${t}`),null}}}class Op extends fS{constructor(){super(),super.updateProperties({fill:we._defaultLineColor,"stroke-width":0})}clone(){const e=new Op;return e.updateAll(this),e}}class Mp extends Ru{constructor(e){super(e),super.updateProperties({stroke:we._defaultLineColor,"stroke-width":1})}clone(){const e=new Mp(this._viewParameters);return e.updateAll(this),e}}class er extends _e{#e=!1;#t=null;#r=null;#n=null;static _type="signature";static _editorType=Ae.SIGNATURE;static _defaultDrawingOptions=null;constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#r=e.signatureData||null,this.#t=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,t){we.initialize(e,t),this._defaultDrawingOptions=new Op,this._defaultDrawnSignatureOptions=new Mp(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!1}static get typesMap(){return Re(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#t}}static computeTelemetryFinalData(e){const t=e.get("hasDescription");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,t;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,e=this.x,t=this.y),super.render(),this._drawId===null)if(this.#r){const{lines:s,mustSmooth:o,areContours:l,description:c,uuid:u,heightInPage:h}=this.#r,{rawDims:{pageWidth:f,pageHeight:p},rotation:v}=this.parent.viewport,b=Cs.processDrawnLines({lines:s,pageWidth:f,pageHeight:p,rotation:v,innerMargin:er._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(b,h,c,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#t||""}));return n&&(this._isCopy=!0,this._moveAfterPaste(e,t)),this.div}setUuid(e){this.#n=e,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#t}set description(e){this.#t=e,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(t=>{t?.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:t,thickness:n,width:s,height:o}=this.#r,l=Math.max(s,o),c=Cs.processDrawnLines({lines:{curves:e.map(u=>({points:u})),thickness:n,width:s,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:t});return{areContours:t,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,t,n,s){const{x:o,y:l}=this,{outline:c}=this.#r=e;this.#e=c instanceof Bf,this.description=n;let u;this.#e?u=er.getDefaultDrawingOptions():(u=er._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:u});const[,h]=this.pageDimensions;let f=t/h;f=f>=1?.5:f,this.width*=f/this.height,this.width>=1&&(f*=.9/this.width,this.width=.9),this.height=f,this.setDims(),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(s),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!s,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:s}=this.parent.viewport;return Cs.process(e,t,n,s,er._INNER_MARGIN)}getFromText(e,t){const{rawDims:{pageWidth:n,pageHeight:s},rotation:o}=this.parent.viewport;return Cs.extractContoursFromText(e,t,n,s,o,er._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:s}=this.parent.viewport;return Cs.processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:s,innerMargin:er._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:t}){e?this._drawingOptions=er.getDefaultDrawingOptions():(this._drawingOptions=er._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":t}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:t,points:n}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":s}}=this,o=Object.assign(super.serialize(e),{isSignature:!0,areContours:this.#e,color:[0,0,0],thickness:this.#e?0:s});return this.addComment(o),e?(o.paths={lines:t,points:n},o.uuid=this.#n,o.isCopy=!0):o.lines=t,this.#t&&(o.accessibilityData={type:"Figure",alt:this.#t}),o}static deserializeDraw(e,t,n,s,o,l){return l.areContours?Bf.deserialize(e,t,n,s,o,l):ka.deserialize(e,t,n,s,o,l)}static async deserialize(e,t,n){const s=await super.deserialize(e,t,n);return s.#e=e.areContours,s.description=e.accessibilityData?.alt||"",s.#n=e.uuid,s}}class lO extends we{#e=null;#t=null;#r=null;#n=null;#o=null;#s="";#i=null;#a=!1;#c=null;#l=!1;#h=!1;static _type="stamp";static _editorType=Ae.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#n=e.bitmapUrl,this.#o=e.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,t){we.initialize(e,t)}static isHandlingMimeForPasting(e){return lu.includes(e)}static paste(e,t){t.pasteEditor({mode:Ae.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#d(e,t=!1){if(!e){this.remove();return}this.#e=e.bitmap,t||(this.#t=e.id,this.#l=e.isSvg),e.file&&(this.#s=e.file.name),this.#p()}#f(){if(this.#r=null,this._uiManager.enableWaiting(!1),!!this.#i){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,t=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:o,height:l}=e||this.copyCanvas(null,null,!0).imageData,c=await n.guess({name:"altText",request:{data:s,width:o,height:l,channels:s.length/(o*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),t&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}#g(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(n=>this.#d(n,!0)).finally(()=>this.#f());return}if(this.#n){const n=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#r=this._uiManager.imageManager.getFromUrl(n).then(s=>this.#d(s)).finally(()=>this.#f());return}if(this.#o){const n=this.#o;this.#o=null,this._uiManager.enableWaiting(!0),this.#r=this._uiManager.imageManager.getFromFile(n).then(s=>this.#d(s)).finally(()=>this.#f());return}const e=document.createElement("input");e.type="file",e.accept=lu.join(",");const t=this._uiManager._signal;this.#r=new Promise(n=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#d(s)}n()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),n()},{signal:t})}).finally(()=>this.#f()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#i?.remove(),this.#i=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#g();return}super.rebuild(),this.div!==null&&(this.#t&&this.#i===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#r||this.#e||this.#n||this.#o||this.#t||this.#a)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;return this._isCopy&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#a||(this.#e?this.#p():this.#g()),this._isCopy&&this._moveAfterPaste(e,t),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,t){const{id:n,bitmap:s}=this._uiManager.imageManager.getFromCanvas(e,t);t.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(this.#t=n,s&&(this.#e=s),this.#a=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const e=200;this.#c=setTimeout(()=>{this.#c=null,this.#m()},e)}#p(){const{div:e}=this;let{width:t,height:n}=this.#e;const[s,o]=this.pageDimensions,l=.75;if(this.width)t=this.width*s,n=this.height*o;else if(t>l*s||n>l*o){const u=Math.min(l*s/t,l*o/n);t*=u,n*=u}this._uiManager.enableWaiting(!1);const c=this.#i=document.createElement("canvas");c.setAttribute("role","img"),this.addContainer(c),this.width=t/s,this.height=n/o,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#m(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&this.div.setAttribute("aria-description",this.#s),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(e,t,n=!1){e||(e=224);const{width:s,height:o}=this.#e,l=new zn;let c=this.#e,u=s,h=o,f=null;if(t){if(s>t||o>t){const R=Math.min(t/s,t/o);u=Math.floor(s*R),h=Math.floor(o*R)}f=document.createElement("canvas");const v=f.width=Math.ceil(u*l.sx),b=f.height=Math.ceil(h*l.sy);this.#l||(c=this.#u(v,b));const _=f.getContext("2d");_.filter=this._uiManager.hcmFilter;let w="white",x="#cfcfd8";this._uiManager.hcmFilter!=="none"?x="black":LN.isDarkMode&&(w="#8f8f9d",x="#42414d");const E=15,A=E*l.sx,C=E*l.sy,k=new OffscreenCanvas(A*2,C*2),N=k.getContext("2d");N.fillStyle=w,N.fillRect(0,0,A*2,C*2),N.fillStyle=x,N.fillRect(0,0,A,C),N.fillRect(A,C,A,C),_.fillStyle=_.createPattern(k,"repeat"),_.fillRect(0,0,v,b),_.drawImage(c,0,0,c.width,c.height,0,0,v,b)}let p=null;if(n){let v,b;if(l.symmetric&&c.width<e&&c.height<e)v=c.width,b=c.height;else if(c=this.#e,s>e||o>e){const x=Math.min(e/s,e/o);v=Math.floor(s*x),b=Math.floor(o*x),this.#l||(c=this.#u(v,b))}const w=new OffscreenCanvas(v,b).getContext("2d",{willReadFrequently:!0});w.drawImage(c,0,0,c.width,c.height,0,0,v,b),p={width:v,height:b,data:w.getImageData(0,0,v,b).data}}return{canvas:f,width:u,height:h,imageData:p}}#u(e,t){const{width:n,height:s}=this.#e;let o=n,l=s,c=this.#e;for(;o>2*e||l>2*t;){const u=o,h=l;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*t&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const f=new OffscreenCanvas(o,l);f.getContext("2d").drawImage(c,0,0,u,h,0,0,o,l),c=f.transferToImageBitmap()}return c}#m(){const[e,t]=this.parentDimensions,{width:n,height:s}=this,o=new zn,l=Math.ceil(n*e*o.sx),c=Math.ceil(s*t*o.sy),u=this.#i;if(!u||u.width===l&&u.height===c)return;u.width=l,u.height=c;const h=this.#l?this.#e:this.#u(l,c),f=u.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(h,0,0,h.width,h.height,0,0,l,c)}#v(e){if(e){if(this.#l){const s=this._uiManager.imageManager.getSvgUrl(this.#t);if(s)return s}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#e,t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#l){const[t,n]=this.pageDimensions,s=Math.round(this.width*t*Ls.PDF_TO_CSS_UNITS),o=Math.round(this.height*n*Ls.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(s,o);return l.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,s,o),l.transferToImageBitmap()}return structuredClone(this.#e)}static async deserialize(e,t,n){let s=null,o=!1;if(e instanceof uS){const{data:{rect:w,rotation:x,id:E,structParent:A,popupRef:C,richText:k,contentsObj:N,creationDate:R,modificationDate:D},container:F,parent:{page:{pageNumber:U}},canvas:q}=e;let Y,ne;q?(delete e.canvas,{id:Y,bitmap:ne}=n.imageManager.getFromCanvas(F.id,q),q.remove()):(o=!0,e._hasNoCanvas=!0);const oe=(await t._structTree.getAriaAttributes(`${vp}${E}`))?.get("aria-label")||"";s=e={annotationType:Ae.STAMP,bitmapId:Y,bitmap:ne,pageIndex:U-1,rect:w.slice(0),rotation:x,annotationElementId:E,id:E,deleted:!1,accessibilityData:{decorative:!1,altText:oe},isSvg:!1,structParent:A,popupRef:C,richText:k,comment:N?.str||null,creationDate:R,modificationDate:D}}const l=await super.deserialize(e,t,n),{rect:c,bitmap:u,bitmapUrl:h,bitmapId:f,isSvg:p,accessibilityData:v}=e;o?(n.addMissingCanvas(e.id,l),l.#a=!0):f&&n.imageManager.isValidId(f)?(l.#t=f,u&&(l.#e=u)):l.#n=h,l.#l=p;const[b,_]=l.pageDimensions;return l.width=(c[2]-c[0])/b,l.height=(c[3]-c[1])/_,v&&(l.altTextData=v),l._initialData=s,e.comment&&l.setCommentData(e),l.#h=!!s,l}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Object.assign(super.serialize(e),{bitmapId:this.#t,isSvg:this.#l});if(this.addComment(n),e)return n.bitmapUrl=this.#v(!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:s,altText:o}=this.serializeAltText(!1);if(!s&&o&&(n.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=this.#w(n);return c.isSame?null:(c.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1,n.id=this.annotationElementId,delete n.bitmapId,n)}if(t===null)return n;t.stamps||=new Map;const l=this.#l?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:l,serialized:n}),n.bitmap=this.#v(!1);else if(this.#l){const c=t.stamps.get(this.#t);l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=this.#v(!1))}return n}#w(e){const{pageIndex:t,accessibilityData:{altText:n}}=this._initialData,s=e.pageIndex===t,o=(e.accessibilityData?.alt||"")===n;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&s&&o,isSameAltText:o}}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class nr{#e;#t=!1;#r=null;#n=null;#o=null;#s=new Map;#i=!1;#a=!1;#c=!1;#l=null;#h=null;#d=null;#f=null;#g=null;#p=-1;#u;static _initialized=!1;static#m=new Map([At,Dp,lO,ft,er].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:s,accessibilityManager:o,annotationLayer:l,drawLayer:c,textLayer:u,viewport:h,l10n:f}){const p=[...nr.#m.values()];if(!nr._initialized){nr._initialized=!0;for(const v of p)v.initialize(f,e)}e.registerEditorTypes(p),this.#u=e,this.pageIndex=t,this.div=n,this.#e=o,this.#r=l,this.viewport=h,this.#d=u,this.drawLayer=c,this._structTree=s,this.#u.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===Ae.NONE}updateToolbar(e){this.#u.updateToolbar(e)}updateMode(e=this.#u.getMode()){switch(this.#b(),e){case Ae.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Ae.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Ae.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===Ae.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const n of nr.#m.values())t.toggle(`${n._type}Editing`,e===n._editorType)}this.div.hidden=!1}hasTextLayer(e){return e===this.#d?.div}setEditingState(e){this.#u.setEditingState(e)}addCommands(e){this.#u.addCommands(e)}cleanUndoStack(e){this.#u.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#r?.div.classList.toggle("disabled",!e)}get#v(){return this.#s.size!==0?this.#s.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#g?.abort(),this.#g=null;const e=new Set;for(const n of this.#v)n.enableEditing(),n.show(!0),n.annotationElementId&&(this.#u.removeChangedExistingAnnotation(n),e.add(n.annotationElementId));const t=this.#r;if(t)for(const n of t.getEditableAnnotations()){if(n.hide(),this.#u.isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;const s=await this.deserialize(n);s&&(this.addOrRebuild(s),s.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#a=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#d&&!this.#g){this.#g=new AbortController;const n=this.#u.combinedSignal(this.#g);this.#d.div.addEventListener("pointerdown",s=>{const{clientX:l,clientY:c,timeStamp:u}=s,h=this.#p;if(u-h>500){this.#p=u;return}this.#p=-1;const{classList:f}=this.div;f.toggle("getElements",!0);const p=document.elementsFromPoint(l,c);if(f.toggle("getElements",!1),!this.div.contains(p[0]))return;let v;const b=new RegExp(`^${la}[0-9]+$`);for(const w of p)if(b.test(w.id)){v=w.id;break}if(!v)return;const _=this.#s.get(v);_?.annotationElementId===null&&(s.stopPropagation(),s.preventDefault(),_.dblclick(s))},{signal:n,capture:!0})}const e=this.#r;if(e){const n=new Map,s=new Map;for(const l of this.#v){if(l.disableEditing(),!l.annotationElementId){l.updateFakeAnnotationElement(e);continue}if(l.serialize()!==null){n.set(l.annotationElementId,l);continue}else s.set(l.annotationElementId,l);this.getEditableAnnotation(l.annotationElementId)?.show(),l.remove()}const o=e.getEditableAnnotations();for(const l of o){const{id:c}=l.data;if(this.#u.isDeletedAnnotationElement(c)){l.updateEdited({deleted:!0});continue}let u=s.get(c);if(u){u.resetAnnotationElement(l),u.show(!1),l.show();continue}u=n.get(c),u&&(this.#u.addChangedExistingAnnotation(u),u.renderAnnotationElement(l)&&u.show(!1)),l.show()}}this.#b(),this.isEmpty&&(this.div.hidden=!0);const{classList:t}=this.div;for(const n of nr.#m.values())t.remove(`${n._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#a=!1}getEditableAnnotation(e){return this.#r?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#u.getActive()!==e&&this.#u.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#d?.div&&!this.#f){this.#f=new AbortController;const e=this.#u.combinedSignal(this.#f);this.#d.div.addEventListener("pointerdown",this.#w.bind(this),{signal:e}),this.#d.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#d?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#d.div.classList.remove("highlighting"))}#w(e){this.#u.unselectAll();const{target:t}=e;if(t===this.#d.div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&this.#d.div.contains(t)){const{isMac:n}=Tt.platform;if(e.button!==0||e.ctrlKey&&n)return;this.#u.showAllEditors("highlight",!0,!0),this.#d.div.classList.add("free"),this.toggleDrawing(),ft.startHighlighting(this,this.#u.direction==="ltr",{target:this.#d.div,x:e.x,y:e.y}),this.#d.div.addEventListener("pointerup",()=>{this.#d.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),e.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const e=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){this.#n?.abort(),this.#n=null}attach(e){this.#s.set(e.id,e);const{annotationElementId:t}=e;t&&this.#u.isDeletedAnnotationElement(t)&&this.#u.removeDeletedAnnotationElement(e)}detach(e){this.#s.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#a&&e.annotationElementId&&this.#u.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#u.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#u.addDeletedAnnotationElement(e.annotationElementId),we.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#u.addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#c),this.#u.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!this.#o&&(e._focusEventsAllowed=!1,this.#o=setTimeout(()=>{this.#o=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),t.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getEditorByUID(e){for(const t of this.#s.values())if(t.uid===e)return t;return null}getNextId(){return this.#u.getId()}get#y(){return nr.#m.get(this.#u.getMode())}combinedSignal(e){return this.#u.combinedSignal(e)}#A(e){const t=this.#y;return t?new t.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#y?.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await this.#u.updateMode(e.mode);const{offsetX:n,offsetY:s}=this.#_(),o=this.getNextId(),l=this.#A({parent:this,id:o,x:n,y:s,uiManager:this.#u,isCentered:!0,...t});l&&this.add(l)}async deserialize(e){return await nr.#m.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#u)||null}createAndAddNewEditor(e,t,n={}){const s=this.getNextId(),o=this.#A({parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:this.#u,isCentered:t,...n});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}#_(){const{x:e,y:t,width:n,height:s}=this.boundingClientRect,o=Math.max(0,e),l=Math.max(0,t),c=Math.min(window.innerWidth,e+n),u=Math.min(window.innerHeight,t+s),h=(o+c)/2-e,f=(l+u)/2-t,[p,v]=this.viewport.rotation%180===0?[h,f]:[f,h];return{offsetX:p,offsetY:v}}addNewEditor(e={}){this.createAndAddNewEditor(this.#_(),!0,e)}setSelected(e){this.#u.setSelected(e)}toggleSelected(e){this.#u.toggleSelected(e)}unselect(e){this.#u.unselect(e)}pointerup(e){const{isMac:t}=Tt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!this.#i||(this.#i=!1,this.#y?.isDrawer&&this.#y.supportMultipleDrawings))return;if(!this.#t){this.#t=!0;return}const n=this.#u.getMode();if(n===Ae.STAMP||n===Ae.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(this.#u.getMode()===Ae.HIGHLIGHT&&this.enableTextSelection(),this.#i){this.#i=!1;return}const{isMac:t}=Tt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(this.#i=!0,this.#y?.isDrawer){this.startDrawingSession(e);return}const n=this.#u.getActive();this.#t=!n||n.isEmpty()}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),this.#l){this.#y.startDrawing(this,this.#u,!1,e);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const t=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(this.#h=null,this.commitOrRemove())},{signal:t}),this.#y.startDrawing(this,this.#u,!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&(this.#h=t);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(e=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#h=null,this.#y.endDrawing(e)):null}findNewParent(e,t,n){const s=this.#u.findParent(t,n);return s===null||s===this?!1:(s.changeParent(e),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#y.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#o&&(clearTimeout(this.#o),this.#o=null);for(const e of this.#s.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#s.clear(),this.#u.removeLayer(this)}#b(){for(const e of this.#s.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,os(this.div,e);for(const t of this.#u.getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){this.#u.commitOrRemove(),this.#b();const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,os(this.div,{rotation:n}),t!==n)for(const s of this.#s.values())s.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return this.#u.viewParameters.realScale}}class Ct{#e=null;#t=new Map;#r=new Map;static#n=0;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#t.size>0)for(const t of this.#t.values())t.remove(),e.append(t);this.#e=e}}static get _svgFactory(){return Re(this,"_svgFactory",new fa)}static#o(e,[t,n,s,o]){const{style:l}=e;l.top=`${100*n}%`,l.left=`${100*t}%`,l.width=`${100*s}%`,l.height=`${100*o}%`}#s(){const e=Ct._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),e}#i(e,t){const n=Ct._svgFactory.createElement("clipPath");e.append(n);const s=`clip_${t}`;n.setAttribute("id",s),n.setAttribute("clipPathUnits","objectBoundingBox");const o=Ct._svgFactory.createElement("use");return n.append(o),o.setAttribute("href",`#${t}`),o.classList.add("clip"),s}#a(e,t){for(const[n,s]of Object.entries(t))s===null?e.removeAttribute(n):e.setAttribute(n,s)}draw(e,t=!1,n=!1){const s=Ct.#n++,o=this.#s(),l=Ct._svgFactory.createElement("defs");o.append(l);const c=Ct._svgFactory.createElement("path");l.append(c);const u=`path_p${this.pageIndex}_${s}`;c.setAttribute("id",u),c.setAttribute("vector-effect","non-scaling-stroke"),t&&this.#r.set(s,c);const h=n?this.#i(l,u):null,f=Ct._svgFactory.createElement("use");return o.append(f),f.setAttribute("href",`#${u}`),this.updateProperties(o,e),this.#t.set(s,o),{id:s,clipPathId:`url(#${h})`}}drawOutline(e,t){const n=Ct.#n++,s=this.#s(),o=Ct._svgFactory.createElement("defs");s.append(o);const l=Ct._svgFactory.createElement("path");o.append(l);const c=`path_p${this.pageIndex}_${n}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke");let u;if(t){const p=Ct._svgFactory.createElement("mask");o.append(p),u=`mask_p${this.pageIndex}_${n}`,p.setAttribute("id",u),p.setAttribute("maskUnits","objectBoundingBox");const v=Ct._svgFactory.createElement("rect");p.append(v),v.setAttribute("width","1"),v.setAttribute("height","1"),v.setAttribute("fill","white");const b=Ct._svgFactory.createElement("use");p.append(b),b.setAttribute("href",`#${c}`),b.setAttribute("stroke","none"),b.setAttribute("fill","black"),b.setAttribute("fill-rule","nonzero"),b.classList.add("mask")}const h=Ct._svgFactory.createElement("use");s.append(h),h.setAttribute("href",`#${c}`),u&&h.setAttribute("mask",`url(#${u})`);const f=h.cloneNode();return s.append(f),h.classList.add("mainOutline"),f.classList.add("secondaryOutline"),this.updateProperties(s,e),this.#t.set(n,s),n}finalizeDraw(e,t){this.#r.delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:n,bbox:s,rootClass:o,path:l}=t,c=typeof e=="number"?this.#t.get(e):e;if(c){if(n&&this.#a(c,n),s&&Ct.#o(c,s),o){const{classList:u}=c;for(const[h,f]of Object.entries(o))u.toggle(h,f)}if(l){const h=c.firstChild.firstChild;this.#a(h,l)}}}updateParent(e,t){if(t===this)return;const n=this.#t.get(e);n&&(t.#e.append(n),this.#t.delete(e),t.#t.set(e,n))}remove(e){this.#r.delete(e),this.#e!==null&&(this.#t.get(e).remove(),this.#t.delete(e))}destroy(){this.#e=null;for(const e of this.#t.values())e.remove();this.#t.clear(),this.#r.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:Ff};globalThis.pdfjsLib={AbortException:Tr,AnnotationEditorLayer:nr,AnnotationEditorParamsType:Me,AnnotationEditorType:Ae,AnnotationEditorUIManager:kr,AnnotationLayer:Np,AnnotationMode:ir,AnnotationType:ht,applyOpacity:jx,build:iS,ColorPicker:pn,createValidAbsoluteUrl:pp,CSSConstants:Fx,DOMSVGFactory:fa,DrawLayer:Ct,FeatureTest:Tt,fetchData:Ki,findContrastColor:Bx,getDocument:Cp,getFilenameFromUrl:Mx,getPdfFilenameFromUrl:Lx,getRGB:Qi,getUuid:gp,getXfaPageViewport:Ix,GlobalWorkerOptions:is,ImageKind:na,InvalidPDFException:ou,isDataScheme:Ea,isPdfFile:ku,isValidExplicitDest:Wx,MathClamp:Ft,noContextMenu:gn,normalizeUnicode:Dx,OPS:Ui,OutputScale:zn,PasswordResponses:Rx,PDFDataRangeTransport:kp,PDFDateString:au,PDFWorker:zi,PermissionFlag:Px,PixelsPerInch:Ls,RenderingCancelledException:Tu,renderRichText:wp,ResponseException:ca,setLayerDimensions:os,shadow:Re,SignatureExtractor:Cs,stopEvent:st,SupportedImageMimeTypes:lu,TextLayer:da,TouchManager:Ca,updateUrlHash:mp,Util:fe,VerbosityLevel:xa,version:sS,XfaLayer:yp};const cO=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Tr,AnnotationEditorLayer:nr,AnnotationEditorParamsType:Me,AnnotationEditorType:Ae,AnnotationEditorUIManager:kr,AnnotationLayer:Np,AnnotationMode:ir,AnnotationType:ht,CSSConstants:Fx,ColorPicker:pn,DOMSVGFactory:fa,DrawLayer:Ct,FeatureTest:Tt,GlobalWorkerOptions:is,ImageKind:na,InvalidPDFException:ou,MathClamp:Ft,OPS:Ui,OutputScale:zn,PDFDataRangeTransport:kp,PDFDateString:au,PDFWorker:zi,PasswordResponses:Rx,PermissionFlag:Px,PixelsPerInch:Ls,RenderingCancelledException:Tu,ResponseException:ca,SignatureExtractor:Cs,SupportedImageMimeTypes:lu,TextLayer:da,TouchManager:Ca,Util:fe,VerbosityLevel:xa,XfaLayer:yp,applyOpacity:jx,build:iS,createValidAbsoluteUrl:pp,fetchData:Ki,findContrastColor:Bx,getDocument:Cp,getFilenameFromUrl:Mx,getPdfFilenameFromUrl:Lx,getRGB:Qi,getUuid:gp,getXfaPageViewport:Ix,isDataScheme:Ea,isPdfFile:ku,isValidExplicitDest:Wx,noContextMenu:gn,normalizeUnicode:Dx,renderRichText:wp,setLayerDimensions:os,shadow:Re,stopEvent:st,updateUrlHash:mp,version:sS},Symbol.toStringTag,{value:"Module"}));var G0=Object.prototype.hasOwnProperty;function Y0(r,e,t){for(t of r.keys())if(Li(t,e))return t}function Li(r,e){var t,n,s;if(r===e)return!0;if(r&&e&&(t=r.constructor)===e.constructor){if(t===Date)return r.getTime()===e.getTime();if(t===RegExp)return r.toString()===e.toString();if(t===Array){if((n=r.length)===e.length)for(;n--&&Li(r[n],e[n]););return n===-1}if(t===Set){if(r.size!==e.size)return!1;for(n of r)if(s=n,s&&typeof s=="object"&&(s=Y0(e,s),!s)||!e.has(s))return!1;return!0}if(t===Map){if(r.size!==e.size)return!1;for(n of r)if(s=n[0],s&&typeof s=="object"&&(s=Y0(e,s),!s)||!Li(n[1],e.get(s)))return!1;return!0}if(t===ArrayBuffer)r=new Uint8Array(r),e=new Uint8Array(e);else if(t===DataView){if((n=r.byteLength)===e.byteLength)for(;n--&&r.getInt8(n)===e.getInt8(n););return n===-1}if(ArrayBuffer.isView(r)){if((n=r.byteLength)===e.byteLength)for(;n--&&r[n]===e[n];);return n===-1}if(!t||typeof r=="object"){n=0;for(t in r)if(G0.call(r,t)&&++n&&!G0.call(e,t)||!(t in e)||!Li(r[t],e[t]))return!1;return Object.keys(e).length===n}}return r!==r&&e!==e}function Pa(r){let e=!1;return{promise:new Promise((n,s)=>{r.then(o=>!e&&n(o)).catch(o=>!e&&s(o))}),cancel(){e=!0}}}const uO=["onCopy","onCut","onPaste"],dO=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],hO=["onFocus","onBlur"],fO=["onInput","onInvalid","onReset","onSubmit"],pO=["onLoad","onError"],mO=["onKeyDown","onKeyPress","onKeyUp"],gO=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],vO=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],yO=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],wO=["onSelect"],bO=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],xO=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],SO=["onScroll"],_O=["onWheel"],EO=["onAnimationStart","onAnimationEnd","onAnimationIteration"],AO=["onTransitionEnd"],CO=["onToggle"],TO=["onChange"],kO=[...uO,...dO,...hO,...fO,...pO,...mO,...gO,...vO,...yO,...wO,...bO,...xO,...SO,..._O,...EO,...AO,...TO,...CO];function pS(r,e){const t={};for(const n of kO){const s=r[n];s&&(e?t[n]=(o=>s(o,e(n))):t[n]=s)}return t}var PO="Invariant failed";function We(r,e){if(!r)throw new Error(PO)}var of,X0;function RO(){if(X0)return of;X0=1;var r=function(){};return of=r,of}var NO=RO();const Bt=as(NO),mS=T.createContext(null),DO="noopener noreferrer nofollow";class OO{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return We(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){We(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}addLinkAttributes(e,t,n){e.href=t,e.rel=this.externalLinkRel||DO,e.target=n?"_blank":this.externalLinkTarget||""}goToDestination(e){return new Promise(t=>{We(this.pdfDocument),We(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{We(Array.isArray(t));const n=t[0];new Promise(s=>{We(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(o=>{s(o)}).catch(()=>{We(!1)}):typeof n=="number"?s(n):We(!1)}).then(s=>{const o=s+1;We(this.pdfViewer),We(o>=1&&o<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:s,pageNumber:o})})})}goToPage(e){const t=e-1;We(this.pdfViewer),We(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(e){this.goToDestination(e)}}function Ii({children:r,type:e}){return g.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:r})}const K0={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function MO(r,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return r}}function Hi(){return T.useReducer(MO,{value:void 0,error:void 0})}const Nu=typeof window<"u",gS=Nu&&window.location.protocol==="file:";function LO(r){return typeof r<"u"}function As(r){return LO(r)&&r!==null}function IO(r){return typeof r=="string"}function FO(r){return r instanceof ArrayBuffer}function jO(r){return We(Nu),r instanceof Blob}function Uf(r){return IO(r)&&/^data:/.test(r)}function Q0(r){We(Uf(r));const[e="",t=""]=r.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function BO(){return Nu&&window.devicePixelRatio||1}const vS="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function J0(){Bt(!gS,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${vS}`)}function UO(){Bt(!gS,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${vS}`)}function Fs(r){r?.cancel&&r.cancel()}function zf(r,e){return Object.defineProperty(r,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(r,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(r,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(r,"originalHeight",{get(){return this.view[3]},configurable:!0}),r}function zO(r){return r.name==="RenderingCancelledException"}function HO(r){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return t(new Error("Error while reading a file."));e(n.result)},n.onerror=s=>{if(!s.target)return t(new Error("Error while reading a file."));const{error:o}=s.target;if(!o)return t(new Error("Error while reading a file."));switch(o.code){case o.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case o.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case o.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},n.readAsArrayBuffer(r)})}const{PDFDataRangeTransport:WO}=cO,VO=(r,e)=>{switch(e){case K0.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");r(t);break}case K0.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");r(t);break}}};function Z0(r){return typeof r=="object"&&r!==null&&("data"in r||"range"in r||"url"in r)}const $O=T.forwardRef(function({children:e,className:t,error:n="Failed to load PDF file.",externalLinkRel:s,externalLinkTarget:o,file:l,inputRef:c,imageResourcesPath:u,loading:h="Loading PDF",noData:f="No PDF file specified.",onItemClick:p,onLoadError:v,onLoadProgress:b,onLoadSuccess:_,onPassword:w=VO,onSourceError:x,onSourceSuccess:E,options:A,renderMode:C,rotate:k,scale:N,...R},D){const[F,U]=Hi(),{value:q,error:Y}=F,[ne,oe]=Hi(),{value:te,error:ae}=ne,G=T.useRef(new OO),K=T.useRef([]),V=T.useRef(void 0),$=T.useRef(void 0);l&&l!==V.current&&Z0(l)&&(Bt(!Li(l,V.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),V.current=l),A&&A!==$.current&&(Bt(!Li(A,$.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),$.current=A);const Q=T.useRef({scrollPageIntoView:De=>{const{dest:Be,pageNumber:Ke,pageIndex:Le=Ke-1}=De;if(p){p({dest:Be,pageIndex:Le,pageNumber:Ke});return}const yt=K.current[Le];if(yt){yt.scrollIntoView();return}Bt(!1,`An internal link leading to page ${Ke} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});T.useImperativeHandle(D,()=>({linkService:G,pages:K,viewer:Q}),[]);function M(){E&&E()}function H(){Y&&(Bt(!1,Y.toString()),x&&x(Y))}function ie(){U({type:"RESET"})}T.useEffect(ie,[l,U]);const ce=T.useCallback(async()=>{if(!l)return null;if(typeof l=="string")return Uf(l)?{data:Q0(l)}:(J0(),{url:l});if(l instanceof WO)return{range:l};if(FO(l))return{data:l};if(Nu&&jO(l))return{data:await HO(l)};if(We(typeof l=="object"),We(Z0(l)),"url"in l&&typeof l.url=="string"){if(Uf(l.url)){const{url:De,...Be}=l;return{data:Q0(De),...Be}}J0()}return l},[l]);T.useEffect(()=>{const De=Pa(ce());return De.promise.then(Be=>{U({type:"RESOLVE",value:Be})}).catch(Be=>{U({type:"REJECT",error:Be})}),()=>{Fs(De)}},[ce,U]),T.useEffect(()=>{if(!(typeof q>"u")){if(q===!1){H();return}M()}},[q]);function ye(){te&&(_&&_(te),K.current=new Array(te.numPages),G.current.setDocument(te))}function be(){ae&&(Bt(!1,ae.toString()),v&&v(ae))}T.useEffect(function(){oe({type:"RESET"})},[oe,q]),T.useEffect(function(){if(!q)return;const Be=A?{...q,...A}:q,Ke=Cp(Be);b&&(Ke.onProgress=b),w&&(Ke.onPassword=w);const Le=Ke,yt=Le.promise.then(an=>{oe({type:"RESOLVE",value:an})}).catch(an=>{Le.destroyed||oe({type:"REJECT",error:an})});return()=>{yt.finally(()=>Le.destroy())}},[A,oe,q]),T.useEffect(()=>{if(!(typeof te>"u")){if(te===!1){be();return}ye()}},[te]),T.useEffect(function(){G.current.setViewer(Q.current),G.current.setExternalLinkRel(s),G.current.setExternalLinkTarget(o)},[s,o]);const ge=T.useCallback((De,Be)=>{K.current[De]=Be},[]),X=T.useCallback(De=>{delete K.current[De]},[]),se=T.useMemo(()=>({imageResourcesPath:u,linkService:G.current,onItemClick:p,pdf:te,registerPage:ge,renderMode:C,rotate:k,scale:N,unregisterPage:X}),[u,p,te,ge,C,k,N,X]),ue=T.useMemo(()=>pS(R,()=>te),[R,te]);function et(){function De(Ke){return!!Ke?.pdf}if(!De(se))throw new Error("pdf is undefined");const Be=typeof e=="function"?e(se):e;return g.jsx(mS.Provider,{value:se,children:Be})}function Gt(){return l?te==null?g.jsx(Ii,{type:"loading",children:typeof h=="function"?h():h}):te===!1?g.jsx(Ii,{type:"error",children:typeof n=="function"?n():n}):et():g.jsx(Ii,{type:"no-data",children:typeof f=="function"?f():f})}return g.jsx("div",{className:Gi("react-pdf__Document",t),ref:c,...ue,children:Gt()})});function yS(){return T.useContext(mS)}function wS(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=r.filter(Boolean);if(t.length<=1){var n=t[0];return n||null}return function(o){for(var l=0,c=t;l<c.length;l++){var u=c[l];typeof u=="function"?u(o):u&&(u.current=o)}}}const bS=T.createContext(null);function Du(){return T.useContext(bS)}function qO(){const r=yS(),e=Du();We(e);const t={...r,...e},{imageResourcesPath:n,linkService:s,onGetAnnotationsError:o,onGetAnnotationsSuccess:l,onRenderAnnotationLayerError:c,onRenderAnnotationLayerSuccess:u,page:h,pdf:f,renderForms:p,rotate:v,scale:b=1}=t;We(f),We(h),We(s);const[_,w]=Hi(),{value:x,error:E}=_,A=T.useRef(null);Bt(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function C(){x&&l&&l(x)}function k(){E&&(Bt(!1,E.toString()),o&&o(E))}T.useEffect(function(){w({type:"RESET"})},[w,h]),T.useEffect(function(){if(!h)return;const U=Pa(h.getAnnotations()),q=U;return U.promise.then(Y=>{w({type:"RESOLVE",value:Y})}).catch(Y=>{w({type:"REJECT",error:Y})}),()=>{Fs(q)}},[w,h]),T.useEffect(()=>{if(x!==void 0){if(x===!1){k();return}C()}},[x]);function N(){u&&u()}function R(F){Bt(!1,`${F}`),c&&c(F)}const D=T.useMemo(()=>h.getViewport({scale:b,rotation:v}),[h,v,b]);return T.useEffect(function(){if(!f||!h||!s||!x)return;const{current:U}=A;if(!U)return;const q=D.clone({dontFlip:!0}),Y={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:f.annotationStorage,commentManager:null,div:U,l10n:null,linkService:s,page:h,structTreeLayer:null,viewport:q},ne={annotations:x,annotationStorage:f.annotationStorage,div:U,imageResourcesPath:n,linkService:s,page:h,renderForms:p,viewport:q};U.innerHTML="";try{new Np(Y).render(ne),N()}catch(oe){R(oe)}return()=>{}},[x,n,s,h,f,p,D]),g.jsx("div",{className:Gi("react-pdf__Page__annotations","annotationLayer"),ref:A})}const xS={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},GO=/^H(\d+)$/;function YO(r){return r in xS}function Ou(r){return"children"in r}function SS(r){return Ou(r)?r.children.length===1&&0 in r.children&&"id"in r.children[0]:!1}function XO(r){const e={};if(Ou(r)){const{role:t}=r,n=t.match(GO);if(n)e.role="heading",e["aria-level"]=Number(n[1]);else if(YO(t)){const s=xS[t];s&&(e.role=s)}}return e}function _S(r){const e={};if(Ou(r)){if(r.alt!==void 0&&(e["aria-label"]=r.alt),r.lang!==void 0&&(e.lang=r.lang),SS(r)){const[t]=r.children;if(t){const n=_S(t);return{...e,...n}}}}else"id"in r&&(e["aria-owns"]=r.id);return e}function KO(r){return r?{...XO(r),..._S(r)}:null}function ES({className:r,node:e}){const t=T.useMemo(()=>KO(e),[e]),n=T.useMemo(()=>!Ou(e)||SS(e)?null:e.children.map((s,o)=>g.jsx(ES,{node:s},o)),[e]);return g.jsx("span",{className:r,...t,children:n})}function QO(){const r=Du();We(r);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=r,[n,s]=Hi(),{value:o,error:l}=n,{customTextRenderer:c,page:u}=r;function h(){o&&t&&t(o)}function f(){l&&(Bt(!1,l.toString()),e&&e(l))}return T.useEffect(function(){s({type:"RESET"})},[s,u]),T.useEffect(function(){if(c||!u)return;const v=Pa(u.getStructTree()),b=v;return v.promise.then(_=>{s({type:"RESOLVE",value:_})}).catch(_=>{s({type:"REJECT",error:_})}),()=>Fs(b)},[c,u,s]),T.useEffect(()=>{if(o!==void 0){if(o===!1){f();return}h()}},[o]),o?g.jsx(ES,{className:"react-pdf__Page__structTree structTree",node:o}):null}const ew=ir;function JO(r){const e=Du();We(e);const t={...e,...r},{_className:n,canvasBackground:s,devicePixelRatio:o=BO(),onRenderError:l,onRenderSuccess:c,page:u,renderForms:h,renderTextLayer:f,rotate:p,scale:v}=t,{canvasRef:b}=r;We(u);const _=T.useRef(null);function w(){u&&c&&c(zf(u,v))}function x(k){zO(k)||(Bt(!1,k.toString()),l&&l(k))}const E=T.useMemo(()=>u.getViewport({scale:v*o,rotation:p}),[o,u,p,v]),A=T.useMemo(()=>u.getViewport({scale:v,rotation:p}),[u,p,v]);T.useEffect(function(){if(!u)return;u.cleanup();const{current:N}=_;if(!N)return;N.width=E.width,N.height=E.height,N.style.width=`${Math.floor(A.width)}px`,N.style.height=`${Math.floor(A.height)}px`,N.style.visibility="hidden";const R={annotationMode:h?ew.ENABLE_FORMS:ew.ENABLE,canvas:N,canvasContext:N.getContext("2d",{alpha:!1}),viewport:E};s&&(R.background=s);const D=u.render(R),F=D;return D.promise.then(()=>{N.style.visibility="",w()}).catch(x),()=>Fs(F)},[s,u,h,E,A]);const C=T.useCallback(()=>{const{current:k}=_;k&&(k.width=0,k.height=0)},[]);return T.useEffect(()=>C,[C]),g.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:wS(b,_),style:{display:"block",userSelect:"none"},children:f?g.jsx(QO,{}):null})}function ZO(r){return"str"in r}function eM(){const r=Du();We(r);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:n,onRenderTextLayerError:s,onRenderTextLayerSuccess:o,page:l,pageIndex:c,pageNumber:u,rotate:h,scale:f}=r;We(l);const[p,v]=Hi(),{value:b,error:_}=p,w=T.useRef(null);Bt(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function x(){b&&n&&n(b)}function E(){_&&(Bt(!1,_.toString()),t&&t(_))}T.useEffect(function(){v({type:"RESET"})},[l,v]),T.useEffect(function(){if(!l)return;const F=Pa(l.getTextContent()),U=F;return F.promise.then(q=>{v({type:"RESOLVE",value:q})}).catch(q=>{v({type:"REJECT",error:q})}),()=>Fs(U)},[l,v]),T.useEffect(()=>{if(b!==void 0){if(b===!1){E();return}x()}},[b]);const A=T.useCallback(()=>{o&&o()},[o]),C=T.useCallback(D=>{Bt(!1,D.toString()),s&&s(D)},[s]);function k(){const D=w.current;D&&D.classList.add("selecting")}function N(){const D=w.current;D&&D.classList.remove("selecting")}const R=T.useMemo(()=>l.getViewport({scale:f,rotation:h}),[l,h,f]);return T.useLayoutEffect(function(){if(!l||!b)return;const{current:F}=w;if(!F)return;F.innerHTML="";const U=l.streamTextContent({includeMarkedContent:!0}),q={container:F,textContentSource:U,viewport:R},Y=new da(q),ne=Y;return Y.render().then(()=>{const oe=document.createElement("div");oe.className="endOfContent",F.append(oe);const te=F.querySelectorAll('[role="presentation"]');if(e){let ae=0;b.items.forEach((G,K)=>{if(!ZO(G))return;const V=te[ae];if(!V)return;const $=e({pageIndex:c,pageNumber:u,itemIndex:K,...G});V.innerHTML=$,ae+=G.str&&G.hasEOL?2:1})}A()}).catch(C),()=>Fs(ne)},[e,C,A,l,c,u,b,R]),g.jsx("div",{className:Gi("react-pdf__Page__textContent","textLayer"),onMouseUp:N,onMouseDown:k,ref:w})}const tw=1;function tM(r){const t={...yS(),...r},{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:s=!0,canvasBackground:o,canvasRef:l,children:c,className:u,customRenderer:h,customTextRenderer:f,devicePixelRatio:p,error:v="Failed to load the page.",height:b,inputRef:_,loading:w="Loading page",noData:x="No page specified.",onGetAnnotationsError:E,onGetAnnotationsSuccess:A,onGetStructTreeError:C,onGetStructTreeSuccess:k,onGetTextError:N,onGetTextSuccess:R,onLoadError:D,onLoadSuccess:F,onRenderAnnotationLayerError:U,onRenderAnnotationLayerSuccess:q,onRenderError:Y,onRenderSuccess:ne,onRenderTextLayerError:oe,onRenderTextLayerSuccess:te,pageIndex:ae,pageNumber:G,pdf:K,registerPage:V,renderAnnotationLayer:$=!0,renderForms:Q=!1,renderMode:M="canvas",renderTextLayer:H=!0,rotate:ie,scale:ce=tw,unregisterPage:ye,width:be,...ge}=t,[X,se]=Hi(),{value:ue,error:et}=X,Gt=T.useRef(null);We(K);const De=As(G)?G-1:ae??null,Be=G??(As(ae)?ae+1:null),Ke=ie??(ue?ue.rotate:null),Le=T.useMemo(()=>{if(!ue)return null;let vn=1;const Pn=ce??tw;if(be||b){const Rn=ue.getViewport({scale:1,rotation:Ke});be?vn=be/Rn.width:b&&(vn=b/Rn.height)}return Pn*vn},[b,ue,Ke,ce,be]);T.useEffect(function(){return()=>{As(De)&&s&&ye&&ye(De)}},[s,K,De,ye]);function yt(){if(F){if(!ue||!Le)return;F(zf(ue,Le))}if(s&&V){if(!As(De)||!Gt.current)return;V(De,Gt.current)}}function an(){et&&(Bt(!1,et.toString()),D&&D(et))}T.useEffect(function(){se({type:"RESET"})},[se,K,De]),T.useEffect(function(){if(!K||!Be)return;const Pn=Pa(K.getPage(Be)),Rn=Pn;return Pn.promise.then(dr=>{se({type:"RESOLVE",value:dr})}).catch(dr=>{se({type:"REJECT",error:dr})}),()=>Fs(Rn)},[se,K,Be]),T.useEffect(()=>{if(ue!==void 0){if(ue===!1){an();return}yt()}},[ue,Le]);const us=T.useMemo(()=>As(De)&&Be&&As(Ke)&&As(Le)?{_className:n,canvasBackground:o,customTextRenderer:f,devicePixelRatio:p,onGetAnnotationsError:E,onGetAnnotationsSuccess:A,onGetStructTreeError:C,onGetStructTreeSuccess:k,onGetTextError:N,onGetTextSuccess:R,onRenderAnnotationLayerError:U,onRenderAnnotationLayerSuccess:q,onRenderError:Y,onRenderSuccess:ne,onRenderTextLayerError:oe,onRenderTextLayerSuccess:te,page:ue,pageIndex:De,pageNumber:Be,renderForms:Q,renderTextLayer:H,rotate:Ke,scale:Le}:null,[n,o,f,p,E,A,C,k,N,R,U,q,Y,ne,oe,te,ue,De,Be,Q,H,Ke,Le]),ds=T.useMemo(()=>pS(ge,()=>ue&&(Le?zf(ue,Le):void 0)),[ge,ue,Le]),kn=`${De}@${Le}/${Ke}`;function Ji(){switch(M){case"custom":return We(h),g.jsx(h,{},`${kn}_custom`);case"none":return null;default:return g.jsx(JO,{canvasRef:l},`${kn}_canvas`)}}function Ra(){return H?g.jsx(eM,{},`${kn}_text`):null}function Na(){return $?g.jsx(qO,{},`${kn}_annotations`):null}function Da(){function vn(Rn){return!!Rn?.page}if(!vn(us))throw new Error("page is undefined");const Pn=typeof c=="function"?c(us):c;return g.jsxs(bS.Provider,{value:us,children:[Ji(),Ra(),Na(),Pn]})}function Oa(){return Be?K===null||ue===void 0||ue===null?g.jsx(Ii,{type:"loading",children:typeof w=="function"?w():w}):K===!1||ue===!1?g.jsx(Ii,{type:"error",children:typeof v=="function"?v():v}):Da():g.jsx(Ii,{type:"no-data",children:typeof x=="function"?x():x})}return g.jsx("div",{className:Gi(n,u),"data-page-number":Be,ref:wS(_,Gt),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${Le}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:o||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...ds,children:Oa()})}UO();is.workerSrc="pdf.worker.mjs";const nM="/assets/pdf.worker.min-qwK7q_zL.mjs";is.workerSrc=nM;const gi=typeof window<"u"&&window.devicePixelRatio||1;function rM(){const[r]=FA(),e=cr(),[t,n]=T.useState(null),[s,o]=T.useState(null),[l,c]=T.useState(!0),[u,h]=T.useState(null),[f,p]=T.useState(),[v,b]=T.useState(1),[_,w]=T.useState(null),[x,E]=T.useState(null),[A,C]=T.useState(null),[k,N]=T.useState(!1);T.useEffect(()=>{const X=r.get("orderId");if(!X){h("No order ID provided"),c(!1);return}(async()=>{try{c(!0),h(null);const ue=await it.getOrder(X);n(ue),ue.picklist_path?o({name:`Picklist for Order ${ue.inflow_order_id||ue.id.slice(0,8)}`,filename:`order-${ue.id}-picklist.pdf`,url:`/api/orders/${ue.id}/picklist`}):h("No picklist available for this order")}catch(ue){console.error("Failed to load order:",ue),h("Failed to load order details")}finally{c(!1)}})()},[r]),T.useEffect(()=>{if(ae.current&&!A){console.log("Immediate fallback: viewerRef available, trying to get container width");const X=ae.current.getBoundingClientRect();X.width>0&&(console.log("Immediate fallback: Setting containerWidth to:",X.width),C(X.width))}},[A]);const[R,D]=T.useState(!1),[F,U]=T.useState(!1),[q,Y]=T.useState(null),[ne,oe]=T.useState(!1),te=T.useRef(null),ae=T.useRef(null),G=T.useRef(null),K=T.useMemo(()=>s?s.url:null,[s]);T.useEffect(()=>{if(!ae.current){console.log("ResizeObserver: viewerRef.current is null");return}console.log("ResizeObserver: Setting up observer on element:",ae.current);const X=new ResizeObserver(se=>{const ue=se[0]?.contentRect;console.log("ResizeObserver fired, container width:",ue?.width,"height:",ue?.height),ue&&ue.width>0&&(console.log("Setting containerWidth to:",ue.width),C(ue.width))});return X.observe(ae.current),()=>{console.log("ResizeObserver: Disconnecting"),X.disconnect()}},[]),T.useEffect(()=>{if(console.log("Debug - pageViewport:",_,"containerWidth:",A,"renderSize:",x,"selectedPdf:",!!s),!_||A===null||A===0)return;const X=A/_.width;E({width:_.width*X,height:_.height*X})},[A,_]),T.useEffect(()=>{if(_&&!A&&ae.current&&!l){console.log("Fallback: Trying to get container width from DOM");const X=ae.current.getBoundingClientRect();X.width>0&&(console.log("Fallback: Got width from getBoundingClientRect:",X.width),C(X.width))}},[_,A,l]),T.useEffect(()=>{if(s&&!x&&!l&&_&&A){console.log("Fallback: Attempting to force renderSize calculation");const X=setTimeout(()=>{if(_&&A&&!x){console.log("Fallback: Setting renderSize");const se=A/_.width;E({width:_.width*se,height:_.height*se})}},1e3);return()=>clearTimeout(X)}},[s,x,_,A,l]),T.useEffect(()=>{const X=te.current;if(!X||!x)return;const se=X.getContext("2d");se&&(X.width=x.width*gi,X.height=x.height*gi,X.style.width=`${x.width}px`,X.style.height=`${x.height}px`,se.setTransform(1,0,0,1,0,0),se.clearRect(0,0,X.width,X.height),se.scale(gi,gi),se.lineCap="round",se.lineJoin="round",se.strokeStyle="#111827",D(!1))},[x,v,s]);const V=T.useCallback(()=>{const X=te.current;if(!X||!x)return;const se=X.getContext("2d");se&&(se.setTransform(1,0,0,1,0,0),se.clearRect(0,0,X.width,X.height),se.scale(gi,gi),D(!1))},[x]);T.useEffect(()=>{s&&(V(),oe(!0))},[V,v,s]);const $=T.useCallback(({numPages:X})=>{console.log("PDF loaded successfully with",X,"pages"),p(X),b(1),Y(null)},[]),Q=T.useCallback(X=>{console.log("PDF page loaded, setting viewport");const se=X.getViewport({scale:1});console.log("Viewport:",se.width,"x",se.height),w({width:se.width,height:se.height}),oe(!1)},[]),M=T.useCallback(()=>{oe(!1)},[]),H=T.useCallback(X=>{const se=te.current;if(!se)return{x:0,y:0};const ue=se.getBoundingClientRect();return{x:X.clientX-ue.left,y:X.clientY-ue.top}},[]),ie=T.useCallback(X=>{if(!te.current||!x||!K)return;X.preventDefault();const se=te.current.getContext("2d");if(!se)return;const{x:ue,y:et}=H(X);G.current=X.pointerId,te.current.setPointerCapture(X.pointerId),se.beginPath(),se.moveTo(ue,et),se.lineWidth=Math.max(2,4*(X.pressure||.5)),N(!0)},[H,x,K]),ce=T.useCallback(X=>{if(!k||!te.current)return;X.preventDefault();const se=te.current.getContext("2d");if(!se)return;const{x:ue,y:et}=H(X);se.lineWidth=Math.max(2,4*(X.pressure||.5)),se.lineTo(ue,et),se.stroke(),D(!0)},[k,H]),ye=T.useCallback(X=>{if(!k||!te.current)return;X.preventDefault(),ce(X);const se=G.current;if(se!==null)try{te.current.releasePointerCapture(se)}catch(ue){console.warn("Pointer capture release failed",ue)}N(!1),G.current=null},[ce,k]),be=!!(x&&K),ge=T.useCallback(async()=>{if(!(!t||!te.current||!K)){if(!R){Y("Add a signature before saving.");return}U(!0),Y(null);try{const X=te.current.toDataURL("image/png");await it.signOrder(t.id,{signature_image:X,page_number:v,position:{x:50,y:60}});const se=r.get("returnTo")||`/orders/${t.id}`;e(se,{state:{message:"Document signed successfully! Bundled documents generated and order marked as delivered."}})}catch(X){console.error(X),Y("Unable to complete signing. Please try again.")}finally{U(!1)}}},[R,t,K,v,r,e]);return l?g.jsx("div",{className:"flex items-center justify-center py-12",children:g.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading order details..."})}):u||!t?g.jsxs("div",{className:"text-center py-12",children:[g.jsx("div",{className:"text-red-600 mb-4",children:u||"Order not found"}),g.jsx("button",{onClick:()=>e(-1),className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Go Back"})]}):g.jsx("div",{className:"px-4 pb-8",children:g.jsxs("div",{className:"max-w-6xl mx-auto",children:[g.jsxs("header",{className:"mb-6",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Sign Delivery Document"}),g.jsxs("p",{className:"text-gray-600 mt-1",children:["Order ",t.inflow_order_id||t.id.slice(0,8)," - ",t.recipient_name||"Unknown Recipient"]})]}),!s&&g.jsx("section",{className:"mb-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:g.jsxs("div",{className:"text-yellow-800",children:[g.jsx("strong",{children:"No picklist available"})," - This order doesn't have a generated picklist to sign."]})}),s&&g.jsx("section",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:g.jsxs("div",{className:"text-blue-800",children:[g.jsx("strong",{children:"Ready to sign:"})," ",s.name]})}),g.jsxs("section",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-4",children:[g.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Document preview"}),g.jsx("p",{className:"text-sm text-gray-600",children:"Switch pages and draw directly on top of the PDF."})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{type:"button",className:"px-4 py-2 rounded-md bg-gray-100 text-gray-800 text-sm font-medium hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>b(X=>Math.max(1,X-1)),disabled:!f||v<=1,children:"Previous"}),g.jsxs("div",{className:"text-sm text-gray-700",children:["Page ",v," ",f?`of ${f}`:""]}),g.jsx("button",{type:"button",className:"px-4 py-2 rounded-md bg-gray-100 text-gray-800 text-sm font-medium hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>b(X=>f?Math.min(f,X+1):X),disabled:!f||(f?v>=f:!0),children:"Next"})]})]}),g.jsx("div",{className:"mt-4 relative bg-gray-50 border border-dashed border-gray-300 rounded-lg min-h-[400px] flex items-center justify-center",ref:ae,children:K?g.jsx("div",{className:"w-full flex justify-center py-4",children:g.jsxs("div",{className:`relative ${k?"ring-2 ring-[#800000] ring-offset-2":""}`,style:{width:x?.width??"100%"},children:[g.jsx($O,{file:K,loading:g.jsx("div",{className:"text-gray-700",children:"Loading PDF..."}),onLoadSuccess:$,onLoadError:X=>Y(X.message),className:"border border-gray-200 rounded-lg overflow-hidden bg-white",children:g.jsx(tM,{pageNumber:v,width:x?.width??A??void 0,renderMode:"canvas",renderTextLayer:!1,renderAnnotationLayer:!1,loading:g.jsx("div",{className:"p-6 text-gray-700",children:"Rendering page..."}),onLoadSuccess:Q,onRenderSuccess:M,onRenderError:X=>Y(X.message)},`${K}-${v}`)},s?.filename??"pdf-document"),x&&g.jsx("canvas",{ref:te,className:`absolute inset-0 z-20 ${s?"cursor-crosshair":"cursor-not-allowed"}`,style:{touchAction:"none"},onPointerDown:ie,onPointerMove:ce,onPointerUp:ye,onPointerCancel:ye,onPointerLeave:ye}),!be&&g.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:g.jsx("div",{className:"bg-white/80 border border-gray-200 rounded-md px-4 py-2 text-gray-700",children:"Select a PDF to start signing."})}),k&&g.jsx("span",{className:"absolute top-2 right-2 bg-[#800000] text-white text-xs font-semibold px-3 py-1 rounded-full shadow",children:"Drawing..."})]})}):g.jsx("div",{className:"text-center text-gray-600 py-10",children:"Choose a PDF above to begin."})}),g.jsxs("div",{className:"mt-4 flex flex-wrap gap-3 items-center justify-between",children:[q&&g.jsx("div",{className:"text-sm text-red-700 bg-red-50 border border-red-200 px-3 py-2 rounded-md",children:q}),g.jsxs("div",{className:"flex gap-3 ml-auto",children:[g.jsx("button",{type:"button",className:"px-4 py-2 rounded-md border border-gray-300 text-gray-800 text-sm font-medium hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",onClick:V,disabled:!be||!R,children:"Clear Signature"}),g.jsx("button",{type:"button",className:"px-4 py-2 rounded-md bg-[#800000] text-white text-sm font-semibold hover:bg-[#660000] disabled:opacity-50 disabled:cursor-not-allowed",onClick:ge,disabled:!be||!R||F||ne,children:F?"Saving...":"Save Signed PDF"})]})]})]})]})})}const nw=["Joshua Pullum","Aaron Pizzitola","Stormy Brewer","Lilly Tran","Jevin Joy","Kyler Cao"],Hc=r=>({orderNumber:r,technician:"",verifyAssetTagSerialMatch:!1,verifyOrderDetailsTemplateSent:!1,verifyPackagedProperly:!1,verifyPackingSlipSerialsMatch:!1,verifyElectronicPackingSlipSaved:!1,verifyBoxesLabeledCorrectly:!1,qaSignature:"",method:""}),af=r=>`order-qa-checklist-v2:${r}`;function rw(r){return r.orderNumber.trim().length>0&&r.technician.trim().length>0&&r.verifyAssetTagSerialMatch&&r.verifyOrderDetailsTemplateSent&&r.verifyPackagedProperly&&r.verifyPackingSlipSerialsMatch&&r.verifyElectronicPackingSlipSaved&&r.verifyBoxesLabeledCorrectly&&r.qaSignature.trim().length>0&&(r.method==="Delivery"||r.method==="Shipping")}function sM(){const r=cr(),[e,t]=T.useState([]),[n,s]=T.useState(!0),[o,l]=T.useState(""),[c,u]=T.useState(!1),[h,f]=T.useState(!1),[p,v]=T.useState(null),[b,_]=T.useState(()=>Hc("")),[w,x]=T.useState(null);T.useEffect(()=>{E()},[o,c]);const E=async()=>{s(!0);try{if(c){const R=await it.getOrders({search:o.trim()?o.trim():void 0});t(R)}else{const R=await it.getOrders({status:Te.QA,search:o.trim()?o.trim():void 0});t(R)}}catch(R){console.error("Failed to load orders:",R),alert("Failed to load orders")}finally{s(!1)}},A=R=>{v(R);const D=(R.inflow_order_id||R.id||"").toString(),F=localStorage.getItem(af(R.id));if(F)try{const U=JSON.parse(F);_(U.form),x(U.submittedAt)}catch{_(Hc(D)),x(null)}else _(Hc(D)),x(null);f(!0)},C=()=>{f(!1),v(null),x(null),_(Hc(""))},k=async()=>{if(p){if(!rw(b)){alert("Please complete all required QA fields before submitting.");return}try{await it.submitQa(p.id,{responses:b,technician:b.technician});const R={orderId:p.id,inflowOrderId:p.inflow_order_id||p.id,submittedAt:new Date().toISOString(),form:b};localStorage.setItem(af(p.id),JSON.stringify(R)),x(R.submittedAt),alert("QA checklist submitted successfully!"),C(),E()}catch(R){console.error("Failed to submit QA:",R),alert("Failed to submit QA checklist. Please try again.")}}},N=T.useMemo(()=>{const R=new Map;for(const D of e)if(D.qa_completed_at)R.set(D.id,D.qa_completed_at);else{const F=localStorage.getItem(af(D.id));if(!F)continue;try{const U=JSON.parse(F);R.set(D.id,U.submittedAt)}catch{}}return R},[e]);return g.jsxs("div",{className:"p-4",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"QA Checklist"}),g.jsxs("section",{className:"bg-white shadow rounded-lg p-4 border border-gray-100 mb-6",children:[g.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-end md:justify-between",children:[g.jsx("div",{children:g.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:c?"All Orders":"Orders Needing QA"})}),g.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-end",children:[g.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:["Search",g.jsx("input",{className:"rounded-md border px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#800000]",value:o,onChange:R=>l(R.target.value),placeholder:"Order ID / recipient / location..."})]}),g.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[g.jsx("input",{type:"checkbox",checked:c,onChange:R=>u(R.target.checked),className:"h-4 w-4 rounded border-gray-300 text-[#800000] focus:ring-[#800000]"}),"Show all orders"]})]})]}),n?g.jsx("div",{className:"p-4",children:"Loading..."}):g.jsx("div",{className:"mt-4 overflow-x-auto",children:g.jsxs("table",{className:"min-w-full border-collapse border border-gray-200",children:[g.jsx("thead",{children:g.jsxs("tr",{className:"bg-gray-50",children:[g.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Order"}),g.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Recipient"}),g.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Location"}),g.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"QA"})]})}),g.jsxs("tbody",{children:[e.filter(R=>c||!N.has(R.id)).filter(R=>![Te.DELIVERED,Te.IN_DELIVERY,Te.SHIPPING].includes(R.status)).map(R=>{const F=N.get(R.id)||null?"Edit QA":"QA";return g.jsxs("tr",{className:"hover:bg-gray-50",children:[g.jsx("td",{className:"border border-gray-200 px-4 py-2",children:g.jsx("button",{onClick:()=>r(`/orders/${R.id}`),className:"text-blue-600 hover:underline",children:R.inflow_order_id})}),g.jsx("td",{className:"border border-gray-200 px-4 py-2",children:R.recipient_name||"N/A"}),g.jsx("td",{className:"border border-gray-200 px-4 py-2",children:R.delivery_location||"N/A"}),g.jsx("td",{className:"border border-gray-200 px-4 py-2",children:g.jsx("button",{type:"button",onClick:()=>A(R),className:"px-3 py-1.5 text-sm bg-[#800000] text-white rounded hover:bg-[#660000]",children:F})})]},R.id)}),e.filter(R=>c||!N.has(R.id)).filter(R=>![Te.DELIVERED,Te.IN_DELIVERY,Te.SHIPPING].includes(R.status)).length===0&&g.jsx("tr",{children:g.jsx("td",{className:"border border-gray-200 px-4 py-6 text-center text-gray-600",colSpan:4,children:e.length===0?c?"No orders found.":"No orders need QA at this time.":c?"No eligible orders found.":"All eligible orders have completed QA."})})]})]})})]}),h&&p&&g.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[g.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:C}),g.jsxs("div",{className:"relative w-[min(900px,95vw)] max-h-[90vh] overflow-auto bg-white rounded-lg shadow-lg border border-gray-200",children:[g.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-start justify-between gap-4",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"QA Checklist"}),g.jsxs("p",{className:"text-sm text-gray-600",children:["Order: ",g.jsx("span",{className:"font-semibold",children:p.inflow_order_id})]}),w&&g.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Previously submitted: ",new Date(w).toLocaleString()]})]}),g.jsx("button",{type:"button",onClick:C,className:"rounded-md border border-gray-200 px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Close"})]}),g.jsxs("div",{className:"p-4 space-y-6",children:[g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["1. Order Number ",g.jsx("span",{className:"text-red-600",children:"*"})]}),g.jsx("input",{value:b.orderNumber,onChange:R=>_(D=>({...D,orderNumber:R.target.value})),className:"mt-1 w-full rounded-md border px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#800000]"})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["2. Technician (On order checklist) ",g.jsx("span",{className:"text-red-600",children:"*"})]}),g.jsxs("select",{value:b.technician,onChange:R=>_(D=>({...D,technician:R.target.value})),className:"mt-1 w-full rounded-md border px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#800000]",children:[g.jsx("option",{value:"",children:"Select technician"}),nw.map(R=>g.jsx("option",{value:R,children:R},R))]})]}),g.jsxs("div",{className:"space-y-3",children:[g.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["38. Verify each item ",g.jsx("span",{className:"text-red-600",children:"*"})]}),g.jsxs("label",{className:"flex items-start gap-3 rounded-lg border border-gray-100 bg-gray-50 p-3 hover:border-[#800000]",children:[g.jsx("input",{type:"checkbox",checked:b.verifyAssetTagSerialMatch,onChange:()=>_(R=>({...R,verifyAssetTagSerialMatch:!R.verifyAssetTagSerialMatch})),className:"mt-1 h-4 w-4 rounded border-gray-300 text-[#800000] focus:ring-[#800000]"}),g.jsx("div",{children:g.jsx("p",{className:"font-medium text-gray-900",children:"3. Verify that system asset tag has been applied and that the serial number on the device, sticker and pick list all match."})})]}),g.jsxs("label",{className:"flex items-start gap-3 rounded-lg border border-gray-100 bg-gray-50 p-3 hover:border-[#800000]",children:[g.jsx("input",{type:"checkbox",checked:b.verifyOrderDetailsTemplateSent,onChange:()=>_(R=>({...R,verifyOrderDetailsTemplateSent:!R.verifyOrderDetailsTemplateSent})),className:"mt-1 h-4 w-4 rounded border-gray-300 text-[#800000] focus:ring-[#800000]"}),g.jsx("div",{children:g.jsx("p",{className:"font-medium text-gray-900",children:"4. Verify that the order details template has been sent to the customer before completing a delivery."})})]}),g.jsxs("label",{className:"flex items-start gap-3 rounded-lg border border-gray-100 bg-gray-50 p-3 hover:border-[#800000]",children:[g.jsx("input",{type:"checkbox",checked:b.verifyPackagedProperly,onChange:()=>_(R=>({...R,verifyPackagedProperly:!R.verifyPackagedProperly})),className:"mt-1 h-4 w-4 rounded border-gray-300 text-[#800000] focus:ring-[#800000]"}),g.jsx("div",{children:g.jsx("p",{className:"font-medium text-gray-900",children:"5. Verify that system and all materials included are packaged properly"})})]}),g.jsxs("label",{className:"flex items-start gap-3 rounded-lg border border-gray-100 bg-gray-50 p-3 hover:border-[#800000]",children:[g.jsx("input",{type:"checkbox",checked:b.verifyPackingSlipSerialsMatch,onChange:()=>_(R=>({...R,verifyPackingSlipSerialsMatch:!R.verifyPackingSlipSerialsMatch})),className:"mt-1 h-4 w-4 rounded border-gray-300 text-[#800000] focus:ring-[#800000]"}),g.jsx("div",{children:g.jsx("p",{className:"font-medium text-gray-900",children:"6. Verify packing slip and picked items and serial numbers match."})})]}),g.jsxs("label",{className:"flex items-start gap-3 rounded-lg border border-gray-100 bg-gray-50 p-3 hover:border-[#800000]",children:[g.jsx("input",{type:"checkbox",checked:b.verifyElectronicPackingSlipSaved,onChange:()=>_(R=>({...R,verifyElectronicPackingSlipSaved:!R.verifyElectronicPackingSlipSaved})),className:"mt-1 h-4 w-4 rounded border-gray-300 text-[#800000] focus:ring-[#800000]"}),g.jsx("div",{children:g.jsx("p",{className:"font-medium text-gray-900",children:"7. Verify there is an electronic packing slip saved on the shipping and receiving computer."})})]}),g.jsxs("label",{className:"flex items-start gap-3 rounded-lg border border-gray-100 bg-gray-50 p-3 hover:border-[#800000]",children:[g.jsx("input",{type:"checkbox",checked:b.verifyBoxesLabeledCorrectly,onChange:()=>_(R=>({...R,verifyBoxesLabeledCorrectly:!R.verifyBoxesLabeledCorrectly})),className:"mt-1 h-4 w-4 rounded border-gray-300 text-[#800000] focus:ring-[#800000]"}),g.jsx("div",{children:g.jsx("p",{className:"font-medium text-gray-900",children:"8. Verify boxes are labeled with correct order details and shipping labels are marked out."})})]})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["9. QA Signature (First and Last Name) ",g.jsx("span",{className:"text-red-600",children:"*"})]}),g.jsxs("select",{value:b.qaSignature,onChange:R=>_(D=>({...D,qaSignature:R.target.value})),className:"mt-1 w-full rounded-md border px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#800000]",children:[g.jsx("option",{value:"",children:"Select signature"}),nw.map(R=>g.jsx("option",{value:R,children:R},R))]})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["10. Method ",g.jsx("span",{className:"text-red-600",children:"*"})]}),g.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[g.jsxs("label",{className:"inline-flex items-center gap-2",children:[g.jsx("input",{type:"radio",name:"qa-method",checked:b.method==="Delivery",onChange:()=>_(R=>({...R,method:"Delivery"})),className:"h-4 w-4 text-[#800000] focus:ring-[#800000]"}),g.jsx("span",{className:"text-sm text-gray-800",children:"Delivery"})]}),g.jsxs("label",{className:"inline-flex items-center gap-2",children:[g.jsx("input",{type:"radio",name:"qa-method",checked:b.method==="Shipping",onChange:()=>_(R=>({...R,method:"Shipping"})),className:"h-4 w-4 text-[#800000] focus:ring-[#800000]"}),g.jsx("span",{className:"text-sm text-gray-800",children:"Shipping"})]})]})]})]}),g.jsxs("div",{className:"p-4 border-t border-gray-200 flex items-center justify-between gap-3",children:[g.jsx("div",{className:"text-sm text-gray-600",children:rw(b)?g.jsx("span",{className:"inline-flex items-center rounded-full bg-green-100 px-2 py-1 text-xs font-semibold text-green-700",children:"Ready to submit"}):g.jsx("span",{className:"inline-flex items-center rounded-full bg-yellow-100 px-2 py-1 text-xs font-semibold text-yellow-800",children:"Incomplete"})}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{type:"button",onClick:C,className:"rounded-md border border-gray-200 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),g.jsx("button",{type:"button",onClick:k,className:"rounded-md bg-[#800000] px-4 py-2 text-sm font-semibold text-white hover:bg-[#660000]",children:"Submit QA"})]})]})]})]})]})}function AS(r){const[e,t]=T.useState(null),[n,s]=T.useState(!1),[o,l]=T.useState(null);return T.useEffect(()=>{if(!r)return;(async()=>{s(!0),l(null);try{const u=await Su.getRun(r);t(u)}catch(u){console.error("Failed to fetch delivery run:",u),l("Failed to load delivery run details")}finally{s(!1)}})()},[r]),{run:e,loading:n,error:o,refetch:()=>r&&AS(r)}}function iM(){const{runId:r}=dw(),{run:e,loading:t,error:n}=AS(r),[s,o]=T.useState(!1),[l,c]=T.useState(!1),[u,h]=T.useState(""),f=e?.orders.every(w=>w.status.toLowerCase()==="delivered")??!1,p=w=>w.split("_").map(x=>x.charAt(0).toUpperCase()+x.slice(1)).join(" ");if(t)return g.jsx("div",{className:"flex items-center justify-center py-12",children:g.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading delivery run details..."})});if(n||!e)return g.jsxs("div",{className:"text-center py-12",children:[g.jsx("div",{className:"text-red-600 mb-4",children:n||"Delivery run not found"}),g.jsx(rn,{to:"/delivery",children:g.jsxs(xt,{variant:"outline",children:[g.jsx(w0,{className:"w-4 h-4 mr-2"}),"Back to Delivery Dashboard"]})})]});const v=w=>w?new Date(w).toLocaleString():"Not started",b=w=>{switch(w.toLowerCase()){case"active":return"bg-green-100 text-green-800";case"completed":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},_=w=>{switch(w.toLowerCase()){case"pre_delivery":return"bg-yellow-100 text-yellow-800";case"in_delivery":return"bg-blue-100 text-blue-800";case"delivered":return"bg-green-100 text-green-800";case"issue":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx(rn,{to:"/delivery",children:g.jsxs(xt,{variant:"outline",size:"sm",children:[g.jsx(w0,{className:"w-4 h-4 mr-2"}),"Back to Delivery"]})}),g.jsxs("div",{children:[g.jsx("h1",{className:"text-2xl font-bold",children:e.name}),g.jsxs("p",{className:"text-muted-foreground",children:["Run ID: ",e.id]})]})]}),e&&e.status==="Active"&&g.jsxs(xt,{onClick:async()=>{if(f){o(!0);try{await Su.finishRun(e.id),window.location.reload()}catch(w){console.error("Failed to finish delivery run:",w);const x=w.response?.data?.error?.message||"Failed to complete delivery. Please ensure all orders are delivered first.";h(x),c(!0)}finally{o(!1)}}},disabled:!f||s,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400",children:[g.jsx(pN,{className:"w-4 h-4 mr-2"}),s?"Completing...":"Complete Delivery"]})]}),g.jsxs(rr,{children:[g.jsx(Er,{children:g.jsxs(Ar,{className:"flex items-center gap-2",children:[g.jsx(Pf,{className:"w-5 h-5"}),"Run Summary"]})}),g.jsxs(sr,{children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(Ex,{className:"w-5 h-5 text-muted-foreground"}),g.jsxs("div",{children:[g.jsx("div",{className:"text-sm text-muted-foreground",children:"Runner"}),g.jsx("div",{className:"font-medium",children:e.runner})]})]}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(Pf,{className:"w-5 h-5 text-muted-foreground"}),g.jsxs("div",{children:[g.jsx("div",{className:"text-sm text-muted-foreground",children:"Vehicle"}),g.jsx("div",{className:"font-medium",children:p(e.vehicle)})]})]}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-5 h-5 rounded-full bg-current text-muted-foreground flex items-center justify-center text-xs",children:""}),g.jsxs("div",{children:[g.jsx("div",{className:"text-sm text-muted-foreground",children:"Status"}),g.jsx(tu,{className:b(e.status),children:e.status.toLowerCase()})]})]}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(mN,{className:"w-5 h-5 text-muted-foreground"}),g.jsxs("div",{children:[g.jsx("div",{className:"text-sm text-muted-foreground",children:"Orders"}),g.jsx("div",{className:"font-medium",children:e.orders.length})]})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6 pt-6 border-t",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(kf,{className:"w-5 h-5 text-muted-foreground"}),g.jsxs("div",{children:[g.jsx("div",{className:"text-sm text-muted-foreground",children:"Started"}),g.jsx("div",{className:"font-medium",children:v(e.start_time)})]})]}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(kf,{className:"w-5 h-5 text-muted-foreground"}),g.jsxs("div",{children:[g.jsx("div",{className:"text-sm text-muted-foreground",children:"Completed"}),g.jsx("div",{className:"font-medium",children:v(e.end_time)})]})]})]})]})]}),g.jsxs(rr,{children:[g.jsxs(Er,{children:[g.jsx(Ar,{children:"Orders in This Run"}),g.jsxs(cb,{children:[e.orders.length," order",e.orders.length!==1?"s":""," assigned to this delivery run"]})]}),g.jsx(sr,{children:e.orders.length===0?g.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No orders assigned to this run"}):g.jsx("div",{className:"space-y-3",children:e.orders.map(w=>g.jsxs("div",{className:`flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors ${w.status.toLowerCase()!=="delivered"?"border-orange-200 bg-orange-50":""}`,children:[g.jsx("div",{className:"flex items-center gap-4",children:g.jsxs("div",{children:[g.jsxs("div",{className:"font-medium",children:["Order ",w.inflow_order_id||w.id.slice(0,8)]}),w.recipient_name&&g.jsx("div",{className:"text-sm text-muted-foreground",children:w.recipient_name}),w.delivery_location&&g.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-1 mt-0.5",children:[g.jsx("span",{className:"font-medium",children:"Location:"})," ",w.delivery_location]})]})}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(tu,{className:_(w.status),children:w.status.toLowerCase().replace("_"," ")}),w.status.toLowerCase()!=="delivered"&&g.jsx("span",{className:"text-xs text-orange-600 font-medium",children:"Must be signed first"}),g.jsx(rn,{to:`/orders/${w.id}`,children:g.jsx(xt,{variant:"outline",size:"sm",children:"View Details"})}),w.status===Te.IN_DELIVERY&&g.jsx(rn,{to:`/document-signing?orderId=${w.id}&returnTo=/delivery/runs/${e.id}`,children:g.jsx(xt,{variant:"default",size:"sm",className:"bg-green-600 hover:bg-green-700",children:"Sign Document"})})]})]},w.id))})})]}),g.jsx(ta,{open:l,onOpenChange:c,children:g.jsxs(Ti,{children:[g.jsxs(ki,{children:[g.jsxs(Ri,{className:"flex items-center gap-2 text-red-600",children:[g.jsx(fN,{className:"w-5 h-5"}),"Cannot Complete Delivery"]}),g.jsx(Ni,{className:"pt-2",children:u})]}),g.jsx(Pi,{children:g.jsx(xt,{onClick:()=>c(!1),children:"OK"})})]})})]})}function oM(){const{isAuthenticated:r,isLoading:e,login:t}=ya(),n=cr(),s=cs();return T.useEffect(()=>{if(!e&&r){const o=s.state?.from?.pathname||"/";n(o,{replace:!0})}},[r,e,n,s]),e?g.jsx("div",{className:"flex items-center justify-center min-h-screen",children:g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-maroon-700"})}):g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:g.jsxs("div",{className:"max-w-md w-full space-y-8 p-8",children:[g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"mx-auto h-16 w-16 bg-maroon-700 rounded-lg flex items-center justify-center mb-4",children:g.jsx("span",{className:"text-white text-2xl font-bold",children:"TH"})}),g.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"TechHub Delivery"}),g.jsx("p",{className:"mt-2 text-gray-600",children:"Sign in to manage deliveries"})]}),g.jsx("div",{className:"mt-8 space-y-4",children:g.jsxs("button",{onClick:t,className:"w-full flex items-center justify-center gap-3 px-4 py-3 border border-transparent text-lg font-medium rounded-lg text-white bg-maroon-700 hover:bg-maroon-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-maroon-500 transition-colors",children:[g.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"currentColor",children:[g.jsx("path",{d:"M11.5 2.5H2.5V11.5H11.5V2.5Z"}),g.jsx("path",{d:"M21.5 2.5H12.5V11.5H21.5V2.5Z"}),g.jsx("path",{d:"M11.5 12.5H2.5V21.5H11.5V12.5Z"}),g.jsx("path",{d:"M21.5 12.5H12.5V21.5H21.5V12.5Z"})]}),"Sign in with TAMU NetID"]})}),g.jsx("p",{className:"mt-4 text-center text-sm text-gray-500",children:"Use your Texas A&M University credentials"})]})})}function aM(){const{user:r,logout:e}=ya(),[t,n]=T.useState([]),[s,o]=T.useState(!0),[l,c]=T.useState(null),u=async()=>{try{const b=await He.get("/auth/sessions");n(b.data.sessions),c(null)}catch(b){c("Failed to load sessions"),console.error("Failed to load sessions:",b)}finally{o(!1)}};T.useEffect(()=>{u()},[]);const h=async b=>{try{await He.post("/auth/sessions/revoke",{session_id:b}),await u()}catch(_){c("Failed to revoke session"),console.error("Failed to revoke session:",_)}},f=async()=>{try{await He.post("/auth/sessions/revoke_all"),await u()}catch(b){c("Failed to revoke sessions"),console.error("Failed to revoke sessions:",b)}},p=b=>new Date(b).toLocaleString(),v=b=>b?b.includes("iPhone")||b.includes("iPad")?"iOS Device":b.includes("Android")?"Android Device":b.includes("Windows")?"Windows PC":b.includes("Mac")?"Mac":b.includes("Linux")?"Linux":"Unknown device":"Unknown device";return s?g.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-maroon-700"})}):g.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[g.jsxs("div",{className:"mb-8",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Active Sessions"}),g.jsxs("p",{className:"text-gray-600 mt-1",children:["Logged in as ",g.jsx("strong",{children:r?.email})]})]}),l&&g.jsx("div",{className:"mb-4 p-4 bg-red-100 text-red-700 rounded-lg",children:l}),g.jsx("div",{className:"bg-white shadow rounded-lg divide-y",children:t.map(b=>g.jsxs("div",{className:"p-4 flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"h-10 w-10 bg-gray-100 rounded-full flex items-center justify-center",children:g.jsx("svg",{className:"h-5 w-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),g.jsxs("div",{children:[g.jsxs("div",{className:"font-medium text-gray-900 flex items-center gap-2",children:[v(b.user_agent),b.is_current&&g.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full",children:"Current"})]}),g.jsxs("div",{className:"text-sm text-gray-500",children:[b.ip_address||"Unknown IP","  Last active ",p(b.last_seen_at)]})]})]}),!b.is_current&&g.jsx("button",{onClick:()=>h(b.id),className:"text-sm text-red-600 hover:text-red-800 font-medium",children:"Sign out"})]},b.id))}),t.length>1&&g.jsx("div",{className:"mt-6 flex gap-4",children:g.jsx("button",{onClick:f,className:"px-4 py-2 text-sm font-medium text-red-600 hover:text-red-800",children:"Sign out of all other sessions"})}),g.jsx("div",{className:"mt-8 pt-8 border-t",children:g.jsx("button",{onClick:e,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Sign out of this device"})})]})}const lM="/assets/boxTAM-DPy4l8Lk.svg";function cM(){const{user:r,isAuthenticated:e,logout:t}=ya();return e?g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(rn,{to:"/sessions",className:"text-white/80 hover:text-white text-sm",children:r?.display_name||r?.email}),g.jsx("button",{onClick:t,className:"text-sm text-white/60 hover:text-white",children:"Sign Out"})]}):g.jsx(rn,{to:"/login",className:"text-white font-medium hover:text-gray-200",children:"Sign In"})}function uM(){return g.jsxs("div",{className:"min-h-screen bg-white flex flex-col",children:[g.jsx("nav",{className:"bg-[#800000] shadow mb-4",children:g.jsx("div",{className:"max-w-7xl mx-auto px-4",children:g.jsxs("div",{className:"flex justify-between items-center py-4",children:[g.jsxs(rn,{to:"/",className:"flex items-center gap-3",children:[g.jsx("img",{src:lM,alt:"boxTAM logo",className:"h-8 w-auto"}),g.jsx("h1",{className:"text-xl font-bold text-white",children:"TechHub"})]}),g.jsxs("nav",{className:"flex gap-4 items-center",children:[g.jsx(rn,{to:"/",className:"text-white font-medium hover:text-gray-200",children:"Orders"}),g.jsx(rn,{to:"/order-qa",className:"text-white font-medium hover:text-gray-200",children:"QA"}),g.jsx(rn,{to:"/delivery",className:"text-white font-medium hover:text-gray-200",children:"Delivery"}),g.jsx(rn,{to:"/admin",className:"text-white font-medium hover:text-gray-200",children:"Admin"}),g.jsx("div",{className:"border-l border-white/30 h-6 mx-2"}),g.jsx(cM,{})]})]})})}),g.jsx("main",{className:"flex-1 max-w-7xl mx-auto w-full px-4",children:g.jsxs(AA,{children:[g.jsx(hn,{path:"/login",element:g.jsx(oM,{})}),g.jsx(hn,{path:"/",element:g.jsx(jn,{children:g.jsx(mk,{})})}),g.jsx(hn,{path:"/orders/:orderId",element:g.jsx(jn,{children:g.jsx(vk,{})})}),g.jsx(hn,{path:"/order-qa",element:g.jsx(jn,{children:g.jsx(sM,{})})}),g.jsx(hn,{path:"/delivery",element:g.jsx(jn,{children:g.jsx(xN,{})})}),g.jsx(hn,{path:"/delivery/runs/:runId",element:g.jsx(jn,{children:g.jsx(iM,{})})}),g.jsx(hn,{path:"/shipping",element:g.jsx(jn,{children:g.jsx(kx,{})})}),g.jsx(hn,{path:"/pre-delivery",element:g.jsx(jn,{children:g.jsx(Cx,{})})}),g.jsx(hn,{path:"/in-delivery",element:g.jsx(jn,{children:g.jsx(Tx,{})})}),g.jsx(hn,{path:"/document-signing",element:g.jsx(jn,{children:g.jsx(rM,{})})}),g.jsx(hn,{path:"/admin",element:g.jsx(jn,{children:g.jsx(SN,{})})}),g.jsx(hn,{path:"/sessions",element:g.jsx(jn,{children:g.jsx(aM,{})})})]})}),g.jsx("footer",{className:"bg-[#800000] text-white mt-8",children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 text-center text-sm",children:[" ",new Date().getFullYear()," TechHub  All rights reserved"]})})]})}function dM(){return g.jsx(OA,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:g.jsx(f1,{children:g.jsx(uM,{})})})}NE.createRoot(document.getElementById("root")).render(g.jsx(_r.StrictMode,{children:g.jsx(dM,{})}));
