var vy=s=>{throw TypeError(s)};var wh=(s,e,t)=>e.has(s)||vy("Cannot "+t);var Je=(s,e,t)=>(wh(s,e,"read from private field"),t?t.call(s):e.get(s)),Yn=(s,e,t)=>e.has(s)?vy("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),Zt=(s,e,t,n)=>(wh(s,e,"write to private field"),n?n.call(s,t):e.set(s,t),t),Xn=(s,e,t)=>(wh(s,e,"access private method"),t);var by=(s,e,t,n)=>({set _(r){Zt(s,e,r,t)},get _(){return Je(s,e,n)}});function xE(s,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in s)){const o=Object.getOwnPropertyDescriptor(n,r);o&&Object.defineProperty(s,r,o.get?o:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function ss(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var xh={exports:{}},Mo={},Sh={exports:{}},Oe={};var wy;function SE(){if(wy)return Oe;wy=1;var s=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function y(M){return M===null||typeof M!="object"?null:(M=p&&M[p]||M["@@iterator"],typeof M=="function"?M:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,b={};function w(M,W,oe){this.props=M,this.context=W,this.refs=b,this.updater=oe||x}w.prototype.isReactComponent={},w.prototype.setState=function(M,W){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,W,"setState")},w.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function E(){}E.prototype=w.prototype;function A(M,W,oe){this.props=M,this.context=W,this.refs=b,this.updater=oe||x}var C=A.prototype=new E;C.constructor=A,_(C,w.prototype),C.isPureReactComponent=!0;var k=Array.isArray,N=Object.prototype.hasOwnProperty,R={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function j(M,W,oe){var ce,ve={},we=null,ge=null;if(W!=null)for(ce in W.ref!==void 0&&(ge=W.ref),W.key!==void 0&&(we=""+W.key),W)N.call(W,ce)&&!D.hasOwnProperty(ce)&&(ve[ce]=W[ce]);var K=arguments.length-2;if(K===1)ve.children=oe;else if(1<K){for(var se=Array(K),ue=0;ue<K;ue++)se[ue]=arguments[ue+2];ve.children=se}if(M&&M.defaultProps)for(ce in K=M.defaultProps,K)ve[ce]===void 0&&(ve[ce]=K[ce]);return{$$typeof:s,type:M,key:we,ref:ge,props:ve,_owner:R.current}}function z(M,W){return{$$typeof:s,type:M.type,key:W,ref:M.ref,props:M.props,_owner:M._owner}}function q(M){return typeof M=="object"&&M!==null&&M.$$typeof===s}function Y(M){var W={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(oe){return W[oe]})}var ne=/\/+/g;function ie(M,W){return typeof M=="object"&&M!==null&&M.key!=null?Y(""+M.key):W.toString(36)}function ee(M,W,oe,ce,ve){var we=typeof M;(we==="undefined"||we==="boolean")&&(M=null);var ge=!1;if(M===null)ge=!0;else switch(we){case"string":case"number":ge=!0;break;case"object":switch(M.$$typeof){case s:case e:ge=!0}}if(ge)return ge=M,ve=ve(ge),M=ce===""?"."+ie(ge,0):ce,k(ve)?(oe="",M!=null&&(oe=M.replace(ne,"$&/")+"/"),ee(ve,W,oe,"",function(ue){return ue})):ve!=null&&(q(ve)&&(ve=z(ve,oe+(!ve.key||ge&&ge.key===ve.key?"":(""+ve.key).replace(ne,"$&/")+"/")+M)),W.push(ve)),1;if(ge=0,ce=ce===""?".":ce+":",k(M))for(var K=0;K<M.length;K++){we=M[K];var se=ce+ie(we,K);ge+=ee(we,W,oe,se,ve)}else if(se=y(M),typeof se=="function")for(M=se.call(M),K=0;!(we=M.next()).done;)we=we.value,se=ce+ie(we,K++),ge+=ee(we,W,oe,se,ve);else if(we==="object")throw W=String(M),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return ge}function ae(M,W,oe){if(M==null)return M;var ce=[],ve=0;return ee(M,ce,"","",function(we){return W.call(oe,we,ve++)}),ce}function G(M){if(M._status===-1){var W=M._result;W=W(),W.then(function(oe){(M._status===0||M._status===-1)&&(M._status=1,M._result=oe)},function(oe){(M._status===0||M._status===-1)&&(M._status=2,M._result=oe)}),M._status===-1&&(M._status=0,M._result=W)}if(M._status===1)return M._result.default;throw M._result}var X={current:null},I={transition:null},V={ReactCurrentDispatcher:X,ReactCurrentBatchConfig:I,ReactCurrentOwner:R};function Q(){throw Error("act(...) is not supported in production builds of React.")}return Oe.Children={map:ae,forEach:function(M,W,oe){ae(M,function(){W.apply(this,arguments)},oe)},count:function(M){var W=0;return ae(M,function(){W++}),W},toArray:function(M){return ae(M,function(W){return W})||[]},only:function(M){if(!q(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Oe.Component=w,Oe.Fragment=t,Oe.Profiler=r,Oe.PureComponent=A,Oe.StrictMode=n,Oe.Suspense=u,Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V,Oe.act=Q,Oe.cloneElement=function(M,W,oe){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var ce=_({},M.props),ve=M.key,we=M.ref,ge=M._owner;if(W!=null){if(W.ref!==void 0&&(we=W.ref,ge=R.current),W.key!==void 0&&(ve=""+W.key),M.type&&M.type.defaultProps)var K=M.type.defaultProps;for(se in W)N.call(W,se)&&!D.hasOwnProperty(se)&&(ce[se]=W[se]===void 0&&K!==void 0?K[se]:W[se])}var se=arguments.length-2;if(se===1)ce.children=oe;else if(1<se){K=Array(se);for(var ue=0;ue<se;ue++)K[ue]=arguments[ue+2];ce.children=K}return{$$typeof:s,type:M.type,key:ve,ref:we,props:ce,_owner:ge}},Oe.createContext=function(M){return M={$$typeof:l,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:o,_context:M},M.Consumer=M},Oe.createElement=j,Oe.createFactory=function(M){var W=j.bind(null,M);return W.type=M,W},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(M){return{$$typeof:c,render:M}},Oe.isValidElement=q,Oe.lazy=function(M){return{$$typeof:f,_payload:{_status:-1,_result:M},_init:G}},Oe.memo=function(M,W){return{$$typeof:h,type:M,compare:W===void 0?null:W}},Oe.startTransition=function(M){var W=I.transition;I.transition={};try{M()}finally{I.transition=W}},Oe.unstable_act=Q,Oe.useCallback=function(M,W){return X.current.useCallback(M,W)},Oe.useContext=function(M){return X.current.useContext(M)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(M){return X.current.useDeferredValue(M)},Oe.useEffect=function(M,W){return X.current.useEffect(M,W)},Oe.useId=function(){return X.current.useId()},Oe.useImperativeHandle=function(M,W,oe){return X.current.useImperativeHandle(M,W,oe)},Oe.useInsertionEffect=function(M,W){return X.current.useInsertionEffect(M,W)},Oe.useLayoutEffect=function(M,W){return X.current.useLayoutEffect(M,W)},Oe.useMemo=function(M,W){return X.current.useMemo(M,W)},Oe.useReducer=function(M,W,oe){return X.current.useReducer(M,W,oe)},Oe.useRef=function(M){return X.current.useRef(M)},Oe.useState=function(M){return X.current.useState(M)},Oe.useSyncExternalStore=function(M,W,oe){return X.current.useSyncExternalStore(M,W,oe)},Oe.useTransition=function(){return X.current.useTransition()},Oe.version="18.3.1",Oe}var xy;function Hf(){return xy||(xy=1,Sh.exports=SE()),Sh.exports}var Sy;function _E(){if(Sy)return Mo;Sy=1;var s=Hf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,r=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(c,u,h){var f,p={},y=null,x=null;h!==void 0&&(y=""+h),u.key!==void 0&&(y=""+u.key),u.ref!==void 0&&(x=u.ref);for(f in u)n.call(u,f)&&!o.hasOwnProperty(f)&&(p[f]=u[f]);if(c&&c.defaultProps)for(f in u=c.defaultProps,u)p[f]===void 0&&(p[f]=u[f]);return{$$typeof:e,type:c,key:y,ref:x,props:p,_owner:r.current}}return Mo.Fragment=t,Mo.jsx=l,Mo.jsxs=l,Mo}var _y;function EE(){return _y||(_y=1,xh.exports=_E()),xh.exports}var g=EE(),T=Hf();const xr=ss(T),Wf=xE({__proto__:null,default:xr},[T]);var Ul={},_h={exports:{}},en={},Eh={exports:{}},Ah={};var Ey;function AE(){return Ey||(Ey=1,(function(s){function e(I,V){var Q=I.length;I.push(V);e:for(;0<Q;){var M=Q-1>>>1,W=I[M];if(0<r(W,V))I[M]=V,I[Q]=W,Q=M;else break e}}function t(I){return I.length===0?null:I[0]}function n(I){if(I.length===0)return null;var V=I[0],Q=I.pop();if(Q!==V){I[0]=Q;e:for(var M=0,W=I.length,oe=W>>>1;M<oe;){var ce=2*(M+1)-1,ve=I[ce],we=ce+1,ge=I[we];if(0>r(ve,Q))we<W&&0>r(ge,ve)?(I[M]=ge,I[we]=Q,M=we):(I[M]=ve,I[ce]=Q,M=ce);else if(we<W&&0>r(ge,Q))I[M]=ge,I[we]=Q,M=we;else break e}}return V}function r(I,V){var Q=I.sortIndex-V.sortIndex;return Q!==0?Q:I.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;s.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();s.unstable_now=function(){return l.now()-c}}var u=[],h=[],f=1,p=null,y=3,x=!1,_=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(I){for(var V=t(h);V!==null;){if(V.callback===null)n(h);else if(V.startTime<=I)n(h),V.sortIndex=V.expirationTime,e(u,V);else break;V=t(h)}}function k(I){if(b=!1,C(I),!_)if(t(u)!==null)_=!0,G(N);else{var V=t(h);V!==null&&X(k,V.startTime-I)}}function N(I,V){_=!1,b&&(b=!1,E(j),j=-1),x=!0;var Q=y;try{for(C(V),p=t(u);p!==null&&(!(p.expirationTime>V)||I&&!Y());){var M=p.callback;if(typeof M=="function"){p.callback=null,y=p.priorityLevel;var W=M(p.expirationTime<=V);V=s.unstable_now(),typeof W=="function"?p.callback=W:p===t(u)&&n(u),C(V)}else n(u);p=t(u)}if(p!==null)var oe=!0;else{var ce=t(h);ce!==null&&X(k,ce.startTime-V),oe=!1}return oe}finally{p=null,y=Q,x=!1}}var R=!1,D=null,j=-1,z=5,q=-1;function Y(){return!(s.unstable_now()-q<z)}function ne(){if(D!==null){var I=s.unstable_now();q=I;var V=!0;try{V=D(!0,I)}finally{V?ie():(R=!1,D=null)}}else R=!1}var ie;if(typeof A=="function")ie=function(){A(ne)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,ae=ee.port2;ee.port1.onmessage=ne,ie=function(){ae.postMessage(null)}}else ie=function(){w(ne,0)};function G(I){D=I,R||(R=!0,ie())}function X(I,V){j=w(function(){I(s.unstable_now())},V)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(I){I.callback=null},s.unstable_continueExecution=function(){_||x||(_=!0,G(N))},s.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<I?Math.floor(1e3/I):5},s.unstable_getCurrentPriorityLevel=function(){return y},s.unstable_getFirstCallbackNode=function(){return t(u)},s.unstable_next=function(I){switch(y){case 1:case 2:case 3:var V=3;break;default:V=y}var Q=y;y=V;try{return I()}finally{y=Q}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(I,V){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var Q=y;y=I;try{return V()}finally{y=Q}},s.unstable_scheduleCallback=function(I,V,Q){var M=s.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?M+Q:M):Q=M,I){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=Q+W,I={id:f++,callback:V,priorityLevel:I,startTime:Q,expirationTime:W,sortIndex:-1},Q>M?(I.sortIndex=Q,e(h,I),t(u)===null&&I===t(h)&&(b?(E(j),j=-1):b=!0,X(k,Q-M))):(I.sortIndex=W,e(u,I),_||x||(_=!0,G(N))),I},s.unstable_shouldYield=Y,s.unstable_wrapCallback=function(I){var V=y;return function(){var Q=y;y=V;try{return I.apply(this,arguments)}finally{y=Q}}}})(Ah)),Ah}var Ay;function CE(){return Ay||(Ay=1,Eh.exports=AE()),Eh.exports}var Cy;function TE(){if(Cy)return en;Cy=1;var s=Hf(),e=CE();function t(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,d=1;d<arguments.length;d++)a+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,r={};function o(i,a){l(i,a),l(i+"Capture",a)}function l(i,a){for(r[i]=a,i=0;i<a.length;i++)n.add(a[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function y(i){return u.call(p,i)?!0:u.call(f,i)?!1:h.test(i)?p[i]=!0:(f[i]=!0,!1)}function x(i,a,d,m){if(d!==null&&d.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return m?!1:d!==null?!d.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function _(i,a,d,m){if(a===null||typeof a>"u"||x(i,a,d,m))return!0;if(m)return!1;if(d!==null)switch(d.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function b(i,a,d,m,v,S,P){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=m,this.attributeNamespace=v,this.mustUseProperty=d,this.propertyName=i,this.type=a,this.sanitizeURL=S,this.removeEmptyString=P}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){w[i]=new b(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];w[a]=new b(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){w[i]=new b(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){w[i]=new b(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){w[i]=new b(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){w[i]=new b(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){w[i]=new b(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){w[i]=new b(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){w[i]=new b(i,5,!1,i.toLowerCase(),null,!1,!1)});var E=/[\-:]([a-z])/g;function A(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(E,A);w[a]=new b(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(E,A);w[a]=new b(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(E,A);w[a]=new b(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){w[i]=new b(i,1,!1,i.toLowerCase(),null,!1,!1)}),w.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){w[i]=new b(i,1,!1,i.toLowerCase(),null,!0,!0)});function C(i,a,d,m){var v=w.hasOwnProperty(a)?w[a]:null;(v!==null?v.type!==0:m||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(_(a,d,v,m)&&(d=null),m||v===null?y(a)&&(d===null?i.removeAttribute(a):i.setAttribute(a,""+d)):v.mustUseProperty?i[v.propertyName]=d===null?v.type===3?!1:"":d:(a=v.attributeName,m=v.attributeNamespace,d===null?i.removeAttribute(a):(v=v.type,d=v===3||v===4&&d===!0?"":""+d,m?i.setAttributeNS(m,a,d):i.setAttribute(a,d))))}var k=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),R=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),q=Symbol.for("react.provider"),Y=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),ae=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),X=Symbol.for("react.offscreen"),I=Symbol.iterator;function V(i){return i===null||typeof i!="object"?null:(i=I&&i[I]||i["@@iterator"],typeof i=="function"?i:null)}var Q=Object.assign,M;function W(i){if(M===void 0)try{throw Error()}catch(d){var a=d.stack.trim().match(/\n( *(at )?)/);M=a&&a[1]||""}return`
`+M+i}var oe=!1;function ce(i,a){if(!i||oe)return"";oe=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(H){var m=H}Reflect.construct(i,[],a)}else{try{a.call()}catch(H){m=H}i.call(a.prototype)}else{try{throw Error()}catch(H){m=H}i()}}catch(H){if(H&&m&&typeof H.stack=="string"){for(var v=H.stack.split(`
`),S=m.stack.split(`
`),P=v.length-1,O=S.length-1;1<=P&&0<=O&&v[P]!==S[O];)O--;for(;1<=P&&0<=O;P--,O--)if(v[P]!==S[O]){if(P!==1||O!==1)do if(P--,O--,0>O||v[P]!==S[O]){var L=`
`+v[P].replace(" at new "," at ");return i.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",i.displayName)),L}while(1<=P&&0<=O);break}}}finally{oe=!1,Error.prepareStackTrace=d}return(i=i?i.displayName||i.name:"")?W(i):""}function ve(i){switch(i.tag){case 5:return W(i.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return i=ce(i.type,!1),i;case 11:return i=ce(i.type.render,!1),i;case 1:return i=ce(i.type,!0),i;default:return""}}function we(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case D:return"Fragment";case R:return"Portal";case z:return"Profiler";case j:return"StrictMode";case ie:return"Suspense";case ee:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case Y:return(i.displayName||"Context")+".Consumer";case q:return(i._context.displayName||"Context")+".Provider";case ne:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case ae:return a=i.displayName||null,a!==null?a:we(i.type)||"Memo";case G:a=i._payload,i=i._init;try{return we(i(a))}catch{}}return null}function ge(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return we(a);case 8:return a===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function K(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function se(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function ue(i){var a=se(i)?"checked":"value",d=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),m=""+i[a];if(!i.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var v=d.get,S=d.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return v.call(this)},set:function(P){m=""+P,S.call(this,P)}}),Object.defineProperty(i,a,{enumerable:d.enumerable}),{getValue:function(){return m},setValue:function(P){m=""+P},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function et(i){i._valueTracker||(i._valueTracker=ue(i))}function Gt(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var d=a.getValue(),m="";return i&&(m=se(i)?i.checked?"true":"false":i.value),i=m,i!==d?(a.setValue(i),!0):!1}function De(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Be(i,a){var d=a.checked;return Q({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??i._wrapperState.initialChecked})}function Ke(i,a){var d=a.defaultValue==null?"":a.defaultValue,m=a.checked!=null?a.checked:a.defaultChecked;d=K(a.value!=null?a.value:d),i._wrapperState={initialChecked:m,initialValue:d,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Le(i,a){a=a.checked,a!=null&&C(i,"checked",a,!1)}function vt(i,a){Le(i,a);var d=K(a.value),m=a.type;if(d!=null)m==="number"?(d===0&&i.value===""||i.value!=d)&&(i.value=""+d):i.value!==""+d&&(i.value=""+d);else if(m==="submit"||m==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?as(i,a.type,d):a.hasOwnProperty("defaultValue")&&as(i,a.type,K(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function on(i,a,d){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var m=a.type;if(!(m!=="submit"&&m!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,d||a===i.value||(i.value=a),i.defaultValue=a}d=i.name,d!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,d!==""&&(i.name=d)}function as(i,a,d){(a!=="number"||De(i.ownerDocument)!==i)&&(d==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+d&&(i.defaultValue=""+d))}var ls=Array.isArray;function Tn(i,a,d,m){if(i=i.options,a){a={};for(var v=0;v<d.length;v++)a["$"+d[v]]=!0;for(d=0;d<i.length;d++)v=a.hasOwnProperty("$"+i[d].value),i[d].selected!==v&&(i[d].selected=v),v&&m&&(i[d].defaultSelected=!0)}else{for(d=""+K(d),a=null,v=0;v<i.length;v++){if(i[v].value===d){i[v].selected=!0,m&&(i[v].defaultSelected=!0);return}a!==null||i[v].disabled||(a=i[v])}a!==null&&(a.selected=!0)}}function Xi(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return Q({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Pa(i,a){var d=a.value;if(d==null){if(d=a.children,a=a.defaultValue,d!=null){if(a!=null)throw Error(t(92));if(ls(d)){if(1<d.length)throw Error(t(93));d=d[0]}a=d}a==null&&(a=""),d=a}i._wrapperState={initialValue:K(d)}}function Ra(i,a){var d=K(a.value),m=K(a.defaultValue);d!=null&&(d=""+d,d!==i.value&&(i.value=d),a.defaultValue==null&&i.defaultValue!==d&&(i.defaultValue=d)),m!=null&&(i.defaultValue=""+m)}function Na(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function Da(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mn(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?Da(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var kn,Pn=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,d,m,v){MSApp.execUnsafeLocalFunction(function(){return i(a,d,m,v)})}:i})(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(kn=kn||document.createElement("div"),kn.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=kn.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function cr(i,a){if(a){var d=i.firstChild;if(d&&d===i.lastChild&&d.nodeType===3){d.nodeValue=a;return}}i.textContent=a}var Ki={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AS=["Webkit","ms","Moz","O"];Object.keys(Ki).forEach(function(i){AS.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),Ki[a]=Ki[i]})});function Op(i,a,d){return a==null||typeof a=="boolean"||a===""?"":d||typeof a!="number"||a===0||Ki.hasOwnProperty(i)&&Ki[i]?(""+a).trim():a+"px"}function Mp(i,a){i=i.style;for(var d in a)if(a.hasOwnProperty(d)){var m=d.indexOf("--")===0,v=Op(d,a[d],m);d==="float"&&(d="cssFloat"),m?i.setProperty(d,v):i[d]=v}}var CS=Q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Du(i,a){if(a){if(CS[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function Ou(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mu=null;function Lu(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Iu=null,Bs=null,Us=null;function Lp(i){if(i=bo(i)){if(typeof Iu!="function")throw Error(t(280));var a=i.stateNode;a&&(a=tl(a),Iu(i.stateNode,i.type,a))}}function Ip(i){Bs?Us?Us.push(i):Us=[i]:Bs=i}function Fp(){if(Bs){var i=Bs,a=Us;if(Us=Bs=null,Lp(i),a)for(i=0;i<a.length;i++)Lp(a[i])}}function jp(i,a){return i(a)}function Bp(){}var Fu=!1;function Up(i,a,d){if(Fu)return i(a,d);Fu=!0;try{return jp(i,a,d)}finally{Fu=!1,(Bs!==null||Us!==null)&&(Bp(),Fp())}}function Qi(i,a){var d=i.stateNode;if(d===null)return null;var m=tl(d);if(m===null)return null;d=m[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(i=i.type,m=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!m;break e;default:i=!1}if(i)return null;if(d&&typeof d!="function")throw Error(t(231,a,typeof d));return d}var ju=!1;if(c)try{var Ji={};Object.defineProperty(Ji,"passive",{get:function(){ju=!0}}),window.addEventListener("test",Ji,Ji),window.removeEventListener("test",Ji,Ji)}catch{ju=!1}function TS(i,a,d,m,v,S,P,O,L){var H=Array.prototype.slice.call(arguments,3);try{a.apply(d,H)}catch(Z){this.onError(Z)}}var Zi=!1,Oa=null,Ma=!1,Bu=null,kS={onError:function(i){Zi=!0,Oa=i}};function PS(i,a,d,m,v,S,P,O,L){Zi=!1,Oa=null,TS.apply(kS,arguments)}function RS(i,a,d,m,v,S,P,O,L){if(PS.apply(this,arguments),Zi){if(Zi){var H=Oa;Zi=!1,Oa=null}else throw Error(t(198));Ma||(Ma=!0,Bu=H)}}function cs(i){var a=i,d=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(d=a.return),i=a.return;while(i)}return a.tag===3?d:null}function zp(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function Hp(i){if(cs(i)!==i)throw Error(t(188))}function NS(i){var a=i.alternate;if(!a){if(a=cs(i),a===null)throw Error(t(188));return a!==i?null:i}for(var d=i,m=a;;){var v=d.return;if(v===null)break;var S=v.alternate;if(S===null){if(m=v.return,m!==null){d=m;continue}break}if(v.child===S.child){for(S=v.child;S;){if(S===d)return Hp(v),i;if(S===m)return Hp(v),a;S=S.sibling}throw Error(t(188))}if(d.return!==m.return)d=v,m=S;else{for(var P=!1,O=v.child;O;){if(O===d){P=!0,d=v,m=S;break}if(O===m){P=!0,m=v,d=S;break}O=O.sibling}if(!P){for(O=S.child;O;){if(O===d){P=!0,d=S,m=v;break}if(O===m){P=!0,m=S,d=v;break}O=O.sibling}if(!P)throw Error(t(189))}}if(d.alternate!==m)throw Error(t(190))}if(d.tag!==3)throw Error(t(188));return d.stateNode.current===d?i:a}function Wp(i){return i=NS(i),i!==null?$p(i):null}function $p(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=$p(i);if(a!==null)return a;i=i.sibling}return null}var Vp=e.unstable_scheduleCallback,qp=e.unstable_cancelCallback,DS=e.unstable_shouldYield,OS=e.unstable_requestPaint,ct=e.unstable_now,MS=e.unstable_getCurrentPriorityLevel,Uu=e.unstable_ImmediatePriority,Gp=e.unstable_UserBlockingPriority,La=e.unstable_NormalPriority,LS=e.unstable_LowPriority,Yp=e.unstable_IdlePriority,Ia=null,Wn=null;function IS(i){if(Wn&&typeof Wn.onCommitFiberRoot=="function")try{Wn.onCommitFiberRoot(Ia,i,void 0,(i.current.flags&128)===128)}catch{}}var Rn=Math.clz32?Math.clz32:BS,FS=Math.log,jS=Math.LN2;function BS(i){return i>>>=0,i===0?32:31-(FS(i)/jS|0)|0}var Fa=64,ja=4194304;function eo(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Ba(i,a){var d=i.pendingLanes;if(d===0)return 0;var m=0,v=i.suspendedLanes,S=i.pingedLanes,P=d&268435455;if(P!==0){var O=P&~v;O!==0?m=eo(O):(S&=P,S!==0&&(m=eo(S)))}else P=d&~v,P!==0?m=eo(P):S!==0&&(m=eo(S));if(m===0)return 0;if(a!==0&&a!==m&&(a&v)===0&&(v=m&-m,S=a&-a,v>=S||v===16&&(S&4194240)!==0))return a;if((m&4)!==0&&(m|=d&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=m;0<a;)d=31-Rn(a),v=1<<d,m|=i[d],a&=~v;return m}function US(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zS(i,a){for(var d=i.suspendedLanes,m=i.pingedLanes,v=i.expirationTimes,S=i.pendingLanes;0<S;){var P=31-Rn(S),O=1<<P,L=v[P];L===-1?((O&d)===0||(O&m)!==0)&&(v[P]=US(O,a)):L<=a&&(i.expiredLanes|=O),S&=~O}}function zu(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Xp(){var i=Fa;return Fa<<=1,(Fa&4194240)===0&&(Fa=64),i}function Hu(i){for(var a=[],d=0;31>d;d++)a.push(i);return a}function to(i,a,d){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-Rn(a),i[a]=d}function HS(i,a){var d=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var m=i.eventTimes;for(i=i.expirationTimes;0<d;){var v=31-Rn(d),S=1<<v;a[v]=0,m[v]=-1,i[v]=-1,d&=~S}}function Wu(i,a){var d=i.entangledLanes|=a;for(i=i.entanglements;d;){var m=31-Rn(d),v=1<<m;v&a|i[m]&a&&(i[m]|=a),d&=~v}}var Ue=0;function Kp(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Qp,$u,Jp,Zp,em,Vu=!1,Ua=[],kr=null,Pr=null,Rr=null,no=new Map,ro=new Map,Nr=[],WS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tm(i,a){switch(i){case"focusin":case"focusout":kr=null;break;case"dragenter":case"dragleave":Pr=null;break;case"mouseover":case"mouseout":Rr=null;break;case"pointerover":case"pointerout":no.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":ro.delete(a.pointerId)}}function so(i,a,d,m,v,S){return i===null||i.nativeEvent!==S?(i={blockedOn:a,domEventName:d,eventSystemFlags:m,nativeEvent:S,targetContainers:[v]},a!==null&&(a=bo(a),a!==null&&$u(a)),i):(i.eventSystemFlags|=m,a=i.targetContainers,v!==null&&a.indexOf(v)===-1&&a.push(v),i)}function $S(i,a,d,m,v){switch(a){case"focusin":return kr=so(kr,i,a,d,m,v),!0;case"dragenter":return Pr=so(Pr,i,a,d,m,v),!0;case"mouseover":return Rr=so(Rr,i,a,d,m,v),!0;case"pointerover":var S=v.pointerId;return no.set(S,so(no.get(S)||null,i,a,d,m,v)),!0;case"gotpointercapture":return S=v.pointerId,ro.set(S,so(ro.get(S)||null,i,a,d,m,v)),!0}return!1}function nm(i){var a=us(i.target);if(a!==null){var d=cs(a);if(d!==null){if(a=d.tag,a===13){if(a=zp(d),a!==null){i.blockedOn=a,em(i.priority,function(){Jp(d)});return}}else if(a===3&&d.stateNode.current.memoizedState.isDehydrated){i.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}i.blockedOn=null}function za(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var d=Gu(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(d===null){d=i.nativeEvent;var m=new d.constructor(d.type,d);Mu=m,d.target.dispatchEvent(m),Mu=null}else return a=bo(d),a!==null&&$u(a),i.blockedOn=d,!1;a.shift()}return!0}function rm(i,a,d){za(i)&&d.delete(a)}function VS(){Vu=!1,kr!==null&&za(kr)&&(kr=null),Pr!==null&&za(Pr)&&(Pr=null),Rr!==null&&za(Rr)&&(Rr=null),no.forEach(rm),ro.forEach(rm)}function io(i,a){i.blockedOn===a&&(i.blockedOn=null,Vu||(Vu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,VS)))}function oo(i){function a(v){return io(v,i)}if(0<Ua.length){io(Ua[0],i);for(var d=1;d<Ua.length;d++){var m=Ua[d];m.blockedOn===i&&(m.blockedOn=null)}}for(kr!==null&&io(kr,i),Pr!==null&&io(Pr,i),Rr!==null&&io(Rr,i),no.forEach(a),ro.forEach(a),d=0;d<Nr.length;d++)m=Nr[d],m.blockedOn===i&&(m.blockedOn=null);for(;0<Nr.length&&(d=Nr[0],d.blockedOn===null);)nm(d),d.blockedOn===null&&Nr.shift()}var zs=k.ReactCurrentBatchConfig,Ha=!0;function qS(i,a,d,m){var v=Ue,S=zs.transition;zs.transition=null;try{Ue=1,qu(i,a,d,m)}finally{Ue=v,zs.transition=S}}function GS(i,a,d,m){var v=Ue,S=zs.transition;zs.transition=null;try{Ue=4,qu(i,a,d,m)}finally{Ue=v,zs.transition=S}}function qu(i,a,d,m){if(Ha){var v=Gu(i,a,d,m);if(v===null)ud(i,a,m,Wa,d),tm(i,m);else if($S(v,i,a,d,m))m.stopPropagation();else if(tm(i,m),a&4&&-1<WS.indexOf(i)){for(;v!==null;){var S=bo(v);if(S!==null&&Qp(S),S=Gu(i,a,d,m),S===null&&ud(i,a,m,Wa,d),S===v)break;v=S}v!==null&&m.stopPropagation()}else ud(i,a,m,null,d)}}var Wa=null;function Gu(i,a,d,m){if(Wa=null,i=Lu(m),i=us(i),i!==null)if(a=cs(i),a===null)i=null;else if(d=a.tag,d===13){if(i=zp(a),i!==null)return i;i=null}else if(d===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return Wa=i,null}function sm(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(MS()){case Uu:return 1;case Gp:return 4;case La:case LS:return 16;case Yp:return 536870912;default:return 16}default:return 16}}var Dr=null,Yu=null,$a=null;function im(){if($a)return $a;var i,a=Yu,d=a.length,m,v="value"in Dr?Dr.value:Dr.textContent,S=v.length;for(i=0;i<d&&a[i]===v[i];i++);var P=d-i;for(m=1;m<=P&&a[d-m]===v[S-m];m++);return $a=v.slice(i,1<m?1-m:void 0)}function Va(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function qa(){return!0}function om(){return!1}function an(i){function a(d,m,v,S,P){this._reactName=d,this._targetInst=v,this.type=m,this.nativeEvent=S,this.target=P,this.currentTarget=null;for(var O in i)i.hasOwnProperty(O)&&(d=i[O],this[O]=d?d(S):S[O]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?qa:om,this.isPropagationStopped=om,this}return Q(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=qa)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=qa)},persist:function(){},isPersistent:qa}),a}var Hs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xu=an(Hs),ao=Q({},Hs,{view:0,detail:0}),YS=an(ao),Ku,Qu,lo,Ga=Q({},ao,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zu,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==lo&&(lo&&i.type==="mousemove"?(Ku=i.screenX-lo.screenX,Qu=i.screenY-lo.screenY):Qu=Ku=0,lo=i),Ku)},movementY:function(i){return"movementY"in i?i.movementY:Qu}}),am=an(Ga),XS=Q({},Ga,{dataTransfer:0}),KS=an(XS),QS=Q({},ao,{relatedTarget:0}),Ju=an(QS),JS=Q({},Hs,{animationName:0,elapsedTime:0,pseudoElement:0}),ZS=an(JS),e_=Q({},Hs,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),t_=an(e_),n_=Q({},Hs,{data:0}),lm=an(n_),r_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},s_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},i_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function o_(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=i_[i])?!!a[i]:!1}function Zu(){return o_}var a_=Q({},ao,{key:function(i){if(i.key){var a=r_[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Va(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?s_[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zu,charCode:function(i){return i.type==="keypress"?Va(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Va(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),l_=an(a_),c_=Q({},Ga,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cm=an(c_),u_=Q({},ao,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zu}),d_=an(u_),h_=Q({},Hs,{propertyName:0,elapsedTime:0,pseudoElement:0}),f_=an(h_),p_=Q({},Ga,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),m_=an(p_),g_=[9,13,27,32],ed=c&&"CompositionEvent"in window,co=null;c&&"documentMode"in document&&(co=document.documentMode);var y_=c&&"TextEvent"in window&&!co,um=c&&(!ed||co&&8<co&&11>=co),dm=" ",hm=!1;function fm(i,a){switch(i){case"keyup":return g_.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pm(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ws=!1;function v_(i,a){switch(i){case"compositionend":return pm(a);case"keypress":return a.which!==32?null:(hm=!0,dm);case"textInput":return i=a.data,i===dm&&hm?null:i;default:return null}}function b_(i,a){if(Ws)return i==="compositionend"||!ed&&fm(i,a)?(i=im(),$a=Yu=Dr=null,Ws=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return um&&a.locale!=="ko"?null:a.data;default:return null}}var w_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mm(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!w_[i.type]:a==="textarea"}function gm(i,a,d,m){Ip(m),a=Ja(a,"onChange"),0<a.length&&(d=new Xu("onChange","change",null,d,m),i.push({event:d,listeners:a}))}var uo=null,ho=null;function x_(i){Mm(i,0)}function Ya(i){var a=Ys(i);if(Gt(a))return i}function S_(i,a){if(i==="change")return a}var ym=!1;if(c){var td;if(c){var nd="oninput"in document;if(!nd){var vm=document.createElement("div");vm.setAttribute("oninput","return;"),nd=typeof vm.oninput=="function"}td=nd}else td=!1;ym=td&&(!document.documentMode||9<document.documentMode)}function bm(){uo&&(uo.detachEvent("onpropertychange",wm),ho=uo=null)}function wm(i){if(i.propertyName==="value"&&Ya(ho)){var a=[];gm(a,ho,i,Lu(i)),Up(x_,a)}}function __(i,a,d){i==="focusin"?(bm(),uo=a,ho=d,uo.attachEvent("onpropertychange",wm)):i==="focusout"&&bm()}function E_(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ya(ho)}function A_(i,a){if(i==="click")return Ya(a)}function C_(i,a){if(i==="input"||i==="change")return Ya(a)}function T_(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var Nn=typeof Object.is=="function"?Object.is:T_;function fo(i,a){if(Nn(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var d=Object.keys(i),m=Object.keys(a);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var v=d[m];if(!u.call(a,v)||!Nn(i[v],a[v]))return!1}return!0}function xm(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Sm(i,a){var d=xm(i);i=0;for(var m;d;){if(d.nodeType===3){if(m=i+d.textContent.length,i<=a&&m>=a)return{node:d,offset:a-i};i=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=xm(d)}}function _m(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?_m(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function Em(){for(var i=window,a=De();a instanceof i.HTMLIFrameElement;){try{var d=typeof a.contentWindow.location.href=="string"}catch{d=!1}if(d)i=a.contentWindow;else break;a=De(i.document)}return a}function rd(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function k_(i){var a=Em(),d=i.focusedElem,m=i.selectionRange;if(a!==d&&d&&d.ownerDocument&&_m(d.ownerDocument.documentElement,d)){if(m!==null&&rd(d)){if(a=m.start,i=m.end,i===void 0&&(i=a),"selectionStart"in d)d.selectionStart=a,d.selectionEnd=Math.min(i,d.value.length);else if(i=(a=d.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var v=d.textContent.length,S=Math.min(m.start,v);m=m.end===void 0?S:Math.min(m.end,v),!i.extend&&S>m&&(v=m,m=S,S=v),v=Sm(d,S);var P=Sm(d,m);v&&P&&(i.rangeCount!==1||i.anchorNode!==v.node||i.anchorOffset!==v.offset||i.focusNode!==P.node||i.focusOffset!==P.offset)&&(a=a.createRange(),a.setStart(v.node,v.offset),i.removeAllRanges(),S>m?(i.addRange(a),i.extend(P.node,P.offset)):(a.setEnd(P.node,P.offset),i.addRange(a)))}}for(a=[],i=d;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<a.length;d++)i=a[d],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var P_=c&&"documentMode"in document&&11>=document.documentMode,$s=null,sd=null,po=null,id=!1;function Am(i,a,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;id||$s==null||$s!==De(m)||(m=$s,"selectionStart"in m&&rd(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),po&&fo(po,m)||(po=m,m=Ja(sd,"onSelect"),0<m.length&&(a=new Xu("onSelect","select",null,a,d),i.push({event:a,listeners:m}),a.target=$s)))}function Xa(i,a){var d={};return d[i.toLowerCase()]=a.toLowerCase(),d["Webkit"+i]="webkit"+a,d["Moz"+i]="moz"+a,d}var Vs={animationend:Xa("Animation","AnimationEnd"),animationiteration:Xa("Animation","AnimationIteration"),animationstart:Xa("Animation","AnimationStart"),transitionend:Xa("Transition","TransitionEnd")},od={},Cm={};c&&(Cm=document.createElement("div").style,"AnimationEvent"in window||(delete Vs.animationend.animation,delete Vs.animationiteration.animation,delete Vs.animationstart.animation),"TransitionEvent"in window||delete Vs.transitionend.transition);function Ka(i){if(od[i])return od[i];if(!Vs[i])return i;var a=Vs[i],d;for(d in a)if(a.hasOwnProperty(d)&&d in Cm)return od[i]=a[d];return i}var Tm=Ka("animationend"),km=Ka("animationiteration"),Pm=Ka("animationstart"),Rm=Ka("transitionend"),Nm=new Map,Dm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(i,a){Nm.set(i,a),o(a,[i])}for(var ad=0;ad<Dm.length;ad++){var ld=Dm[ad],R_=ld.toLowerCase(),N_=ld[0].toUpperCase()+ld.slice(1);Or(R_,"on"+N_)}Or(Tm,"onAnimationEnd"),Or(km,"onAnimationIteration"),Or(Pm,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Rm,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),D_=new Set("cancel close invalid load scroll toggle".split(" ").concat(mo));function Om(i,a,d){var m=i.type||"unknown-event";i.currentTarget=d,RS(m,a,void 0,i),i.currentTarget=null}function Mm(i,a){a=(a&4)!==0;for(var d=0;d<i.length;d++){var m=i[d],v=m.event;m=m.listeners;e:{var S=void 0;if(a)for(var P=m.length-1;0<=P;P--){var O=m[P],L=O.instance,H=O.currentTarget;if(O=O.listener,L!==S&&v.isPropagationStopped())break e;Om(v,O,H),S=L}else for(P=0;P<m.length;P++){if(O=m[P],L=O.instance,H=O.currentTarget,O=O.listener,L!==S&&v.isPropagationStopped())break e;Om(v,O,H),S=L}}}if(Ma)throw i=Bu,Ma=!1,Bu=null,i}function qe(i,a){var d=a[gd];d===void 0&&(d=a[gd]=new Set);var m=i+"__bubble";d.has(m)||(Lm(a,i,2,!1),d.add(m))}function cd(i,a,d){var m=0;a&&(m|=4),Lm(d,i,m,a)}var Qa="_reactListening"+Math.random().toString(36).slice(2);function go(i){if(!i[Qa]){i[Qa]=!0,n.forEach(function(d){d!=="selectionchange"&&(D_.has(d)||cd(d,!1,i),cd(d,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Qa]||(a[Qa]=!0,cd("selectionchange",!1,a))}}function Lm(i,a,d,m){switch(sm(a)){case 1:var v=qS;break;case 4:v=GS;break;default:v=qu}d=v.bind(null,a,d,i),v=void 0,!ju||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(v=!0),m?v!==void 0?i.addEventListener(a,d,{capture:!0,passive:v}):i.addEventListener(a,d,!0):v!==void 0?i.addEventListener(a,d,{passive:v}):i.addEventListener(a,d,!1)}function ud(i,a,d,m,v){var S=m;if((a&1)===0&&(a&2)===0&&m!==null)e:for(;;){if(m===null)return;var P=m.tag;if(P===3||P===4){var O=m.stateNode.containerInfo;if(O===v||O.nodeType===8&&O.parentNode===v)break;if(P===4)for(P=m.return;P!==null;){var L=P.tag;if((L===3||L===4)&&(L=P.stateNode.containerInfo,L===v||L.nodeType===8&&L.parentNode===v))return;P=P.return}for(;O!==null;){if(P=us(O),P===null)return;if(L=P.tag,L===5||L===6){m=S=P;continue e}O=O.parentNode}}m=m.return}Up(function(){var H=S,Z=Lu(d),te=[];e:{var J=Nm.get(i);if(J!==void 0){var le=Xu,pe=i;switch(i){case"keypress":if(Va(d)===0)break e;case"keydown":case"keyup":le=l_;break;case"focusin":pe="focus",le=Ju;break;case"focusout":pe="blur",le=Ju;break;case"beforeblur":case"afterblur":le=Ju;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=am;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=KS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=d_;break;case Tm:case km:case Pm:le=ZS;break;case Rm:le=f_;break;case"scroll":le=YS;break;case"wheel":le=m_;break;case"copy":case"cut":case"paste":le=t_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=cm}var me=(a&4)!==0,ut=!me&&i==="scroll",B=me?J!==null?J+"Capture":null:J;me=[];for(var F=H,U;F!==null;){U=F;var re=U.stateNode;if(U.tag===5&&re!==null&&(U=re,B!==null&&(re=Qi(F,B),re!=null&&me.push(yo(F,re,U)))),ut)break;F=F.return}0<me.length&&(J=new le(J,pe,null,d,Z),te.push({event:J,listeners:me}))}}if((a&7)===0){e:{if(J=i==="mouseover"||i==="pointerover",le=i==="mouseout"||i==="pointerout",J&&d!==Mu&&(pe=d.relatedTarget||d.fromElement)&&(us(pe)||pe[ur]))break e;if((le||J)&&(J=Z.window===Z?Z:(J=Z.ownerDocument)?J.defaultView||J.parentWindow:window,le?(pe=d.relatedTarget||d.toElement,le=H,pe=pe?us(pe):null,pe!==null&&(ut=cs(pe),pe!==ut||pe.tag!==5&&pe.tag!==6)&&(pe=null)):(le=null,pe=H),le!==pe)){if(me=am,re="onMouseLeave",B="onMouseEnter",F="mouse",(i==="pointerout"||i==="pointerover")&&(me=cm,re="onPointerLeave",B="onPointerEnter",F="pointer"),ut=le==null?J:Ys(le),U=pe==null?J:Ys(pe),J=new me(re,F+"leave",le,d,Z),J.target=ut,J.relatedTarget=U,re=null,us(Z)===H&&(me=new me(B,F+"enter",pe,d,Z),me.target=U,me.relatedTarget=ut,re=me),ut=re,le&&pe)t:{for(me=le,B=pe,F=0,U=me;U;U=qs(U))F++;for(U=0,re=B;re;re=qs(re))U++;for(;0<F-U;)me=qs(me),F--;for(;0<U-F;)B=qs(B),U--;for(;F--;){if(me===B||B!==null&&me===B.alternate)break t;me=qs(me),B=qs(B)}me=null}else me=null;le!==null&&Im(te,J,le,me,!1),pe!==null&&ut!==null&&Im(te,ut,pe,me,!0)}}e:{if(J=H?Ys(H):window,le=J.nodeName&&J.nodeName.toLowerCase(),le==="select"||le==="input"&&J.type==="file")var ye=S_;else if(mm(J))if(ym)ye=C_;else{ye=E_;var xe=__}else(le=J.nodeName)&&le.toLowerCase()==="input"&&(J.type==="checkbox"||J.type==="radio")&&(ye=A_);if(ye&&(ye=ye(i,H))){gm(te,ye,d,Z);break e}xe&&xe(i,J,H),i==="focusout"&&(xe=J._wrapperState)&&xe.controlled&&J.type==="number"&&as(J,"number",J.value)}switch(xe=H?Ys(H):window,i){case"focusin":(mm(xe)||xe.contentEditable==="true")&&($s=xe,sd=H,po=null);break;case"focusout":po=sd=$s=null;break;case"mousedown":id=!0;break;case"contextmenu":case"mouseup":case"dragend":id=!1,Am(te,d,Z);break;case"selectionchange":if(P_)break;case"keydown":case"keyup":Am(te,d,Z)}var Se;if(ed)e:{switch(i){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else Ws?fm(i,d)&&(Ee="onCompositionEnd"):i==="keydown"&&d.keyCode===229&&(Ee="onCompositionStart");Ee&&(um&&d.locale!=="ko"&&(Ws||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&Ws&&(Se=im()):(Dr=Z,Yu="value"in Dr?Dr.value:Dr.textContent,Ws=!0)),xe=Ja(H,Ee),0<xe.length&&(Ee=new lm(Ee,i,null,d,Z),te.push({event:Ee,listeners:xe}),Se?Ee.data=Se:(Se=pm(d),Se!==null&&(Ee.data=Se)))),(Se=y_?v_(i,d):b_(i,d))&&(H=Ja(H,"onBeforeInput"),0<H.length&&(Z=new lm("onBeforeInput","beforeinput",null,d,Z),te.push({event:Z,listeners:H}),Z.data=Se))}Mm(te,a)})}function yo(i,a,d){return{instance:i,listener:a,currentTarget:d}}function Ja(i,a){for(var d=a+"Capture",m=[];i!==null;){var v=i,S=v.stateNode;v.tag===5&&S!==null&&(v=S,S=Qi(i,d),S!=null&&m.unshift(yo(i,S,v)),S=Qi(i,a),S!=null&&m.push(yo(i,S,v))),i=i.return}return m}function qs(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Im(i,a,d,m,v){for(var S=a._reactName,P=[];d!==null&&d!==m;){var O=d,L=O.alternate,H=O.stateNode;if(L!==null&&L===m)break;O.tag===5&&H!==null&&(O=H,v?(L=Qi(d,S),L!=null&&P.unshift(yo(d,L,O))):v||(L=Qi(d,S),L!=null&&P.push(yo(d,L,O)))),d=d.return}P.length!==0&&i.push({event:a,listeners:P})}var O_=/\r\n?/g,M_=/\u0000|\uFFFD/g;function Fm(i){return(typeof i=="string"?i:""+i).replace(O_,`
`).replace(M_,"")}function Za(i,a,d){if(a=Fm(a),Fm(i)!==a&&d)throw Error(t(425))}function el(){}var dd=null,hd=null;function fd(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var pd=typeof setTimeout=="function"?setTimeout:void 0,L_=typeof clearTimeout=="function"?clearTimeout:void 0,jm=typeof Promise=="function"?Promise:void 0,I_=typeof queueMicrotask=="function"?queueMicrotask:typeof jm<"u"?function(i){return jm.resolve(null).then(i).catch(F_)}:pd;function F_(i){setTimeout(function(){throw i})}function md(i,a){var d=a,m=0;do{var v=d.nextSibling;if(i.removeChild(d),v&&v.nodeType===8)if(d=v.data,d==="/$"){if(m===0){i.removeChild(v),oo(a);return}m--}else d!=="$"&&d!=="$?"&&d!=="$!"||m++;d=v}while(d);oo(a)}function Mr(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function Bm(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var d=i.data;if(d==="$"||d==="$!"||d==="$?"){if(a===0)return i;a--}else d==="/$"&&a++}i=i.previousSibling}return null}var Gs=Math.random().toString(36).slice(2),$n="__reactFiber$"+Gs,vo="__reactProps$"+Gs,ur="__reactContainer$"+Gs,gd="__reactEvents$"+Gs,j_="__reactListeners$"+Gs,B_="__reactHandles$"+Gs;function us(i){var a=i[$n];if(a)return a;for(var d=i.parentNode;d;){if(a=d[ur]||d[$n]){if(d=a.alternate,a.child!==null||d!==null&&d.child!==null)for(i=Bm(i);i!==null;){if(d=i[$n])return d;i=Bm(i)}return a}i=d,d=i.parentNode}return null}function bo(i){return i=i[$n]||i[ur],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Ys(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function tl(i){return i[vo]||null}var yd=[],Xs=-1;function Lr(i){return{current:i}}function Ge(i){0>Xs||(i.current=yd[Xs],yd[Xs]=null,Xs--)}function Ve(i,a){Xs++,yd[Xs]=i.current,i.current=a}var Ir={},Ot=Lr(Ir),Yt=Lr(!1),ds=Ir;function Ks(i,a){var d=i.type.contextTypes;if(!d)return Ir;var m=i.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===a)return m.__reactInternalMemoizedMaskedChildContext;var v={},S;for(S in d)v[S]=a[S];return m&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=v),v}function Xt(i){return i=i.childContextTypes,i!=null}function nl(){Ge(Yt),Ge(Ot)}function Um(i,a,d){if(Ot.current!==Ir)throw Error(t(168));Ve(Ot,a),Ve(Yt,d)}function zm(i,a,d){var m=i.stateNode;if(a=a.childContextTypes,typeof m.getChildContext!="function")return d;m=m.getChildContext();for(var v in m)if(!(v in a))throw Error(t(108,ge(i)||"Unknown",v));return Q({},d,m)}function rl(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Ir,ds=Ot.current,Ve(Ot,i),Ve(Yt,Yt.current),!0}function Hm(i,a,d){var m=i.stateNode;if(!m)throw Error(t(169));d?(i=zm(i,a,ds),m.__reactInternalMemoizedMergedChildContext=i,Ge(Yt),Ge(Ot),Ve(Ot,i)):Ge(Yt),Ve(Yt,d)}var dr=null,sl=!1,vd=!1;function Wm(i){dr===null?dr=[i]:dr.push(i)}function U_(i){sl=!0,Wm(i)}function Fr(){if(!vd&&dr!==null){vd=!0;var i=0,a=Ue;try{var d=dr;for(Ue=1;i<d.length;i++){var m=d[i];do m=m(!0);while(m!==null)}dr=null,sl=!1}catch(v){throw dr!==null&&(dr=dr.slice(i+1)),Vp(Uu,Fr),v}finally{Ue=a,vd=!1}}return null}var Qs=[],Js=0,il=null,ol=0,gn=[],yn=0,hs=null,hr=1,fr="";function fs(i,a){Qs[Js++]=ol,Qs[Js++]=il,il=i,ol=a}function $m(i,a,d){gn[yn++]=hr,gn[yn++]=fr,gn[yn++]=hs,hs=i;var m=hr;i=fr;var v=32-Rn(m)-1;m&=~(1<<v),d+=1;var S=32-Rn(a)+v;if(30<S){var P=v-v%5;S=(m&(1<<P)-1).toString(32),m>>=P,v-=P,hr=1<<32-Rn(a)+v|d<<v|m,fr=S+i}else hr=1<<S|d<<v|m,fr=i}function bd(i){i.return!==null&&(fs(i,1),$m(i,1,0))}function wd(i){for(;i===il;)il=Qs[--Js],Qs[Js]=null,ol=Qs[--Js],Qs[Js]=null;for(;i===hs;)hs=gn[--yn],gn[yn]=null,fr=gn[--yn],gn[yn]=null,hr=gn[--yn],gn[yn]=null}var ln=null,cn=null,Qe=!1,Dn=null;function Vm(i,a){var d=xn(5,null,null,0);d.elementType="DELETED",d.stateNode=a,d.return=i,a=i.deletions,a===null?(i.deletions=[d],i.flags|=16):a.push(d)}function qm(i,a){switch(i.tag){case 5:var d=i.type;return a=a.nodeType!==1||d.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,ln=i,cn=Mr(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,ln=i,cn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(d=hs!==null?{id:hr,overflow:fr}:null,i.memoizedState={dehydrated:a,treeContext:d,retryLane:1073741824},d=xn(18,null,null,0),d.stateNode=a,d.return=i,i.child=d,ln=i,cn=null,!0):!1;default:return!1}}function xd(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Sd(i){if(Qe){var a=cn;if(a){var d=a;if(!qm(i,a)){if(xd(i))throw Error(t(418));a=Mr(d.nextSibling);var m=ln;a&&qm(i,a)?Vm(m,d):(i.flags=i.flags&-4097|2,Qe=!1,ln=i)}}else{if(xd(i))throw Error(t(418));i.flags=i.flags&-4097|2,Qe=!1,ln=i}}}function Gm(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;ln=i}function al(i){if(i!==ln)return!1;if(!Qe)return Gm(i),Qe=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!fd(i.type,i.memoizedProps)),a&&(a=cn)){if(xd(i))throw Ym(),Error(t(418));for(;a;)Vm(i,a),a=Mr(a.nextSibling)}if(Gm(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var d=i.data;if(d==="/$"){if(a===0){cn=Mr(i.nextSibling);break e}a--}else d!=="$"&&d!=="$!"&&d!=="$?"||a++}i=i.nextSibling}cn=null}}else cn=ln?Mr(i.stateNode.nextSibling):null;return!0}function Ym(){for(var i=cn;i;)i=Mr(i.nextSibling)}function Zs(){cn=ln=null,Qe=!1}function _d(i){Dn===null?Dn=[i]:Dn.push(i)}var z_=k.ReactCurrentBatchConfig;function wo(i,a,d){if(i=d.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(t(309));var m=d.stateNode}if(!m)throw Error(t(147,i));var v=m,S=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===S?a.ref:(a=function(P){var O=v.refs;P===null?delete O[S]:O[S]=P},a._stringRef=S,a)}if(typeof i!="string")throw Error(t(284));if(!d._owner)throw Error(t(290,i))}return i}function ll(i,a){throw i=Object.prototype.toString.call(a),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function Xm(i){var a=i._init;return a(i._payload)}function Km(i){function a(B,F){if(i){var U=B.deletions;U===null?(B.deletions=[F],B.flags|=16):U.push(F)}}function d(B,F){if(!i)return null;for(;F!==null;)a(B,F),F=F.sibling;return null}function m(B,F){for(B=new Map;F!==null;)F.key!==null?B.set(F.key,F):B.set(F.index,F),F=F.sibling;return B}function v(B,F){return B=Vr(B,F),B.index=0,B.sibling=null,B}function S(B,F,U){return B.index=U,i?(U=B.alternate,U!==null?(U=U.index,U<F?(B.flags|=2,F):U):(B.flags|=2,F)):(B.flags|=1048576,F)}function P(B){return i&&B.alternate===null&&(B.flags|=2),B}function O(B,F,U,re){return F===null||F.tag!==6?(F=ph(U,B.mode,re),F.return=B,F):(F=v(F,U),F.return=B,F)}function L(B,F,U,re){var ye=U.type;return ye===D?Z(B,F,U.props.children,re,U.key):F!==null&&(F.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===G&&Xm(ye)===F.type)?(re=v(F,U.props),re.ref=wo(B,F,U),re.return=B,re):(re=Dl(U.type,U.key,U.props,null,B.mode,re),re.ref=wo(B,F,U),re.return=B,re)}function H(B,F,U,re){return F===null||F.tag!==4||F.stateNode.containerInfo!==U.containerInfo||F.stateNode.implementation!==U.implementation?(F=mh(U,B.mode,re),F.return=B,F):(F=v(F,U.children||[]),F.return=B,F)}function Z(B,F,U,re,ye){return F===null||F.tag!==7?(F=xs(U,B.mode,re,ye),F.return=B,F):(F=v(F,U),F.return=B,F)}function te(B,F,U){if(typeof F=="string"&&F!==""||typeof F=="number")return F=ph(""+F,B.mode,U),F.return=B,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case N:return U=Dl(F.type,F.key,F.props,null,B.mode,U),U.ref=wo(B,null,F),U.return=B,U;case R:return F=mh(F,B.mode,U),F.return=B,F;case G:var re=F._init;return te(B,re(F._payload),U)}if(ls(F)||V(F))return F=xs(F,B.mode,U,null),F.return=B,F;ll(B,F)}return null}function J(B,F,U,re){var ye=F!==null?F.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return ye!==null?null:O(B,F,""+U,re);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case N:return U.key===ye?L(B,F,U,re):null;case R:return U.key===ye?H(B,F,U,re):null;case G:return ye=U._init,J(B,F,ye(U._payload),re)}if(ls(U)||V(U))return ye!==null?null:Z(B,F,U,re,null);ll(B,U)}return null}function le(B,F,U,re,ye){if(typeof re=="string"&&re!==""||typeof re=="number")return B=B.get(U)||null,O(F,B,""+re,ye);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case N:return B=B.get(re.key===null?U:re.key)||null,L(F,B,re,ye);case R:return B=B.get(re.key===null?U:re.key)||null,H(F,B,re,ye);case G:var xe=re._init;return le(B,F,U,xe(re._payload),ye)}if(ls(re)||V(re))return B=B.get(U)||null,Z(F,B,re,ye,null);ll(F,re)}return null}function pe(B,F,U,re){for(var ye=null,xe=null,Se=F,Ee=F=0,Et=null;Se!==null&&Ee<U.length;Ee++){Se.index>Ee?(Et=Se,Se=null):Et=Se.sibling;var je=J(B,Se,U[Ee],re);if(je===null){Se===null&&(Se=Et);break}i&&Se&&je.alternate===null&&a(B,Se),F=S(je,F,Ee),xe===null?ye=je:xe.sibling=je,xe=je,Se=Et}if(Ee===U.length)return d(B,Se),Qe&&fs(B,Ee),ye;if(Se===null){for(;Ee<U.length;Ee++)Se=te(B,U[Ee],re),Se!==null&&(F=S(Se,F,Ee),xe===null?ye=Se:xe.sibling=Se,xe=Se);return Qe&&fs(B,Ee),ye}for(Se=m(B,Se);Ee<U.length;Ee++)Et=le(Se,B,Ee,U[Ee],re),Et!==null&&(i&&Et.alternate!==null&&Se.delete(Et.key===null?Ee:Et.key),F=S(Et,F,Ee),xe===null?ye=Et:xe.sibling=Et,xe=Et);return i&&Se.forEach(function(qr){return a(B,qr)}),Qe&&fs(B,Ee),ye}function me(B,F,U,re){var ye=V(U);if(typeof ye!="function")throw Error(t(150));if(U=ye.call(U),U==null)throw Error(t(151));for(var xe=ye=null,Se=F,Ee=F=0,Et=null,je=U.next();Se!==null&&!je.done;Ee++,je=U.next()){Se.index>Ee?(Et=Se,Se=null):Et=Se.sibling;var qr=J(B,Se,je.value,re);if(qr===null){Se===null&&(Se=Et);break}i&&Se&&qr.alternate===null&&a(B,Se),F=S(qr,F,Ee),xe===null?ye=qr:xe.sibling=qr,xe=qr,Se=Et}if(je.done)return d(B,Se),Qe&&fs(B,Ee),ye;if(Se===null){for(;!je.done;Ee++,je=U.next())je=te(B,je.value,re),je!==null&&(F=S(je,F,Ee),xe===null?ye=je:xe.sibling=je,xe=je);return Qe&&fs(B,Ee),ye}for(Se=m(B,Se);!je.done;Ee++,je=U.next())je=le(Se,B,Ee,je.value,re),je!==null&&(i&&je.alternate!==null&&Se.delete(je.key===null?Ee:je.key),F=S(je,F,Ee),xe===null?ye=je:xe.sibling=je,xe=je);return i&&Se.forEach(function(wE){return a(B,wE)}),Qe&&fs(B,Ee),ye}function ut(B,F,U,re){if(typeof U=="object"&&U!==null&&U.type===D&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case N:e:{for(var ye=U.key,xe=F;xe!==null;){if(xe.key===ye){if(ye=U.type,ye===D){if(xe.tag===7){d(B,xe.sibling),F=v(xe,U.props.children),F.return=B,B=F;break e}}else if(xe.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===G&&Xm(ye)===xe.type){d(B,xe.sibling),F=v(xe,U.props),F.ref=wo(B,xe,U),F.return=B,B=F;break e}d(B,xe);break}else a(B,xe);xe=xe.sibling}U.type===D?(F=xs(U.props.children,B.mode,re,U.key),F.return=B,B=F):(re=Dl(U.type,U.key,U.props,null,B.mode,re),re.ref=wo(B,F,U),re.return=B,B=re)}return P(B);case R:e:{for(xe=U.key;F!==null;){if(F.key===xe)if(F.tag===4&&F.stateNode.containerInfo===U.containerInfo&&F.stateNode.implementation===U.implementation){d(B,F.sibling),F=v(F,U.children||[]),F.return=B,B=F;break e}else{d(B,F);break}else a(B,F);F=F.sibling}F=mh(U,B.mode,re),F.return=B,B=F}return P(B);case G:return xe=U._init,ut(B,F,xe(U._payload),re)}if(ls(U))return pe(B,F,U,re);if(V(U))return me(B,F,U,re);ll(B,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,F!==null&&F.tag===6?(d(B,F.sibling),F=v(F,U),F.return=B,B=F):(d(B,F),F=ph(U,B.mode,re),F.return=B,B=F),P(B)):d(B,F)}return ut}var ei=Km(!0),Qm=Km(!1),cl=Lr(null),ul=null,ti=null,Ed=null;function Ad(){Ed=ti=ul=null}function Cd(i){var a=cl.current;Ge(cl),i._currentValue=a}function Td(i,a,d){for(;i!==null;){var m=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,m!==null&&(m.childLanes|=a)):m!==null&&(m.childLanes&a)!==a&&(m.childLanes|=a),i===d)break;i=i.return}}function ni(i,a){ul=i,Ed=ti=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&a)!==0&&(Kt=!0),i.firstContext=null)}function vn(i){var a=i._currentValue;if(Ed!==i)if(i={context:i,memoizedValue:a,next:null},ti===null){if(ul===null)throw Error(t(308));ti=i,ul.dependencies={lanes:0,firstContext:i}}else ti=ti.next=i;return a}var ps=null;function kd(i){ps===null?ps=[i]:ps.push(i)}function Jm(i,a,d,m){var v=a.interleaved;return v===null?(d.next=d,kd(a)):(d.next=v.next,v.next=d),a.interleaved=d,pr(i,m)}function pr(i,a){i.lanes|=a;var d=i.alternate;for(d!==null&&(d.lanes|=a),d=i,i=i.return;i!==null;)i.childLanes|=a,d=i.alternate,d!==null&&(d.childLanes|=a),d=i,i=i.return;return d.tag===3?d.stateNode:null}var jr=!1;function Pd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zm(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function mr(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function Br(i,a,d){var m=i.updateQueue;if(m===null)return null;if(m=m.shared,(Fe&2)!==0){var v=m.pending;return v===null?a.next=a:(a.next=v.next,v.next=a),m.pending=a,pr(i,d)}return v=m.interleaved,v===null?(a.next=a,kd(m)):(a.next=v.next,v.next=a),m.interleaved=a,pr(i,d)}function dl(i,a,d){if(a=a.updateQueue,a!==null&&(a=a.shared,(d&4194240)!==0)){var m=a.lanes;m&=i.pendingLanes,d|=m,a.lanes=d,Wu(i,d)}}function eg(i,a){var d=i.updateQueue,m=i.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var v=null,S=null;if(d=d.firstBaseUpdate,d!==null){do{var P={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};S===null?v=S=P:S=S.next=P,d=d.next}while(d!==null);S===null?v=S=a:S=S.next=a}else v=S=a;d={baseState:m.baseState,firstBaseUpdate:v,lastBaseUpdate:S,shared:m.shared,effects:m.effects},i.updateQueue=d;return}i=d.lastBaseUpdate,i===null?d.firstBaseUpdate=a:i.next=a,d.lastBaseUpdate=a}function hl(i,a,d,m){var v=i.updateQueue;jr=!1;var S=v.firstBaseUpdate,P=v.lastBaseUpdate,O=v.shared.pending;if(O!==null){v.shared.pending=null;var L=O,H=L.next;L.next=null,P===null?S=H:P.next=H,P=L;var Z=i.alternate;Z!==null&&(Z=Z.updateQueue,O=Z.lastBaseUpdate,O!==P&&(O===null?Z.firstBaseUpdate=H:O.next=H,Z.lastBaseUpdate=L))}if(S!==null){var te=v.baseState;P=0,Z=H=L=null,O=S;do{var J=O.lane,le=O.eventTime;if((m&J)===J){Z!==null&&(Z=Z.next={eventTime:le,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});e:{var pe=i,me=O;switch(J=a,le=d,me.tag){case 1:if(pe=me.payload,typeof pe=="function"){te=pe.call(le,te,J);break e}te=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=me.payload,J=typeof pe=="function"?pe.call(le,te,J):pe,J==null)break e;te=Q({},te,J);break e;case 2:jr=!0}}O.callback!==null&&O.lane!==0&&(i.flags|=64,J=v.effects,J===null?v.effects=[O]:J.push(O))}else le={eventTime:le,lane:J,tag:O.tag,payload:O.payload,callback:O.callback,next:null},Z===null?(H=Z=le,L=te):Z=Z.next=le,P|=J;if(O=O.next,O===null){if(O=v.shared.pending,O===null)break;J=O,O=J.next,J.next=null,v.lastBaseUpdate=J,v.shared.pending=null}}while(!0);if(Z===null&&(L=te),v.baseState=L,v.firstBaseUpdate=H,v.lastBaseUpdate=Z,a=v.shared.interleaved,a!==null){v=a;do P|=v.lane,v=v.next;while(v!==a)}else S===null&&(v.shared.lanes=0);ys|=P,i.lanes=P,i.memoizedState=te}}function tg(i,a,d){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var m=i[a],v=m.callback;if(v!==null){if(m.callback=null,m=d,typeof v!="function")throw Error(t(191,v));v.call(m)}}}var xo={},Vn=Lr(xo),So=Lr(xo),_o=Lr(xo);function ms(i){if(i===xo)throw Error(t(174));return i}function Rd(i,a){switch(Ve(_o,a),Ve(So,i),Ve(Vn,xo),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:mn(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=mn(a,i)}Ge(Vn),Ve(Vn,a)}function ri(){Ge(Vn),Ge(So),Ge(_o)}function ng(i){ms(_o.current);var a=ms(Vn.current),d=mn(a,i.type);a!==d&&(Ve(So,i),Ve(Vn,d))}function Nd(i){So.current===i&&(Ge(Vn),Ge(So))}var tt=Lr(0);function fl(i){for(var a=i;a!==null;){if(a.tag===13){var d=a.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Dd=[];function Od(){for(var i=0;i<Dd.length;i++)Dd[i]._workInProgressVersionPrimary=null;Dd.length=0}var pl=k.ReactCurrentDispatcher,Md=k.ReactCurrentBatchConfig,gs=0,nt=null,bt=null,St=null,ml=!1,Eo=!1,Ao=0,H_=0;function Mt(){throw Error(t(321))}function Ld(i,a){if(a===null)return!1;for(var d=0;d<a.length&&d<i.length;d++)if(!Nn(i[d],a[d]))return!1;return!0}function Id(i,a,d,m,v,S){if(gs=S,nt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,pl.current=i===null||i.memoizedState===null?q_:G_,i=d(m,v),Eo){S=0;do{if(Eo=!1,Ao=0,25<=S)throw Error(t(301));S+=1,St=bt=null,a.updateQueue=null,pl.current=Y_,i=d(m,v)}while(Eo)}if(pl.current=vl,a=bt!==null&&bt.next!==null,gs=0,St=bt=nt=null,ml=!1,a)throw Error(t(300));return i}function Fd(){var i=Ao!==0;return Ao=0,i}function qn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?nt.memoizedState=St=i:St=St.next=i,St}function bn(){if(bt===null){var i=nt.alternate;i=i!==null?i.memoizedState:null}else i=bt.next;var a=St===null?nt.memoizedState:St.next;if(a!==null)St=a,bt=i;else{if(i===null)throw Error(t(310));bt=i,i={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},St===null?nt.memoizedState=St=i:St=St.next=i}return St}function Co(i,a){return typeof a=="function"?a(i):a}function jd(i){var a=bn(),d=a.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=i;var m=bt,v=m.baseQueue,S=d.pending;if(S!==null){if(v!==null){var P=v.next;v.next=S.next,S.next=P}m.baseQueue=v=S,d.pending=null}if(v!==null){S=v.next,m=m.baseState;var O=P=null,L=null,H=S;do{var Z=H.lane;if((gs&Z)===Z)L!==null&&(L=L.next={lane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),m=H.hasEagerState?H.eagerState:i(m,H.action);else{var te={lane:Z,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null};L===null?(O=L=te,P=m):L=L.next=te,nt.lanes|=Z,ys|=Z}H=H.next}while(H!==null&&H!==S);L===null?P=m:L.next=O,Nn(m,a.memoizedState)||(Kt=!0),a.memoizedState=m,a.baseState=P,a.baseQueue=L,d.lastRenderedState=m}if(i=d.interleaved,i!==null){v=i;do S=v.lane,nt.lanes|=S,ys|=S,v=v.next;while(v!==i)}else v===null&&(d.lanes=0);return[a.memoizedState,d.dispatch]}function Bd(i){var a=bn(),d=a.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=i;var m=d.dispatch,v=d.pending,S=a.memoizedState;if(v!==null){d.pending=null;var P=v=v.next;do S=i(S,P.action),P=P.next;while(P!==v);Nn(S,a.memoizedState)||(Kt=!0),a.memoizedState=S,a.baseQueue===null&&(a.baseState=S),d.lastRenderedState=S}return[S,m]}function rg(){}function sg(i,a){var d=nt,m=bn(),v=a(),S=!Nn(m.memoizedState,v);if(S&&(m.memoizedState=v,Kt=!0),m=m.queue,Ud(ag.bind(null,d,m,i),[i]),m.getSnapshot!==a||S||St!==null&&St.memoizedState.tag&1){if(d.flags|=2048,To(9,og.bind(null,d,m,v,a),void 0,null),_t===null)throw Error(t(349));(gs&30)!==0||ig(d,a,v)}return v}function ig(i,a,d){i.flags|=16384,i={getSnapshot:a,value:d},a=nt.updateQueue,a===null?(a={lastEffect:null,stores:null},nt.updateQueue=a,a.stores=[i]):(d=a.stores,d===null?a.stores=[i]:d.push(i))}function og(i,a,d,m){a.value=d,a.getSnapshot=m,lg(a)&&cg(i)}function ag(i,a,d){return d(function(){lg(a)&&cg(i)})}function lg(i){var a=i.getSnapshot;i=i.value;try{var d=a();return!Nn(i,d)}catch{return!0}}function cg(i){var a=pr(i,1);a!==null&&In(a,i,1,-1)}function ug(i){var a=qn();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:i},a.queue=i,i=i.dispatch=V_.bind(null,nt,i),[a.memoizedState,i]}function To(i,a,d,m){return i={tag:i,create:a,destroy:d,deps:m,next:null},a=nt.updateQueue,a===null?(a={lastEffect:null,stores:null},nt.updateQueue=a,a.lastEffect=i.next=i):(d=a.lastEffect,d===null?a.lastEffect=i.next=i:(m=d.next,d.next=i,i.next=m,a.lastEffect=i)),i}function dg(){return bn().memoizedState}function gl(i,a,d,m){var v=qn();nt.flags|=i,v.memoizedState=To(1|a,d,void 0,m===void 0?null:m)}function yl(i,a,d,m){var v=bn();m=m===void 0?null:m;var S=void 0;if(bt!==null){var P=bt.memoizedState;if(S=P.destroy,m!==null&&Ld(m,P.deps)){v.memoizedState=To(a,d,S,m);return}}nt.flags|=i,v.memoizedState=To(1|a,d,S,m)}function hg(i,a){return gl(8390656,8,i,a)}function Ud(i,a){return yl(2048,8,i,a)}function fg(i,a){return yl(4,2,i,a)}function pg(i,a){return yl(4,4,i,a)}function mg(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function gg(i,a,d){return d=d!=null?d.concat([i]):null,yl(4,4,mg.bind(null,a,i),d)}function zd(){}function yg(i,a){var d=bn();a=a===void 0?null:a;var m=d.memoizedState;return m!==null&&a!==null&&Ld(a,m[1])?m[0]:(d.memoizedState=[i,a],i)}function vg(i,a){var d=bn();a=a===void 0?null:a;var m=d.memoizedState;return m!==null&&a!==null&&Ld(a,m[1])?m[0]:(i=i(),d.memoizedState=[i,a],i)}function bg(i,a,d){return(gs&21)===0?(i.baseState&&(i.baseState=!1,Kt=!0),i.memoizedState=d):(Nn(d,a)||(d=Xp(),nt.lanes|=d,ys|=d,i.baseState=!0),a)}function W_(i,a){var d=Ue;Ue=d!==0&&4>d?d:4,i(!0);var m=Md.transition;Md.transition={};try{i(!1),a()}finally{Ue=d,Md.transition=m}}function wg(){return bn().memoizedState}function $_(i,a,d){var m=Wr(i);if(d={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null},xg(i))Sg(a,d);else if(d=Jm(i,a,d,m),d!==null){var v=zt();In(d,i,m,v),_g(d,a,m)}}function V_(i,a,d){var m=Wr(i),v={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null};if(xg(i))Sg(a,v);else{var S=i.alternate;if(i.lanes===0&&(S===null||S.lanes===0)&&(S=a.lastRenderedReducer,S!==null))try{var P=a.lastRenderedState,O=S(P,d);if(v.hasEagerState=!0,v.eagerState=O,Nn(O,P)){var L=a.interleaved;L===null?(v.next=v,kd(a)):(v.next=L.next,L.next=v),a.interleaved=v;return}}catch{}d=Jm(i,a,v,m),d!==null&&(v=zt(),In(d,i,m,v),_g(d,a,m))}}function xg(i){var a=i.alternate;return i===nt||a!==null&&a===nt}function Sg(i,a){Eo=ml=!0;var d=i.pending;d===null?a.next=a:(a.next=d.next,d.next=a),i.pending=a}function _g(i,a,d){if((d&4194240)!==0){var m=a.lanes;m&=i.pendingLanes,d|=m,a.lanes=d,Wu(i,d)}}var vl={readContext:vn,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},q_={readContext:vn,useCallback:function(i,a){return qn().memoizedState=[i,a===void 0?null:a],i},useContext:vn,useEffect:hg,useImperativeHandle:function(i,a,d){return d=d!=null?d.concat([i]):null,gl(4194308,4,mg.bind(null,a,i),d)},useLayoutEffect:function(i,a){return gl(4194308,4,i,a)},useInsertionEffect:function(i,a){return gl(4,2,i,a)},useMemo:function(i,a){var d=qn();return a=a===void 0?null:a,i=i(),d.memoizedState=[i,a],i},useReducer:function(i,a,d){var m=qn();return a=d!==void 0?d(a):a,m.memoizedState=m.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},m.queue=i,i=i.dispatch=$_.bind(null,nt,i),[m.memoizedState,i]},useRef:function(i){var a=qn();return i={current:i},a.memoizedState=i},useState:ug,useDebugValue:zd,useDeferredValue:function(i){return qn().memoizedState=i},useTransition:function(){var i=ug(!1),a=i[0];return i=W_.bind(null,i[1]),qn().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,d){var m=nt,v=qn();if(Qe){if(d===void 0)throw Error(t(407));d=d()}else{if(d=a(),_t===null)throw Error(t(349));(gs&30)!==0||ig(m,a,d)}v.memoizedState=d;var S={value:d,getSnapshot:a};return v.queue=S,hg(ag.bind(null,m,S,i),[i]),m.flags|=2048,To(9,og.bind(null,m,S,d,a),void 0,null),d},useId:function(){var i=qn(),a=_t.identifierPrefix;if(Qe){var d=fr,m=hr;d=(m&~(1<<32-Rn(m)-1)).toString(32)+d,a=":"+a+"R"+d,d=Ao++,0<d&&(a+="H"+d.toString(32)),a+=":"}else d=H_++,a=":"+a+"r"+d.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},G_={readContext:vn,useCallback:yg,useContext:vn,useEffect:Ud,useImperativeHandle:gg,useInsertionEffect:fg,useLayoutEffect:pg,useMemo:vg,useReducer:jd,useRef:dg,useState:function(){return jd(Co)},useDebugValue:zd,useDeferredValue:function(i){var a=bn();return bg(a,bt.memoizedState,i)},useTransition:function(){var i=jd(Co)[0],a=bn().memoizedState;return[i,a]},useMutableSource:rg,useSyncExternalStore:sg,useId:wg,unstable_isNewReconciler:!1},Y_={readContext:vn,useCallback:yg,useContext:vn,useEffect:Ud,useImperativeHandle:gg,useInsertionEffect:fg,useLayoutEffect:pg,useMemo:vg,useReducer:Bd,useRef:dg,useState:function(){return Bd(Co)},useDebugValue:zd,useDeferredValue:function(i){var a=bn();return bt===null?a.memoizedState=i:bg(a,bt.memoizedState,i)},useTransition:function(){var i=Bd(Co)[0],a=bn().memoizedState;return[i,a]},useMutableSource:rg,useSyncExternalStore:sg,useId:wg,unstable_isNewReconciler:!1};function On(i,a){if(i&&i.defaultProps){a=Q({},a),i=i.defaultProps;for(var d in i)a[d]===void 0&&(a[d]=i[d]);return a}return a}function Hd(i,a,d,m){a=i.memoizedState,d=d(m,a),d=d==null?a:Q({},a,d),i.memoizedState=d,i.lanes===0&&(i.updateQueue.baseState=d)}var bl={isMounted:function(i){return(i=i._reactInternals)?cs(i)===i:!1},enqueueSetState:function(i,a,d){i=i._reactInternals;var m=zt(),v=Wr(i),S=mr(m,v);S.payload=a,d!=null&&(S.callback=d),a=Br(i,S,v),a!==null&&(In(a,i,v,m),dl(a,i,v))},enqueueReplaceState:function(i,a,d){i=i._reactInternals;var m=zt(),v=Wr(i),S=mr(m,v);S.tag=1,S.payload=a,d!=null&&(S.callback=d),a=Br(i,S,v),a!==null&&(In(a,i,v,m),dl(a,i,v))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var d=zt(),m=Wr(i),v=mr(d,m);v.tag=2,a!=null&&(v.callback=a),a=Br(i,v,m),a!==null&&(In(a,i,m,d),dl(a,i,m))}};function Eg(i,a,d,m,v,S,P){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(m,S,P):a.prototype&&a.prototype.isPureReactComponent?!fo(d,m)||!fo(v,S):!0}function Ag(i,a,d){var m=!1,v=Ir,S=a.contextType;return typeof S=="object"&&S!==null?S=vn(S):(v=Xt(a)?ds:Ot.current,m=a.contextTypes,S=(m=m!=null)?Ks(i,v):Ir),a=new a(d,S),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=bl,i.stateNode=a,a._reactInternals=i,m&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=v,i.__reactInternalMemoizedMaskedChildContext=S),a}function Cg(i,a,d,m){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(d,m),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(d,m),a.state!==i&&bl.enqueueReplaceState(a,a.state,null)}function Wd(i,a,d,m){var v=i.stateNode;v.props=d,v.state=i.memoizedState,v.refs={},Pd(i);var S=a.contextType;typeof S=="object"&&S!==null?v.context=vn(S):(S=Xt(a)?ds:Ot.current,v.context=Ks(i,S)),v.state=i.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(Hd(i,a,S,d),v.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(a=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),a!==v.state&&bl.enqueueReplaceState(v,v.state,null),hl(i,d,v,m),v.state=i.memoizedState),typeof v.componentDidMount=="function"&&(i.flags|=4194308)}function si(i,a){try{var d="",m=a;do d+=ve(m),m=m.return;while(m);var v=d}catch(S){v=`
Error generating stack: `+S.message+`
`+S.stack}return{value:i,source:a,stack:v,digest:null}}function $d(i,a,d){return{value:i,source:null,stack:d??null,digest:a??null}}function Vd(i,a){try{console.error(a.value)}catch(d){setTimeout(function(){throw d})}}var X_=typeof WeakMap=="function"?WeakMap:Map;function Tg(i,a,d){d=mr(-1,d),d.tag=3,d.payload={element:null};var m=a.value;return d.callback=function(){Cl||(Cl=!0,oh=m),Vd(i,a)},d}function kg(i,a,d){d=mr(-1,d),d.tag=3;var m=i.type.getDerivedStateFromError;if(typeof m=="function"){var v=a.value;d.payload=function(){return m(v)},d.callback=function(){Vd(i,a)}}var S=i.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(d.callback=function(){Vd(i,a),typeof m!="function"&&(zr===null?zr=new Set([this]):zr.add(this));var P=a.stack;this.componentDidCatch(a.value,{componentStack:P!==null?P:""})}),d}function Pg(i,a,d){var m=i.pingCache;if(m===null){m=i.pingCache=new X_;var v=new Set;m.set(a,v)}else v=m.get(a),v===void 0&&(v=new Set,m.set(a,v));v.has(d)||(v.add(d),i=cE.bind(null,i,a,d),a.then(i,i))}function Rg(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function Ng(i,a,d,m,v){return(i.mode&1)===0?(i===a?i.flags|=65536:(i.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(a=mr(-1,1),a.tag=2,Br(d,a,1))),d.lanes|=1),i):(i.flags|=65536,i.lanes=v,i)}var K_=k.ReactCurrentOwner,Kt=!1;function Ut(i,a,d,m){a.child=i===null?Qm(a,null,d,m):ei(a,i.child,d,m)}function Dg(i,a,d,m,v){d=d.render;var S=a.ref;return ni(a,v),m=Id(i,a,d,m,S,v),d=Fd(),i!==null&&!Kt?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~v,gr(i,a,v)):(Qe&&d&&bd(a),a.flags|=1,Ut(i,a,m,v),a.child)}function Og(i,a,d,m,v){if(i===null){var S=d.type;return typeof S=="function"&&!fh(S)&&S.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(a.tag=15,a.type=S,Mg(i,a,S,m,v)):(i=Dl(d.type,null,m,a,a.mode,v),i.ref=a.ref,i.return=a,a.child=i)}if(S=i.child,(i.lanes&v)===0){var P=S.memoizedProps;if(d=d.compare,d=d!==null?d:fo,d(P,m)&&i.ref===a.ref)return gr(i,a,v)}return a.flags|=1,i=Vr(S,m),i.ref=a.ref,i.return=a,a.child=i}function Mg(i,a,d,m,v){if(i!==null){var S=i.memoizedProps;if(fo(S,m)&&i.ref===a.ref)if(Kt=!1,a.pendingProps=m=S,(i.lanes&v)!==0)(i.flags&131072)!==0&&(Kt=!0);else return a.lanes=i.lanes,gr(i,a,v)}return qd(i,a,d,m,v)}function Lg(i,a,d){var m=a.pendingProps,v=m.children,S=i!==null?i.memoizedState:null;if(m.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(oi,un),un|=d;else{if((d&1073741824)===0)return i=S!==null?S.baseLanes|d:d,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,Ve(oi,un),un|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=S!==null?S.baseLanes:d,Ve(oi,un),un|=m}else S!==null?(m=S.baseLanes|d,a.memoizedState=null):m=d,Ve(oi,un),un|=m;return Ut(i,a,v,d),a.child}function Ig(i,a){var d=a.ref;(i===null&&d!==null||i!==null&&i.ref!==d)&&(a.flags|=512,a.flags|=2097152)}function qd(i,a,d,m,v){var S=Xt(d)?ds:Ot.current;return S=Ks(a,S),ni(a,v),d=Id(i,a,d,m,S,v),m=Fd(),i!==null&&!Kt?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~v,gr(i,a,v)):(Qe&&m&&bd(a),a.flags|=1,Ut(i,a,d,v),a.child)}function Fg(i,a,d,m,v){if(Xt(d)){var S=!0;rl(a)}else S=!1;if(ni(a,v),a.stateNode===null)xl(i,a),Ag(a,d,m),Wd(a,d,m,v),m=!0;else if(i===null){var P=a.stateNode,O=a.memoizedProps;P.props=O;var L=P.context,H=d.contextType;typeof H=="object"&&H!==null?H=vn(H):(H=Xt(d)?ds:Ot.current,H=Ks(a,H));var Z=d.getDerivedStateFromProps,te=typeof Z=="function"||typeof P.getSnapshotBeforeUpdate=="function";te||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(O!==m||L!==H)&&Cg(a,P,m,H),jr=!1;var J=a.memoizedState;P.state=J,hl(a,m,P,v),L=a.memoizedState,O!==m||J!==L||Yt.current||jr?(typeof Z=="function"&&(Hd(a,d,Z,m),L=a.memoizedState),(O=jr||Eg(a,d,O,m,J,L,H))?(te||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(a.flags|=4194308)):(typeof P.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=m,a.memoizedState=L),P.props=m,P.state=L,P.context=H,m=O):(typeof P.componentDidMount=="function"&&(a.flags|=4194308),m=!1)}else{P=a.stateNode,Zm(i,a),O=a.memoizedProps,H=a.type===a.elementType?O:On(a.type,O),P.props=H,te=a.pendingProps,J=P.context,L=d.contextType,typeof L=="object"&&L!==null?L=vn(L):(L=Xt(d)?ds:Ot.current,L=Ks(a,L));var le=d.getDerivedStateFromProps;(Z=typeof le=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(O!==te||J!==L)&&Cg(a,P,m,L),jr=!1,J=a.memoizedState,P.state=J,hl(a,m,P,v);var pe=a.memoizedState;O!==te||J!==pe||Yt.current||jr?(typeof le=="function"&&(Hd(a,d,le,m),pe=a.memoizedState),(H=jr||Eg(a,d,H,m,J,pe,L)||!1)?(Z||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(m,pe,L),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(m,pe,L)),typeof P.componentDidUpdate=="function"&&(a.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof P.componentDidUpdate!="function"||O===i.memoizedProps&&J===i.memoizedState||(a.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&J===i.memoizedState||(a.flags|=1024),a.memoizedProps=m,a.memoizedState=pe),P.props=m,P.state=pe,P.context=L,m=H):(typeof P.componentDidUpdate!="function"||O===i.memoizedProps&&J===i.memoizedState||(a.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&J===i.memoizedState||(a.flags|=1024),m=!1)}return Gd(i,a,d,m,S,v)}function Gd(i,a,d,m,v,S){Ig(i,a);var P=(a.flags&128)!==0;if(!m&&!P)return v&&Hm(a,d,!1),gr(i,a,S);m=a.stateNode,K_.current=a;var O=P&&typeof d.getDerivedStateFromError!="function"?null:m.render();return a.flags|=1,i!==null&&P?(a.child=ei(a,i.child,null,S),a.child=ei(a,null,O,S)):Ut(i,a,O,S),a.memoizedState=m.state,v&&Hm(a,d,!0),a.child}function jg(i){var a=i.stateNode;a.pendingContext?Um(i,a.pendingContext,a.pendingContext!==a.context):a.context&&Um(i,a.context,!1),Rd(i,a.containerInfo)}function Bg(i,a,d,m,v){return Zs(),_d(v),a.flags|=256,Ut(i,a,d,m),a.child}var Yd={dehydrated:null,treeContext:null,retryLane:0};function Xd(i){return{baseLanes:i,cachePool:null,transitions:null}}function Ug(i,a,d){var m=a.pendingProps,v=tt.current,S=!1,P=(a.flags&128)!==0,O;if((O=P)||(O=i!==null&&i.memoizedState===null?!1:(v&2)!==0),O?(S=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(v|=1),Ve(tt,v&1),i===null)return Sd(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((a.mode&1)===0?a.lanes=1:i.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(P=m.children,i=m.fallback,S?(m=a.mode,S=a.child,P={mode:"hidden",children:P},(m&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=P):S=Ol(P,m,0,null),i=xs(i,m,d,null),S.return=a,i.return=a,S.sibling=i,a.child=S,a.child.memoizedState=Xd(d),a.memoizedState=Yd,i):Kd(a,P));if(v=i.memoizedState,v!==null&&(O=v.dehydrated,O!==null))return Q_(i,a,P,m,O,v,d);if(S){S=m.fallback,P=a.mode,v=i.child,O=v.sibling;var L={mode:"hidden",children:m.children};return(P&1)===0&&a.child!==v?(m=a.child,m.childLanes=0,m.pendingProps=L,a.deletions=null):(m=Vr(v,L),m.subtreeFlags=v.subtreeFlags&14680064),O!==null?S=Vr(O,S):(S=xs(S,P,d,null),S.flags|=2),S.return=a,m.return=a,m.sibling=S,a.child=m,m=S,S=a.child,P=i.child.memoizedState,P=P===null?Xd(d):{baseLanes:P.baseLanes|d,cachePool:null,transitions:P.transitions},S.memoizedState=P,S.childLanes=i.childLanes&~d,a.memoizedState=Yd,m}return S=i.child,i=S.sibling,m=Vr(S,{mode:"visible",children:m.children}),(a.mode&1)===0&&(m.lanes=d),m.return=a,m.sibling=null,i!==null&&(d=a.deletions,d===null?(a.deletions=[i],a.flags|=16):d.push(i)),a.child=m,a.memoizedState=null,m}function Kd(i,a){return a=Ol({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function wl(i,a,d,m){return m!==null&&_d(m),ei(a,i.child,null,d),i=Kd(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function Q_(i,a,d,m,v,S,P){if(d)return a.flags&256?(a.flags&=-257,m=$d(Error(t(422))),wl(i,a,P,m)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(S=m.fallback,v=a.mode,m=Ol({mode:"visible",children:m.children},v,0,null),S=xs(S,v,P,null),S.flags|=2,m.return=a,S.return=a,m.sibling=S,a.child=m,(a.mode&1)!==0&&ei(a,i.child,null,P),a.child.memoizedState=Xd(P),a.memoizedState=Yd,S);if((a.mode&1)===0)return wl(i,a,P,null);if(v.data==="$!"){if(m=v.nextSibling&&v.nextSibling.dataset,m)var O=m.dgst;return m=O,S=Error(t(419)),m=$d(S,m,void 0),wl(i,a,P,m)}if(O=(P&i.childLanes)!==0,Kt||O){if(m=_t,m!==null){switch(P&-P){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(m.suspendedLanes|P))!==0?0:v,v!==0&&v!==S.retryLane&&(S.retryLane=v,pr(i,v),In(m,i,v,-1))}return hh(),m=$d(Error(t(421))),wl(i,a,P,m)}return v.data==="$?"?(a.flags|=128,a.child=i.child,a=uE.bind(null,i),v._reactRetry=a,null):(i=S.treeContext,cn=Mr(v.nextSibling),ln=a,Qe=!0,Dn=null,i!==null&&(gn[yn++]=hr,gn[yn++]=fr,gn[yn++]=hs,hr=i.id,fr=i.overflow,hs=a),a=Kd(a,m.children),a.flags|=4096,a)}function zg(i,a,d){i.lanes|=a;var m=i.alternate;m!==null&&(m.lanes|=a),Td(i.return,a,d)}function Qd(i,a,d,m,v){var S=i.memoizedState;S===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:v}:(S.isBackwards=a,S.rendering=null,S.renderingStartTime=0,S.last=m,S.tail=d,S.tailMode=v)}function Hg(i,a,d){var m=a.pendingProps,v=m.revealOrder,S=m.tail;if(Ut(i,a,m.children,d),m=tt.current,(m&2)!==0)m=m&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&zg(i,d,a);else if(i.tag===19)zg(i,d,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}m&=1}if(Ve(tt,m),(a.mode&1)===0)a.memoizedState=null;else switch(v){case"forwards":for(d=a.child,v=null;d!==null;)i=d.alternate,i!==null&&fl(i)===null&&(v=d),d=d.sibling;d=v,d===null?(v=a.child,a.child=null):(v=d.sibling,d.sibling=null),Qd(a,!1,v,d,S);break;case"backwards":for(d=null,v=a.child,a.child=null;v!==null;){if(i=v.alternate,i!==null&&fl(i)===null){a.child=v;break}i=v.sibling,v.sibling=d,d=v,v=i}Qd(a,!0,d,null,S);break;case"together":Qd(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function xl(i,a){(a.mode&1)===0&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function gr(i,a,d){if(i!==null&&(a.dependencies=i.dependencies),ys|=a.lanes,(d&a.childLanes)===0)return null;if(i!==null&&a.child!==i.child)throw Error(t(153));if(a.child!==null){for(i=a.child,d=Vr(i,i.pendingProps),a.child=d,d.return=a;i.sibling!==null;)i=i.sibling,d=d.sibling=Vr(i,i.pendingProps),d.return=a;d.sibling=null}return a.child}function J_(i,a,d){switch(a.tag){case 3:jg(a),Zs();break;case 5:ng(a);break;case 1:Xt(a.type)&&rl(a);break;case 4:Rd(a,a.stateNode.containerInfo);break;case 10:var m=a.type._context,v=a.memoizedProps.value;Ve(cl,m._currentValue),m._currentValue=v;break;case 13:if(m=a.memoizedState,m!==null)return m.dehydrated!==null?(Ve(tt,tt.current&1),a.flags|=128,null):(d&a.child.childLanes)!==0?Ug(i,a,d):(Ve(tt,tt.current&1),i=gr(i,a,d),i!==null?i.sibling:null);Ve(tt,tt.current&1);break;case 19:if(m=(d&a.childLanes)!==0,(i.flags&128)!==0){if(m)return Hg(i,a,d);a.flags|=128}if(v=a.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),Ve(tt,tt.current),m)break;return null;case 22:case 23:return a.lanes=0,Lg(i,a,d)}return gr(i,a,d)}var Wg,Jd,$g,Vg;Wg=function(i,a){for(var d=a.child;d!==null;){if(d.tag===5||d.tag===6)i.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},Jd=function(){},$g=function(i,a,d,m){var v=i.memoizedProps;if(v!==m){i=a.stateNode,ms(Vn.current);var S=null;switch(d){case"input":v=Be(i,v),m=Be(i,m),S=[];break;case"select":v=Q({},v,{value:void 0}),m=Q({},m,{value:void 0}),S=[];break;case"textarea":v=Xi(i,v),m=Xi(i,m),S=[];break;default:typeof v.onClick!="function"&&typeof m.onClick=="function"&&(i.onclick=el)}Du(d,m);var P;d=null;for(H in v)if(!m.hasOwnProperty(H)&&v.hasOwnProperty(H)&&v[H]!=null)if(H==="style"){var O=v[H];for(P in O)O.hasOwnProperty(P)&&(d||(d={}),d[P]="")}else H!=="dangerouslySetInnerHTML"&&H!=="children"&&H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&H!=="autoFocus"&&(r.hasOwnProperty(H)?S||(S=[]):(S=S||[]).push(H,null));for(H in m){var L=m[H];if(O=v?.[H],m.hasOwnProperty(H)&&L!==O&&(L!=null||O!=null))if(H==="style")if(O){for(P in O)!O.hasOwnProperty(P)||L&&L.hasOwnProperty(P)||(d||(d={}),d[P]="");for(P in L)L.hasOwnProperty(P)&&O[P]!==L[P]&&(d||(d={}),d[P]=L[P])}else d||(S||(S=[]),S.push(H,d)),d=L;else H==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,O=O?O.__html:void 0,L!=null&&O!==L&&(S=S||[]).push(H,L)):H==="children"?typeof L!="string"&&typeof L!="number"||(S=S||[]).push(H,""+L):H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&(r.hasOwnProperty(H)?(L!=null&&H==="onScroll"&&qe("scroll",i),S||O===L||(S=[])):(S=S||[]).push(H,L))}d&&(S=S||[]).push("style",d);var H=S;(a.updateQueue=H)&&(a.flags|=4)}},Vg=function(i,a,d,m){d!==m&&(a.flags|=4)};function ko(i,a){if(!Qe)switch(i.tailMode){case"hidden":a=i.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?i.tail=null:d.sibling=null;break;case"collapsed":d=i.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:m.sibling=null}}function Lt(i){var a=i.alternate!==null&&i.alternate.child===i.child,d=0,m=0;if(a)for(var v=i.child;v!==null;)d|=v.lanes|v.childLanes,m|=v.subtreeFlags&14680064,m|=v.flags&14680064,v.return=i,v=v.sibling;else for(v=i.child;v!==null;)d|=v.lanes|v.childLanes,m|=v.subtreeFlags,m|=v.flags,v.return=i,v=v.sibling;return i.subtreeFlags|=m,i.childLanes=d,a}function Z_(i,a,d){var m=a.pendingProps;switch(wd(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(a),null;case 1:return Xt(a.type)&&nl(),Lt(a),null;case 3:return m=a.stateNode,ri(),Ge(Yt),Ge(Ot),Od(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(i===null||i.child===null)&&(al(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Dn!==null&&(ch(Dn),Dn=null))),Jd(i,a),Lt(a),null;case 5:Nd(a);var v=ms(_o.current);if(d=a.type,i!==null&&a.stateNode!=null)$g(i,a,d,m,v),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!m){if(a.stateNode===null)throw Error(t(166));return Lt(a),null}if(i=ms(Vn.current),al(a)){m=a.stateNode,d=a.type;var S=a.memoizedProps;switch(m[$n]=a,m[vo]=S,i=(a.mode&1)!==0,d){case"dialog":qe("cancel",m),qe("close",m);break;case"iframe":case"object":case"embed":qe("load",m);break;case"video":case"audio":for(v=0;v<mo.length;v++)qe(mo[v],m);break;case"source":qe("error",m);break;case"img":case"image":case"link":qe("error",m),qe("load",m);break;case"details":qe("toggle",m);break;case"input":Ke(m,S),qe("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!S.multiple},qe("invalid",m);break;case"textarea":Pa(m,S),qe("invalid",m)}Du(d,S),v=null;for(var P in S)if(S.hasOwnProperty(P)){var O=S[P];P==="children"?typeof O=="string"?m.textContent!==O&&(S.suppressHydrationWarning!==!0&&Za(m.textContent,O,i),v=["children",O]):typeof O=="number"&&m.textContent!==""+O&&(S.suppressHydrationWarning!==!0&&Za(m.textContent,O,i),v=["children",""+O]):r.hasOwnProperty(P)&&O!=null&&P==="onScroll"&&qe("scroll",m)}switch(d){case"input":et(m),on(m,S,!0);break;case"textarea":et(m),Na(m);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(m.onclick=el)}m=v,a.updateQueue=m,m!==null&&(a.flags|=4)}else{P=v.nodeType===9?v:v.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Da(d)),i==="http://www.w3.org/1999/xhtml"?d==="script"?(i=P.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof m.is=="string"?i=P.createElement(d,{is:m.is}):(i=P.createElement(d),d==="select"&&(P=i,m.multiple?P.multiple=!0:m.size&&(P.size=m.size))):i=P.createElementNS(i,d),i[$n]=a,i[vo]=m,Wg(i,a,!1,!1),a.stateNode=i;e:{switch(P=Ou(d,m),d){case"dialog":qe("cancel",i),qe("close",i),v=m;break;case"iframe":case"object":case"embed":qe("load",i),v=m;break;case"video":case"audio":for(v=0;v<mo.length;v++)qe(mo[v],i);v=m;break;case"source":qe("error",i),v=m;break;case"img":case"image":case"link":qe("error",i),qe("load",i),v=m;break;case"details":qe("toggle",i),v=m;break;case"input":Ke(i,m),v=Be(i,m),qe("invalid",i);break;case"option":v=m;break;case"select":i._wrapperState={wasMultiple:!!m.multiple},v=Q({},m,{value:void 0}),qe("invalid",i);break;case"textarea":Pa(i,m),v=Xi(i,m),qe("invalid",i);break;default:v=m}Du(d,v),O=v;for(S in O)if(O.hasOwnProperty(S)){var L=O[S];S==="style"?Mp(i,L):S==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&Pn(i,L)):S==="children"?typeof L=="string"?(d!=="textarea"||L!=="")&&cr(i,L):typeof L=="number"&&cr(i,""+L):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(r.hasOwnProperty(S)?L!=null&&S==="onScroll"&&qe("scroll",i):L!=null&&C(i,S,L,P))}switch(d){case"input":et(i),on(i,m,!1);break;case"textarea":et(i),Na(i);break;case"option":m.value!=null&&i.setAttribute("value",""+K(m.value));break;case"select":i.multiple=!!m.multiple,S=m.value,S!=null?Tn(i,!!m.multiple,S,!1):m.defaultValue!=null&&Tn(i,!!m.multiple,m.defaultValue,!0);break;default:typeof v.onClick=="function"&&(i.onclick=el)}switch(d){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Lt(a),null;case 6:if(i&&a.stateNode!=null)Vg(i,a,i.memoizedProps,m);else{if(typeof m!="string"&&a.stateNode===null)throw Error(t(166));if(d=ms(_o.current),ms(Vn.current),al(a)){if(m=a.stateNode,d=a.memoizedProps,m[$n]=a,(S=m.nodeValue!==d)&&(i=ln,i!==null))switch(i.tag){case 3:Za(m.nodeValue,d,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Za(m.nodeValue,d,(i.mode&1)!==0)}S&&(a.flags|=4)}else m=(d.nodeType===9?d:d.ownerDocument).createTextNode(m),m[$n]=a,a.stateNode=m}return Lt(a),null;case 13:if(Ge(tt),m=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Qe&&cn!==null&&(a.mode&1)!==0&&(a.flags&128)===0)Ym(),Zs(),a.flags|=98560,S=!1;else if(S=al(a),m!==null&&m.dehydrated!==null){if(i===null){if(!S)throw Error(t(318));if(S=a.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(t(317));S[$n]=a}else Zs(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Lt(a),S=!1}else Dn!==null&&(ch(Dn),Dn=null),S=!0;if(!S)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=d,a):(m=m!==null,m!==(i!==null&&i.memoizedState!==null)&&m&&(a.child.flags|=8192,(a.mode&1)!==0&&(i===null||(tt.current&1)!==0?wt===0&&(wt=3):hh())),a.updateQueue!==null&&(a.flags|=4),Lt(a),null);case 4:return ri(),Jd(i,a),i===null&&go(a.stateNode.containerInfo),Lt(a),null;case 10:return Cd(a.type._context),Lt(a),null;case 17:return Xt(a.type)&&nl(),Lt(a),null;case 19:if(Ge(tt),S=a.memoizedState,S===null)return Lt(a),null;if(m=(a.flags&128)!==0,P=S.rendering,P===null)if(m)ko(S,!1);else{if(wt!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(P=fl(i),P!==null){for(a.flags|=128,ko(S,!1),m=P.updateQueue,m!==null&&(a.updateQueue=m,a.flags|=4),a.subtreeFlags=0,m=d,d=a.child;d!==null;)S=d,i=m,S.flags&=14680066,P=S.alternate,P===null?(S.childLanes=0,S.lanes=i,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=P.childLanes,S.lanes=P.lanes,S.child=P.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=P.memoizedProps,S.memoizedState=P.memoizedState,S.updateQueue=P.updateQueue,S.type=P.type,i=P.dependencies,S.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),d=d.sibling;return Ve(tt,tt.current&1|2),a.child}i=i.sibling}S.tail!==null&&ct()>ai&&(a.flags|=128,m=!0,ko(S,!1),a.lanes=4194304)}else{if(!m)if(i=fl(P),i!==null){if(a.flags|=128,m=!0,d=i.updateQueue,d!==null&&(a.updateQueue=d,a.flags|=4),ko(S,!0),S.tail===null&&S.tailMode==="hidden"&&!P.alternate&&!Qe)return Lt(a),null}else 2*ct()-S.renderingStartTime>ai&&d!==1073741824&&(a.flags|=128,m=!0,ko(S,!1),a.lanes=4194304);S.isBackwards?(P.sibling=a.child,a.child=P):(d=S.last,d!==null?d.sibling=P:a.child=P,S.last=P)}return S.tail!==null?(a=S.tail,S.rendering=a,S.tail=a.sibling,S.renderingStartTime=ct(),a.sibling=null,d=tt.current,Ve(tt,m?d&1|2:d&1),a):(Lt(a),null);case 22:case 23:return dh(),m=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==m&&(a.flags|=8192),m&&(a.mode&1)!==0?(un&1073741824)!==0&&(Lt(a),a.subtreeFlags&6&&(a.flags|=8192)):Lt(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function eE(i,a){switch(wd(a),a.tag){case 1:return Xt(a.type)&&nl(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return ri(),Ge(Yt),Ge(Ot),Od(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 5:return Nd(a),null;case 13:if(Ge(tt),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(t(340));Zs()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return Ge(tt),null;case 4:return ri(),null;case 10:return Cd(a.type._context),null;case 22:case 23:return dh(),null;case 24:return null;default:return null}}var Sl=!1,It=!1,tE=typeof WeakSet=="function"?WeakSet:Set,de=null;function ii(i,a){var d=i.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(m){lt(i,a,m)}else d.current=null}function Zd(i,a,d){try{d()}catch(m){lt(i,a,m)}}var qg=!1;function nE(i,a){if(dd=Ha,i=Em(),rd(i)){if("selectionStart"in i)var d={start:i.selectionStart,end:i.selectionEnd};else e:{d=(d=i.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var v=m.anchorOffset,S=m.focusNode;m=m.focusOffset;try{d.nodeType,S.nodeType}catch{d=null;break e}var P=0,O=-1,L=-1,H=0,Z=0,te=i,J=null;t:for(;;){for(var le;te!==d||v!==0&&te.nodeType!==3||(O=P+v),te!==S||m!==0&&te.nodeType!==3||(L=P+m),te.nodeType===3&&(P+=te.nodeValue.length),(le=te.firstChild)!==null;)J=te,te=le;for(;;){if(te===i)break t;if(J===d&&++H===v&&(O=P),J===S&&++Z===m&&(L=P),(le=te.nextSibling)!==null)break;te=J,J=te.parentNode}te=le}d=O===-1||L===-1?null:{start:O,end:L}}else d=null}d=d||{start:0,end:0}}else d=null;for(hd={focusedElem:i,selectionRange:d},Ha=!1,de=a;de!==null;)if(a=de,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,de=i;else for(;de!==null;){a=de;try{var pe=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(pe!==null){var me=pe.memoizedProps,ut=pe.memoizedState,B=a.stateNode,F=B.getSnapshotBeforeUpdate(a.elementType===a.type?me:On(a.type,me),ut);B.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var U=a.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(re){lt(a,a.return,re)}if(i=a.sibling,i!==null){i.return=a.return,de=i;break}de=a.return}return pe=qg,qg=!1,pe}function Po(i,a,d){var m=a.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var v=m=m.next;do{if((v.tag&i)===i){var S=v.destroy;v.destroy=void 0,S!==void 0&&Zd(a,d,S)}v=v.next}while(v!==m)}}function _l(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do{if((d.tag&i)===i){var m=d.create;d.destroy=m()}d=d.next}while(d!==a)}}function eh(i){var a=i.ref;if(a!==null){var d=i.stateNode;i.tag,i=d,typeof a=="function"?a(i):a.current=i}}function Gg(i){var a=i.alternate;a!==null&&(i.alternate=null,Gg(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[$n],delete a[vo],delete a[gd],delete a[j_],delete a[B_])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Yg(i){return i.tag===5||i.tag===3||i.tag===4}function Xg(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Yg(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function th(i,a,d){var m=i.tag;if(m===5||m===6)i=i.stateNode,a?d.nodeType===8?d.parentNode.insertBefore(i,a):d.insertBefore(i,a):(d.nodeType===8?(a=d.parentNode,a.insertBefore(i,d)):(a=d,a.appendChild(i)),d=d._reactRootContainer,d!=null||a.onclick!==null||(a.onclick=el));else if(m!==4&&(i=i.child,i!==null))for(th(i,a,d),i=i.sibling;i!==null;)th(i,a,d),i=i.sibling}function nh(i,a,d){var m=i.tag;if(m===5||m===6)i=i.stateNode,a?d.insertBefore(i,a):d.appendChild(i);else if(m!==4&&(i=i.child,i!==null))for(nh(i,a,d),i=i.sibling;i!==null;)nh(i,a,d),i=i.sibling}var kt=null,Mn=!1;function Ur(i,a,d){for(d=d.child;d!==null;)Kg(i,a,d),d=d.sibling}function Kg(i,a,d){if(Wn&&typeof Wn.onCommitFiberUnmount=="function")try{Wn.onCommitFiberUnmount(Ia,d)}catch{}switch(d.tag){case 5:It||ii(d,a);case 6:var m=kt,v=Mn;kt=null,Ur(i,a,d),kt=m,Mn=v,kt!==null&&(Mn?(i=kt,d=d.stateNode,i.nodeType===8?i.parentNode.removeChild(d):i.removeChild(d)):kt.removeChild(d.stateNode));break;case 18:kt!==null&&(Mn?(i=kt,d=d.stateNode,i.nodeType===8?md(i.parentNode,d):i.nodeType===1&&md(i,d),oo(i)):md(kt,d.stateNode));break;case 4:m=kt,v=Mn,kt=d.stateNode.containerInfo,Mn=!0,Ur(i,a,d),kt=m,Mn=v;break;case 0:case 11:case 14:case 15:if(!It&&(m=d.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){v=m=m.next;do{var S=v,P=S.destroy;S=S.tag,P!==void 0&&((S&2)!==0||(S&4)!==0)&&Zd(d,a,P),v=v.next}while(v!==m)}Ur(i,a,d);break;case 1:if(!It&&(ii(d,a),m=d.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=d.memoizedProps,m.state=d.memoizedState,m.componentWillUnmount()}catch(O){lt(d,a,O)}Ur(i,a,d);break;case 21:Ur(i,a,d);break;case 22:d.mode&1?(It=(m=It)||d.memoizedState!==null,Ur(i,a,d),It=m):Ur(i,a,d);break;default:Ur(i,a,d)}}function Qg(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var d=i.stateNode;d===null&&(d=i.stateNode=new tE),a.forEach(function(m){var v=dE.bind(null,i,m);d.has(m)||(d.add(m),m.then(v,v))})}}function Ln(i,a){var d=a.deletions;if(d!==null)for(var m=0;m<d.length;m++){var v=d[m];try{var S=i,P=a,O=P;e:for(;O!==null;){switch(O.tag){case 5:kt=O.stateNode,Mn=!1;break e;case 3:kt=O.stateNode.containerInfo,Mn=!0;break e;case 4:kt=O.stateNode.containerInfo,Mn=!0;break e}O=O.return}if(kt===null)throw Error(t(160));Kg(S,P,v),kt=null,Mn=!1;var L=v.alternate;L!==null&&(L.return=null),v.return=null}catch(H){lt(v,a,H)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)Jg(a,i),a=a.sibling}function Jg(i,a){var d=i.alternate,m=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Ln(a,i),Gn(i),m&4){try{Po(3,i,i.return),_l(3,i)}catch(me){lt(i,i.return,me)}try{Po(5,i,i.return)}catch(me){lt(i,i.return,me)}}break;case 1:Ln(a,i),Gn(i),m&512&&d!==null&&ii(d,d.return);break;case 5:if(Ln(a,i),Gn(i),m&512&&d!==null&&ii(d,d.return),i.flags&32){var v=i.stateNode;try{cr(v,"")}catch(me){lt(i,i.return,me)}}if(m&4&&(v=i.stateNode,v!=null)){var S=i.memoizedProps,P=d!==null?d.memoizedProps:S,O=i.type,L=i.updateQueue;if(i.updateQueue=null,L!==null)try{O==="input"&&S.type==="radio"&&S.name!=null&&Le(v,S),Ou(O,P);var H=Ou(O,S);for(P=0;P<L.length;P+=2){var Z=L[P],te=L[P+1];Z==="style"?Mp(v,te):Z==="dangerouslySetInnerHTML"?Pn(v,te):Z==="children"?cr(v,te):C(v,Z,te,H)}switch(O){case"input":vt(v,S);break;case"textarea":Ra(v,S);break;case"select":var J=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!S.multiple;var le=S.value;le!=null?Tn(v,!!S.multiple,le,!1):J!==!!S.multiple&&(S.defaultValue!=null?Tn(v,!!S.multiple,S.defaultValue,!0):Tn(v,!!S.multiple,S.multiple?[]:"",!1))}v[vo]=S}catch(me){lt(i,i.return,me)}}break;case 6:if(Ln(a,i),Gn(i),m&4){if(i.stateNode===null)throw Error(t(162));v=i.stateNode,S=i.memoizedProps;try{v.nodeValue=S}catch(me){lt(i,i.return,me)}}break;case 3:if(Ln(a,i),Gn(i),m&4&&d!==null&&d.memoizedState.isDehydrated)try{oo(a.containerInfo)}catch(me){lt(i,i.return,me)}break;case 4:Ln(a,i),Gn(i);break;case 13:Ln(a,i),Gn(i),v=i.child,v.flags&8192&&(S=v.memoizedState!==null,v.stateNode.isHidden=S,!S||v.alternate!==null&&v.alternate.memoizedState!==null||(ih=ct())),m&4&&Qg(i);break;case 22:if(Z=d!==null&&d.memoizedState!==null,i.mode&1?(It=(H=It)||Z,Ln(a,i),It=H):Ln(a,i),Gn(i),m&8192){if(H=i.memoizedState!==null,(i.stateNode.isHidden=H)&&!Z&&(i.mode&1)!==0)for(de=i,Z=i.child;Z!==null;){for(te=de=Z;de!==null;){switch(J=de,le=J.child,J.tag){case 0:case 11:case 14:case 15:Po(4,J,J.return);break;case 1:ii(J,J.return);var pe=J.stateNode;if(typeof pe.componentWillUnmount=="function"){m=J,d=J.return;try{a=m,pe.props=a.memoizedProps,pe.state=a.memoizedState,pe.componentWillUnmount()}catch(me){lt(m,d,me)}}break;case 5:ii(J,J.return);break;case 22:if(J.memoizedState!==null){ty(te);continue}}le!==null?(le.return=J,de=le):ty(te)}Z=Z.sibling}e:for(Z=null,te=i;;){if(te.tag===5){if(Z===null){Z=te;try{v=te.stateNode,H?(S=v.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(O=te.stateNode,L=te.memoizedProps.style,P=L!=null&&L.hasOwnProperty("display")?L.display:null,O.style.display=Op("display",P))}catch(me){lt(i,i.return,me)}}}else if(te.tag===6){if(Z===null)try{te.stateNode.nodeValue=H?"":te.memoizedProps}catch(me){lt(i,i.return,me)}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===i)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===i)break e;for(;te.sibling===null;){if(te.return===null||te.return===i)break e;Z===te&&(Z=null),te=te.return}Z===te&&(Z=null),te.sibling.return=te.return,te=te.sibling}}break;case 19:Ln(a,i),Gn(i),m&4&&Qg(i);break;case 21:break;default:Ln(a,i),Gn(i)}}function Gn(i){var a=i.flags;if(a&2){try{e:{for(var d=i.return;d!==null;){if(Yg(d)){var m=d;break e}d=d.return}throw Error(t(160))}switch(m.tag){case 5:var v=m.stateNode;m.flags&32&&(cr(v,""),m.flags&=-33);var S=Xg(i);nh(i,S,v);break;case 3:case 4:var P=m.stateNode.containerInfo,O=Xg(i);th(i,O,P);break;default:throw Error(t(161))}}catch(L){lt(i,i.return,L)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function rE(i,a,d){de=i,Zg(i)}function Zg(i,a,d){for(var m=(i.mode&1)!==0;de!==null;){var v=de,S=v.child;if(v.tag===22&&m){var P=v.memoizedState!==null||Sl;if(!P){var O=v.alternate,L=O!==null&&O.memoizedState!==null||It;O=Sl;var H=It;if(Sl=P,(It=L)&&!H)for(de=v;de!==null;)P=de,L=P.child,P.tag===22&&P.memoizedState!==null?ny(v):L!==null?(L.return=P,de=L):ny(v);for(;S!==null;)de=S,Zg(S),S=S.sibling;de=v,Sl=O,It=H}ey(i)}else(v.subtreeFlags&8772)!==0&&S!==null?(S.return=v,de=S):ey(i)}}function ey(i){for(;de!==null;){var a=de;if((a.flags&8772)!==0){var d=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:It||_l(5,a);break;case 1:var m=a.stateNode;if(a.flags&4&&!It)if(d===null)m.componentDidMount();else{var v=a.elementType===a.type?d.memoizedProps:On(a.type,d.memoizedProps);m.componentDidUpdate(v,d.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var S=a.updateQueue;S!==null&&tg(a,S,m);break;case 3:var P=a.updateQueue;if(P!==null){if(d=null,a.child!==null)switch(a.child.tag){case 5:d=a.child.stateNode;break;case 1:d=a.child.stateNode}tg(a,P,d)}break;case 5:var O=a.stateNode;if(d===null&&a.flags&4){d=O;var L=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&d.focus();break;case"img":L.src&&(d.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var H=a.alternate;if(H!==null){var Z=H.memoizedState;if(Z!==null){var te=Z.dehydrated;te!==null&&oo(te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}It||a.flags&512&&eh(a)}catch(J){lt(a,a.return,J)}}if(a===i){de=null;break}if(d=a.sibling,d!==null){d.return=a.return,de=d;break}de=a.return}}function ty(i){for(;de!==null;){var a=de;if(a===i){de=null;break}var d=a.sibling;if(d!==null){d.return=a.return,de=d;break}de=a.return}}function ny(i){for(;de!==null;){var a=de;try{switch(a.tag){case 0:case 11:case 15:var d=a.return;try{_l(4,a)}catch(L){lt(a,d,L)}break;case 1:var m=a.stateNode;if(typeof m.componentDidMount=="function"){var v=a.return;try{m.componentDidMount()}catch(L){lt(a,v,L)}}var S=a.return;try{eh(a)}catch(L){lt(a,S,L)}break;case 5:var P=a.return;try{eh(a)}catch(L){lt(a,P,L)}}}catch(L){lt(a,a.return,L)}if(a===i){de=null;break}var O=a.sibling;if(O!==null){O.return=a.return,de=O;break}de=a.return}}var sE=Math.ceil,El=k.ReactCurrentDispatcher,rh=k.ReactCurrentOwner,wn=k.ReactCurrentBatchConfig,Fe=0,_t=null,pt=null,Pt=0,un=0,oi=Lr(0),wt=0,Ro=null,ys=0,Al=0,sh=0,No=null,Qt=null,ih=0,ai=1/0,yr=null,Cl=!1,oh=null,zr=null,Tl=!1,Hr=null,kl=0,Do=0,ah=null,Pl=-1,Rl=0;function zt(){return(Fe&6)!==0?ct():Pl!==-1?Pl:Pl=ct()}function Wr(i){return(i.mode&1)===0?1:(Fe&2)!==0&&Pt!==0?Pt&-Pt:z_.transition!==null?(Rl===0&&(Rl=Xp()),Rl):(i=Ue,i!==0||(i=window.event,i=i===void 0?16:sm(i.type)),i)}function In(i,a,d,m){if(50<Do)throw Do=0,ah=null,Error(t(185));to(i,d,m),((Fe&2)===0||i!==_t)&&(i===_t&&((Fe&2)===0&&(Al|=d),wt===4&&$r(i,Pt)),Jt(i,m),d===1&&Fe===0&&(a.mode&1)===0&&(ai=ct()+500,sl&&Fr()))}function Jt(i,a){var d=i.callbackNode;zS(i,a);var m=Ba(i,i===_t?Pt:0);if(m===0)d!==null&&qp(d),i.callbackNode=null,i.callbackPriority=0;else if(a=m&-m,i.callbackPriority!==a){if(d!=null&&qp(d),a===1)i.tag===0?U_(sy.bind(null,i)):Wm(sy.bind(null,i)),I_(function(){(Fe&6)===0&&Fr()}),d=null;else{switch(Kp(m)){case 1:d=Uu;break;case 4:d=Gp;break;case 16:d=La;break;case 536870912:d=Yp;break;default:d=La}d=hy(d,ry.bind(null,i))}i.callbackPriority=a,i.callbackNode=d}}function ry(i,a){if(Pl=-1,Rl=0,(Fe&6)!==0)throw Error(t(327));var d=i.callbackNode;if(li()&&i.callbackNode!==d)return null;var m=Ba(i,i===_t?Pt:0);if(m===0)return null;if((m&30)!==0||(m&i.expiredLanes)!==0||a)a=Nl(i,m);else{a=m;var v=Fe;Fe|=2;var S=oy();(_t!==i||Pt!==a)&&(yr=null,ai=ct()+500,bs(i,a));do try{aE();break}catch(O){iy(i,O)}while(!0);Ad(),El.current=S,Fe=v,pt!==null?a=0:(_t=null,Pt=0,a=wt)}if(a!==0){if(a===2&&(v=zu(i),v!==0&&(m=v,a=lh(i,v))),a===1)throw d=Ro,bs(i,0),$r(i,m),Jt(i,ct()),d;if(a===6)$r(i,m);else{if(v=i.current.alternate,(m&30)===0&&!iE(v)&&(a=Nl(i,m),a===2&&(S=zu(i),S!==0&&(m=S,a=lh(i,S))),a===1))throw d=Ro,bs(i,0),$r(i,m),Jt(i,ct()),d;switch(i.finishedWork=v,i.finishedLanes=m,a){case 0:case 1:throw Error(t(345));case 2:ws(i,Qt,yr);break;case 3:if($r(i,m),(m&130023424)===m&&(a=ih+500-ct(),10<a)){if(Ba(i,0)!==0)break;if(v=i.suspendedLanes,(v&m)!==m){zt(),i.pingedLanes|=i.suspendedLanes&v;break}i.timeoutHandle=pd(ws.bind(null,i,Qt,yr),a);break}ws(i,Qt,yr);break;case 4:if($r(i,m),(m&4194240)===m)break;for(a=i.eventTimes,v=-1;0<m;){var P=31-Rn(m);S=1<<P,P=a[P],P>v&&(v=P),m&=~S}if(m=v,m=ct()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*sE(m/1960))-m,10<m){i.timeoutHandle=pd(ws.bind(null,i,Qt,yr),m);break}ws(i,Qt,yr);break;case 5:ws(i,Qt,yr);break;default:throw Error(t(329))}}}return Jt(i,ct()),i.callbackNode===d?ry.bind(null,i):null}function lh(i,a){var d=No;return i.current.memoizedState.isDehydrated&&(bs(i,a).flags|=256),i=Nl(i,a),i!==2&&(a=Qt,Qt=d,a!==null&&ch(a)),i}function ch(i){Qt===null?Qt=i:Qt.push.apply(Qt,i)}function iE(i){for(var a=i;;){if(a.flags&16384){var d=a.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var m=0;m<d.length;m++){var v=d[m],S=v.getSnapshot;v=v.value;try{if(!Nn(S(),v))return!1}catch{return!1}}}if(d=a.child,a.subtreeFlags&16384&&d!==null)d.return=a,a=d;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function $r(i,a){for(a&=~sh,a&=~Al,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var d=31-Rn(a),m=1<<d;i[d]=-1,a&=~m}}function sy(i){if((Fe&6)!==0)throw Error(t(327));li();var a=Ba(i,0);if((a&1)===0)return Jt(i,ct()),null;var d=Nl(i,a);if(i.tag!==0&&d===2){var m=zu(i);m!==0&&(a=m,d=lh(i,m))}if(d===1)throw d=Ro,bs(i,0),$r(i,a),Jt(i,ct()),d;if(d===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,ws(i,Qt,yr),Jt(i,ct()),null}function uh(i,a){var d=Fe;Fe|=1;try{return i(a)}finally{Fe=d,Fe===0&&(ai=ct()+500,sl&&Fr())}}function vs(i){Hr!==null&&Hr.tag===0&&(Fe&6)===0&&li();var a=Fe;Fe|=1;var d=wn.transition,m=Ue;try{if(wn.transition=null,Ue=1,i)return i()}finally{Ue=m,wn.transition=d,Fe=a,(Fe&6)===0&&Fr()}}function dh(){un=oi.current,Ge(oi)}function bs(i,a){i.finishedWork=null,i.finishedLanes=0;var d=i.timeoutHandle;if(d!==-1&&(i.timeoutHandle=-1,L_(d)),pt!==null)for(d=pt.return;d!==null;){var m=d;switch(wd(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&nl();break;case 3:ri(),Ge(Yt),Ge(Ot),Od();break;case 5:Nd(m);break;case 4:ri();break;case 13:Ge(tt);break;case 19:Ge(tt);break;case 10:Cd(m.type._context);break;case 22:case 23:dh()}d=d.return}if(_t=i,pt=i=Vr(i.current,null),Pt=un=a,wt=0,Ro=null,sh=Al=ys=0,Qt=No=null,ps!==null){for(a=0;a<ps.length;a++)if(d=ps[a],m=d.interleaved,m!==null){d.interleaved=null;var v=m.next,S=d.pending;if(S!==null){var P=S.next;S.next=v,m.next=P}d.pending=m}ps=null}return i}function iy(i,a){do{var d=pt;try{if(Ad(),pl.current=vl,ml){for(var m=nt.memoizedState;m!==null;){var v=m.queue;v!==null&&(v.pending=null),m=m.next}ml=!1}if(gs=0,St=bt=nt=null,Eo=!1,Ao=0,rh.current=null,d===null||d.return===null){wt=1,Ro=a,pt=null;break}e:{var S=i,P=d.return,O=d,L=a;if(a=Pt,O.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var H=L,Z=O,te=Z.tag;if((Z.mode&1)===0&&(te===0||te===11||te===15)){var J=Z.alternate;J?(Z.updateQueue=J.updateQueue,Z.memoizedState=J.memoizedState,Z.lanes=J.lanes):(Z.updateQueue=null,Z.memoizedState=null)}var le=Rg(P);if(le!==null){le.flags&=-257,Ng(le,P,O,S,a),le.mode&1&&Pg(S,H,a),a=le,L=H;var pe=a.updateQueue;if(pe===null){var me=new Set;me.add(L),a.updateQueue=me}else pe.add(L);break e}else{if((a&1)===0){Pg(S,H,a),hh();break e}L=Error(t(426))}}else if(Qe&&O.mode&1){var ut=Rg(P);if(ut!==null){(ut.flags&65536)===0&&(ut.flags|=256),Ng(ut,P,O,S,a),_d(si(L,O));break e}}S=L=si(L,O),wt!==4&&(wt=2),No===null?No=[S]:No.push(S),S=P;do{switch(S.tag){case 3:S.flags|=65536,a&=-a,S.lanes|=a;var B=Tg(S,L,a);eg(S,B);break e;case 1:O=L;var F=S.type,U=S.stateNode;if((S.flags&128)===0&&(typeof F.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(zr===null||!zr.has(U)))){S.flags|=65536,a&=-a,S.lanes|=a;var re=kg(S,O,a);eg(S,re);break e}}S=S.return}while(S!==null)}ly(d)}catch(ye){a=ye,pt===d&&d!==null&&(pt=d=d.return);continue}break}while(!0)}function oy(){var i=El.current;return El.current=vl,i===null?vl:i}function hh(){(wt===0||wt===3||wt===2)&&(wt=4),_t===null||(ys&268435455)===0&&(Al&268435455)===0||$r(_t,Pt)}function Nl(i,a){var d=Fe;Fe|=2;var m=oy();(_t!==i||Pt!==a)&&(yr=null,bs(i,a));do try{oE();break}catch(v){iy(i,v)}while(!0);if(Ad(),Fe=d,El.current=m,pt!==null)throw Error(t(261));return _t=null,Pt=0,wt}function oE(){for(;pt!==null;)ay(pt)}function aE(){for(;pt!==null&&!DS();)ay(pt)}function ay(i){var a=dy(i.alternate,i,un);i.memoizedProps=i.pendingProps,a===null?ly(i):pt=a,rh.current=null}function ly(i){var a=i;do{var d=a.alternate;if(i=a.return,(a.flags&32768)===0){if(d=Z_(d,a,un),d!==null){pt=d;return}}else{if(d=eE(d,a),d!==null){d.flags&=32767,pt=d;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{wt=6,pt=null;return}}if(a=a.sibling,a!==null){pt=a;return}pt=a=i}while(a!==null);wt===0&&(wt=5)}function ws(i,a,d){var m=Ue,v=wn.transition;try{wn.transition=null,Ue=1,lE(i,a,d,m)}finally{wn.transition=v,Ue=m}return null}function lE(i,a,d,m){do li();while(Hr!==null);if((Fe&6)!==0)throw Error(t(327));d=i.finishedWork;var v=i.finishedLanes;if(d===null)return null;if(i.finishedWork=null,i.finishedLanes=0,d===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var S=d.lanes|d.childLanes;if(HS(i,S),i===_t&&(pt=_t=null,Pt=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||Tl||(Tl=!0,hy(La,function(){return li(),null})),S=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||S){S=wn.transition,wn.transition=null;var P=Ue;Ue=1;var O=Fe;Fe|=4,rh.current=null,nE(i,d),Jg(d,i),k_(hd),Ha=!!dd,hd=dd=null,i.current=d,rE(d),OS(),Fe=O,Ue=P,wn.transition=S}else i.current=d;if(Tl&&(Tl=!1,Hr=i,kl=v),S=i.pendingLanes,S===0&&(zr=null),IS(d.stateNode),Jt(i,ct()),a!==null)for(m=i.onRecoverableError,d=0;d<a.length;d++)v=a[d],m(v.value,{componentStack:v.stack,digest:v.digest});if(Cl)throw Cl=!1,i=oh,oh=null,i;return(kl&1)!==0&&i.tag!==0&&li(),S=i.pendingLanes,(S&1)!==0?i===ah?Do++:(Do=0,ah=i):Do=0,Fr(),null}function li(){if(Hr!==null){var i=Kp(kl),a=wn.transition,d=Ue;try{if(wn.transition=null,Ue=16>i?16:i,Hr===null)var m=!1;else{if(i=Hr,Hr=null,kl=0,(Fe&6)!==0)throw Error(t(331));var v=Fe;for(Fe|=4,de=i.current;de!==null;){var S=de,P=S.child;if((de.flags&16)!==0){var O=S.deletions;if(O!==null){for(var L=0;L<O.length;L++){var H=O[L];for(de=H;de!==null;){var Z=de;switch(Z.tag){case 0:case 11:case 15:Po(8,Z,S)}var te=Z.child;if(te!==null)te.return=Z,de=te;else for(;de!==null;){Z=de;var J=Z.sibling,le=Z.return;if(Gg(Z),Z===H){de=null;break}if(J!==null){J.return=le,de=J;break}de=le}}}var pe=S.alternate;if(pe!==null){var me=pe.child;if(me!==null){pe.child=null;do{var ut=me.sibling;me.sibling=null,me=ut}while(me!==null)}}de=S}}if((S.subtreeFlags&2064)!==0&&P!==null)P.return=S,de=P;else e:for(;de!==null;){if(S=de,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:Po(9,S,S.return)}var B=S.sibling;if(B!==null){B.return=S.return,de=B;break e}de=S.return}}var F=i.current;for(de=F;de!==null;){P=de;var U=P.child;if((P.subtreeFlags&2064)!==0&&U!==null)U.return=P,de=U;else e:for(P=F;de!==null;){if(O=de,(O.flags&2048)!==0)try{switch(O.tag){case 0:case 11:case 15:_l(9,O)}}catch(ye){lt(O,O.return,ye)}if(O===P){de=null;break e}var re=O.sibling;if(re!==null){re.return=O.return,de=re;break e}de=O.return}}if(Fe=v,Fr(),Wn&&typeof Wn.onPostCommitFiberRoot=="function")try{Wn.onPostCommitFiberRoot(Ia,i)}catch{}m=!0}return m}finally{Ue=d,wn.transition=a}}return!1}function cy(i,a,d){a=si(d,a),a=Tg(i,a,1),i=Br(i,a,1),a=zt(),i!==null&&(to(i,1,a),Jt(i,a))}function lt(i,a,d){if(i.tag===3)cy(i,i,d);else for(;a!==null;){if(a.tag===3){cy(a,i,d);break}else if(a.tag===1){var m=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(zr===null||!zr.has(m))){i=si(d,i),i=kg(a,i,1),a=Br(a,i,1),i=zt(),a!==null&&(to(a,1,i),Jt(a,i));break}}a=a.return}}function cE(i,a,d){var m=i.pingCache;m!==null&&m.delete(a),a=zt(),i.pingedLanes|=i.suspendedLanes&d,_t===i&&(Pt&d)===d&&(wt===4||wt===3&&(Pt&130023424)===Pt&&500>ct()-ih?bs(i,0):sh|=d),Jt(i,a)}function uy(i,a){a===0&&((i.mode&1)===0?a=1:(a=ja,ja<<=1,(ja&130023424)===0&&(ja=4194304)));var d=zt();i=pr(i,a),i!==null&&(to(i,a,d),Jt(i,d))}function uE(i){var a=i.memoizedState,d=0;a!==null&&(d=a.retryLane),uy(i,d)}function dE(i,a){var d=0;switch(i.tag){case 13:var m=i.stateNode,v=i.memoizedState;v!==null&&(d=v.retryLane);break;case 19:m=i.stateNode;break;default:throw Error(t(314))}m!==null&&m.delete(a),uy(i,d)}var dy;dy=function(i,a,d){if(i!==null)if(i.memoizedProps!==a.pendingProps||Yt.current)Kt=!0;else{if((i.lanes&d)===0&&(a.flags&128)===0)return Kt=!1,J_(i,a,d);Kt=(i.flags&131072)!==0}else Kt=!1,Qe&&(a.flags&1048576)!==0&&$m(a,ol,a.index);switch(a.lanes=0,a.tag){case 2:var m=a.type;xl(i,a),i=a.pendingProps;var v=Ks(a,Ot.current);ni(a,d),v=Id(null,a,m,i,v,d);var S=Fd();return a.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Xt(m)?(S=!0,rl(a)):S=!1,a.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,Pd(a),v.updater=bl,a.stateNode=v,v._reactInternals=a,Wd(a,m,i,d),a=Gd(null,a,m,!0,S,d)):(a.tag=0,Qe&&S&&bd(a),Ut(null,a,v,d),a=a.child),a;case 16:m=a.elementType;e:{switch(xl(i,a),i=a.pendingProps,v=m._init,m=v(m._payload),a.type=m,v=a.tag=fE(m),i=On(m,i),v){case 0:a=qd(null,a,m,i,d);break e;case 1:a=Fg(null,a,m,i,d);break e;case 11:a=Dg(null,a,m,i,d);break e;case 14:a=Og(null,a,m,On(m.type,i),d);break e}throw Error(t(306,m,""))}return a;case 0:return m=a.type,v=a.pendingProps,v=a.elementType===m?v:On(m,v),qd(i,a,m,v,d);case 1:return m=a.type,v=a.pendingProps,v=a.elementType===m?v:On(m,v),Fg(i,a,m,v,d);case 3:e:{if(jg(a),i===null)throw Error(t(387));m=a.pendingProps,S=a.memoizedState,v=S.element,Zm(i,a),hl(a,m,null,d);var P=a.memoizedState;if(m=P.element,S.isDehydrated)if(S={element:m,isDehydrated:!1,cache:P.cache,pendingSuspenseBoundaries:P.pendingSuspenseBoundaries,transitions:P.transitions},a.updateQueue.baseState=S,a.memoizedState=S,a.flags&256){v=si(Error(t(423)),a),a=Bg(i,a,m,d,v);break e}else if(m!==v){v=si(Error(t(424)),a),a=Bg(i,a,m,d,v);break e}else for(cn=Mr(a.stateNode.containerInfo.firstChild),ln=a,Qe=!0,Dn=null,d=Qm(a,null,m,d),a.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Zs(),m===v){a=gr(i,a,d);break e}Ut(i,a,m,d)}a=a.child}return a;case 5:return ng(a),i===null&&Sd(a),m=a.type,v=a.pendingProps,S=i!==null?i.memoizedProps:null,P=v.children,fd(m,v)?P=null:S!==null&&fd(m,S)&&(a.flags|=32),Ig(i,a),Ut(i,a,P,d),a.child;case 6:return i===null&&Sd(a),null;case 13:return Ug(i,a,d);case 4:return Rd(a,a.stateNode.containerInfo),m=a.pendingProps,i===null?a.child=ei(a,null,m,d):Ut(i,a,m,d),a.child;case 11:return m=a.type,v=a.pendingProps,v=a.elementType===m?v:On(m,v),Dg(i,a,m,v,d);case 7:return Ut(i,a,a.pendingProps,d),a.child;case 8:return Ut(i,a,a.pendingProps.children,d),a.child;case 12:return Ut(i,a,a.pendingProps.children,d),a.child;case 10:e:{if(m=a.type._context,v=a.pendingProps,S=a.memoizedProps,P=v.value,Ve(cl,m._currentValue),m._currentValue=P,S!==null)if(Nn(S.value,P)){if(S.children===v.children&&!Yt.current){a=gr(i,a,d);break e}}else for(S=a.child,S!==null&&(S.return=a);S!==null;){var O=S.dependencies;if(O!==null){P=S.child;for(var L=O.firstContext;L!==null;){if(L.context===m){if(S.tag===1){L=mr(-1,d&-d),L.tag=2;var H=S.updateQueue;if(H!==null){H=H.shared;var Z=H.pending;Z===null?L.next=L:(L.next=Z.next,Z.next=L),H.pending=L}}S.lanes|=d,L=S.alternate,L!==null&&(L.lanes|=d),Td(S.return,d,a),O.lanes|=d;break}L=L.next}}else if(S.tag===10)P=S.type===a.type?null:S.child;else if(S.tag===18){if(P=S.return,P===null)throw Error(t(341));P.lanes|=d,O=P.alternate,O!==null&&(O.lanes|=d),Td(P,d,a),P=S.sibling}else P=S.child;if(P!==null)P.return=S;else for(P=S;P!==null;){if(P===a){P=null;break}if(S=P.sibling,S!==null){S.return=P.return,P=S;break}P=P.return}S=P}Ut(i,a,v.children,d),a=a.child}return a;case 9:return v=a.type,m=a.pendingProps.children,ni(a,d),v=vn(v),m=m(v),a.flags|=1,Ut(i,a,m,d),a.child;case 14:return m=a.type,v=On(m,a.pendingProps),v=On(m.type,v),Og(i,a,m,v,d);case 15:return Mg(i,a,a.type,a.pendingProps,d);case 17:return m=a.type,v=a.pendingProps,v=a.elementType===m?v:On(m,v),xl(i,a),a.tag=1,Xt(m)?(i=!0,rl(a)):i=!1,ni(a,d),Ag(a,m,v),Wd(a,m,v,d),Gd(null,a,m,!0,i,d);case 19:return Hg(i,a,d);case 22:return Lg(i,a,d)}throw Error(t(156,a.tag))};function hy(i,a){return Vp(i,a)}function hE(i,a,d,m){this.tag=i,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(i,a,d,m){return new hE(i,a,d,m)}function fh(i){return i=i.prototype,!(!i||!i.isReactComponent)}function fE(i){if(typeof i=="function")return fh(i)?1:0;if(i!=null){if(i=i.$$typeof,i===ne)return 11;if(i===ae)return 14}return 2}function Vr(i,a){var d=i.alternate;return d===null?(d=xn(i.tag,a,i.key,i.mode),d.elementType=i.elementType,d.type=i.type,d.stateNode=i.stateNode,d.alternate=i,i.alternate=d):(d.pendingProps=a,d.type=i.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=i.flags&14680064,d.childLanes=i.childLanes,d.lanes=i.lanes,d.child=i.child,d.memoizedProps=i.memoizedProps,d.memoizedState=i.memoizedState,d.updateQueue=i.updateQueue,a=i.dependencies,d.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},d.sibling=i.sibling,d.index=i.index,d.ref=i.ref,d}function Dl(i,a,d,m,v,S){var P=2;if(m=i,typeof i=="function")fh(i)&&(P=1);else if(typeof i=="string")P=5;else e:switch(i){case D:return xs(d.children,v,S,a);case j:P=8,v|=8;break;case z:return i=xn(12,d,a,v|2),i.elementType=z,i.lanes=S,i;case ie:return i=xn(13,d,a,v),i.elementType=ie,i.lanes=S,i;case ee:return i=xn(19,d,a,v),i.elementType=ee,i.lanes=S,i;case X:return Ol(d,v,S,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case q:P=10;break e;case Y:P=9;break e;case ne:P=11;break e;case ae:P=14;break e;case G:P=16,m=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return a=xn(P,d,a,v),a.elementType=i,a.type=m,a.lanes=S,a}function xs(i,a,d,m){return i=xn(7,i,m,a),i.lanes=d,i}function Ol(i,a,d,m){return i=xn(22,i,m,a),i.elementType=X,i.lanes=d,i.stateNode={isHidden:!1},i}function ph(i,a,d){return i=xn(6,i,null,a),i.lanes=d,i}function mh(i,a,d){return a=xn(4,i.children!==null?i.children:[],i.key,a),a.lanes=d,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function pE(i,a,d,m,v){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hu(0),this.expirationTimes=Hu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hu(0),this.identifierPrefix=m,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function gh(i,a,d,m,v,S,P,O,L){return i=new pE(i,a,d,O,L),a===1?(a=1,S===!0&&(a|=8)):a=0,S=xn(3,null,null,a),i.current=S,S.stateNode=i,S.memoizedState={element:m,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pd(S),i}function mE(i,a,d){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:R,key:m==null?null:""+m,children:i,containerInfo:a,implementation:d}}function fy(i){if(!i)return Ir;i=i._reactInternals;e:{if(cs(i)!==i||i.tag!==1)throw Error(t(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Xt(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(i.tag===1){var d=i.type;if(Xt(d))return zm(i,d,a)}return a}function py(i,a,d,m,v,S,P,O,L){return i=gh(d,m,!0,i,v,S,P,O,L),i.context=fy(null),d=i.current,m=zt(),v=Wr(d),S=mr(m,v),S.callback=a??null,Br(d,S,v),i.current.lanes=v,to(i,v,m),Jt(i,m),i}function Ml(i,a,d,m){var v=a.current,S=zt(),P=Wr(v);return d=fy(d),a.context===null?a.context=d:a.pendingContext=d,a=mr(S,P),a.payload={element:i},m=m===void 0?null:m,m!==null&&(a.callback=m),i=Br(v,a,P),i!==null&&(In(i,v,P,S),dl(i,v,P)),P}function Ll(i){return i=i.current,i.child?(i.child.tag===5,i.child.stateNode):null}function my(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var d=i.retryLane;i.retryLane=d!==0&&d<a?d:a}}function yh(i,a){my(i,a),(i=i.alternate)&&my(i,a)}function gE(){return null}var gy=typeof reportError=="function"?reportError:function(i){console.error(i)};function vh(i){this._internalRoot=i}Il.prototype.render=vh.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(t(409));Ml(i,a,null,null)},Il.prototype.unmount=vh.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;vs(function(){Ml(null,i,null,null)}),a[ur]=null}};function Il(i){this._internalRoot=i}Il.prototype.unstable_scheduleHydration=function(i){if(i){var a=Zp();i={blockedOn:null,target:i,priority:a};for(var d=0;d<Nr.length&&a!==0&&a<Nr[d].priority;d++);Nr.splice(d,0,i),d===0&&nm(i)}};function bh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Fl(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function yy(){}function yE(i,a,d,m,v){if(v){if(typeof m=="function"){var S=m;m=function(){var H=Ll(P);S.call(H)}}var P=py(a,m,i,0,null,!1,!1,"",yy);return i._reactRootContainer=P,i[ur]=P.current,go(i.nodeType===8?i.parentNode:i),vs(),P}for(;v=i.lastChild;)i.removeChild(v);if(typeof m=="function"){var O=m;m=function(){var H=Ll(L);O.call(H)}}var L=gh(i,0,!1,null,null,!1,!1,"",yy);return i._reactRootContainer=L,i[ur]=L.current,go(i.nodeType===8?i.parentNode:i),vs(function(){Ml(a,L,d,m)}),L}function jl(i,a,d,m,v){var S=d._reactRootContainer;if(S){var P=S;if(typeof v=="function"){var O=v;v=function(){var L=Ll(P);O.call(L)}}Ml(a,P,i,v)}else P=yE(d,a,i,v,m);return Ll(P)}Qp=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var d=eo(a.pendingLanes);d!==0&&(Wu(a,d|1),Jt(a,ct()),(Fe&6)===0&&(ai=ct()+500,Fr()))}break;case 13:vs(function(){var m=pr(i,1);if(m!==null){var v=zt();In(m,i,1,v)}}),yh(i,1)}},$u=function(i){if(i.tag===13){var a=pr(i,134217728);if(a!==null){var d=zt();In(a,i,134217728,d)}yh(i,134217728)}},Jp=function(i){if(i.tag===13){var a=Wr(i),d=pr(i,a);if(d!==null){var m=zt();In(d,i,a,m)}yh(i,a)}},Zp=function(){return Ue},em=function(i,a){var d=Ue;try{return Ue=i,a()}finally{Ue=d}},Iu=function(i,a,d){switch(a){case"input":if(vt(i,d),a=d.name,d.type==="radio"&&a!=null){for(d=i;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<d.length;a++){var m=d[a];if(m!==i&&m.form===i.form){var v=tl(m);if(!v)throw Error(t(90));Gt(m),vt(m,v)}}}break;case"textarea":Ra(i,d);break;case"select":a=d.value,a!=null&&Tn(i,!!d.multiple,a,!1)}},jp=uh,Bp=vs;var vE={usingClientEntryPoint:!1,Events:[bo,Ys,tl,Ip,Fp,uh]},Oo={findFiberByHostInstance:us,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bE={bundleType:Oo.bundleType,version:Oo.version,rendererPackageName:Oo.rendererPackageName,rendererConfig:Oo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Wp(i),i===null?null:i.stateNode},findFiberByHostInstance:Oo.findFiberByHostInstance||gE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bl.isDisabled&&Bl.supportsFiber)try{Ia=Bl.inject(bE),Wn=Bl}catch{}}return en.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vE,en.createPortal=function(i,a){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bh(a))throw Error(t(200));return mE(i,a,null,d)},en.createRoot=function(i,a){if(!bh(i))throw Error(t(299));var d=!1,m="",v=gy;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),a=gh(i,1,!1,null,null,d,!1,m,v),i[ur]=a.current,go(i.nodeType===8?i.parentNode:i),new vh(a)},en.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Wp(a),i=i===null?null:i.stateNode,i},en.flushSync=function(i){return vs(i)},en.hydrate=function(i,a,d){if(!Fl(a))throw Error(t(200));return jl(null,i,a,!0,d)},en.hydrateRoot=function(i,a,d){if(!bh(i))throw Error(t(405));var m=d!=null&&d.hydratedSources||null,v=!1,S="",P=gy;if(d!=null&&(d.unstable_strictMode===!0&&(v=!0),d.identifierPrefix!==void 0&&(S=d.identifierPrefix),d.onRecoverableError!==void 0&&(P=d.onRecoverableError)),a=py(a,null,i,1,d??null,v,!1,S,P),i[ur]=a.current,go(i),m)for(i=0;i<m.length;i++)d=m[i],v=d._getVersion,v=v(d._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[d,v]:a.mutableSourceEagerHydrationData.push(d,v);return new Il(a)},en.render=function(i,a,d){if(!Fl(a))throw Error(t(200));return jl(null,i,a,!1,d)},en.unmountComponentAtNode=function(i){if(!Fl(i))throw Error(t(40));return i._reactRootContainer?(vs(function(){jl(null,null,i,!1,function(){i._reactRootContainer=null,i[ur]=null})}),!0):!1},en.unstable_batchedUpdates=uh,en.unstable_renderSubtreeIntoContainer=function(i,a,d,m){if(!Fl(d))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return jl(i,a,d,!1,m)},en.version="18.3.1-next-f1338f8080-20240426",en}var Ty;function nb(){if(Ty)return _h.exports;Ty=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),_h.exports=TE(),_h.exports}var ky;function kE(){if(ky)return Ul;ky=1;var s=nb();return Ul.createRoot=s.createRoot,Ul.hydrateRoot=s.hydrateRoot,Ul}var PE=kE();const RE=ss(PE);var rb=nb();const NE=ss(rb);function na(){return na=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},na.apply(this,arguments)}var Zr;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(Zr||(Zr={}));const Py="popstate";function DE(s){s===void 0&&(s={});function e(n,r){let{pathname:o,search:l,hash:c}=n.location;return lf("",{pathname:o,search:l,hash:c},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(n,r){return typeof r=="string"?r:Qc(r)}return ME(e,t,null,s)}function yt(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function $f(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function OE(){return Math.random().toString(36).substr(2,8)}function Ry(s,e){return{usr:s.state,key:s.key,idx:e}}function lf(s,e,t,n){return t===void 0&&(t=null),na({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof e=="string"?zi(e):e,{state:t,key:e&&e.key||n||OE()})}function Qc(s){let{pathname:e="/",search:t="",hash:n=""}=s;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function zi(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substr(t),s=s.substr(0,t));let n=s.indexOf("?");n>=0&&(e.search=s.substr(n),s=s.substr(0,n)),s&&(e.pathname=s)}return e}function ME(s,e,t,n){n===void 0&&(n={});let{window:r=document.defaultView,v5Compat:o=!1}=n,l=r.history,c=Zr.Pop,u=null,h=f();h==null&&(h=0,l.replaceState(na({},l.state,{idx:h}),""));function f(){return(l.state||{idx:null}).idx}function p(){c=Zr.Pop;let w=f(),E=w==null?null:w-h;h=w,u&&u({action:c,location:b.location,delta:E})}function y(w,E){c=Zr.Push;let A=lf(b.location,w,E);h=f()+1;let C=Ry(A,h),k=b.createHref(A);try{l.pushState(C,"",k)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;r.location.assign(k)}o&&u&&u({action:c,location:b.location,delta:1})}function x(w,E){c=Zr.Replace;let A=lf(b.location,w,E);h=f();let C=Ry(A,h),k=b.createHref(A);l.replaceState(C,"",k),o&&u&&u({action:c,location:b.location,delta:0})}function _(w){let E=r.location.origin!=="null"?r.location.origin:r.location.href,A=typeof w=="string"?w:Qc(w);return A=A.replace(/ $/,"%20"),yt(E,"No window.location.(origin|href) available to create URL for href: "+A),new URL(A,E)}let b={get action(){return c},get location(){return s(r,l)},listen(w){if(u)throw new Error("A history only accepts one active listener");return r.addEventListener(Py,p),u=w,()=>{r.removeEventListener(Py,p),u=null}},createHref(w){return e(r,w)},createURL:_,encodeLocation(w){let E=_(w);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:y,replace:x,go(w){return l.go(w)}};return b}var Ny;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(Ny||(Ny={}));function LE(s,e,t){return t===void 0&&(t="/"),IE(s,e,t)}function IE(s,e,t,n){let r=typeof e=="string"?zi(e):e,o=Vf(r.pathname||"/",t);if(o==null)return null;let l=sb(s);FE(l);let c=null;for(let u=0;c==null&&u<l.length;++u){let h=XE(o);c=qE(l[u],h)}return c}function sb(s,e,t,n){e===void 0&&(e=[]),t===void 0&&(t=[]),n===void 0&&(n="");let r=(o,l,c)=>{let u={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};u.relativePath.startsWith("/")&&(yt(u.relativePath.startsWith(n),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(n.length));let h=es([n,u.relativePath]),f=t.concat(u);o.children&&o.children.length>0&&(yt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),sb(o.children,e,f,h)),!(o.path==null&&!o.index)&&e.push({path:h,score:$E(h,o.index),routesMeta:f})};return s.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))r(o,l);else for(let u of ib(o.path))r(o,l,u)}),e}function ib(s){let e=s.split("/");if(e.length===0)return[];let[t,...n]=e,r=t.endsWith("?"),o=t.replace(/\?$/,"");if(n.length===0)return r?[o,""]:[o];let l=ib(n.join("/")),c=[];return c.push(...l.map(u=>u===""?o:[o,u].join("/"))),r&&c.push(...l),c.map(u=>s.startsWith("/")&&u===""?"/":u)}function FE(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:VE(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}const jE=/^:[\w-]+$/,BE=3,UE=2,zE=1,HE=10,WE=-2,Dy=s=>s==="*";function $E(s,e){let t=s.split("/"),n=t.length;return t.some(Dy)&&(n+=WE),e&&(n+=UE),t.filter(r=>!Dy(r)).reduce((r,o)=>r+(jE.test(o)?BE:o===""?zE:HE),n)}function VE(s,e){return s.length===e.length&&s.slice(0,-1).every((n,r)=>n===e[r])?s[s.length-1]-e[e.length-1]:0}function qE(s,e,t){let{routesMeta:n}=s,r={},o="/",l=[];for(let c=0;c<n.length;++c){let u=n[c],h=c===n.length-1,f=o==="/"?e:e.slice(o.length)||"/",p=GE({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},f),y=u.route;if(!p)return null;Object.assign(r,p.params),l.push({params:r,pathname:es([o,p.pathname]),pathnameBase:eA(es([o,p.pathnameBase])),route:y}),p.pathnameBase!=="/"&&(o=es([o,p.pathnameBase]))}return l}function GE(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,n]=YE(s.path,s.caseSensitive,s.end),r=e.match(t);if(!r)return null;let o=r[0],l=o.replace(/(.)\/+$/,"$1"),c=r.slice(1);return{params:n.reduce((h,f,p)=>{let{paramName:y,isOptional:x}=f;if(y==="*"){let b=c[p]||"";l=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const _=c[p];return x&&!_?h[y]=void 0:h[y]=(_||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:l,pattern:s}}function YE(s,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),$f(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let n=[],r="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,u)=>(n.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(n.push({paramName:"*"}),r+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":s!==""&&s!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),n]}function XE(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $f(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),s}}function Vf(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=s.charAt(t);return n&&n!=="/"?null:s.slice(t)||"/"}const KE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,QE=s=>KE.test(s);function JE(s,e){e===void 0&&(e="/");let{pathname:t,search:n="",hash:r=""}=typeof s=="string"?zi(s):s,o;if(t)if(QE(t))o=t;else{if(t.includes("//")){let l=t;t=t.replace(/\/\/+/g,"/"),$f(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+t))}t.startsWith("/")?o=Oy(t.substring(1),"/"):o=Oy(t,e)}else o=e;return{pathname:o,search:tA(n),hash:nA(r)}}function Oy(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function Ch(s,e,t,n){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ZE(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function ob(s,e){let t=ZE(s);return e?t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase):t.map(n=>n.pathnameBase)}function ab(s,e,t,n){n===void 0&&(n=!1);let r;typeof s=="string"?r=zi(s):(r=na({},s),yt(!r.pathname||!r.pathname.includes("?"),Ch("?","pathname","search",r)),yt(!r.pathname||!r.pathname.includes("#"),Ch("#","pathname","hash",r)),yt(!r.search||!r.search.includes("#"),Ch("#","search","hash",r)));let o=s===""||r.pathname==="",l=o?"/":r.pathname,c;if(l==null)c=t;else{let p=e.length-1;if(!n&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),p-=1;r.pathname=y.join("/")}c=p>=0?e[p]:"/"}let u=JE(r,c),h=l&&l!=="/"&&l.endsWith("/"),f=(o||l===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(h||f)&&(u.pathname+="/"),u}const es=s=>s.join("/").replace(/\/\/+/g,"/"),eA=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),tA=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,nA=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function rA(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const lb=["post","put","patch","delete"];new Set(lb);const sA=["get",...lb];new Set(sA);function ra(){return ra=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},ra.apply(this,arguments)}const qf=T.createContext(null),iA=T.createContext(null),Ls=T.createContext(null),cu=T.createContext(null),is=T.createContext({outlet:null,matches:[],isDataRoute:!1}),cb=T.createContext(null);function oA(s,e){let{relative:t}=e===void 0?{}:e;ha()||yt(!1);let{basename:n,navigator:r}=T.useContext(Ls),{hash:o,pathname:l,search:c}=hb(s,{relative:t}),u=l;return n!=="/"&&(u=l==="/"?n:es([n,l])),r.createHref({pathname:u,search:c,hash:o})}function ha(){return T.useContext(cu)!=null}function fa(){return ha()||yt(!1),T.useContext(cu).location}function ub(s){T.useContext(Ls).static||T.useLayoutEffect(s)}function os(){let{isDataRoute:s}=T.useContext(is);return s?bA():aA()}function aA(){ha()||yt(!1);let s=T.useContext(qf),{basename:e,future:t,navigator:n}=T.useContext(Ls),{matches:r}=T.useContext(is),{pathname:o}=fa(),l=JSON.stringify(ob(r,t.v7_relativeSplatPath)),c=T.useRef(!1);return ub(()=>{c.current=!0}),T.useCallback(function(h,f){if(f===void 0&&(f={}),!c.current)return;if(typeof h=="number"){n.go(h);return}let p=ab(h,JSON.parse(l),o,f.relative==="path");s==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:es([e,p.pathname])),(f.replace?n.replace:n.push)(p,f.state,f)},[e,n,l,o,s])}function db(){let{matches:s}=T.useContext(is),e=s[s.length-1];return e?e.params:{}}function hb(s,e){let{relative:t}=e===void 0?{}:e,{future:n}=T.useContext(Ls),{matches:r}=T.useContext(is),{pathname:o}=fa(),l=JSON.stringify(ob(r,n.v7_relativeSplatPath));return T.useMemo(()=>ab(s,JSON.parse(l),o,t==="path"),[s,l,o,t])}function lA(s,e){return cA(s,e)}function cA(s,e,t,n){ha()||yt(!1);let{navigator:r}=T.useContext(Ls),{matches:o}=T.useContext(is),l=o[o.length-1],c=l?l.params:{};l&&l.pathname;let u=l?l.pathnameBase:"/";l&&l.route;let h=fa(),f;if(e){var p;let w=typeof e=="string"?zi(e):e;u==="/"||(p=w.pathname)!=null&&p.startsWith(u)||yt(!1),f=w}else f=h;let y=f.pathname||"/",x=y;if(u!=="/"){let w=u.replace(/^\//,"").split("/");x="/"+y.replace(/^\//,"").split("/").slice(w.length).join("/")}let _=LE(s,{pathname:x}),b=pA(_&&_.map(w=>Object.assign({},w,{params:Object.assign({},c,w.params),pathname:es([u,r.encodeLocation?r.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?u:es([u,r.encodeLocation?r.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),o,t,n);return e&&b?T.createElement(cu.Provider,{value:{location:ra({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Zr.Pop}},b):b}function uA(){let s=vA(),e=rA(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),t?T.createElement("pre",{style:r},t):null,null)}const dA=T.createElement(uA,null);class hA extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?T.createElement(is.Provider,{value:this.props.routeContext},T.createElement(cb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function fA(s){let{routeContext:e,match:t,children:n}=s,r=T.useContext(qf);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),T.createElement(is.Provider,{value:e},n)}function pA(s,e,t,n){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),n===void 0&&(n=null),s==null){var o;if(!t)return null;if(t.errors)s=t.matches;else if((o=n)!=null&&o.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let l=s,c=(r=t)==null?void 0:r.errors;if(c!=null){let f=l.findIndex(p=>p.route.id&&c?.[p.route.id]!==void 0);f>=0||yt(!1),l=l.slice(0,Math.min(l.length,f+1))}let u=!1,h=-1;if(t&&n&&n.v7_partialHydration)for(let f=0;f<l.length;f++){let p=l[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=f),p.route.id){let{loaderData:y,errors:x}=t,_=p.route.loader&&y[p.route.id]===void 0&&(!x||x[p.route.id]===void 0);if(p.route.lazy||_){u=!0,h>=0?l=l.slice(0,h+1):l=[l[0]];break}}}return l.reduceRight((f,p,y)=>{let x,_=!1,b=null,w=null;t&&(x=c&&p.route.id?c[p.route.id]:void 0,b=p.route.errorElement||dA,u&&(h<0&&y===0?(wA("route-fallback"),_=!0,w=null):h===y&&(_=!0,w=p.route.hydrateFallbackElement||null)));let E=e.concat(l.slice(0,y+1)),A=()=>{let C;return x?C=b:_?C=w:p.route.Component?C=T.createElement(p.route.Component,null):p.route.element?C=p.route.element:C=f,T.createElement(fA,{match:p,routeContext:{outlet:f,matches:E,isDataRoute:t!=null},children:C})};return t&&(p.route.ErrorBoundary||p.route.errorElement||y===0)?T.createElement(hA,{location:t.location,revalidation:t.revalidation,component:b,error:x,children:A(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):A()},null)}var fb=(function(s){return s.UseBlocker="useBlocker",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s})(fb||{}),pb=(function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s})(pb||{});function mA(s){let e=T.useContext(qf);return e||yt(!1),e}function gA(s){let e=T.useContext(iA);return e||yt(!1),e}function yA(s){let e=T.useContext(is);return e||yt(!1),e}function mb(s){let e=yA(),t=e.matches[e.matches.length-1];return t.route.id||yt(!1),t.route.id}function vA(){var s;let e=T.useContext(cb),t=gA(),n=mb();return e!==void 0?e:(s=t.errors)==null?void 0:s[n]}function bA(){let{router:s}=mA(fb.UseNavigateStable),e=mb(pb.UseNavigateStable),t=T.useRef(!1);return ub(()=>{t.current=!0}),T.useCallback(function(r,o){o===void 0&&(o={}),t.current&&(typeof r=="number"?s.navigate(r):s.navigate(r,ra({fromRouteId:e},o)))},[s,e])}const My={};function wA(s,e,t){My[s]||(My[s]=!0)}function xA(s,e){s?.v7_startTransition,s?.v7_relativeSplatPath}function Fn(s){yt(!1)}function SA(s){let{basename:e="/",children:t=null,location:n,navigationType:r=Zr.Pop,navigator:o,static:l=!1,future:c}=s;ha()&&yt(!1);let u=e.replace(/^\/*/,"/"),h=T.useMemo(()=>({basename:u,navigator:o,static:l,future:ra({v7_relativeSplatPath:!1},c)}),[u,c,o,l]);typeof n=="string"&&(n=zi(n));let{pathname:f="/",search:p="",hash:y="",state:x=null,key:_="default"}=n,b=T.useMemo(()=>{let w=Vf(f,u);return w==null?null:{location:{pathname:w,search:p,hash:y,state:x,key:_},navigationType:r}},[u,f,p,y,x,_,r]);return b==null?null:T.createElement(Ls.Provider,{value:h},T.createElement(cu.Provider,{children:t,value:b}))}function _A(s){let{children:e,location:t}=s;return lA(cf(e),t)}new Promise(()=>{});function cf(s,e){e===void 0&&(e=[]);let t=[];return T.Children.forEach(s,(n,r)=>{if(!T.isValidElement(n))return;let o=[...e,r];if(n.type===T.Fragment){t.push.apply(t,cf(n.props.children,o));return}n.type!==Fn&&yt(!1),!n.props.index||!n.props.children||yt(!1);let l={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=cf(n.props.children,o)),t.push(l)}),t}function uf(){return uf=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},uf.apply(this,arguments)}function EA(s,e){if(s==null)return{};var t={},n=Object.keys(s),r,o;for(o=0;o<n.length;o++)r=n[o],!(e.indexOf(r)>=0)&&(t[r]=s[r]);return t}function AA(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function CA(s,e){return s.button===0&&(!e||e==="_self")&&!AA(s)}function df(s){return s===void 0&&(s=""),new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((e,t)=>{let n=s[t];return e.concat(Array.isArray(n)?n.map(r=>[t,r]):[[t,n]])},[]))}function TA(s,e){let t=df(s);return e&&e.forEach((n,r)=>{t.has(r)||e.getAll(r).forEach(o=>{t.append(r,o)})}),t}const kA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],PA="6";try{window.__reactRouterVersion=PA}catch{}const RA="startTransition",Ly=Wf[RA];function NA(s){let{basename:e,children:t,future:n,window:r}=s,o=T.useRef();o.current==null&&(o.current=DE({window:r,v5Compat:!0}));let l=o.current,[c,u]=T.useState({action:l.action,location:l.location}),{v7_startTransition:h}=n||{},f=T.useCallback(p=>{h&&Ly?Ly(()=>u(p)):u(p)},[u,h]);return T.useLayoutEffect(()=>l.listen(f),[l,f]),T.useEffect(()=>xA(n),[n]),T.createElement(SA,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:l,future:n})}const DA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",OA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Cn=T.forwardRef(function(e,t){let{onClick:n,relative:r,reloadDocument:o,replace:l,state:c,target:u,to:h,preventScrollReset:f,viewTransition:p}=e,y=EA(e,kA),{basename:x}=T.useContext(Ls),_,b=!1;if(typeof h=="string"&&OA.test(h)&&(_=h,DA))try{let C=new URL(window.location.href),k=h.startsWith("//")?new URL(C.protocol+h):new URL(h),N=Vf(k.pathname,x);k.origin===C.origin&&N!=null?h=N+k.search+k.hash:b=!0}catch{}let w=oA(h,{relative:r}),E=MA(h,{replace:l,state:c,target:u,preventScrollReset:f,relative:r,viewTransition:p});function A(C){n&&n(C),C.defaultPrevented||E(C)}return T.createElement("a",uf({},y,{href:_||w,onClick:b||o?n:A,ref:t,target:u}))});var Iy;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(Iy||(Iy={}));var Fy;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(Fy||(Fy={}));function MA(s,e){let{target:t,replace:n,state:r,preventScrollReset:o,relative:l,viewTransition:c}=e===void 0?{}:e,u=os(),h=fa(),f=hb(s,{relative:l});return T.useCallback(p=>{if(CA(p,t)){p.preventDefault();let y=n!==void 0?n:Qc(h)===Qc(f);u(s,{replace:y,state:r,preventScrollReset:o,relative:l,viewTransition:c})}},[h,u,f,n,r,t,s,o,l,c])}function LA(s){let e=T.useRef(df(s)),t=T.useRef(!1),n=fa(),r=T.useMemo(()=>TA(n.search,t.current?null:e.current),[n.search]),o=os(),l=T.useCallback((c,u)=>{const h=df(typeof c=="function"?c(r):c);t.current=!0,o("?"+h,u)},[o,r]);return[r,l]}var Te=(s=>(s.PICKED="picked",s.QA="qa",s.PRE_DELIVERY="pre-delivery",s.IN_DELIVERY="in-delivery",s.SHIPPING="shipping",s.DELIVERED="delivered",s.ISSUE="issue",s))(Te||{}),br=(s=>(s.WORK_AREA="work_area",s.DOCK="dock",s.SHIPPED="shipped",s))(br||{});const IA={work_area:"Work Area",dock:"At Dock",shipped:"Shipped to Carrier"},Kr={picked:"Picked",qa:"QA","pre-delivery":"Pre-Delivery","in-delivery":"In Delivery",shipping:"Shipping",delivered:"Delivered",issue:"Issue"};function gb(s,e){return function(){return s.apply(e,arguments)}}const{toString:FA}=Object.prototype,{getPrototypeOf:Gf}=Object,{iterator:uu,toStringTag:yb}=Symbol,du=(s=>e=>{const t=FA.call(e);return s[t]||(s[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),zn=s=>(s=s.toLowerCase(),e=>du(e)===s),hu=s=>e=>typeof e===s,{isArray:Hi}=Array,Ii=hu("undefined");function pa(s){return s!==null&&!Ii(s)&&s.constructor!==null&&!Ii(s.constructor)&&rn(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}const vb=zn("ArrayBuffer");function jA(s){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(s):e=s&&s.buffer&&vb(s.buffer),e}const BA=hu("string"),rn=hu("function"),bb=hu("number"),ma=s=>s!==null&&typeof s=="object",UA=s=>s===!0||s===!1,zc=s=>{if(du(s)!=="object")return!1;const e=Gf(s);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(yb in s)&&!(uu in s)},zA=s=>{if(!ma(s)||pa(s))return!1;try{return Object.keys(s).length===0&&Object.getPrototypeOf(s)===Object.prototype}catch{return!1}},HA=zn("Date"),WA=zn("File"),$A=zn("Blob"),VA=zn("FileList"),qA=s=>ma(s)&&rn(s.pipe),GA=s=>{let e;return s&&(typeof FormData=="function"&&s instanceof FormData||rn(s.append)&&((e=du(s))==="formdata"||e==="object"&&rn(s.toString)&&s.toString()==="[object FormData]"))},YA=zn("URLSearchParams"),[XA,KA,QA,JA]=["ReadableStream","Request","Response","Headers"].map(zn),ZA=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ga(s,e,{allOwnKeys:t=!1}={}){if(s===null||typeof s>"u")return;let n,r;if(typeof s!="object"&&(s=[s]),Hi(s))for(n=0,r=s.length;n<r;n++)e.call(null,s[n],n,s);else{if(pa(s))return;const o=t?Object.getOwnPropertyNames(s):Object.keys(s),l=o.length;let c;for(n=0;n<l;n++)c=o[n],e.call(null,s[c],c,s)}}function wb(s,e){if(pa(s))return null;e=e.toLowerCase();const t=Object.keys(s);let n=t.length,r;for(;n-- >0;)if(r=t[n],e===r.toLowerCase())return r;return null}const Es=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,xb=s=>!Ii(s)&&s!==Es;function hf(){const{caseless:s,skipUndefined:e}=xb(this)&&this||{},t={},n=(r,o)=>{const l=s&&wb(t,o)||o;zc(t[l])&&zc(r)?t[l]=hf(t[l],r):zc(r)?t[l]=hf({},r):Hi(r)?t[l]=r.slice():(!e||!Ii(r))&&(t[l]=r)};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&ga(arguments[r],n);return t}const eC=(s,e,t,{allOwnKeys:n}={})=>(ga(e,(r,o)=>{t&&rn(r)?s[o]=gb(r,t):s[o]=r},{allOwnKeys:n}),s),tC=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),nC=(s,e,t,n)=>{s.prototype=Object.create(e.prototype,n),s.prototype.constructor=s,Object.defineProperty(s,"super",{value:e.prototype}),t&&Object.assign(s.prototype,t)},rC=(s,e,t,n)=>{let r,o,l;const c={};if(e=e||{},s==null)return e;do{for(r=Object.getOwnPropertyNames(s),o=r.length;o-- >0;)l=r[o],(!n||n(l,s,e))&&!c[l]&&(e[l]=s[l],c[l]=!0);s=t!==!1&&Gf(s)}while(s&&(!t||t(s,e))&&s!==Object.prototype);return e},sC=(s,e,t)=>{s=String(s),(t===void 0||t>s.length)&&(t=s.length),t-=e.length;const n=s.indexOf(e,t);return n!==-1&&n===t},iC=s=>{if(!s)return null;if(Hi(s))return s;let e=s.length;if(!bb(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=s[e];return t},oC=(s=>e=>s&&e instanceof s)(typeof Uint8Array<"u"&&Gf(Uint8Array)),aC=(s,e)=>{const n=(s&&s[uu]).call(s);let r;for(;(r=n.next())&&!r.done;){const o=r.value;e.call(s,o[0],o[1])}},lC=(s,e)=>{let t;const n=[];for(;(t=s.exec(e))!==null;)n.push(t);return n},cC=zn("HTMLFormElement"),uC=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,r){return n.toUpperCase()+r}),jy=(({hasOwnProperty:s})=>(e,t)=>s.call(e,t))(Object.prototype),dC=zn("RegExp"),Sb=(s,e)=>{const t=Object.getOwnPropertyDescriptors(s),n={};ga(t,(r,o)=>{let l;(l=e(r,o,s))!==!1&&(n[o]=l||r)}),Object.defineProperties(s,n)},hC=s=>{Sb(s,(e,t)=>{if(rn(s)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=s[t];if(rn(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},fC=(s,e)=>{const t={},n=r=>{r.forEach(o=>{t[o]=!0})};return Hi(s)?n(s):n(String(s).split(e)),t},pC=()=>{},mC=(s,e)=>s!=null&&Number.isFinite(s=+s)?s:e;function gC(s){return!!(s&&rn(s.append)&&s[yb]==="FormData"&&s[uu])}const yC=s=>{const e=new Array(10),t=(n,r)=>{if(ma(n)){if(e.indexOf(n)>=0)return;if(pa(n))return n;if(!("toJSON"in n)){e[r]=n;const o=Hi(n)?[]:{};return ga(n,(l,c)=>{const u=t(l,r+1);!Ii(u)&&(o[c]=u)}),e[r]=void 0,o}}return n};return t(s,0)},vC=zn("AsyncFunction"),bC=s=>s&&(ma(s)||rn(s))&&rn(s.then)&&rn(s.catch),_b=((s,e)=>s?setImmediate:e?((t,n)=>(Es.addEventListener("message",({source:r,data:o})=>{r===Es&&o===t&&n.length&&n.shift()()},!1),r=>{n.push(r),Es.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",rn(Es.postMessage)),wC=typeof queueMicrotask<"u"?queueMicrotask.bind(Es):typeof process<"u"&&process.nextTick||_b,xC=s=>s!=null&&rn(s[uu]),$={isArray:Hi,isArrayBuffer:vb,isBuffer:pa,isFormData:GA,isArrayBufferView:jA,isString:BA,isNumber:bb,isBoolean:UA,isObject:ma,isPlainObject:zc,isEmptyObject:zA,isReadableStream:XA,isRequest:KA,isResponse:QA,isHeaders:JA,isUndefined:Ii,isDate:HA,isFile:WA,isBlob:$A,isRegExp:dC,isFunction:rn,isStream:qA,isURLSearchParams:YA,isTypedArray:oC,isFileList:VA,forEach:ga,merge:hf,extend:eC,trim:ZA,stripBOM:tC,inherits:nC,toFlatObject:rC,kindOf:du,kindOfTest:zn,endsWith:sC,toArray:iC,forEachEntry:aC,matchAll:lC,isHTMLForm:cC,hasOwnProperty:jy,hasOwnProp:jy,reduceDescriptors:Sb,freezeMethods:hC,toObjectSet:fC,toCamelCase:uC,noop:pC,toFiniteNumber:mC,findKey:wb,global:Es,isContextDefined:xb,isSpecCompliantForm:gC,toJSONObject:yC,isAsyncFn:vC,isThenable:bC,setImmediate:_b,asap:wC,isIterable:xC};function ke(s,e,t,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=s,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),r&&(this.response=r,this.status=r.status?r.status:null)}$.inherits(ke,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$.toJSONObject(this.config),code:this.code,status:this.status}}});const Eb=ke.prototype,Ab={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(s=>{Ab[s]={value:s}});Object.defineProperties(ke,Ab);Object.defineProperty(Eb,"isAxiosError",{value:!0});ke.from=(s,e,t,n,r,o)=>{const l=Object.create(Eb);$.toFlatObject(s,l,function(f){return f!==Error.prototype},h=>h!=="isAxiosError");const c=s&&s.message?s.message:"Error",u=e==null&&s?s.code:e;return ke.call(l,c,u,t,n,r),s&&l.cause==null&&Object.defineProperty(l,"cause",{value:s,configurable:!0}),l.name=s&&s.name||"Error",o&&Object.assign(l,o),l};const SC=null;function ff(s){return $.isPlainObject(s)||$.isArray(s)}function Cb(s){return $.endsWith(s,"[]")?s.slice(0,-2):s}function By(s,e,t){return s?s.concat(e).map(function(r,o){return r=Cb(r),!t&&o?"["+r+"]":r}).join(t?".":""):e}function _C(s){return $.isArray(s)&&!s.some(ff)}const EC=$.toFlatObject($,{},null,function(e){return/^is[A-Z]/.test(e)});function fu(s,e,t){if(!$.isObject(s))throw new TypeError("target must be an object");e=e||new FormData,t=$.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,w){return!$.isUndefined(w[b])});const n=t.metaTokens,r=t.visitor||f,o=t.dots,l=t.indexes,u=(t.Blob||typeof Blob<"u"&&Blob)&&$.isSpecCompliantForm(e);if(!$.isFunction(r))throw new TypeError("visitor must be a function");function h(_){if(_===null)return"";if($.isDate(_))return _.toISOString();if($.isBoolean(_))return _.toString();if(!u&&$.isBlob(_))throw new ke("Blob is not supported. Use a Buffer instead.");return $.isArrayBuffer(_)||$.isTypedArray(_)?u&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function f(_,b,w){let E=_;if(_&&!w&&typeof _=="object"){if($.endsWith(b,"{}"))b=n?b:b.slice(0,-2),_=JSON.stringify(_);else if($.isArray(_)&&_C(_)||($.isFileList(_)||$.endsWith(b,"[]"))&&(E=$.toArray(_)))return b=Cb(b),E.forEach(function(C,k){!($.isUndefined(C)||C===null)&&e.append(l===!0?By([b],k,o):l===null?b:b+"[]",h(C))}),!1}return ff(_)?!0:(e.append(By(w,b,o),h(_)),!1)}const p=[],y=Object.assign(EC,{defaultVisitor:f,convertValue:h,isVisitable:ff});function x(_,b){if(!$.isUndefined(_)){if(p.indexOf(_)!==-1)throw Error("Circular reference detected in "+b.join("."));p.push(_),$.forEach(_,function(E,A){(!($.isUndefined(E)||E===null)&&r.call(e,E,$.isString(A)?A.trim():A,b,y))===!0&&x(E,b?b.concat(A):[A])}),p.pop()}}if(!$.isObject(s))throw new TypeError("data must be an object");return x(s),e}function Uy(s){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Yf(s,e){this._pairs=[],s&&fu(s,this,e)}const Tb=Yf.prototype;Tb.append=function(e,t){this._pairs.push([e,t])};Tb.toString=function(e){const t=e?function(n){return e.call(this,n,Uy)}:Uy;return this._pairs.map(function(r){return t(r[0])+"="+t(r[1])},"").join("&")};function AC(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function kb(s,e,t){if(!e)return s;const n=t&&t.encode||AC;$.isFunction(t)&&(t={serialize:t});const r=t&&t.serialize;let o;if(r?o=r(e,t):o=$.isURLSearchParams(e)?e.toString():new Yf(e,t).toString(n),o){const l=s.indexOf("#");l!==-1&&(s=s.slice(0,l)),s+=(s.indexOf("?")===-1?"?":"&")+o}return s}class zy{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){$.forEach(this.handlers,function(n){n!==null&&e(n)})}}const Pb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},CC=typeof URLSearchParams<"u"?URLSearchParams:Yf,TC=typeof FormData<"u"?FormData:null,kC=typeof Blob<"u"?Blob:null,PC={isBrowser:!0,classes:{URLSearchParams:CC,FormData:TC,Blob:kC},protocols:["http","https","file","blob","url","data"]},Xf=typeof window<"u"&&typeof document<"u",pf=typeof navigator=="object"&&navigator||void 0,RC=Xf&&(!pf||["ReactNative","NativeScript","NS"].indexOf(pf.product)<0),NC=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",DC=Xf&&window.location.href||"http://localhost",OC=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Xf,hasStandardBrowserEnv:RC,hasStandardBrowserWebWorkerEnv:NC,navigator:pf,origin:DC},Symbol.toStringTag,{value:"Module"})),jt={...OC,...PC};function MC(s,e){return fu(s,new jt.classes.URLSearchParams,{visitor:function(t,n,r,o){return jt.isNode&&$.isBuffer(t)?(this.append(n,t.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...e})}function LC(s){return $.matchAll(/\w+|\[(\w*)]/g,s).map(e=>e[0]==="[]"?"":e[1]||e[0])}function IC(s){const e={},t=Object.keys(s);let n;const r=t.length;let o;for(n=0;n<r;n++)o=t[n],e[o]=s[o];return e}function Rb(s){function e(t,n,r,o){let l=t[o++];if(l==="__proto__")return!0;const c=Number.isFinite(+l),u=o>=t.length;return l=!l&&$.isArray(r)?r.length:l,u?($.hasOwnProp(r,l)?r[l]=[r[l],n]:r[l]=n,!c):((!r[l]||!$.isObject(r[l]))&&(r[l]=[]),e(t,n,r[l],o)&&$.isArray(r[l])&&(r[l]=IC(r[l])),!c)}if($.isFormData(s)&&$.isFunction(s.entries)){const t={};return $.forEachEntry(s,(n,r)=>{e(LC(n),r,t,0)}),t}return null}function FC(s,e,t){if($.isString(s))try{return(e||JSON.parse)(s),$.trim(s)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(s)}const ya={transitional:Pb,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,o=$.isObject(e);if(o&&$.isHTMLForm(e)&&(e=new FormData(e)),$.isFormData(e))return r?JSON.stringify(Rb(e)):e;if($.isArrayBuffer(e)||$.isBuffer(e)||$.isStream(e)||$.isFile(e)||$.isBlob(e)||$.isReadableStream(e))return e;if($.isArrayBufferView(e))return e.buffer;if($.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return MC(e,this.formSerializer).toString();if((c=$.isFileList(e))||n.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return fu(c?{"files[]":e}:e,u&&new u,this.formSerializer)}}return o||r?(t.setContentType("application/json",!1),FC(e)):e}],transformResponse:[function(e){const t=this.transitional||ya.transitional,n=t&&t.forcedJSONParsing,r=this.responseType==="json";if($.isResponse(e)||$.isReadableStream(e))return e;if(e&&$.isString(e)&&(n&&!this.responseType||r)){const l=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e,this.parseReviver)}catch(c){if(l)throw c.name==="SyntaxError"?ke.from(c,ke.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:jt.classes.FormData,Blob:jt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$.forEach(["delete","get","head","post","put","patch"],s=>{ya.headers[s]={}});const jC=$.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),BC=s=>{const e={};let t,n,r;return s&&s.split(`
`).forEach(function(l){r=l.indexOf(":"),t=l.substring(0,r).trim().toLowerCase(),n=l.substring(r+1).trim(),!(!t||e[t]&&jC[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e},Hy=Symbol("internals");function Lo(s){return s&&String(s).trim().toLowerCase()}function Hc(s){return s===!1||s==null?s:$.isArray(s)?s.map(Hc):String(s)}function UC(s){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(s);)e[n[1]]=n[2];return e}const zC=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function Th(s,e,t,n,r){if($.isFunction(n))return n.call(this,e,t);if(r&&(e=t),!!$.isString(e)){if($.isString(n))return e.indexOf(n)!==-1;if($.isRegExp(n))return n.test(e)}}function HC(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function WC(s,e){const t=$.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(s,n+t,{value:function(r,o,l){return this[n].call(this,e,r,o,l)},configurable:!0})})}let sn=class{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function o(c,u,h){const f=Lo(u);if(!f)throw new Error("header name must be a non-empty string");const p=$.findKey(r,f);(!p||r[p]===void 0||h===!0||h===void 0&&r[p]!==!1)&&(r[p||u]=Hc(c))}const l=(c,u)=>$.forEach(c,(h,f)=>o(h,f,u));if($.isPlainObject(e)||e instanceof this.constructor)l(e,t);else if($.isString(e)&&(e=e.trim())&&!zC(e))l(BC(e),t);else if($.isObject(e)&&$.isIterable(e)){let c={},u,h;for(const f of e){if(!$.isArray(f))throw TypeError("Object iterator must return a key-value pair");c[h=f[0]]=(u=c[h])?$.isArray(u)?[...u,f[1]]:[u,f[1]]:f[1]}l(c,t)}else e!=null&&o(t,e,n);return this}get(e,t){if(e=Lo(e),e){const n=$.findKey(this,e);if(n){const r=this[n];if(!t)return r;if(t===!0)return UC(r);if($.isFunction(t))return t.call(this,r,n);if($.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Lo(e),e){const n=$.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||Th(this,this[n],n,t)))}return!1}delete(e,t){const n=this;let r=!1;function o(l){if(l=Lo(l),l){const c=$.findKey(n,l);c&&(!t||Th(n,n[c],c,t))&&(delete n[c],r=!0)}}return $.isArray(e)?e.forEach(o):o(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const o=t[n];(!e||Th(this,this[o],o,e,!0))&&(delete this[o],r=!0)}return r}normalize(e){const t=this,n={};return $.forEach(this,(r,o)=>{const l=$.findKey(n,o);if(l){t[l]=Hc(r),delete t[o];return}const c=e?HC(o):String(o).trim();c!==o&&delete t[o],t[c]=Hc(r),n[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return $.forEach(this,(n,r)=>{n!=null&&n!==!1&&(t[r]=e&&$.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(r=>n.set(r)),n}static accessor(e){const n=(this[Hy]=this[Hy]={accessors:{}}).accessors,r=this.prototype;function o(l){const c=Lo(l);n[c]||(WC(r,l),n[c]=!0)}return $.isArray(e)?e.forEach(o):o(e),this}};sn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);$.reduceDescriptors(sn.prototype,({value:s},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>s,set(n){this[t]=n}}});$.freezeMethods(sn);function kh(s,e){const t=this||ya,n=e||t,r=sn.from(n.headers);let o=n.data;return $.forEach(s,function(c){o=c.call(t,o,r.normalize(),e?e.status:void 0)}),r.normalize(),o}function Nb(s){return!!(s&&s.__CANCEL__)}function Wi(s,e,t){ke.call(this,s??"canceled",ke.ERR_CANCELED,e,t),this.name="CanceledError"}$.inherits(Wi,ke,{__CANCEL__:!0});function Db(s,e,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?s(t):e(new ke("Request failed with status code "+t.status,[ke.ERR_BAD_REQUEST,ke.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function $C(s){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return e&&e[1]||""}function VC(s,e){s=s||10;const t=new Array(s),n=new Array(s);let r=0,o=0,l;return e=e!==void 0?e:1e3,function(u){const h=Date.now(),f=n[o];l||(l=h),t[r]=u,n[r]=h;let p=o,y=0;for(;p!==r;)y+=t[p++],p=p%s;if(r=(r+1)%s,r===o&&(o=(o+1)%s),h-l<e)return;const x=f&&h-f;return x?Math.round(y*1e3/x):void 0}}function qC(s,e){let t=0,n=1e3/e,r,o;const l=(h,f=Date.now())=>{t=f,r=null,o&&(clearTimeout(o),o=null),s(...h)};return[(...h)=>{const f=Date.now(),p=f-t;p>=n?l(h,f):(r=h,o||(o=setTimeout(()=>{o=null,l(r)},n-p)))},()=>r&&l(r)]}const Jc=(s,e,t=3)=>{let n=0;const r=VC(50,250);return qC(o=>{const l=o.loaded,c=o.lengthComputable?o.total:void 0,u=l-n,h=r(u),f=l<=c;n=l;const p={loaded:l,total:c,progress:c?l/c:void 0,bytes:u,rate:h||void 0,estimated:h&&c&&f?(c-l)/h:void 0,event:o,lengthComputable:c!=null,[e?"download":"upload"]:!0};s(p)},t)},Wy=(s,e)=>{const t=s!=null;return[n=>e[0]({lengthComputable:t,total:s,loaded:n}),e[1]]},$y=s=>(...e)=>$.asap(()=>s(...e)),GC=jt.hasStandardBrowserEnv?((s,e)=>t=>(t=new URL(t,jt.origin),s.protocol===t.protocol&&s.host===t.host&&(e||s.port===t.port)))(new URL(jt.origin),jt.navigator&&/(msie|trident)/i.test(jt.navigator.userAgent)):()=>!0,YC=jt.hasStandardBrowserEnv?{write(s,e,t,n,r,o,l){if(typeof document>"u")return;const c=[`${s}=${encodeURIComponent(e)}`];$.isNumber(t)&&c.push(`expires=${new Date(t).toUTCString()}`),$.isString(n)&&c.push(`path=${n}`),$.isString(r)&&c.push(`domain=${r}`),o===!0&&c.push("secure"),$.isString(l)&&c.push(`SameSite=${l}`),document.cookie=c.join("; ")},read(s){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+s+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(s){this.write(s,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function XC(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function KC(s,e){return e?s.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):s}function Ob(s,e,t){let n=!XC(e);return s&&(n||t==!1)?KC(s,e):e}const Vy=s=>s instanceof sn?{...s}:s;function Rs(s,e){e=e||{};const t={};function n(h,f,p,y){return $.isPlainObject(h)&&$.isPlainObject(f)?$.merge.call({caseless:y},h,f):$.isPlainObject(f)?$.merge({},f):$.isArray(f)?f.slice():f}function r(h,f,p,y){if($.isUndefined(f)){if(!$.isUndefined(h))return n(void 0,h,p,y)}else return n(h,f,p,y)}function o(h,f){if(!$.isUndefined(f))return n(void 0,f)}function l(h,f){if($.isUndefined(f)){if(!$.isUndefined(h))return n(void 0,h)}else return n(void 0,f)}function c(h,f,p){if(p in e)return n(h,f);if(p in s)return n(void 0,h)}const u={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:c,headers:(h,f,p)=>r(Vy(h),Vy(f),p,!0)};return $.forEach(Object.keys({...s,...e}),function(f){const p=u[f]||r,y=p(s[f],e[f],f);$.isUndefined(y)&&p!==c||(t[f]=y)}),t}const Mb=s=>{const e=Rs({},s);let{data:t,withXSRFToken:n,xsrfHeaderName:r,xsrfCookieName:o,headers:l,auth:c}=e;if(e.headers=l=sn.from(l),e.url=kb(Ob(e.baseURL,e.url,e.allowAbsoluteUrls),s.params,s.paramsSerializer),c&&l.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),$.isFormData(t)){if(jt.hasStandardBrowserEnv||jt.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if($.isFunction(t.getHeaders)){const u=t.getHeaders(),h=["content-type","content-length"];Object.entries(u).forEach(([f,p])=>{h.includes(f.toLowerCase())&&l.set(f,p)})}}if(jt.hasStandardBrowserEnv&&(n&&$.isFunction(n)&&(n=n(e)),n||n!==!1&&GC(e.url))){const u=r&&o&&YC.read(o);u&&l.set(r,u)}return e},QC=typeof XMLHttpRequest<"u",JC=QC&&function(s){return new Promise(function(t,n){const r=Mb(s);let o=r.data;const l=sn.from(r.headers).normalize();let{responseType:c,onUploadProgress:u,onDownloadProgress:h}=r,f,p,y,x,_;function b(){x&&x(),_&&_(),r.cancelToken&&r.cancelToken.unsubscribe(f),r.signal&&r.signal.removeEventListener("abort",f)}let w=new XMLHttpRequest;w.open(r.method.toUpperCase(),r.url,!0),w.timeout=r.timeout;function E(){if(!w)return;const C=sn.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),N={data:!c||c==="text"||c==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:C,config:s,request:w};Db(function(D){t(D),b()},function(D){n(D),b()},N),w=null}"onloadend"in w?w.onloadend=E:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(E)},w.onabort=function(){w&&(n(new ke("Request aborted",ke.ECONNABORTED,s,w)),w=null)},w.onerror=function(k){const N=k&&k.message?k.message:"Network Error",R=new ke(N,ke.ERR_NETWORK,s,w);R.event=k||null,n(R),w=null},w.ontimeout=function(){let k=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const N=r.transitional||Pb;r.timeoutErrorMessage&&(k=r.timeoutErrorMessage),n(new ke(k,N.clarifyTimeoutError?ke.ETIMEDOUT:ke.ECONNABORTED,s,w)),w=null},o===void 0&&l.setContentType(null),"setRequestHeader"in w&&$.forEach(l.toJSON(),function(k,N){w.setRequestHeader(N,k)}),$.isUndefined(r.withCredentials)||(w.withCredentials=!!r.withCredentials),c&&c!=="json"&&(w.responseType=r.responseType),h&&([y,_]=Jc(h,!0),w.addEventListener("progress",y)),u&&w.upload&&([p,x]=Jc(u),w.upload.addEventListener("progress",p),w.upload.addEventListener("loadend",x)),(r.cancelToken||r.signal)&&(f=C=>{w&&(n(!C||C.type?new Wi(null,s,w):C),w.abort(),w=null)},r.cancelToken&&r.cancelToken.subscribe(f),r.signal&&(r.signal.aborted?f():r.signal.addEventListener("abort",f)));const A=$C(r.url);if(A&&jt.protocols.indexOf(A)===-1){n(new ke("Unsupported protocol "+A+":",ke.ERR_BAD_REQUEST,s));return}w.send(o||null)})},ZC=(s,e)=>{const{length:t}=s=s?s.filter(Boolean):[];if(e||t){let n=new AbortController,r;const o=function(h){if(!r){r=!0,c();const f=h instanceof Error?h:this.reason;n.abort(f instanceof ke?f:new Wi(f instanceof Error?f.message:f))}};let l=e&&setTimeout(()=>{l=null,o(new ke(`timeout ${e} of ms exceeded`,ke.ETIMEDOUT))},e);const c=()=>{s&&(l&&clearTimeout(l),l=null,s.forEach(h=>{h.unsubscribe?h.unsubscribe(o):h.removeEventListener("abort",o)}),s=null)};s.forEach(h=>h.addEventListener("abort",o));const{signal:u}=n;return u.unsubscribe=()=>$.asap(c),u}},e1=function*(s,e){let t=s.byteLength;if(t<e){yield s;return}let n=0,r;for(;n<t;)r=n+e,yield s.slice(n,r),n=r},t1=async function*(s,e){for await(const t of n1(s))yield*e1(t,e)},n1=async function*(s){if(s[Symbol.asyncIterator]){yield*s;return}const e=s.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)break;yield n}}finally{await e.cancel()}},qy=(s,e,t,n)=>{const r=t1(s,e);let o=0,l,c=u=>{l||(l=!0,n&&n(u))};return new ReadableStream({async pull(u){try{const{done:h,value:f}=await r.next();if(h){c(),u.close();return}let p=f.byteLength;if(t){let y=o+=p;t(y)}u.enqueue(new Uint8Array(f))}catch(h){throw c(h),h}},cancel(u){return c(u),r.return()}},{highWaterMark:2})},Gy=64*1024,{isFunction:zl}=$,r1=(({Request:s,Response:e})=>({Request:s,Response:e}))($.global),{ReadableStream:Yy,TextEncoder:Xy}=$.global,Ky=(s,...e)=>{try{return!!s(...e)}catch{return!1}},s1=s=>{s=$.merge.call({skipUndefined:!0},r1,s);const{fetch:e,Request:t,Response:n}=s,r=e?zl(e):typeof fetch=="function",o=zl(t),l=zl(n);if(!r)return!1;const c=r&&zl(Yy),u=r&&(typeof Xy=="function"?(_=>b=>_.encode(b))(new Xy):async _=>new Uint8Array(await new t(_).arrayBuffer())),h=o&&c&&Ky(()=>{let _=!1;const b=new t(jt.origin,{body:new Yy,method:"POST",get duplex(){return _=!0,"half"}}).headers.has("Content-Type");return _&&!b}),f=l&&c&&Ky(()=>$.isReadableStream(new n("").body)),p={stream:f&&(_=>_.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(_=>{!p[_]&&(p[_]=(b,w)=>{let E=b&&b[_];if(E)return E.call(b);throw new ke(`Response type '${_}' is not supported`,ke.ERR_NOT_SUPPORT,w)})});const y=async _=>{if(_==null)return 0;if($.isBlob(_))return _.size;if($.isSpecCompliantForm(_))return(await new t(jt.origin,{method:"POST",body:_}).arrayBuffer()).byteLength;if($.isArrayBufferView(_)||$.isArrayBuffer(_))return _.byteLength;if($.isURLSearchParams(_)&&(_=_+""),$.isString(_))return(await u(_)).byteLength},x=async(_,b)=>{const w=$.toFiniteNumber(_.getContentLength());return w??y(b)};return async _=>{let{url:b,method:w,data:E,signal:A,cancelToken:C,timeout:k,onDownloadProgress:N,onUploadProgress:R,responseType:D,headers:j,withCredentials:z="same-origin",fetchOptions:q}=Mb(_),Y=e||fetch;D=D?(D+"").toLowerCase():"text";let ne=ZC([A,C&&C.toAbortSignal()],k),ie=null;const ee=ne&&ne.unsubscribe&&(()=>{ne.unsubscribe()});let ae;try{if(R&&h&&w!=="get"&&w!=="head"&&(ae=await x(j,E))!==0){let M=new t(b,{method:"POST",body:E,duplex:"half"}),W;if($.isFormData(E)&&(W=M.headers.get("content-type"))&&j.setContentType(W),M.body){const[oe,ce]=Wy(ae,Jc($y(R)));E=qy(M.body,Gy,oe,ce)}}$.isString(z)||(z=z?"include":"omit");const G=o&&"credentials"in t.prototype,X={...q,signal:ne,method:w.toUpperCase(),headers:j.normalize().toJSON(),body:E,duplex:"half",credentials:G?z:void 0};ie=o&&new t(b,X);let I=await(o?Y(ie,q):Y(b,X));const V=f&&(D==="stream"||D==="response");if(f&&(N||V&&ee)){const M={};["status","statusText","headers"].forEach(ve=>{M[ve]=I[ve]});const W=$.toFiniteNumber(I.headers.get("content-length")),[oe,ce]=N&&Wy(W,Jc($y(N),!0))||[];I=new n(qy(I.body,Gy,oe,()=>{ce&&ce(),ee&&ee()}),M)}D=D||"text";let Q=await p[$.findKey(p,D)||"text"](I,_);return!V&&ee&&ee(),await new Promise((M,W)=>{Db(M,W,{data:Q,headers:sn.from(I.headers),status:I.status,statusText:I.statusText,config:_,request:ie})})}catch(G){throw ee&&ee(),G&&G.name==="TypeError"&&/Load failed|fetch/i.test(G.message)?Object.assign(new ke("Network Error",ke.ERR_NETWORK,_,ie),{cause:G.cause||G}):ke.from(G,G&&G.code,_,ie)}}},i1=new Map,Lb=s=>{let e=s&&s.env||{};const{fetch:t,Request:n,Response:r}=e,o=[n,r,t];let l=o.length,c=l,u,h,f=i1;for(;c--;)u=o[c],h=f.get(u),h===void 0&&f.set(u,h=c?new Map:s1(e)),f=h;return h};Lb();const Kf={http:SC,xhr:JC,fetch:{get:Lb}};$.forEach(Kf,(s,e)=>{if(s){try{Object.defineProperty(s,"name",{value:e})}catch{}Object.defineProperty(s,"adapterName",{value:e})}});const Qy=s=>`- ${s}`,o1=s=>$.isFunction(s)||s===null||s===!1;function a1(s,e){s=$.isArray(s)?s:[s];const{length:t}=s;let n,r;const o={};for(let l=0;l<t;l++){n=s[l];let c;if(r=n,!o1(n)&&(r=Kf[(c=String(n)).toLowerCase()],r===void 0))throw new ke(`Unknown adapter '${c}'`);if(r&&($.isFunction(r)||(r=r.get(e))))break;o[c||"#"+l]=r}if(!r){const l=Object.entries(o).map(([u,h])=>`adapter ${u} `+(h===!1?"is not supported by the environment":"is not available in the build"));let c=t?l.length>1?`since :
`+l.map(Qy).join(`
`):" "+Qy(l[0]):"as no adapter specified";throw new ke("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return r}const Ib={getAdapter:a1,adapters:Kf};function Ph(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new Wi(null,s)}function Jy(s){return Ph(s),s.headers=sn.from(s.headers),s.data=kh.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),Ib.getAdapter(s.adapter||ya.adapter,s)(s).then(function(n){return Ph(s),n.data=kh.call(s,s.transformResponse,n),n.headers=sn.from(n.headers),n},function(n){return Nb(n)||(Ph(s),n&&n.response&&(n.response.data=kh.call(s,s.transformResponse,n.response),n.response.headers=sn.from(n.response.headers))),Promise.reject(n)})}const Fb="1.13.2",pu={};["object","boolean","number","function","string","symbol"].forEach((s,e)=>{pu[s]=function(n){return typeof n===s||"a"+(e<1?"n ":" ")+s}});const Zy={};pu.transitional=function(e,t,n){function r(o,l){return"[Axios v"+Fb+"] Transitional option '"+o+"'"+l+(n?". "+n:"")}return(o,l,c)=>{if(e===!1)throw new ke(r(l," has been removed"+(t?" in "+t:"")),ke.ERR_DEPRECATED);return t&&!Zy[l]&&(Zy[l]=!0,console.warn(r(l," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(o,l,c):!0}};pu.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function l1(s,e,t){if(typeof s!="object")throw new ke("options must be an object",ke.ERR_BAD_OPTION_VALUE);const n=Object.keys(s);let r=n.length;for(;r-- >0;){const o=n[r],l=e[o];if(l){const c=s[o],u=c===void 0||l(c,o,s);if(u!==!0)throw new ke("option "+o+" must be "+u,ke.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new ke("Unknown option "+o,ke.ERR_BAD_OPTION)}}const Wc={assertOptions:l1,validators:pu},Kn=Wc.validators;let Ps=class{constructor(e){this.defaults=e||{},this.interceptors={request:new zy,response:new zy}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const o=r.stack?r.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Rs(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:o}=t;n!==void 0&&Wc.assertOptions(n,{silentJSONParsing:Kn.transitional(Kn.boolean),forcedJSONParsing:Kn.transitional(Kn.boolean),clarifyTimeoutError:Kn.transitional(Kn.boolean)},!1),r!=null&&($.isFunction(r)?t.paramsSerializer={serialize:r}:Wc.assertOptions(r,{encode:Kn.function,serialize:Kn.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Wc.assertOptions(t,{baseUrl:Kn.spelling("baseURL"),withXsrfToken:Kn.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let l=o&&$.merge(o.common,o[t.method]);o&&$.forEach(["delete","get","head","post","put","patch","common"],_=>{delete o[_]}),t.headers=sn.concat(l,o);const c=[];let u=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(t)===!1||(u=u&&b.synchronous,c.unshift(b.fulfilled,b.rejected))});const h=[];this.interceptors.response.forEach(function(b){h.push(b.fulfilled,b.rejected)});let f,p=0,y;if(!u){const _=[Jy.bind(this),void 0];for(_.unshift(...c),_.push(...h),y=_.length,f=Promise.resolve(t);p<y;)f=f.then(_[p++],_[p++]);return f}y=c.length;let x=t;for(;p<y;){const _=c[p++],b=c[p++];try{x=_(x)}catch(w){b.call(this,w);break}}try{f=Jy.call(this,x)}catch(_){return Promise.reject(_)}for(p=0,y=h.length;p<y;)f=f.then(h[p++],h[p++]);return f}getUri(e){e=Rs(this.defaults,e);const t=Ob(e.baseURL,e.url,e.allowAbsoluteUrls);return kb(t,e.params,e.paramsSerializer)}};$.forEach(["delete","get","head","options"],function(e){Ps.prototype[e]=function(t,n){return this.request(Rs(n||{},{method:e,url:t,data:(n||{}).data}))}});$.forEach(["post","put","patch"],function(e){function t(n){return function(o,l,c){return this.request(Rs(c||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:l}))}}Ps.prototype[e]=t(),Ps.prototype[e+"Form"]=t(!0)});let c1=class jb{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(o){t=o});const n=this;this.promise.then(r=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](r);n._listeners=null}),this.promise.then=r=>{let o;const l=new Promise(c=>{n.subscribe(c),o=c}).then(r);return l.cancel=function(){n.unsubscribe(o)},l},e(function(o,l,c){n.reason||(n.reason=new Wi(o,l,c),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=n=>{e.abort(n)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new jb(function(r){e=r}),cancel:e}}};function u1(s){return function(t){return s.apply(null,t)}}function d1(s){return $.isObject(s)&&s.isAxiosError===!0}const mf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(mf).forEach(([s,e])=>{mf[e]=s});function Bb(s){const e=new Ps(s),t=gb(Ps.prototype.request,e);return $.extend(t,Ps.prototype,e,{allOwnKeys:!0}),$.extend(t,e,null,{allOwnKeys:!0}),t.create=function(r){return Bb(Rs(s,r))},t}const ft=Bb(ya);ft.Axios=Ps;ft.CanceledError=Wi;ft.CancelToken=c1;ft.isCancel=Nb;ft.VERSION=Fb;ft.toFormData=fu;ft.AxiosError=ke;ft.Cancel=ft.CanceledError;ft.all=function(e){return Promise.all(e)};ft.spread=u1;ft.isAxiosError=d1;ft.mergeConfig=Rs;ft.AxiosHeaders=sn;ft.formToJSON=s=>Rb($.isHTMLForm(s)?new FormData(s):s);ft.getAdapter=Ib.getAdapter;ft.HttpStatusCode=mf;ft.default=ft;const{Axios:lM,AxiosError:cM,CanceledError:uM,isCancel:dM,CancelToken:hM,VERSION:fM,all:pM,Cancel:mM,isAxiosError:gM,spread:yM,toFormData:vM,AxiosHeaders:bM,HttpStatusCode:wM,formToJSON:xM,getAdapter:SM,mergeConfig:_M}=ft,ze=ft.create({baseURL:"/api",headers:{"Content-Type":"application/json"}}),it={getOrders:async s=>(await ze.get("/orders",{params:s})).data,getOrder:async s=>(await ze.get(`/orders/${s}`)).data,updateOrderStatus:async(s,e,t)=>(await ze.patch(`/orders/${s}/status`,e,{params:t?{changed_by:t}:void 0})).data,bulkUpdateStatus:async s=>(await ze.post("/orders/bulk-transition",s)).data,getOrderAudit:async s=>(await ze.get(`/orders/${s}/audit`)).data,retryNotification:async s=>(await ze.post(`/orders/${s}/retry-notification`)).data,tagOrder:async(s,e)=>(await ze.post(`/orders/${s}/tag`,e)).data,generatePicklist:async(s,e)=>(await ze.post(`/orders/${s}/picklist`,e||{})).data,submitQa:async(s,e)=>(await ze.post(`/orders/${s}/qa`,e)).data,signOrder:async(s,e)=>(await ze.post(`/orders/${s}/sign`,e)).data,updateShippingWorkflow:async(s,e)=>(await ze.patch(`/orders/${s}/shipping-workflow`,e)).data,getShippingWorkflow:async s=>(await ze.get(`/orders/${s}/shipping-workflow`)).data};function Ub(s){var e,t,n="";if(typeof s=="string"||typeof s=="number")n+=s;else if(typeof s=="object")if(Array.isArray(s)){var r=s.length;for(e=0;e<r;e++)s[e]&&(t=Ub(s[e]))&&(n&&(n+=" "),n+=t)}else for(t in s)s[t]&&(n&&(n+=" "),n+=t);return n}function $i(){for(var s,e,t=0,n="",r=arguments.length;t<r;t++)(s=arguments[t])&&(e=Ub(s))&&(n&&(n+=" "),n+=e);return n}const ev=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,tv=$i,zb=(s,e)=>t=>{var n;if(e?.variants==null)return tv(s,t?.class,t?.className);const{variants:r,defaultVariants:o}=e,l=Object.keys(r).map(h=>{const f=t?.[h],p=o?.[h];if(f===null)return null;const y=ev(f)||ev(p);return r[h][y]}),c=t&&Object.entries(t).reduce((h,f)=>{let[p,y]=f;return y===void 0||(h[p]=y),h},{}),u=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((h,f)=>{let{class:p,className:y,...x}=f;return Object.entries(x).every(_=>{let[b,w]=_;return Array.isArray(w)?w.includes({...o,...c}[b]):{...o,...c}[b]===w})?[...h,p,y]:h},[]);return tv(s,l,u,t?.class,t?.className)},Qf="-",h1=s=>{const e=p1(s),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=s;return{getClassGroupId:l=>{const c=l.split(Qf);return c[0]===""&&c.length!==1&&c.shift(),Hb(c,e)||f1(l)},getConflictingClassGroupIds:(l,c)=>{const u=t[l]||[];return c&&n[l]?[...u,...n[l]]:u}}},Hb=(s,e)=>{if(s.length===0)return e.classGroupId;const t=s[0],n=e.nextPart.get(t),r=n?Hb(s.slice(1),n):void 0;if(r)return r;if(e.validators.length===0)return;const o=s.join(Qf);return e.validators.find(({validator:l})=>l(o))?.classGroupId},nv=/^\[(.+)\]$/,f1=s=>{if(nv.test(s)){const e=nv.exec(s)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},p1=s=>{const{theme:e,prefix:t}=s,n={nextPart:new Map,validators:[]};return g1(Object.entries(s.classGroups),t).forEach(([o,l])=>{gf(l,n,o,e)}),n},gf=(s,e,t,n)=>{s.forEach(r=>{if(typeof r=="string"){const o=r===""?e:rv(e,r);o.classGroupId=t;return}if(typeof r=="function"){if(m1(r)){gf(r(n),e,t,n);return}e.validators.push({validator:r,classGroupId:t});return}Object.entries(r).forEach(([o,l])=>{gf(l,rv(e,o),t,n)})})},rv=(s,e)=>{let t=s;return e.split(Qf).forEach(n=>{t.nextPart.has(n)||t.nextPart.set(n,{nextPart:new Map,validators:[]}),t=t.nextPart.get(n)}),t},m1=s=>s.isThemeGetter,g1=(s,e)=>e?s.map(([t,n])=>{const r=n.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([l,c])=>[e+l,c])):o);return[t,r]}):s,y1=s=>{if(s<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,n=new Map;const r=(o,l)=>{t.set(o,l),e++,e>s&&(e=0,n=t,t=new Map)};return{get(o){let l=t.get(o);if(l!==void 0)return l;if((l=n.get(o))!==void 0)return r(o,l),l},set(o,l){t.has(o)?t.set(o,l):r(o,l)}}},Wb="!",v1=s=>{const{separator:e,experimentalParseClassName:t}=s,n=e.length===1,r=e[0],o=e.length,l=c=>{const u=[];let h=0,f=0,p;for(let w=0;w<c.length;w++){let E=c[w];if(h===0){if(E===r&&(n||c.slice(w,w+o)===e)){u.push(c.slice(f,w)),f=w+o;continue}if(E==="/"){p=w;continue}}E==="["?h++:E==="]"&&h--}const y=u.length===0?c:c.substring(f),x=y.startsWith(Wb),_=x?y.substring(1):y,b=p&&p>f?p-f:void 0;return{modifiers:u,hasImportantModifier:x,baseClassName:_,maybePostfixModifierPosition:b}};return t?c=>t({className:c,parseClassName:l}):l},b1=s=>{if(s.length<=1)return s;const e=[];let t=[];return s.forEach(n=>{n[0]==="["?(e.push(...t.sort(),n),t=[]):t.push(n)}),e.push(...t.sort()),e},w1=s=>({cache:y1(s.cacheSize),parseClassName:v1(s),...h1(s)}),x1=/\s+/,S1=(s,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:r}=e,o=[],l=s.trim().split(x1);let c="";for(let u=l.length-1;u>=0;u-=1){const h=l[u],{modifiers:f,hasImportantModifier:p,baseClassName:y,maybePostfixModifierPosition:x}=t(h);let _=!!x,b=n(_?y.substring(0,x):y);if(!b){if(!_){c=h+(c.length>0?" "+c:c);continue}if(b=n(y),!b){c=h+(c.length>0?" "+c:c);continue}_=!1}const w=b1(f).join(":"),E=p?w+Wb:w,A=E+b;if(o.includes(A))continue;o.push(A);const C=r(b,_);for(let k=0;k<C.length;++k){const N=C[k];o.push(E+N)}c=h+(c.length>0?" "+c:c)}return c};function _1(){let s=0,e,t,n="";for(;s<arguments.length;)(e=arguments[s++])&&(t=$b(e))&&(n&&(n+=" "),n+=t);return n}const $b=s=>{if(typeof s=="string")return s;let e,t="";for(let n=0;n<s.length;n++)s[n]&&(e=$b(s[n]))&&(t&&(t+=" "),t+=e);return t};function E1(s,...e){let t,n,r,o=l;function l(u){const h=e.reduce((f,p)=>p(f),s());return t=w1(h),n=t.cache.get,r=t.cache.set,o=c,c(u)}function c(u){const h=n(u);if(h)return h;const f=S1(u,t);return r(u,f),f}return function(){return o(_1.apply(null,arguments))}}const Ye=s=>{const e=t=>t[s]||[];return e.isThemeGetter=!0,e},Vb=/^\[(?:([a-z-]+):)?(.+)\]$/i,A1=/^\d+\/\d+$/,C1=new Set(["px","full","screen"]),T1=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,k1=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,P1=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,R1=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,N1=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,vr=s=>_i(s)||C1.has(s)||A1.test(s),Gr=s=>Vi(s,"length",B1),_i=s=>!!s&&!Number.isNaN(Number(s)),Rh=s=>Vi(s,"number",_i),Io=s=>!!s&&Number.isInteger(Number(s)),D1=s=>s.endsWith("%")&&_i(s.slice(0,-1)),Pe=s=>Vb.test(s),Yr=s=>T1.test(s),O1=new Set(["length","size","percentage"]),M1=s=>Vi(s,O1,qb),L1=s=>Vi(s,"position",qb),I1=new Set(["image","url"]),F1=s=>Vi(s,I1,z1),j1=s=>Vi(s,"",U1),Fo=()=>!0,Vi=(s,e,t)=>{const n=Vb.exec(s);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):t(n[2]):!1},B1=s=>k1.test(s)&&!P1.test(s),qb=()=>!1,U1=s=>R1.test(s),z1=s=>N1.test(s),H1=()=>{const s=Ye("colors"),e=Ye("spacing"),t=Ye("blur"),n=Ye("brightness"),r=Ye("borderColor"),o=Ye("borderRadius"),l=Ye("borderSpacing"),c=Ye("borderWidth"),u=Ye("contrast"),h=Ye("grayscale"),f=Ye("hueRotate"),p=Ye("invert"),y=Ye("gap"),x=Ye("gradientColorStops"),_=Ye("gradientColorStopPositions"),b=Ye("inset"),w=Ye("margin"),E=Ye("opacity"),A=Ye("padding"),C=Ye("saturate"),k=Ye("scale"),N=Ye("sepia"),R=Ye("skew"),D=Ye("space"),j=Ye("translate"),z=()=>["auto","contain","none"],q=()=>["auto","hidden","clip","visible","scroll"],Y=()=>["auto",Pe,e],ne=()=>[Pe,e],ie=()=>["",vr,Gr],ee=()=>["auto",_i,Pe],ae=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],G=()=>["solid","dashed","dotted","double","none"],X=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],I=()=>["start","end","center","between","around","evenly","stretch"],V=()=>["","0",Pe],Q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],M=()=>[_i,Pe];return{cacheSize:500,separator:":",theme:{colors:[Fo],spacing:[vr,Gr],blur:["none","",Yr,Pe],brightness:M(),borderColor:[s],borderRadius:["none","","full",Yr,Pe],borderSpacing:ne(),borderWidth:ie(),contrast:M(),grayscale:V(),hueRotate:M(),invert:V(),gap:ne(),gradientColorStops:[s],gradientColorStopPositions:[D1,Gr],inset:Y(),margin:Y(),opacity:M(),padding:ne(),saturate:M(),scale:M(),sepia:V(),skew:M(),space:ne(),translate:ne()},classGroups:{aspect:[{aspect:["auto","square","video",Pe]}],container:["container"],columns:[{columns:[Yr]}],"break-after":[{"break-after":Q()}],"break-before":[{"break-before":Q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ae(),Pe]}],overflow:[{overflow:q()}],"overflow-x":[{"overflow-x":q()}],"overflow-y":[{"overflow-y":q()}],overscroll:[{overscroll:z()}],"overscroll-x":[{"overscroll-x":z()}],"overscroll-y":[{"overscroll-y":z()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[b]}],"inset-x":[{"inset-x":[b]}],"inset-y":[{"inset-y":[b]}],start:[{start:[b]}],end:[{end:[b]}],top:[{top:[b]}],right:[{right:[b]}],bottom:[{bottom:[b]}],left:[{left:[b]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Io,Pe]}],basis:[{basis:Y()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Pe]}],grow:[{grow:V()}],shrink:[{shrink:V()}],order:[{order:["first","last","none",Io,Pe]}],"grid-cols":[{"grid-cols":[Fo]}],"col-start-end":[{col:["auto",{span:["full",Io,Pe]},Pe]}],"col-start":[{"col-start":ee()}],"col-end":[{"col-end":ee()}],"grid-rows":[{"grid-rows":[Fo]}],"row-start-end":[{row:["auto",{span:[Io,Pe]},Pe]}],"row-start":[{"row-start":ee()}],"row-end":[{"row-end":ee()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Pe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Pe]}],gap:[{gap:[y]}],"gap-x":[{"gap-x":[y]}],"gap-y":[{"gap-y":[y]}],"justify-content":[{justify:["normal",...I()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...I(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...I(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[A]}],px:[{px:[A]}],py:[{py:[A]}],ps:[{ps:[A]}],pe:[{pe:[A]}],pt:[{pt:[A]}],pr:[{pr:[A]}],pb:[{pb:[A]}],pl:[{pl:[A]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[D]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[D]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Pe,e]}],"min-w":[{"min-w":[Pe,e,"min","max","fit"]}],"max-w":[{"max-w":[Pe,e,"none","full","min","max","fit","prose",{screen:[Yr]},Yr]}],h:[{h:[Pe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Pe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Pe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Pe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Yr,Gr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Rh]}],"font-family":[{font:[Fo]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Pe]}],"line-clamp":[{"line-clamp":["none",_i,Rh]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",vr,Pe]}],"list-image":[{"list-image":["none",Pe]}],"list-style-type":[{list:["none","disc","decimal",Pe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[s]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[s]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...G(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",vr,Gr]}],"underline-offset":[{"underline-offset":["auto",vr,Pe]}],"text-decoration-color":[{decoration:[s]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:ne()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Pe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Pe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ae(),L1]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",M1]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},F1]}],"bg-color":[{bg:[s]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...G(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:G()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-s":[{"border-s":[r]}],"border-color-e":[{"border-e":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["",...G()]}],"outline-offset":[{"outline-offset":[vr,Pe]}],"outline-w":[{outline:[vr,Gr]}],"outline-color":[{outline:[s]}],"ring-w":[{ring:ie()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[s]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[vr,Gr]}],"ring-offset-color":[{"ring-offset":[s]}],shadow:[{shadow:["","inner","none",Yr,j1]}],"shadow-color":[{shadow:[Fo]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...X(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":X()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[n]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",Yr,Pe]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[p]}],saturate:[{saturate:[C]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Pe]}],duration:[{duration:M()}],ease:[{ease:["linear","in","out","in-out",Pe]}],delay:[{delay:M()}],animate:[{animate:["none","spin","ping","pulse","bounce",Pe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[Io,Pe]}],"translate-x":[{"translate-x":[j]}],"translate-y":[{"translate-y":[j]}],"skew-x":[{"skew-x":[R]}],"skew-y":[{"skew-y":[R]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Pe]}],accent:[{accent:["auto",s]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Pe]}],"caret-color":[{caret:[s]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":ne()}],"scroll-mx":[{"scroll-mx":ne()}],"scroll-my":[{"scroll-my":ne()}],"scroll-ms":[{"scroll-ms":ne()}],"scroll-me":[{"scroll-me":ne()}],"scroll-mt":[{"scroll-mt":ne()}],"scroll-mr":[{"scroll-mr":ne()}],"scroll-mb":[{"scroll-mb":ne()}],"scroll-ml":[{"scroll-ml":ne()}],"scroll-p":[{"scroll-p":ne()}],"scroll-px":[{"scroll-px":ne()}],"scroll-py":[{"scroll-py":ne()}],"scroll-ps":[{"scroll-ps":ne()}],"scroll-pe":[{"scroll-pe":ne()}],"scroll-pt":[{"scroll-pt":ne()}],"scroll-pr":[{"scroll-pr":ne()}],"scroll-pb":[{"scroll-pb":ne()}],"scroll-pl":[{"scroll-pl":ne()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Pe]}],fill:[{fill:[s,"none"]}],"stroke-w":[{stroke:[vr,Gr,Rh]}],stroke:[{stroke:[s,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},W1=E1(H1);function Xe(...s){return W1($i(s))}const $1=zb("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function Zc({className:s,variant:e,...t}){return g.jsx("div",{className:Xe($1({variant:e}),s),...t})}const V1={[Te.PICKED]:"secondary",[Te.QA]:"default",[Te.PRE_DELIVERY]:"default",[Te.IN_DELIVERY]:"warning",[Te.SHIPPING]:"outline",[Te.DELIVERED]:"success",[Te.ISSUE]:"destructive"};function Gb({status:s}){return g.jsx(Zc,{variant:V1[s],children:Kr[s]})}var Hl={exports:{}},Nh={exports:{}},sv;function at(){return sv||(sv=1,(function(s){function e(t){return t&&t.__esModule?t:{default:t}}s.exports=e,s.exports.__esModule=!0,s.exports.default=s.exports})(Nh)),Nh.exports}var Wl={exports:{}},$l={exports:{}},Dh={exports:{}},iv;function Yb(){return iv||(iv=1,(function(s){function e(t){"@babel/helpers - typeof";return s.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},s.exports.__esModule=!0,s.exports.default=s.exports,e(t)}s.exports=e,s.exports.__esModule=!0,s.exports.default=s.exports})(Dh)),Dh.exports}var Vl={exports:{}},ov;function Vt(){return ov||(ov=1,(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(n,r){if(r.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+r.length+" present")}s.exports=e.default})(Vl,Vl.exports)),Vl.exports}var av;function q1(){return av||(av=1,(function(s,e){var t=at().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var n=t(Yb()),r=t(Vt());function o(l){return(0,r.default)(1,arguments),l instanceof Date||(0,n.default)(l)==="object"&&Object.prototype.toString.call(l)==="[object Date]"}s.exports=e.default})($l,$l.exports)),$l.exports}var ql={exports:{}},lv;function lr(){return lv||(lv=1,(function(s,e){var t=at().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var n=t(Yb()),r=t(Vt());function o(l){(0,r.default)(1,arguments);var c=Object.prototype.toString.call(l);return l instanceof Date||(0,n.default)(l)==="object"&&c==="[object Date]"?new Date(l.getTime()):typeof l=="number"||c==="[object Number]"?new Date(l):((typeof l=="string"||c==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}s.exports=e.default})(ql,ql.exports)),ql.exports}var cv;function G1(){return cv||(cv=1,(function(s,e){var t=at().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var n=t(q1()),r=t(lr()),o=t(Vt());function l(c){if((0,o.default)(1,arguments),!(0,n.default)(c)&&typeof c!="number")return!1;var u=(0,r.default)(c);return!isNaN(Number(u))}s.exports=e.default})(Wl,Wl.exports)),Wl.exports}var Gl={exports:{}},Yl={exports:{}},Xl={exports:{}},uv;function Is(){return uv||(uv=1,(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(n){if(n===null||n===!0||n===!1)return NaN;var r=Number(n);return isNaN(r)?r:r<0?Math.ceil(r):Math.floor(r)}s.exports=e.default})(Xl,Xl.exports)),Xl.exports}var dv;function Y1(){return dv||(dv=1,(function(s,e){var t=at().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var n=t(Is()),r=t(lr()),o=t(Vt());function l(c,u){(0,o.default)(2,arguments);var h=(0,r.default)(c).getTime(),f=(0,n.default)(u);return new Date(h+f)}s.exports=e.default})(Yl,Yl.exports)),Yl.exports}var hv;function X1(){return hv||(hv=1,(function(s,e){var t=at().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var n=t(Y1()),r=t(Vt()),o=t(Is());function l(c,u){(0,r.default)(2,arguments);var h=(0,o.default)(u);return(0,n.default)(c,-h)}s.exports=e.default})(Gl,Gl.exports)),Gl.exports}var Kl={exports:{}},Ql={exports:{}},fv;function K1(){return fv||(fv=1,(function(s,e){var t=at().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var n=t(lr()),r=t(Vt()),o=864e5;function l(c){(0,r.default)(1,arguments);var u=(0,n.default)(c),h=u.getTime();u.setUTCMonth(0,1),u.setUTCHours(0,0,0,0);var f=u.getTime(),p=h-f;return Math.floor(p/o)+1}s.exports=e.default})(Ql,Ql.exports)),Ql.exports}var Jl={exports:{}},Zl={exports:{}},pv;function Jf(){return pv||(pv=1,(function(s,e){var t=at().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var n=t(lr()),r=t(Vt());function o(l){(0,r.default)(1,arguments);var c=1,u=(0,n.default)(l),h=u.getUTCDay(),f=(h<c?7:0)+h-c;return u.setUTCDate(u.getUTCDate()-f),u.setUTCHours(0,0,0,0),u}s.exports=e.default})(Zl,Zl.exports)),Zl.exports}var ec={exports:{}},tc={exports:{}},mv;function Xb(){return mv||(mv=1,(function(s,e){var t=at().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var n=t(lr()),r=t(Vt()),o=t(Jf());function l(c){(0,r.default)(1,arguments);var u=(0,n.default)(c),h=u.getUTCFullYear(),f=new Date(0);f.setUTCFullYear(h+1,0,4),f.setUTCHours(0,0,0,0);var p=(0,o.default)(f),y=new Date(0);y.setUTCFullYear(h,0,4),y.setUTCHours(0,0,0,0);var x=(0,o.default)(y);return u.getTime()>=p.getTime()?h+1:u.getTime()>=x.getTime()?h:h-1}s.exports=e.default})(tc,tc.exports)),tc.exports}var gv;function Q1(){return gv||(gv=1,(function(s,e){var t=at().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var n=t(Xb()),r=t(Jf()),o=t(Vt());function l(c){(0,o.default)(1,arguments);var u=(0,n.default)(c),h=new Date(0);h.setUTCFullYear(u,0,4),h.setUTCHours(0,0,0,0);var f=(0,r.default)(h);return f}s.exports=e.default})(ec,ec.exports)),ec.exports}var yv;function J1(){return yv||(yv=1,(function(s,e){var t=at().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var n=t(lr()),r=t(Jf()),o=t(Q1()),l=t(Vt()),c=6048e5;function u(h){(0,l.default)(1,arguments);var f=(0,n.default)(h),p=(0,r.default)(f).getTime()-(0,o.default)(f).getTime();return Math.round(p/c)+1}s.exports=e.default})(Jl,Jl.exports)),Jl.exports}var nc={exports:{}},rc={exports:{}},jo={},vv;function mu(){if(vv)return jo;vv=1,Object.defineProperty(jo,"__esModule",{value:!0}),jo.getDefaultOptions=e,jo.setDefaultOptions=t;var s={};function e(){return s}function t(n){s=n}return jo}var bv;function Zf(){return bv||(bv=1,(function(s,e){var t=at().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var n=t(lr()),r=t(Vt()),o=t(Is()),l=mu();function c(u,h){var f,p,y,x,_,b,w,E;(0,r.default)(1,arguments);var A=(0,l.getDefaultOptions)(),C=(0,o.default)((f=(p=(y=(x=h?.weekStartsOn)!==null&&x!==void 0?x:h==null||(_=h.locale)===null||_===void 0||(b=_.options)===null||b===void 0?void 0:b.weekStartsOn)!==null&&y!==void 0?y:A.weekStartsOn)!==null&&p!==void 0?p:(w=A.locale)===null||w===void 0||(E=w.options)===null||E===void 0?void 0:E.weekStartsOn)!==null&&f!==void 0?f:0);if(!(C>=0&&C<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var k=(0,n.default)(u),N=k.getUTCDay(),R=(N<C?7:0)+N-C;return k.setUTCDate(k.getUTCDate()-R),k.setUTCHours(0,0,0,0),k}s.exports=e.default})(rc,rc.exports)),rc.exports}var sc={exports:{}},ic={exports:{}},wv;function Kb(){return wv||(wv=1,(function(s,e){var t=at().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var n=t(lr()),r=t(Vt()),o=t(Zf()),l=t(Is()),c=mu();function u(h,f){var p,y,x,_,b,w,E,A;(0,r.default)(1,arguments);var C=(0,n.default)(h),k=C.getUTCFullYear(),N=(0,c.getDefaultOptions)(),R=(0,l.default)((p=(y=(x=(_=f?.firstWeekContainsDate)!==null&&_!==void 0?_:f==null||(b=f.locale)===null||b===void 0||(w=b.options)===null||w===void 0?void 0:w.firstWeekContainsDate)!==null&&x!==void 0?x:N.firstWeekContainsDate)!==null&&y!==void 0?y:(E=N.locale)===null||E===void 0||(A=E.options)===null||A===void 0?void 0:A.firstWeekContainsDate)!==null&&p!==void 0?p:1);if(!(R>=1&&R<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var D=new Date(0);D.setUTCFullYear(k+1,0,R),D.setUTCHours(0,0,0,0);var j=(0,o.default)(D,f),z=new Date(0);z.setUTCFullYear(k,0,R),z.setUTCHours(0,0,0,0);var q=(0,o.default)(z,f);return C.getTime()>=j.getTime()?k+1:C.getTime()>=q.getTime()?k:k-1}s.exports=e.default})(ic,ic.exports)),ic.exports}var xv;function Z1(){return xv||(xv=1,(function(s,e){var t=at().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var n=t(Kb()),r=t(Vt()),o=t(Zf()),l=t(Is()),c=mu();function u(h,f){var p,y,x,_,b,w,E,A;(0,r.default)(1,arguments);var C=(0,c.getDefaultOptions)(),k=(0,l.default)((p=(y=(x=(_=f?.firstWeekContainsDate)!==null&&_!==void 0?_:f==null||(b=f.locale)===null||b===void 0||(w=b.options)===null||w===void 0?void 0:w.firstWeekContainsDate)!==null&&x!==void 0?x:C.firstWeekContainsDate)!==null&&y!==void 0?y:(E=C.locale)===null||E===void 0||(A=E.options)===null||A===void 0?void 0:A.firstWeekContainsDate)!==null&&p!==void 0?p:1),N=(0,n.default)(h,f),R=new Date(0);R.setUTCFullYear(N,0,k),R.setUTCHours(0,0,0,0);var D=(0,o.default)(R,f);return D}s.exports=e.default})(sc,sc.exports)),sc.exports}var Sv;function eT(){return Sv||(Sv=1,(function(s,e){var t=at().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var n=t(lr()),r=t(Zf()),o=t(Z1()),l=t(Vt()),c=6048e5;function u(h,f){(0,l.default)(1,arguments);var p=(0,n.default)(h),y=(0,r.default)(p,f).getTime()-(0,o.default)(p,f).getTime();return Math.round(y/c)+1}s.exports=e.default})(nc,nc.exports)),nc.exports}var oc={exports:{}},_v;function Qb(){return _v||(_v=1,(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(n,r){for(var o=n<0?"-":"",l=Math.abs(n).toString();l.length<r;)l="0"+l;return o+l}s.exports=e.default})(oc,oc.exports)),oc.exports}var ac={exports:{}},Ev;function tT(){return Ev||(Ev=1,(function(s,e){var t=at().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(Qb()),r={y:function(c,u){var h=c.getUTCFullYear(),f=h>0?h:1-h;return(0,n.default)(u==="yy"?f%100:f,u.length)},M:function(c,u){var h=c.getUTCMonth();return u==="M"?String(h+1):(0,n.default)(h+1,2)},d:function(c,u){return(0,n.default)(c.getUTCDate(),u.length)},a:function(c,u){var h=c.getUTCHours()/12>=1?"pm":"am";switch(u){case"a":case"aa":return h.toUpperCase();case"aaa":return h;case"aaaaa":return h[0];default:return h==="am"?"a.m.":"p.m."}},h:function(c,u){return(0,n.default)(c.getUTCHours()%12||12,u.length)},H:function(c,u){return(0,n.default)(c.getUTCHours(),u.length)},m:function(c,u){return(0,n.default)(c.getUTCMinutes(),u.length)},s:function(c,u){return(0,n.default)(c.getUTCSeconds(),u.length)},S:function(c,u){var h=u.length,f=c.getUTCMilliseconds(),p=Math.floor(f*Math.pow(10,h-3));return(0,n.default)(p,u.length)}},o=r;e.default=o,s.exports=e.default})(ac,ac.exports)),ac.exports}var Av;function nT(){return Av||(Av=1,(function(s,e){var t=at().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(K1()),r=t(J1()),o=t(Xb()),l=t(eT()),c=t(Kb()),u=t(Qb()),h=t(tT()),f={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},p={G:function(E,A,C){var k=E.getUTCFullYear()>0?1:0;switch(A){case"G":case"GG":case"GGG":return C.era(k,{width:"abbreviated"});case"GGGGG":return C.era(k,{width:"narrow"});default:return C.era(k,{width:"wide"})}},y:function(E,A,C){if(A==="yo"){var k=E.getUTCFullYear(),N=k>0?k:1-k;return C.ordinalNumber(N,{unit:"year"})}return h.default.y(E,A)},Y:function(E,A,C,k){var N=(0,c.default)(E,k),R=N>0?N:1-N;if(A==="YY"){var D=R%100;return(0,u.default)(D,2)}return A==="Yo"?C.ordinalNumber(R,{unit:"year"}):(0,u.default)(R,A.length)},R:function(E,A){var C=(0,o.default)(E);return(0,u.default)(C,A.length)},u:function(E,A){var C=E.getUTCFullYear();return(0,u.default)(C,A.length)},Q:function(E,A,C){var k=Math.ceil((E.getUTCMonth()+1)/3);switch(A){case"Q":return String(k);case"QQ":return(0,u.default)(k,2);case"Qo":return C.ordinalNumber(k,{unit:"quarter"});case"QQQ":return C.quarter(k,{width:"abbreviated",context:"formatting"});case"QQQQQ":return C.quarter(k,{width:"narrow",context:"formatting"});default:return C.quarter(k,{width:"wide",context:"formatting"})}},q:function(E,A,C){var k=Math.ceil((E.getUTCMonth()+1)/3);switch(A){case"q":return String(k);case"qq":return(0,u.default)(k,2);case"qo":return C.ordinalNumber(k,{unit:"quarter"});case"qqq":return C.quarter(k,{width:"abbreviated",context:"standalone"});case"qqqqq":return C.quarter(k,{width:"narrow",context:"standalone"});default:return C.quarter(k,{width:"wide",context:"standalone"})}},M:function(E,A,C){var k=E.getUTCMonth();switch(A){case"M":case"MM":return h.default.M(E,A);case"Mo":return C.ordinalNumber(k+1,{unit:"month"});case"MMM":return C.month(k,{width:"abbreviated",context:"formatting"});case"MMMMM":return C.month(k,{width:"narrow",context:"formatting"});default:return C.month(k,{width:"wide",context:"formatting"})}},L:function(E,A,C){var k=E.getUTCMonth();switch(A){case"L":return String(k+1);case"LL":return(0,u.default)(k+1,2);case"Lo":return C.ordinalNumber(k+1,{unit:"month"});case"LLL":return C.month(k,{width:"abbreviated",context:"standalone"});case"LLLLL":return C.month(k,{width:"narrow",context:"standalone"});default:return C.month(k,{width:"wide",context:"standalone"})}},w:function(E,A,C,k){var N=(0,l.default)(E,k);return A==="wo"?C.ordinalNumber(N,{unit:"week"}):(0,u.default)(N,A.length)},I:function(E,A,C){var k=(0,r.default)(E);return A==="Io"?C.ordinalNumber(k,{unit:"week"}):(0,u.default)(k,A.length)},d:function(E,A,C){return A==="do"?C.ordinalNumber(E.getUTCDate(),{unit:"date"}):h.default.d(E,A)},D:function(E,A,C){var k=(0,n.default)(E);return A==="Do"?C.ordinalNumber(k,{unit:"dayOfYear"}):(0,u.default)(k,A.length)},E:function(E,A,C){var k=E.getUTCDay();switch(A){case"E":case"EE":case"EEE":return C.day(k,{width:"abbreviated",context:"formatting"});case"EEEEE":return C.day(k,{width:"narrow",context:"formatting"});case"EEEEEE":return C.day(k,{width:"short",context:"formatting"});default:return C.day(k,{width:"wide",context:"formatting"})}},e:function(E,A,C,k){var N=E.getUTCDay(),R=(N-k.weekStartsOn+8)%7||7;switch(A){case"e":return String(R);case"ee":return(0,u.default)(R,2);case"eo":return C.ordinalNumber(R,{unit:"day"});case"eee":return C.day(N,{width:"abbreviated",context:"formatting"});case"eeeee":return C.day(N,{width:"narrow",context:"formatting"});case"eeeeee":return C.day(N,{width:"short",context:"formatting"});default:return C.day(N,{width:"wide",context:"formatting"})}},c:function(E,A,C,k){var N=E.getUTCDay(),R=(N-k.weekStartsOn+8)%7||7;switch(A){case"c":return String(R);case"cc":return(0,u.default)(R,A.length);case"co":return C.ordinalNumber(R,{unit:"day"});case"ccc":return C.day(N,{width:"abbreviated",context:"standalone"});case"ccccc":return C.day(N,{width:"narrow",context:"standalone"});case"cccccc":return C.day(N,{width:"short",context:"standalone"});default:return C.day(N,{width:"wide",context:"standalone"})}},i:function(E,A,C){var k=E.getUTCDay(),N=k===0?7:k;switch(A){case"i":return String(N);case"ii":return(0,u.default)(N,A.length);case"io":return C.ordinalNumber(N,{unit:"day"});case"iii":return C.day(k,{width:"abbreviated",context:"formatting"});case"iiiii":return C.day(k,{width:"narrow",context:"formatting"});case"iiiiii":return C.day(k,{width:"short",context:"formatting"});default:return C.day(k,{width:"wide",context:"formatting"})}},a:function(E,A,C){var k=E.getUTCHours(),N=k/12>=1?"pm":"am";switch(A){case"a":case"aa":return C.dayPeriod(N,{width:"abbreviated",context:"formatting"});case"aaa":return C.dayPeriod(N,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return C.dayPeriod(N,{width:"narrow",context:"formatting"});default:return C.dayPeriod(N,{width:"wide",context:"formatting"})}},b:function(E,A,C){var k=E.getUTCHours(),N;switch(k===12?N=f.noon:k===0?N=f.midnight:N=k/12>=1?"pm":"am",A){case"b":case"bb":return C.dayPeriod(N,{width:"abbreviated",context:"formatting"});case"bbb":return C.dayPeriod(N,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return C.dayPeriod(N,{width:"narrow",context:"formatting"});default:return C.dayPeriod(N,{width:"wide",context:"formatting"})}},B:function(E,A,C){var k=E.getUTCHours(),N;switch(k>=17?N=f.evening:k>=12?N=f.afternoon:k>=4?N=f.morning:N=f.night,A){case"B":case"BB":case"BBB":return C.dayPeriod(N,{width:"abbreviated",context:"formatting"});case"BBBBB":return C.dayPeriod(N,{width:"narrow",context:"formatting"});default:return C.dayPeriod(N,{width:"wide",context:"formatting"})}},h:function(E,A,C){if(A==="ho"){var k=E.getUTCHours()%12;return k===0&&(k=12),C.ordinalNumber(k,{unit:"hour"})}return h.default.h(E,A)},H:function(E,A,C){return A==="Ho"?C.ordinalNumber(E.getUTCHours(),{unit:"hour"}):h.default.H(E,A)},K:function(E,A,C){var k=E.getUTCHours()%12;return A==="Ko"?C.ordinalNumber(k,{unit:"hour"}):(0,u.default)(k,A.length)},k:function(E,A,C){var k=E.getUTCHours();return k===0&&(k=24),A==="ko"?C.ordinalNumber(k,{unit:"hour"}):(0,u.default)(k,A.length)},m:function(E,A,C){return A==="mo"?C.ordinalNumber(E.getUTCMinutes(),{unit:"minute"}):h.default.m(E,A)},s:function(E,A,C){return A==="so"?C.ordinalNumber(E.getUTCSeconds(),{unit:"second"}):h.default.s(E,A)},S:function(E,A){return h.default.S(E,A)},X:function(E,A,C,k){var N=k._originalDate||E,R=N.getTimezoneOffset();if(R===0)return"Z";switch(A){case"X":return x(R);case"XXXX":case"XX":return _(R);default:return _(R,":")}},x:function(E,A,C,k){var N=k._originalDate||E,R=N.getTimezoneOffset();switch(A){case"x":return x(R);case"xxxx":case"xx":return _(R);default:return _(R,":")}},O:function(E,A,C,k){var N=k._originalDate||E,R=N.getTimezoneOffset();switch(A){case"O":case"OO":case"OOO":return"GMT"+y(R,":");default:return"GMT"+_(R,":")}},z:function(E,A,C,k){var N=k._originalDate||E,R=N.getTimezoneOffset();switch(A){case"z":case"zz":case"zzz":return"GMT"+y(R,":");default:return"GMT"+_(R,":")}},t:function(E,A,C,k){var N=k._originalDate||E,R=Math.floor(N.getTime()/1e3);return(0,u.default)(R,A.length)},T:function(E,A,C,k){var N=k._originalDate||E,R=N.getTime();return(0,u.default)(R,A.length)}};function y(w,E){var A=w>0?"-":"+",C=Math.abs(w),k=Math.floor(C/60),N=C%60;if(N===0)return A+String(k);var R=E;return A+String(k)+R+(0,u.default)(N,2)}function x(w,E){if(w%60===0){var A=w>0?"-":"+";return A+(0,u.default)(Math.abs(w)/60,2)}return _(w,E)}function _(w,E){var A=E||"",C=w>0?"-":"+",k=Math.abs(w),N=(0,u.default)(Math.floor(k/60),2),R=(0,u.default)(k%60,2);return C+N+A+R}var b=p;e.default=b,s.exports=e.default})(Kl,Kl.exports)),Kl.exports}var lc={exports:{}},Cv;function rT(){return Cv||(Cv=1,(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(u,h){switch(u){case"P":return h.date({width:"short"});case"PP":return h.date({width:"medium"});case"PPP":return h.date({width:"long"});default:return h.date({width:"full"})}},n=function(u,h){switch(u){case"p":return h.time({width:"short"});case"pp":return h.time({width:"medium"});case"ppp":return h.time({width:"long"});default:return h.time({width:"full"})}},r=function(u,h){var f=u.match(/(P+)(p+)?/)||[],p=f[1],y=f[2];if(!y)return t(u,h);var x;switch(p){case"P":x=h.dateTime({width:"short"});break;case"PP":x=h.dateTime({width:"medium"});break;case"PPP":x=h.dateTime({width:"long"});break;default:x=h.dateTime({width:"full"});break}return x.replace("{{date}}",t(p,h)).replace("{{time}}",n(y,h))},o={p:n,P:r},l=o;e.default=l,s.exports=e.default})(lc,lc.exports)),lc.exports}var cc={exports:{}},Tv;function Jb(){return Tv||(Tv=1,(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(n){var r=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return r.setUTCFullYear(n.getFullYear()),n.getTime()-r.getTime()}s.exports=e.default})(cc,cc.exports)),cc.exports}var ci={},kv;function sT(){if(kv)return ci;kv=1,Object.defineProperty(ci,"__esModule",{value:!0}),ci.isProtectedDayOfYearToken=t,ci.isProtectedWeekYearToken=n,ci.throwProtectedError=r;var s=["D","DD"],e=["YY","YYYY"];function t(o){return s.indexOf(o)!==-1}function n(o){return e.indexOf(o)!==-1}function r(o,l,c){if(o==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(l,"`) for formatting years to the input `").concat(c,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(o==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(l,"`) for formatting years to the input `").concat(c,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(o==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(l,"`) for formatting days of the month to the input `").concat(c,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(o==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(l,"`) for formatting days of the month to the input `").concat(c,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}return ci}var uc={exports:{}},dc={exports:{}},hc={exports:{}},Pv;function iT(){return Pv||(Pv=1,(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},n=function(l,c,u){var h,f=t[l];return typeof f=="string"?h=f:c===1?h=f.one:h=f.other.replace("{{count}}",c.toString()),u!=null&&u.addSuffix?u.comparison&&u.comparison>0?"in "+h:h+" ago":h},r=n;e.default=r,s.exports=e.default})(hc,hc.exports)),hc.exports}var fc={exports:{}},pc={exports:{}},Rv;function oT(){return Rv||(Rv=1,(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(n){return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=r.width?String(r.width):n.defaultWidth,l=n.formats[o]||n.formats[n.defaultWidth];return l}}s.exports=e.default})(pc,pc.exports)),pc.exports}var Nv;function aT(){return Nv||(Nv=1,(function(s,e){var t=at().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(oT()),r={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},o={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},l={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},c={date:(0,n.default)({formats:r,defaultWidth:"full"}),time:(0,n.default)({formats:o,defaultWidth:"full"}),dateTime:(0,n.default)({formats:l,defaultWidth:"full"})},u=c;e.default=u,s.exports=e.default})(fc,fc.exports)),fc.exports}var mc={exports:{}},Dv;function lT(){return Dv||(Dv=1,(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},n=function(l,c,u,h){return t[l]},r=n;e.default=r,s.exports=e.default})(mc,mc.exports)),mc.exports}var gc={exports:{}},yc={exports:{}},Ov;function cT(){return Ov||(Ov=1,(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(n){return function(r,o){var l=o!=null&&o.context?String(o.context):"standalone",c;if(l==="formatting"&&n.formattingValues){var u=n.defaultFormattingWidth||n.defaultWidth,h=o!=null&&o.width?String(o.width):u;c=n.formattingValues[h]||n.formattingValues[u]}else{var f=n.defaultWidth,p=o!=null&&o.width?String(o.width):n.defaultWidth;c=n.values[p]||n.values[f]}var y=n.argumentCallback?n.argumentCallback(r):r;return c[y]}}s.exports=e.default})(yc,yc.exports)),yc.exports}var Mv;function uT(){return Mv||(Mv=1,(function(s,e){var t=at().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(cT()),r={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},o={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},l={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},c={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},u={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},h={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},f=function(_,b){var w=Number(_),E=w%100;if(E>20||E<10)switch(E%10){case 1:return w+"st";case 2:return w+"nd";case 3:return w+"rd"}return w+"th"},p={ordinalNumber:f,era:(0,n.default)({values:r,defaultWidth:"wide"}),quarter:(0,n.default)({values:o,defaultWidth:"wide",argumentCallback:function(_){return _-1}}),month:(0,n.default)({values:l,defaultWidth:"wide"}),day:(0,n.default)({values:c,defaultWidth:"wide"}),dayPeriod:(0,n.default)({values:u,defaultWidth:"wide",formattingValues:h,defaultFormattingWidth:"wide"})},y=p;e.default=y,s.exports=e.default})(gc,gc.exports)),gc.exports}var vc={exports:{}},bc={exports:{}},Lv;function dT(){return Lv||(Lv=1,(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(o){return function(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=c.width,h=u&&o.matchPatterns[u]||o.matchPatterns[o.defaultMatchWidth],f=l.match(h);if(!f)return null;var p=f[0],y=u&&o.parsePatterns[u]||o.parsePatterns[o.defaultParseWidth],x=Array.isArray(y)?r(y,function(w){return w.test(p)}):n(y,function(w){return w.test(p)}),_;_=o.valueCallback?o.valueCallback(x):x,_=c.valueCallback?c.valueCallback(_):_;var b=l.slice(p.length);return{value:_,rest:b}}}function n(o,l){for(var c in o)if(o.hasOwnProperty(c)&&l(o[c]))return c}function r(o,l){for(var c=0;c<o.length;c++)if(l(o[c]))return c}s.exports=e.default})(bc,bc.exports)),bc.exports}var wc={exports:{}},Iv;function hT(){return Iv||(Iv=1,(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(n){return function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=r.match(n.matchPattern);if(!l)return null;var c=l[0],u=r.match(n.parsePattern);if(!u)return null;var h=n.valueCallback?n.valueCallback(u[0]):u[0];h=o.valueCallback?o.valueCallback(h):h;var f=r.slice(c.length);return{value:h,rest:f}}}s.exports=e.default})(wc,wc.exports)),wc.exports}var Fv;function fT(){return Fv||(Fv=1,(function(s,e){var t=at().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(dT()),r=t(hT()),o=/^(\d+)(th|st|nd|rd)?/i,l=/\d+/i,c={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},u={any:[/^b/i,/^(a|c)/i]},h={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},f={any:[/1/i,/2/i,/3/i,/4/i]},p={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},y={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},x={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},_={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},b={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},w={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},E={ordinalNumber:(0,r.default)({matchPattern:o,parsePattern:l,valueCallback:function(k){return parseInt(k,10)}}),era:(0,n.default)({matchPatterns:c,defaultMatchWidth:"wide",parsePatterns:u,defaultParseWidth:"any"}),quarter:(0,n.default)({matchPatterns:h,defaultMatchWidth:"wide",parsePatterns:f,defaultParseWidth:"any",valueCallback:function(k){return k+1}}),month:(0,n.default)({matchPatterns:p,defaultMatchWidth:"wide",parsePatterns:y,defaultParseWidth:"any"}),day:(0,n.default)({matchPatterns:x,defaultMatchWidth:"wide",parsePatterns:_,defaultParseWidth:"any"}),dayPeriod:(0,n.default)({matchPatterns:b,defaultMatchWidth:"any",parsePatterns:w,defaultParseWidth:"any"})},A=E;e.default=A,s.exports=e.default})(vc,vc.exports)),vc.exports}var jv;function pT(){return jv||(jv=1,(function(s,e){var t=at().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(iT()),r=t(aT()),o=t(lT()),l=t(uT()),c=t(fT()),u={code:"en-US",formatDistance:n.default,formatLong:r.default,formatRelative:o.default,localize:l.default,match:c.default,options:{weekStartsOn:0,firstWeekContainsDate:1}},h=u;e.default=h,s.exports=e.default})(dc,dc.exports)),dc.exports}var Bv;function mT(){return Bv||(Bv=1,(function(s,e){var t=at().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(pT()),r=n.default;e.default=r,s.exports=e.default})(uc,uc.exports)),uc.exports}var Uv;function gT(){return Uv||(Uv=1,(function(s,e){var t=at().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=C;var n=t(G1()),r=t(X1()),o=t(lr()),l=t(nT()),c=t(rT()),u=t(Jb()),h=sT(),f=t(Is()),p=t(Vt()),y=mu(),x=t(mT()),_=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,b=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,w=/^'([^]*?)'?$/,E=/''/g,A=/[a-zA-Z]/;function C(N,R,D){var j,z,q,Y,ne,ie,ee,ae,G,X,I,V,Q,M,W,oe,ce,ve;(0,p.default)(2,arguments);var we=String(R),ge=(0,y.getDefaultOptions)(),K=(j=(z=D?.locale)!==null&&z!==void 0?z:ge.locale)!==null&&j!==void 0?j:x.default,se=(0,f.default)((q=(Y=(ne=(ie=D?.firstWeekContainsDate)!==null&&ie!==void 0?ie:D==null||(ee=D.locale)===null||ee===void 0||(ae=ee.options)===null||ae===void 0?void 0:ae.firstWeekContainsDate)!==null&&ne!==void 0?ne:ge.firstWeekContainsDate)!==null&&Y!==void 0?Y:(G=ge.locale)===null||G===void 0||(X=G.options)===null||X===void 0?void 0:X.firstWeekContainsDate)!==null&&q!==void 0?q:1);if(!(se>=1&&se<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var ue=(0,f.default)((I=(V=(Q=(M=D?.weekStartsOn)!==null&&M!==void 0?M:D==null||(W=D.locale)===null||W===void 0||(oe=W.options)===null||oe===void 0?void 0:oe.weekStartsOn)!==null&&Q!==void 0?Q:ge.weekStartsOn)!==null&&V!==void 0?V:(ce=ge.locale)===null||ce===void 0||(ve=ce.options)===null||ve===void 0?void 0:ve.weekStartsOn)!==null&&I!==void 0?I:0);if(!(ue>=0&&ue<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!K.localize)throw new RangeError("locale must contain localize property");if(!K.formatLong)throw new RangeError("locale must contain formatLong property");var et=(0,o.default)(N);if(!(0,n.default)(et))throw new RangeError("Invalid time value");var Gt=(0,u.default)(et),De=(0,r.default)(et,Gt),Be={firstWeekContainsDate:se,weekStartsOn:ue,locale:K,_originalDate:et},Ke=we.match(b).map(function(Le){var vt=Le[0];if(vt==="p"||vt==="P"){var on=c.default[vt];return on(Le,K.formatLong)}return Le}).join("").match(_).map(function(Le){if(Le==="''")return"'";var vt=Le[0];if(vt==="'")return k(Le);var on=l.default[vt];if(on)return!(D!=null&&D.useAdditionalWeekYearTokens)&&(0,h.isProtectedWeekYearToken)(Le)&&(0,h.throwProtectedError)(Le,R,String(N)),!(D!=null&&D.useAdditionalDayOfYearTokens)&&(0,h.isProtectedDayOfYearToken)(Le)&&(0,h.throwProtectedError)(Le,R,String(N)),on(De,Le,K.localize,Be);if(vt.match(A))throw new RangeError("Format string contains an unescaped latin alphabet character `"+vt+"`");return Le}).join("");return Ke}function k(N){var R=N.match(w);return R?R[1].replace(E,"'"):N}s.exports=e.default})(Hl,Hl.exports)),Hl.exports}var yT=gT();const vT=ss(yT);function zv(s,e,t){var n=xT(s,t.timeZone,t.locale);return n.formatToParts?bT(n,e):wT(n,e)}function bT(s,e){for(var t=s.formatToParts(e),n=t.length-1;n>=0;--n)if(t[n].type==="timeZoneName")return t[n].value}function wT(s,e){var t=s.format(e).replace(/\u200E/g,""),n=/ [\w-+ ]+$/.exec(t);return n?n[0].substr(1):""}function xT(s,e,t){if(t&&!t.code)throw new Error("date-fns-tz error: Please set a language code on the locale object imported from date-fns, e.g. `locale.code = 'en-US'`");return new Intl.DateTimeFormat(t?[t.code,"en-US"]:void 0,{timeZone:e,timeZoneName:s})}function ST(s,e){var t=CT(e);return t.formatToParts?ET(t,s):AT(t,s)}var _T={year:0,month:1,day:2,hour:3,minute:4,second:5};function ET(s,e){try{for(var t=s.formatToParts(e),n=[],r=0;r<t.length;r++){var o=_T[t[r].type];o>=0&&(n[o]=parseInt(t[r].value,10))}return n}catch(l){if(l instanceof RangeError)return[NaN];throw l}}function AT(s,e){var t=s.format(e),n=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(t);return[n[3],n[1],n[2],n[4],n[5],n[6]]}var Oh={};function CT(s){if(!Oh[s]){var e=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),t=e==="06/25/2014, 00:00:00"||e==="06/25/2014 00:00:00";Oh[s]=t?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:s,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:s,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return Oh[s]}function Zb(s,e,t,n,r,o,l){var c=new Date(0);return c.setUTCFullYear(s,e,t),c.setUTCHours(n,r,o,l),c}var Hv=36e5,TT=6e4,Mh={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function ep(s,e,t){var n,r;if(!s||(n=Mh.timezoneZ.exec(s),n))return 0;var o;if(n=Mh.timezoneHH.exec(s),n)return o=parseInt(n[1],10),Wv(o)?-(o*Hv):NaN;if(n=Mh.timezoneHHMM.exec(s),n){o=parseInt(n[2],10);var l=parseInt(n[3],10);return Wv(o,l)?(r=Math.abs(o)*Hv+l*TT,n[1]==="+"?-r:r):NaN}if(RT(s)){e=new Date(e||Date.now());var c=t?e:kT(e),u=yf(c,s),h=t?u:PT(e,u,s);return-h}return NaN}function kT(s){return Zb(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds())}function yf(s,e){var t=ST(s,e),n=Zb(t[0],t[1]-1,t[2],t[3]%24,t[4],t[5],0).getTime(),r=s.getTime(),o=r%1e3;return r-=o>=0?o:1e3+o,n-r}function PT(s,e,t){var n=s.getTime(),r=n-e,o=yf(new Date(r),t);if(e===o)return e;r-=o-e;var l=yf(new Date(r),t);return o===l?o:Math.max(o,l)}function Wv(s,e){return-23<=s&&s<=23&&(e==null||0<=e&&e<=59)}var $v={};function RT(s){if($v[s])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:s}),$v[s]=!0,!0}catch{return!1}}var NT=60*1e3,DT={X:function(s,e,t,n){var r=Lh(n.timeZone,s);if(r===0)return"Z";switch(e){case"X":return Vv(r);case"XXXX":case"XX":return mi(r);default:return mi(r,":")}},x:function(s,e,t,n){var r=Lh(n.timeZone,s);switch(e){case"x":return Vv(r);case"xxxx":case"xx":return mi(r);default:return mi(r,":")}},O:function(s,e,t,n){var r=Lh(n.timeZone,s);switch(e){case"O":case"OO":case"OOO":return"GMT"+OT(r,":");default:return"GMT"+mi(r,":")}},z:function(s,e,t,n){switch(e){case"z":case"zz":case"zzz":return zv("short",s,n);default:return zv("long",s,n)}}};function Lh(s,e){var t=s?ep(s,e,!0)/NT:e.getTimezoneOffset();if(Number.isNaN(t))throw new RangeError("Invalid time zone specified: "+s);return t}function eu(s,e){for(var t=s<0?"-":"",n=Math.abs(s).toString();n.length<e;)n="0"+n;return t+n}function mi(s,e){var t=e||"",n=s>0?"-":"+",r=Math.abs(s),o=eu(Math.floor(r/60),2),l=eu(Math.floor(r%60),2);return n+o+t+l}function Vv(s,e){if(s%60===0){var t=s>0?"-":"+";return t+eu(Math.abs(s)/60,2)}return mi(s,e)}function OT(s,e){var t=s>0?"-":"+",n=Math.abs(s),r=Math.floor(n/60),o=n%60;if(o===0)return t+String(r);var l=e;return t+String(r)+l+eu(o,2)}var MT=Is();const LT=ss(MT);var IT=Jb();const qv=ss(IT);var FT=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,Ih=36e5,Gv=6e4,jT=2,Wt={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:FT};function ew(s,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(s===null)return new Date(NaN);var t=e||{},n=t.additionalDigits==null?jT:LT(t.additionalDigits);if(n!==2&&n!==1&&n!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(s instanceof Date||typeof s=="object"&&Object.prototype.toString.call(s)==="[object Date]")return new Date(s.getTime());if(typeof s=="number"||Object.prototype.toString.call(s)==="[object Number]")return new Date(s);if(!(typeof s=="string"||Object.prototype.toString.call(s)==="[object String]"))return new Date(NaN);var r=BT(s),o=UT(r.date,n),l=o.year,c=o.restDateString,u=zT(c,l);if(isNaN(u))return new Date(NaN);if(u){var h=u.getTime(),f=0,p;if(r.time&&(f=HT(r.time),isNaN(f)))return new Date(NaN);if(r.timeZone||t.timeZone){if(p=ep(r.timeZone||t.timeZone,new Date(h+f)),isNaN(p))return new Date(NaN)}else p=qv(new Date(h+f)),p=qv(new Date(h+f+p));return new Date(h+f+p)}else return new Date(NaN)}function BT(s){var e={},t=Wt.dateTimePattern.exec(s),n;if(t?(e.date=t[1],n=t[3]):(t=Wt.datePattern.exec(s),t?(e.date=t[1],n=t[2]):(e.date=null,n=s)),n){var r=Wt.timeZone.exec(n);r?(e.time=n.replace(r[1],""),e.timeZone=r[1].trim()):e.time=n}return e}function UT(s,e){var t=Wt.YYY[e],n=Wt.YYYYY[e],r;if(r=Wt.YYYY.exec(s)||n.exec(s),r){var o=r[1];return{year:parseInt(o,10),restDateString:s.slice(o.length)}}if(r=Wt.YY.exec(s)||t.exec(s),r){var l=r[1];return{year:parseInt(l,10)*100,restDateString:s.slice(l.length)}}return{year:null}}function zT(s,e){if(e===null)return null;var t,n,r,o;if(s.length===0)return n=new Date(0),n.setUTCFullYear(e),n;if(t=Wt.MM.exec(s),t)return n=new Date(0),r=parseInt(t[1],10)-1,Xv(e,r)?(n.setUTCFullYear(e,r),n):new Date(NaN);if(t=Wt.DDD.exec(s),t){n=new Date(0);var l=parseInt(t[1],10);return VT(e,l)?(n.setUTCFullYear(e,0,l),n):new Date(NaN)}if(t=Wt.MMDD.exec(s),t){n=new Date(0),r=parseInt(t[1],10)-1;var c=parseInt(t[2],10);return Xv(e,r,c)?(n.setUTCFullYear(e,r,c),n):new Date(NaN)}if(t=Wt.Www.exec(s),t)return o=parseInt(t[1],10)-1,Kv(e,o)?Yv(e,o):new Date(NaN);if(t=Wt.WwwD.exec(s),t){o=parseInt(t[1],10)-1;var u=parseInt(t[2],10)-1;return Kv(e,o,u)?Yv(e,o,u):new Date(NaN)}return null}function HT(s){var e,t,n;if(e=Wt.HH.exec(s),e)return t=parseFloat(e[1].replace(",",".")),Fh(t)?t%24*Ih:NaN;if(e=Wt.HHMM.exec(s),e)return t=parseInt(e[1],10),n=parseFloat(e[2].replace(",",".")),Fh(t,n)?t%24*Ih+n*Gv:NaN;if(e=Wt.HHMMSS.exec(s),e){t=parseInt(e[1],10),n=parseInt(e[2],10);var r=parseFloat(e[3].replace(",","."));return Fh(t,n,r)?t%24*Ih+n*Gv+r*1e3:NaN}return null}function Yv(s,e,t){e=e||0,t=t||0;var n=new Date(0);n.setUTCFullYear(s,0,4);var r=n.getUTCDay()||7,o=e*7+t+1-r;return n.setUTCDate(n.getUTCDate()+o),n}var WT=[31,28,31,30,31,30,31,31,30,31,30,31],$T=[31,29,31,30,31,30,31,31,30,31,30,31];function tw(s){return s%400===0||s%4===0&&s%100!==0}function Xv(s,e,t){if(e<0||e>11)return!1;if(t!=null){if(t<1)return!1;var n=tw(s);if(n&&t>$T[e]||!n&&t>WT[e])return!1}return!0}function VT(s,e){if(e<1)return!1;var t=tw(s);return!(t&&e>366||!t&&e>365)}function Kv(s,e,t){return!(e<0||e>52||t!=null&&(t<0||t>6))}function Fh(s,e,t){return!(s!=null&&(s<0||s>=25)||e!=null&&(e<0||e>=60)||t!=null&&(t<0||t>=60))}var qT=/([xXOz]+)|''|'(''|[^'])+('|$)/g;function GT(s,e,t){var n=String(e),r=t||{},o=n.match(qT);if(o){var l=ew(r.originalDate||s,r);n=o.reduce(function(c,u){if(u[0]==="'")return c;var h=c.indexOf(u),f=c[h-1]==="'",p=c.replace(u,"'"+DT[u[0]](l,u,null,r)+"'");return f?p.substring(0,h-1)+p.substring(h+1):p},n)}return vT(s,n,r)}var xc={exports:{}},Sc={exports:{}},Qv;function YT(){return Qv||(Qv=1,(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(n,r){if(n==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o]);return n}s.exports=e.default})(Sc,Sc.exports)),Sc.exports}var Jv;function XT(){return Jv||(Jv=1,(function(s,e){var t=at().default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var n=t(YT());function r(o){return(0,n.default)({},o)}s.exports=e.default})(xc,xc.exports)),xc.exports}var KT=XT();const QT=ss(KT);function JT(s,e,t){var n=ew(s,t),r=ep(e,n,!0),o=new Date(n.getTime()-r),l=new Date(0);return l.setFullYear(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()),l.setHours(o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds(),o.getUTCMilliseconds()),l}function ZT(s,e,t,n){var r=QT(n);return r.timeZone=e,r.originalDate=s,GT(JT(s,e),t,r)}function gi(s,e="MMM d, yyyy HH:mm"){if(!s)return"N/A";try{const t=new Date(s);return ZT(t,"America/Chicago",e)}catch(t){return console.error("Error formatting date to Central Time:",t),s}}function ek(s){if(!s.inflow_data)return!0;const e=s.inflow_data.shippingAddress;if(!e)return!0;const t=e.city?.trim();if(!t)return!0;const n=t.toUpperCase();return n==="BRYAN"||n==="COLLEGE STATION"}function tp(s){return s.delivery_location?ek(s)?s.delivery_location:s.inflow_data?.shippingAddress?.city?s.inflow_data.shippingAddress.city.trim():s.delivery_location:"N/A"}const nw=T.forwardRef(({className:s,...e},t)=>g.jsx("div",{className:"relative w-full overflow-auto",children:g.jsx("table",{ref:t,className:Xe("w-full caption-bottom text-sm",s),...e})}));nw.displayName="Table";const rw=T.forwardRef(({className:s,...e},t)=>g.jsx("thead",{ref:t,className:Xe("[&_tr]:border-b",s),...e}));rw.displayName="TableHeader";const sw=T.forwardRef(({className:s,...e},t)=>g.jsx("tbody",{ref:t,className:Xe("[&_tr:last-child]:border-0",s),...e}));sw.displayName="TableBody";const tk=T.forwardRef(({className:s,...e},t)=>g.jsx("tfoot",{ref:t,className:Xe("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...e}));tk.displayName="TableFooter";const vf=T.forwardRef(({className:s,...e},t)=>g.jsx("tr",{ref:t,className:Xe("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...e}));vf.displayName="TableRow";const yi=T.forwardRef(({className:s,...e},t)=>g.jsx("th",{ref:t,className:Xe("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...e}));yi.displayName="TableHead";const vi=T.forwardRef(({className:s,...e},t)=>g.jsx("td",{ref:t,className:Xe("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...e}));vi.displayName="TableCell";const nk=T.forwardRef(({className:s,...e},t)=>g.jsx("caption",{ref:t,className:Xe("mt-4 text-sm text-muted-foreground",s),...e}));nk.displayName="TableCaption";function Zv(s,e){if(typeof s=="function")return s(e);s!=null&&(s.current=e)}function iw(...s){return e=>{let t=!1;const n=s.map(r=>{const o=Zv(r,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let r=0;r<n.length;r++){const o=n[r];typeof o=="function"?o():Zv(s[r],null)}}}}function or(...s){return T.useCallback(iw(...s),s)}function sa(s){const e=sk(s),t=T.forwardRef((n,r)=>{const{children:o,...l}=n,c=T.Children.toArray(o),u=c.find(ok);if(u){const h=u.props.children,f=c.map(p=>p===u?T.Children.count(h)>1?T.Children.only(null):T.isValidElement(h)?h.props.children:null:p);return g.jsx(e,{...l,ref:r,children:T.isValidElement(h)?T.cloneElement(h,void 0,f):null})}return g.jsx(e,{...l,ref:r,children:o})});return t.displayName=`${s}.Slot`,t}var rk=sa("Slot");function sk(s){const e=T.forwardRef((t,n)=>{const{children:r,...o}=t;if(T.isValidElement(r)){const l=lk(r),c=ak(o,r.props);return r.type!==T.Fragment&&(c.ref=n?iw(n,l):l),T.cloneElement(r,c)}return T.Children.count(r)>1?T.Children.only(null):null});return e.displayName=`${s}.SlotClone`,e}var ik=Symbol("radix.slottable");function ok(s){return T.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===ik}function ak(s,e){const t={...e};for(const n in e){const r=s[n],o=e[n];/^on[A-Z]/.test(n)?r&&o?t[n]=(...c)=>{const u=o(...c);return r(...c),u}:r&&(t[n]=r):n==="style"?t[n]={...r,...o}:n==="className"&&(t[n]=[r,o].filter(Boolean).join(" "))}return{...s,...t}}function lk(s){let e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?s.ref:(e=Object.getOwnPropertyDescriptor(s,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?s.props.ref:s.props.ref||s.ref)}const ck=zb("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),xt=T.forwardRef(({className:s,variant:e,size:t,asChild:n=!1,...r},o)=>{const l=n?rk:"button";return g.jsx(l,{className:Xe(ck({variant:e,size:t,className:s})),ref:o,...r})});xt.displayName="Button";function ow({orders:s,onViewDetail:e}){return s.length===0?g.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"No orders found"}):g.jsxs(nw,{children:[g.jsx(rw,{children:g.jsxs(vf,{children:[g.jsx(yi,{children:"Order ID"}),g.jsx(yi,{children:"Recipient"}),g.jsx(yi,{children:"Location"}),g.jsx(yi,{children:"Order Date"}),g.jsx(yi,{children:"Status"})]})}),g.jsx(sw,{children:s.map(t=>g.jsxs(vf,{children:[g.jsx(vi,{children:g.jsx(xt,{variant:"link",onClick:()=>e(t.id),className:"p-0 h-auto font-normal",children:t.inflow_order_id})}),g.jsx(vi,{children:t.recipient_name||"N/A"}),g.jsx(vi,{children:tp(t)}),g.jsx(vi,{children:gi(t.created_at,"MMM d, yyyy")}),g.jsx(vi,{children:g.jsx(Gb,{status:t.status})})]},t.id))})]})}function uk({status:s,onStatusChange:e,search:t,onSearchChange:n}){const r=l=>l===null&&s===null?!0:Array.isArray(l)&&Array.isArray(s)?l.length===s.length&&l.every(c=>s.includes(c)):l===s,o=[{label:"All",value:null},{label:"Picked + QA",value:[Te.PICKED,Te.QA]},{label:Kr[Te.PRE_DELIVERY],value:Te.PRE_DELIVERY},{label:Kr[Te.IN_DELIVERY],value:Te.IN_DELIVERY},{label:Kr[Te.SHIPPING],value:Te.SHIPPING},{label:Kr[Te.DELIVERED],value:Te.DELIVERED},{label:Kr[Te.ISSUE],value:Te.ISSUE}];return g.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:items-end sm:justify-between",children:[g.jsx("div",{className:"flex gap-1 border-b",children:o.map(l=>g.jsx("button",{onClick:()=>e(l.value),className:`px-3 py-2 text-sm border-b-2 -mb-px transition-colors ${r(l.value)?"border-primary text-primary font-medium":"border-transparent text-muted-foreground hover:text-foreground"}`,children:l.label},l.label))}),g.jsx("div",{className:"w-full sm:w-auto sm:min-w-[300px]",children:g.jsx("input",{type:"text",placeholder:"Search orders...",value:t,onChange:l=>n(l.target.value),className:"w-full px-3 py-2 text-sm border rounded-md focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent"})})]})}function aw({currentStatus:s,newStatus:e,onConfirm:t,onCancel:n,requireReason:r=!1}){const[o,l]=T.useState(""),c=u=>{if(u.preventDefault(),r&&!o.trim()){alert("Reason is required");return}t(o||void 0)};return g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[g.jsx("h2",{className:"text-xl font-bold mb-4",children:"Change Status"}),g.jsxs("p",{className:"mb-4",children:["Change status from ",g.jsx("strong",{children:Kr[s]})," to ",g.jsx("strong",{children:Kr[e]})]}),g.jsxs("form",{onSubmit:c,children:[r&&g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{className:"block text-sm font-medium mb-2",children:"Reason *"}),g.jsx("textarea",{value:o,onChange:u=>l(u.target.value),className:"w-full border rounded p-2",rows:3,required:!0,placeholder:"Enter reason for this status change..."})]}),g.jsxs("div",{className:"flex gap-2 justify-end",children:[g.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 border rounded hover:bg-gray-100",children:"Cancel"}),g.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Confirm"})]})]})]})})}const nr=T.forwardRef(({className:s,...e},t)=>g.jsx("div",{ref:t,className:Xe("rounded-lg border bg-card text-card-foreground shadow-sm",s),...e}));nr.displayName="Card";const Sr=T.forwardRef(({className:s,...e},t)=>g.jsx("div",{ref:t,className:Xe("flex flex-col space-y-1.5 p-6",s),...e}));Sr.displayName="CardHeader";const _r=T.forwardRef(({className:s,...e},t)=>g.jsx("h3",{ref:t,className:Xe("text-2xl font-semibold leading-none tracking-tight",s),...e}));_r.displayName="CardTitle";const lw=T.forwardRef(({className:s,...e},t)=>g.jsx("p",{ref:t,className:Xe("text-sm text-muted-foreground",s),...e}));lw.displayName="CardDescription";const rr=T.forwardRef(({className:s,...e},t)=>g.jsx("div",{ref:t,className:Xe("p-6 pt-0",s),...e}));rr.displayName="CardContent";const dk=T.forwardRef(({className:s,...e},t)=>g.jsx("div",{ref:t,className:Xe("flex items-center p-6 pt-0",s),...e}));dk.displayName="CardFooter";function hk(){const[s,e]=T.useState([]),[t,n]=T.useState(!0),[r,o]=T.useState([Te.PICKED,Te.QA]),[l,c]=T.useState(""),[u,h]=T.useState(null),f=os();T.useEffect(()=>{p()},[r,l]);const p=async()=>{n(!0);try{if(Array.isArray(r)){const b=r.map(A=>it.getOrders({status:A,search:l||void 0})),E=(await Promise.all(b)).flat().sort((A,C)=>new Date(C.updated_at).getTime()-new Date(A.updated_at).getTime());e(E)}else{const b=await it.getOrders({status:r||void 0,search:l||void 0});e(b)}}catch(b){console.error("Failed to load orders:",b)}finally{n(!1)}},y=(b,w,E)=>{w===Te.ISSUE&&E===void 0?h({orderId:b,newStatus:w,requireReason:!0}):x(b,w,E)},x=async(b,w,E)=>{try{await it.updateOrderStatus(b,{status:w,reason:E}),h(null),p()}catch(A){console.error("Failed to update status:",A),alert("Failed to update order status")}},_=b=>{f(`/orders/${b}`)};return t?g.jsx("div",{className:"flex items-center justify-center min-h-screen",children:g.jsx("div",{className:"text-lg",children:"Loading..."})}):g.jsxs("div",{className:"container mx-auto py-4 space-y-4",children:[g.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Orders"}),g.jsxs(nr,{children:[g.jsx("div",{className:"p-6 pb-4",children:g.jsx(uk,{status:r,onStatusChange:o,search:l,onSearchChange:c})}),g.jsx(rr,{children:g.jsx(ow,{orders:s,onStatusChange:y,onViewDetail:_})})]}),u&&g.jsx(aw,{currentStatus:s.find(b=>b.id===u.orderId)?.status||Te.PRE_DELIVERY,newStatus:u.newStatus,requireReason:u.requireReason,onConfirm:b=>x(u.orderId,u.newStatus,b),onCancel:()=>h(null)})]})}function fk({order:s,auditLogs:e,notifications:t,onRetryNotification:n,onTagOrder:r,onGeneratePicklist:o}){const l=t[0],c=()=>{const u=window.prompt("Enter tag IDs (comma-separated)","");if(u===null)return;const h=u.split(",").map(f=>f.trim()).filter(Boolean);r(h)};return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Order ",s.inflow_order_id]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"font-medium",children:"Status:"}),g.jsx("div",{className:"mt-1",children:g.jsx(Gb,{status:s.status})})]}),g.jsxs("div",{children:[g.jsx("label",{className:"font-medium",children:"Recipient:"}),g.jsx("p",{children:s.recipient_name||"N/A"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"font-medium",children:"Contact:"}),g.jsx("p",{children:s.recipient_contact||"N/A"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"font-medium",children:"Location:"}),g.jsx("p",{children:s.delivery_location||"N/A"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"font-medium",children:"PO Number:"}),g.jsx("p",{children:s.po_number||"N/A"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"font-medium",children:"Deliverer:"}),g.jsx("p",{children:s.assigned_deliverer||"Unassigned"})]}),s.issue_reason&&g.jsxs("div",{className:"col-span-2",children:[g.jsx("label",{className:"font-medium",children:"Issue Reason:"}),g.jsx("p",{className:"text-red-600",children:s.issue_reason})]})]}),s.status===Te.IN_DELIVERY&&g.jsx("div",{className:"mt-4",children:g.jsx(Cn,{to:`/document-signing?orderId=${s.id}`,className:"inline-flex items-center px-4 py-2 bg-[#800000] text-white rounded hover:bg-[#660000]",children:"Open Document Signing"})})]}),g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsx("h3",{className:"text-xl font-bold mb-4",children:"Preparation Checklist"}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex items-center justify-between gap-4",children:[g.jsxs("div",{children:[g.jsx("p",{className:"font-medium",children:"Asset Tagging"}),g.jsx("p",{className:"text-sm text-gray-600",children:s.tagged_at?`Completed ${gi(s.tagged_at)}`:"Pending"})]}),g.jsx("button",{onClick:c,disabled:!!s.tagged_at,className:"px-3 py-2 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 disabled:bg-gray-300",children:s.tagged_at?"Tagged":"Mark Tagged"})]}),g.jsxs("div",{className:"flex items-center justify-between gap-4",children:[g.jsxs("div",{children:[g.jsx("p",{className:"font-medium",children:"Generate Picklist & Email Order Details"}),g.jsx("p",{className:"text-sm text-gray-600",children:s.picklist_generated_at?`Generated ${gi(s.picklist_generated_at)}`:"Pending"}),s.picklist_generated_at&&g.jsx("p",{className:"text-xs text-green-600",children:" Order Details emailed to recipient"}),s.picklist_path&&g.jsx("a",{className:"text-sm text-blue-600 hover:underline",href:`/api/orders/${s.id}/picklist`,target:"_blank",rel:"noreferrer",children:"Download picklist"})]}),g.jsx("button",{onClick:o,disabled:!s.tagged_at||!!s.picklist_generated_at,className:"px-3 py-2 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 disabled:bg-gray-300",children:s.picklist_generated_at?"Generated":"Generate & Email"})]}),g.jsxs("div",{className:"flex items-center justify-between gap-4",children:[g.jsxs("div",{children:[g.jsx("p",{className:"font-medium",children:"QA Checklist"}),g.jsx("p",{className:"text-sm text-gray-600",children:s.qa_completed_at?`Completed ${gi(s.qa_completed_at)}${s.qa_completed_by?` by ${s.qa_completed_by}`:""}`:"Pending"}),s.qa_method&&g.jsxs("p",{className:"text-xs text-gray-500",children:["Method: ",s.qa_method]})]}),s.qa_completed_at?g.jsx("span",{className:"px-3 py-2 text-sm bg-green-100 text-green-800 rounded",children:"QA Completed"}):g.jsx("span",{className:"px-3 py-2 text-sm bg-gray-100 text-gray-600 rounded",children:"QA Pending"})]})]})]}),l&&g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsx("h3",{className:"text-xl font-bold mb-4",children:"Teams Notification"}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("p",{children:[g.jsx("strong",{children:"Status:"})," ",g.jsx("span",{className:l.status==="sent"?"text-green-600":l.status==="failed"?"text-red-600":"text-yellow-600",children:l.status})]}),l.sent_at&&g.jsxs("p",{children:[g.jsx("strong",{children:"Sent at:"})," ",gi(l.sent_at)]}),l.error_message&&g.jsxs("div",{children:[g.jsxs("p",{className:"text-red-600",children:[g.jsx("strong",{children:"Error:"})," ",l.error_message]}),g.jsx("button",{onClick:n,className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Retry Notification"})]})]})]}),g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsx("h3",{className:"text-xl font-bold mb-4",children:"Audit Timeline"}),g.jsx("div",{className:"space-y-2",children:e.map(u=>g.jsxs("div",{className:"border-l-2 border-gray-300 pl-4 py-2",children:[g.jsxs("p",{className:"font-medium",children:[u.from_status||"Created","  ",u.to_status]}),g.jsxs("p",{className:"text-sm text-gray-600",children:[gi(u.timestamp),u.changed_by&&` by ${u.changed_by}`]}),u.reason&&g.jsx("p",{className:"text-sm text-gray-500 mt-1",children:u.reason})]},u.id))})]}),s.inflow_data&&g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsx("h3",{className:"text-xl font-bold mb-4",children:"Inflow Data"}),g.jsx("pre",{className:"bg-gray-100 p-4 rounded overflow-auto text-sm",children:JSON.stringify(s.inflow_data,null,2)})]})]})}function pk(){const{orderId:s}=db(),e=os(),[t,n]=T.useState(null),[r,o]=T.useState([]),[l,c]=T.useState([]),[u,h]=T.useState(!0),[f,p]=T.useState(null);T.useEffect(()=>{s&&y()},[s]);const y=async()=>{if(s){h(!0);try{const[A,C]=await Promise.all([it.getOrder(s),it.getOrderAudit(s)]);n(A),o(C),c(A.teams_notifications||[])}catch(A){console.error("Failed to load order:",A)}finally{h(!1)}}},x=(A,C)=>{if(!t)return;A===Te.ISSUE&&C===void 0?p({newStatus:A,requireReason:!0}):_(A,C)},_=async(A,C)=>{if(t)try{await it.updateOrderStatus(t.id,{status:A,reason:C}),p(null),y()}catch(k){console.error("Failed to update status:",k),alert("Failed to update order status")}},b=async()=>{if(t)try{await it.retryNotification(t.id),y()}catch(A){console.error("Failed to retry notification:",A),alert("Failed to retry notification")}},w=async A=>{if(t)try{await it.tagOrder(t.id,{tag_ids:A}),y()}catch(C){console.error("Failed to tag order:",C),alert("Failed to tag order")}},E=async()=>{if(t)try{await it.generatePicklist(t.id),y()}catch(A){console.error("Failed to generate picklist:",A),alert("Failed to generate picklist")}};return u?g.jsx("div",{className:"p-4",children:"Loading..."}):t?g.jsxs("div",{className:"p-4",children:[g.jsx("button",{onClick:()=>e("/"),className:"mb-4 px-4 py-2 border rounded hover:bg-gray-100",children:" Back to Orders"}),g.jsx(fk,{order:t,auditLogs:r,notifications:l,onStatusChange:x,onRetryNotification:b,onTagOrder:w,onGeneratePicklist:E}),f&&g.jsx(aw,{currentStatus:t.status,newStatus:f.newStatus,requireReason:f.requireReason,onConfirm:A=>_(f.newStatus,A),onCancel:()=>p(null)})]}):g.jsx("div",{className:"p-4",children:"Order not found"})}function Dt(s,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(s?.(r),t===!1||!r.defaultPrevented)return e?.(r)}}function mk(s,e){const t=T.createContext(e),n=o=>{const{children:l,...c}=o,u=T.useMemo(()=>c,Object.values(c));return g.jsx(t.Provider,{value:u,children:l})};n.displayName=s+"Provider";function r(o){const l=T.useContext(t);if(l)return l;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${s}\``)}return[n,r]}function gu(s,e=[]){let t=[];function n(o,l){const c=T.createContext(l),u=t.length;t=[...t,l];const h=p=>{const{scope:y,children:x,..._}=p,b=y?.[s]?.[u]||c,w=T.useMemo(()=>_,Object.values(_));return g.jsx(b.Provider,{value:w,children:x})};h.displayName=o+"Provider";function f(p,y){const x=y?.[s]?.[u]||c,_=T.useContext(x);if(_)return _;if(l!==void 0)return l;throw new Error(`\`${p}\` must be used within \`${o}\``)}return[h,f]}const r=()=>{const o=t.map(l=>T.createContext(l));return function(c){const u=c?.[s]||o;return T.useMemo(()=>({[`__scope${s}`]:{...c,[s]:u}}),[c,u])}};return r.scopeName=s,[n,gk(r,...e)]}function gk(...s){const e=s[0];if(s.length===1)return e;const t=()=>{const n=s.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(o){const l=n.reduce((c,{useScope:u,scopeName:h})=>{const p=u(o)[`__scope${h}`];return{...c,...p}},{});return T.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return t.scopeName=e.scopeName,t}function yk(s){const e=s+"CollectionProvider",[t,n]=gu(e),[r,o]=t(e,{collectionRef:{current:null},itemMap:new Map}),l=b=>{const{scope:w,children:E}=b,A=xr.useRef(null),C=xr.useRef(new Map).current;return g.jsx(r,{scope:w,itemMap:C,collectionRef:A,children:E})};l.displayName=e;const c=s+"CollectionSlot",u=sa(c),h=xr.forwardRef((b,w)=>{const{scope:E,children:A}=b,C=o(c,E),k=or(w,C.collectionRef);return g.jsx(u,{ref:k,children:A})});h.displayName=c;const f=s+"CollectionItemSlot",p="data-radix-collection-item",y=sa(f),x=xr.forwardRef((b,w)=>{const{scope:E,children:A,...C}=b,k=xr.useRef(null),N=or(w,k),R=o(f,E);return xr.useEffect(()=>(R.itemMap.set(k,{ref:k,...C}),()=>{R.itemMap.delete(k)})),g.jsx(y,{[p]:"",ref:N,children:A})});x.displayName=f;function _(b){const w=o(s+"CollectionConsumer",b);return xr.useCallback(()=>{const A=w.collectionRef.current;if(!A)return[];const C=Array.from(A.querySelectorAll(`[${p}]`));return Array.from(w.itemMap.values()).sort((R,D)=>C.indexOf(R.ref.current)-C.indexOf(D.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:l,Slot:h,ItemSlot:x},_,n]}var ia=globalThis?.document?T.useLayoutEffect:()=>{},vk=Wf[" useId ".trim().toString()]||(()=>{}),bk=0;function Qo(s){const[e,t]=T.useState(vk());return ia(()=>{t(n=>n??String(bk++))},[s]),e?`radix-${e}`:""}var wk=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],qt=wk.reduce((s,e)=>{const t=sa(`Primitive.${e}`),n=T.forwardRef((r,o)=>{const{asChild:l,...c}=r,u=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),g.jsx(u,{...c,ref:o})});return n.displayName=`Primitive.${e}`,{...s,[e]:n}},{});function xk(s,e){s&&rb.flushSync(()=>s.dispatchEvent(e))}function Fi(s){const e=T.useRef(s);return T.useEffect(()=>{e.current=s}),T.useMemo(()=>(...t)=>e.current?.(...t),[])}var Sk=Wf[" useInsertionEffect ".trim().toString()]||ia;function np({prop:s,defaultProp:e,onChange:t=()=>{},caller:n}){const[r,o,l]=_k({defaultProp:e,onChange:t}),c=s!==void 0,u=c?s:r;{const f=T.useRef(s!==void 0);T.useEffect(()=>{const p=f.current;p!==c&&console.warn(`${n} is changing from ${p?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=c},[c,n])}const h=T.useCallback(f=>{if(c){const p=Ek(f)?f(s):f;p!==s&&l.current?.(p)}else o(f)},[c,s,o,l]);return[u,h]}function _k({defaultProp:s,onChange:e}){const[t,n]=T.useState(s),r=T.useRef(t),o=T.useRef(e);return Sk(()=>{o.current=e},[e]),T.useEffect(()=>{r.current!==t&&(o.current?.(t),r.current=t)},[t,r]),[t,n,o]}function Ek(s){return typeof s=="function"}var Ak=T.createContext(void 0);function cw(s){const e=T.useContext(Ak);return s||e||"ltr"}var jh="rovingFocusGroup.onEntryFocus",Ck={bubbles:!1,cancelable:!0},va="RovingFocusGroup",[bf,uw,Tk]=yk(va),[kk,dw]=gu(va,[Tk]),[Pk,Rk]=kk(va),hw=T.forwardRef((s,e)=>g.jsx(bf.Provider,{scope:s.__scopeRovingFocusGroup,children:g.jsx(bf.Slot,{scope:s.__scopeRovingFocusGroup,children:g.jsx(Nk,{...s,ref:e})})}));hw.displayName=va;var Nk=T.forwardRef((s,e)=>{const{__scopeRovingFocusGroup:t,orientation:n,loop:r=!1,dir:o,currentTabStopId:l,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:u,onEntryFocus:h,preventScrollOnEntryFocus:f=!1,...p}=s,y=T.useRef(null),x=or(e,y),_=cw(o),[b,w]=np({prop:l,defaultProp:c??null,onChange:u,caller:va}),[E,A]=T.useState(!1),C=Fi(h),k=uw(t),N=T.useRef(!1),[R,D]=T.useState(0);return T.useEffect(()=>{const j=y.current;if(j)return j.addEventListener(jh,C),()=>j.removeEventListener(jh,C)},[C]),g.jsx(Pk,{scope:t,orientation:n,dir:_,loop:r,currentTabStopId:b,onItemFocus:T.useCallback(j=>w(j),[w]),onItemShiftTab:T.useCallback(()=>A(!0),[]),onFocusableItemAdd:T.useCallback(()=>D(j=>j+1),[]),onFocusableItemRemove:T.useCallback(()=>D(j=>j-1),[]),children:g.jsx(qt.div,{tabIndex:E||R===0?-1:0,"data-orientation":n,...p,ref:x,style:{outline:"none",...s.style},onMouseDown:Dt(s.onMouseDown,()=>{N.current=!0}),onFocus:Dt(s.onFocus,j=>{const z=!N.current;if(j.target===j.currentTarget&&z&&!E){const q=new CustomEvent(jh,Ck);if(j.currentTarget.dispatchEvent(q),!q.defaultPrevented){const Y=k().filter(G=>G.focusable),ne=Y.find(G=>G.active),ie=Y.find(G=>G.id===b),ae=[ne,ie,...Y].filter(Boolean).map(G=>G.ref.current);mw(ae,f)}}N.current=!1}),onBlur:Dt(s.onBlur,()=>A(!1))})})}),fw="RovingFocusGroupItem",pw=T.forwardRef((s,e)=>{const{__scopeRovingFocusGroup:t,focusable:n=!0,active:r=!1,tabStopId:o,children:l,...c}=s,u=Qo(),h=o||u,f=Rk(fw,t),p=f.currentTabStopId===h,y=uw(t),{onFocusableItemAdd:x,onFocusableItemRemove:_,currentTabStopId:b}=f;return T.useEffect(()=>{if(n)return x(),()=>_()},[n,x,_]),g.jsx(bf.ItemSlot,{scope:t,id:h,focusable:n,active:r,children:g.jsx(qt.span,{tabIndex:p?0:-1,"data-orientation":f.orientation,...c,ref:e,onMouseDown:Dt(s.onMouseDown,w=>{n?f.onItemFocus(h):w.preventDefault()}),onFocus:Dt(s.onFocus,()=>f.onItemFocus(h)),onKeyDown:Dt(s.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){f.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const E=Mk(w,f.orientation,f.dir);if(E!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let C=y().filter(k=>k.focusable).map(k=>k.ref.current);if(E==="last")C.reverse();else if(E==="prev"||E==="next"){E==="prev"&&C.reverse();const k=C.indexOf(w.currentTarget);C=f.loop?Lk(C,k+1):C.slice(k+1)}setTimeout(()=>mw(C))}}),children:typeof l=="function"?l({isCurrentTabStop:p,hasTabStop:b!=null}):l})})});pw.displayName=fw;var Dk={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Ok(s,e){return e!=="rtl"?s:s==="ArrowLeft"?"ArrowRight":s==="ArrowRight"?"ArrowLeft":s}function Mk(s,e,t){const n=Ok(s.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return Dk[n]}function mw(s,e=!1){const t=document.activeElement;for(const n of s)if(n===t||(n.focus({preventScroll:e}),document.activeElement!==t))return}function Lk(s,e){return s.map((t,n)=>s[(e+n)%s.length])}var Ik=hw,Fk=pw;function jk(s,e){return T.useReducer((t,n)=>e[t][n]??t,s)}var ba=s=>{const{present:e,children:t}=s,n=Bk(e),r=typeof t=="function"?t({present:n.isPresent}):T.Children.only(t),o=or(n.ref,Uk(r));return typeof t=="function"||n.isPresent?T.cloneElement(r,{ref:o}):null};ba.displayName="Presence";function Bk(s){const[e,t]=T.useState(),n=T.useRef(null),r=T.useRef(s),o=T.useRef("none"),l=s?"mounted":"unmounted",[c,u]=jk(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return T.useEffect(()=>{const h=_c(n.current);o.current=c==="mounted"?h:"none"},[c]),ia(()=>{const h=n.current,f=r.current;if(f!==s){const y=o.current,x=_c(h);s?u("MOUNT"):x==="none"||h?.display==="none"?u("UNMOUNT"):u(f&&y!==x?"ANIMATION_OUT":"UNMOUNT"),r.current=s}},[s,u]),ia(()=>{if(e){let h;const f=e.ownerDocument.defaultView??window,p=x=>{const b=_c(n.current).includes(CSS.escape(x.animationName));if(x.target===e&&b&&(u("ANIMATION_END"),!r.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",h=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},y=x=>{x.target===e&&(o.current=_c(n.current))};return e.addEventListener("animationstart",y),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{f.clearTimeout(h),e.removeEventListener("animationstart",y),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:T.useCallback(h=>{n.current=h?getComputedStyle(h):null,t(h)},[])}}function _c(s){return s?.animationName||"none"}function Uk(s){let e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?s.ref:(e=Object.getOwnPropertyDescriptor(s,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?s.props.ref:s.props.ref||s.ref)}var yu="Tabs",[zk]=gu(yu,[dw]),gw=dw(),[Hk,rp]=zk(yu),yw=T.forwardRef((s,e)=>{const{__scopeTabs:t,value:n,onValueChange:r,defaultValue:o,orientation:l="horizontal",dir:c,activationMode:u="automatic",...h}=s,f=cw(c),[p,y]=np({prop:n,onChange:r,defaultProp:o??"",caller:yu});return g.jsx(Hk,{scope:t,baseId:Qo(),value:p,onValueChange:y,orientation:l,dir:f,activationMode:u,children:g.jsx(qt.div,{dir:f,"data-orientation":l,...h,ref:e})})});yw.displayName=yu;var vw="TabsList",bw=T.forwardRef((s,e)=>{const{__scopeTabs:t,loop:n=!0,...r}=s,o=rp(vw,t),l=gw(t);return g.jsx(Ik,{asChild:!0,...l,orientation:o.orientation,dir:o.dir,loop:n,children:g.jsx(qt.div,{role:"tablist","aria-orientation":o.orientation,...r,ref:e})})});bw.displayName=vw;var ww="TabsTrigger",xw=T.forwardRef((s,e)=>{const{__scopeTabs:t,value:n,disabled:r=!1,...o}=s,l=rp(ww,t),c=gw(t),u=Ew(l.baseId,n),h=Aw(l.baseId,n),f=n===l.value;return g.jsx(Fk,{asChild:!0,...c,focusable:!r,active:f,children:g.jsx(qt.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":h,"data-state":f?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:u,...o,ref:e,onMouseDown:Dt(s.onMouseDown,p=>{!r&&p.button===0&&p.ctrlKey===!1?l.onValueChange(n):p.preventDefault()}),onKeyDown:Dt(s.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&l.onValueChange(n)}),onFocus:Dt(s.onFocus,()=>{const p=l.activationMode!=="manual";!f&&!r&&p&&l.onValueChange(n)})})})});xw.displayName=ww;var Sw="TabsContent",_w=T.forwardRef((s,e)=>{const{__scopeTabs:t,value:n,forceMount:r,children:o,...l}=s,c=rp(Sw,t),u=Ew(c.baseId,n),h=Aw(c.baseId,n),f=n===c.value,p=T.useRef(f);return T.useEffect(()=>{const y=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(y)},[]),g.jsx(ba,{present:r||f,children:({present:y})=>g.jsx(qt.div,{"data-state":f?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":u,hidden:!y,id:h,tabIndex:0,...l,ref:e,style:{...s.style,animationDuration:p.current?"0s":void 0},children:y&&o})})});_w.displayName=Sw;function Ew(s,e){return`${s}-trigger-${e}`}function Aw(s,e){return`${s}-content-${e}`}var Wk=yw,Cw=bw,Tw=xw,kw=_w;const $k=Wk,Pw=T.forwardRef(({className:s,...e},t)=>g.jsx(Cw,{ref:t,className:Xe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...e}));Pw.displayName=Cw.displayName;const Vo=T.forwardRef(({className:s,...e},t)=>g.jsx(Tw,{ref:t,className:Xe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...e}));Vo.displayName=Tw.displayName;const qo=T.forwardRef(({className:s,...e},t)=>g.jsx(kw,{ref:t,className:Xe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...e}));qo.displayName=kw.displayName;const ar=Object.create(null);ar.open="0";ar.close="1";ar.ping="2";ar.pong="3";ar.message="4";ar.upgrade="5";ar.noop="6";const $c=Object.create(null);Object.keys(ar).forEach(s=>{$c[ar[s]]=s});const wf={type:"error",data:"parser error"},Rw=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Nw=typeof ArrayBuffer=="function",Dw=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer,sp=({type:s,data:e},t,n)=>Rw&&e instanceof Blob?t?n(e):e0(e,n):Nw&&(e instanceof ArrayBuffer||Dw(e))?t?n(e):e0(new Blob([e]),n):n(ar[s]+(e||"")),e0=(s,e)=>{const t=new FileReader;return t.onload=function(){const n=t.result.split(",")[1];e("b"+(n||""))},t.readAsDataURL(s)};function t0(s){return s instanceof Uint8Array?s:s instanceof ArrayBuffer?new Uint8Array(s):new Uint8Array(s.buffer,s.byteOffset,s.byteLength)}let Bh;function Vk(s,e){if(Rw&&s.data instanceof Blob)return s.data.arrayBuffer().then(t0).then(e);if(Nw&&(s.data instanceof ArrayBuffer||Dw(s.data)))return e(t0(s.data));sp(s,!1,t=>{Bh||(Bh=new TextEncoder),e(Bh.encode(t))})}const n0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Go=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let s=0;s<n0.length;s++)Go[n0.charCodeAt(s)]=s;const qk=s=>{let e=s.length*.75,t=s.length,n,r=0,o,l,c,u;s[s.length-1]==="="&&(e--,s[s.length-2]==="="&&e--);const h=new ArrayBuffer(e),f=new Uint8Array(h);for(n=0;n<t;n+=4)o=Go[s.charCodeAt(n)],l=Go[s.charCodeAt(n+1)],c=Go[s.charCodeAt(n+2)],u=Go[s.charCodeAt(n+3)],f[r++]=o<<2|l>>4,f[r++]=(l&15)<<4|c>>2,f[r++]=(c&3)<<6|u&63;return h},Gk=typeof ArrayBuffer=="function",ip=(s,e)=>{if(typeof s!="string")return{type:"message",data:Ow(s,e)};const t=s.charAt(0);return t==="b"?{type:"message",data:Yk(s.substring(1),e)}:$c[t]?s.length>1?{type:$c[t],data:s.substring(1)}:{type:$c[t]}:wf},Yk=(s,e)=>{if(Gk){const t=qk(s);return Ow(t,e)}else return{base64:!0,data:s}},Ow=(s,e)=>e==="blob"?s instanceof Blob?s:new Blob([s]):s instanceof ArrayBuffer?s:s.buffer,Mw="",Xk=(s,e)=>{const t=s.length,n=new Array(t);let r=0;s.forEach((o,l)=>{sp(o,!1,c=>{n[l]=c,++r===t&&e(n.join(Mw))})})},Kk=(s,e)=>{const t=s.split(Mw),n=[];for(let r=0;r<t.length;r++){const o=ip(t[r],e);if(n.push(o),o.type==="error")break}return n};function Qk(){return new TransformStream({transform(s,e){Vk(s,t=>{const n=t.length;let r;if(n<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,n);else if(n<65536){r=new Uint8Array(3);const o=new DataView(r.buffer);o.setUint8(0,126),o.setUint16(1,n)}else{r=new Uint8Array(9);const o=new DataView(r.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(n))}s.data&&typeof s.data!="string"&&(r[0]|=128),e.enqueue(r),e.enqueue(t)})}})}let Uh;function Ec(s){return s.reduce((e,t)=>e+t.length,0)}function Ac(s,e){if(s[0].length===e)return s.shift();const t=new Uint8Array(e);let n=0;for(let r=0;r<e;r++)t[r]=s[0][n++],n===s[0].length&&(s.shift(),n=0);return s.length&&n<s[0].length&&(s[0]=s[0].slice(n)),t}function Jk(s,e){Uh||(Uh=new TextDecoder);const t=[];let n=0,r=-1,o=!1;return new TransformStream({transform(l,c){for(t.push(l);;){if(n===0){if(Ec(t)<1)break;const u=Ac(t,1);o=(u[0]&128)===128,r=u[0]&127,r<126?n=3:r===126?n=1:n=2}else if(n===1){if(Ec(t)<2)break;const u=Ac(t,2);r=new DataView(u.buffer,u.byteOffset,u.length).getUint16(0),n=3}else if(n===2){if(Ec(t)<8)break;const u=Ac(t,8),h=new DataView(u.buffer,u.byteOffset,u.length),f=h.getUint32(0);if(f>Math.pow(2,21)-1){c.enqueue(wf);break}r=f*Math.pow(2,32)+h.getUint32(4),n=3}else{if(Ec(t)<r)break;const u=Ac(t,r);c.enqueue(ip(o?u:Uh.decode(u),e)),n=0}if(r===0||r>s){c.enqueue(wf);break}}}})}const Lw=4;function gt(s){if(s)return Zk(s)}function Zk(s){for(var e in gt.prototype)s[e]=gt.prototype[e];return s}gt.prototype.on=gt.prototype.addEventListener=function(s,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+s]=this._callbacks["$"+s]||[]).push(e),this};gt.prototype.once=function(s,e){function t(){this.off(s,t),e.apply(this,arguments)}return t.fn=e,this.on(s,t),this};gt.prototype.off=gt.prototype.removeListener=gt.prototype.removeAllListeners=gt.prototype.removeEventListener=function(s,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+s];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+s],this;for(var n,r=0;r<t.length;r++)if(n=t[r],n===e||n.fn===e){t.splice(r,1);break}return t.length===0&&delete this._callbacks["$"+s],this};gt.prototype.emit=function(s){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+s],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(t){t=t.slice(0);for(var n=0,r=t.length;n<r;++n)t[n].apply(this,e)}return this};gt.prototype.emitReserved=gt.prototype.emit;gt.prototype.listeners=function(s){return this._callbacks=this._callbacks||{},this._callbacks["$"+s]||[]};gt.prototype.hasListeners=function(s){return!!this.listeners(s).length};const vu=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),An=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),eP="arraybuffer";function Iw(s,...e){return e.reduce((t,n)=>(s.hasOwnProperty(n)&&(t[n]=s[n]),t),{})}const tP=An.setTimeout,nP=An.clearTimeout;function bu(s,e){e.useNativeTimers?(s.setTimeoutFn=tP.bind(An),s.clearTimeoutFn=nP.bind(An)):(s.setTimeoutFn=An.setTimeout.bind(An),s.clearTimeoutFn=An.clearTimeout.bind(An))}const rP=1.33;function sP(s){return typeof s=="string"?iP(s):Math.ceil((s.byteLength||s.size)*rP)}function iP(s){let e=0,t=0;for(let n=0,r=s.length;n<r;n++)e=s.charCodeAt(n),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(n++,t+=4);return t}function Fw(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function oP(s){let e="";for(let t in s)s.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(s[t]));return e}function aP(s){let e={},t=s.split("&");for(let n=0,r=t.length;n<r;n++){let o=t[n].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}class lP extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class op extends gt{constructor(e){super(),this.writable=!1,bu(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new lP(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=ip(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=oP(e);return t.length?"?"+t:""}}class cP extends op{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||t()})),this.writable||(n++,this.once("drain",function(){--n||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};Kk(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Xk(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=Fw()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let jw=!1;try{jw=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const uP=jw;function dP(){}class hP extends cP{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let n=location.port;n||(n=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(r,o)=>{this.onError("xhr post error",r,o)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,n)=>{this.onError("xhr poll error",t,n)}),this.pollXhr=e}}class ir extends gt{constructor(e,t,n){super(),this.createRequest=e,bu(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var e;const t=Iw(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let r in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(r)&&n.setRequestHeader(r,this._opts.extraHeaders[r])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var r;n.readyState===3&&((r=this._opts.cookieJar)===null||r===void 0||r.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(r){this.setTimeoutFn(()=>{this._onError(r)},0);return}typeof document<"u"&&(this._index=ir.requestsCount++,ir.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=dP,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete ir.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}ir.requestsCount=0;ir.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",r0);else if(typeof addEventListener=="function"){const s="onpagehide"in An?"pagehide":"unload";addEventListener(s,r0,!1)}}function r0(){for(let s in ir.requests)ir.requests.hasOwnProperty(s)&&ir.requests[s].abort()}const fP=(function(){const s=Bw({xdomain:!1});return s&&s.responseType!==null})();class pP extends hP{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=fP&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new ir(Bw,this.uri(),e)}}function Bw(s){const e=s.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||uP))return new XMLHttpRequest}catch{}if(!e)try{return new An[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Uw=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class mP extends op{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=Uw?{}:Iw(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(r){return this.emitReserved("error",r)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;sp(n,this.supportsBinary,o=>{try{this.doWrite(n,o)}catch{}r&&vu(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=Fw()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const zh=An.WebSocket||An.MozWebSocket;class gP extends mP{createSocket(e,t,n){return Uw?new zh(e,t,n):t?new zh(e,t):new zh(e)}doWrite(e,t){this.ws.send(t)}}class yP extends op{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=Jk(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),r=Qk();r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();const o=()=>{n.read().then(({done:c,value:u})=>{c||(this.onPacket(u),o())}).catch(c=>{})};o();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;this._writer.write(n).then(()=>{r&&vu(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const vP={websocket:gP,webtransport:yP,polling:pP},bP=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,wP=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function xf(s){if(s.length>8e3)throw"URI too long";const e=s,t=s.indexOf("["),n=s.indexOf("]");t!=-1&&n!=-1&&(s=s.substring(0,t)+s.substring(t,n).replace(/:/g,";")+s.substring(n,s.length));let r=bP.exec(s||""),o={},l=14;for(;l--;)o[wP[l]]=r[l]||"";return t!=-1&&n!=-1&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=xP(o,o.path),o.queryKey=SP(o,o.query),o}function xP(s,e){const t=/\/{2,9}/g,n=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&n.splice(0,1),e.slice(-1)=="/"&&n.splice(n.length-1,1),n}function SP(s,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,r,o){r&&(t[r]=o)}),t}const Sf=typeof addEventListener=="function"&&typeof removeEventListener=="function",Vc=[];Sf&&addEventListener("offline",()=>{Vc.forEach(s=>s())},!1);class ts extends gt{constructor(e,t){if(super(),this.binaryType=eP,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const n=xf(e);t.hostname=n.host,t.secure=n.protocol==="https"||n.protocol==="wss",t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=xf(t.host).host);bu(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(n=>{const r=n.prototype.name;this.transports.push(r),this._transportsByName[r]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=aP(this.opts.query)),Sf&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Vc.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=Lw,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&ts.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",ts.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let n=0;n<this.writeBuffer.length;n++){const r=this.writeBuffer[n].data;if(r&&(t+=sP(r)),n>0&&t>this._maxPayload)return this.writeBuffer.slice(0,n);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,vu(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,r){if(typeof t=="function"&&(r=t,t=void 0),typeof n=="function"&&(r=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const o={type:e,data:t,options:n};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(ts.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Sf&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=Vc.indexOf(this._offlineEventListener);n!==-1&&Vc.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}ts.protocol=Lw;class _P extends ts{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;ts.priorWebsocketSuccess=!1;const r=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",p=>{if(!n)if(p.type==="pong"&&p.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;ts.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(f(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const y=new Error("probe error");y.transport=t.name,this.emitReserved("upgradeError",y)}}))};function o(){n||(n=!0,f(),t.close(),t=null)}const l=p=>{const y=new Error("probe error: "+p);y.transport=t.name,o(),this.emitReserved("upgradeError",y)};function c(){l("transport closed")}function u(){l("socket closed")}function h(p){t&&p.name!==t.name&&o()}const f=()=>{t.removeListener("open",r),t.removeListener("error",l),t.removeListener("close",c),this.off("close",u),this.off("upgrading",h)};t.once("open",r),t.once("error",l),t.once("close",c),this.once("close",u),this.once("upgrading",h),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{n||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}let EP=class extends _P{constructor(e,t={}){const n=typeof e=="object"?e:t;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(r=>vP[r]).filter(r=>!!r)),super(e,n)}};function AP(s,e="",t){let n=s;t=t||typeof location<"u"&&location,s==null&&(s=t.protocol+"//"+t.host),typeof s=="string"&&(s.charAt(0)==="/"&&(s.charAt(1)==="/"?s=t.protocol+s:s=t.host+s),/^(https?|wss?):\/\//.test(s)||(typeof t<"u"?s=t.protocol+"//"+s:s="https://"+s),n=xf(s)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const o=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+o+":"+n.port+e,n.href=n.protocol+"://"+o+(t&&t.port===n.port?"":":"+n.port),n}const CP=typeof ArrayBuffer=="function",TP=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s.buffer instanceof ArrayBuffer,zw=Object.prototype.toString,kP=typeof Blob=="function"||typeof Blob<"u"&&zw.call(Blob)==="[object BlobConstructor]",PP=typeof File=="function"||typeof File<"u"&&zw.call(File)==="[object FileConstructor]";function ap(s){return CP&&(s instanceof ArrayBuffer||TP(s))||kP&&s instanceof Blob||PP&&s instanceof File}function qc(s,e){if(!s||typeof s!="object")return!1;if(Array.isArray(s)){for(let t=0,n=s.length;t<n;t++)if(qc(s[t]))return!0;return!1}if(ap(s))return!0;if(s.toJSON&&typeof s.toJSON=="function"&&arguments.length===1)return qc(s.toJSON(),!0);for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t)&&qc(s[t]))return!0;return!1}function RP(s){const e=[],t=s.data,n=s;return n.data=_f(t,e),n.attachments=e.length,{packet:n,buffers:e}}function _f(s,e){if(!s)return s;if(ap(s)){const t={_placeholder:!0,num:e.length};return e.push(s),t}else if(Array.isArray(s)){const t=new Array(s.length);for(let n=0;n<s.length;n++)t[n]=_f(s[n],e);return t}else if(typeof s=="object"&&!(s instanceof Date)){const t={};for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=_f(s[n],e));return t}return s}function NP(s,e){return s.data=Ef(s.data,e),delete s.attachments,s}function Ef(s,e){if(!s)return s;if(s&&s._placeholder===!0){if(typeof s.num=="number"&&s.num>=0&&s.num<e.length)return e[s.num];throw new Error("illegal attachments")}else if(Array.isArray(s))for(let t=0;t<s.length;t++)s[t]=Ef(s[t],e);else if(typeof s=="object")for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&(s[t]=Ef(s[t],e));return s}const Hw=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],DP=5;var Ne;(function(s){s[s.CONNECT=0]="CONNECT",s[s.DISCONNECT=1]="DISCONNECT",s[s.EVENT=2]="EVENT",s[s.ACK=3]="ACK",s[s.CONNECT_ERROR=4]="CONNECT_ERROR",s[s.BINARY_EVENT=5]="BINARY_EVENT",s[s.BINARY_ACK=6]="BINARY_ACK"})(Ne||(Ne={}));class OP{constructor(e){this.replacer=e}encode(e){return(e.type===Ne.EVENT||e.type===Ne.ACK)&&qc(e)?this.encodeAsBinary({type:e.type===Ne.EVENT?Ne.BINARY_EVENT:Ne.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===Ne.BINARY_EVENT||e.type===Ne.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=RP(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}class lp extends gt{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===Ne.BINARY_EVENT;n||t.type===Ne.BINARY_ACK?(t.type=n?Ne.EVENT:Ne.ACK,this.reconstructor=new MP(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(ap(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(Ne[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Ne.BINARY_EVENT||n.type===Ne.BINARY_ACK){const o=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const l=e.substring(o,t);if(l!=Number(l)||e.charAt(t)!=="-")throw new Error("Illegal attachments");n.attachments=Number(l)}if(e.charAt(t+1)==="/"){const o=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););n.nsp=e.substring(o,t)}else n.nsp="/";const r=e.charAt(t+1);if(r!==""&&Number(r)==r){const o=t+1;for(;++t;){const l=e.charAt(t);if(l==null||Number(l)!=l){--t;break}if(t===e.length)break}n.id=Number(e.substring(o,t+1))}if(e.charAt(++t)){const o=this.tryParse(e.substr(t));if(lp.isPayloadValid(n.type,o))n.data=o;else throw new Error("invalid payload")}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case Ne.CONNECT:return tu(t);case Ne.DISCONNECT:return t===void 0;case Ne.CONNECT_ERROR:return typeof t=="string"||tu(t);case Ne.EVENT:case Ne.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&Hw.indexOf(t[0])===-1);case Ne.ACK:case Ne.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class MP{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=NP(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function LP(s){return typeof s=="string"}const IP=Number.isInteger||function(s){return typeof s=="number"&&isFinite(s)&&Math.floor(s)===s};function FP(s){return s===void 0||IP(s)}function tu(s){return Object.prototype.toString.call(s)==="[object Object]"}function jP(s,e){switch(s){case Ne.CONNECT:return e===void 0||tu(e);case Ne.DISCONNECT:return e===void 0;case Ne.EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&Hw.indexOf(e[0])===-1);case Ne.ACK:return Array.isArray(e);case Ne.CONNECT_ERROR:return typeof e=="string"||tu(e);default:return!1}}function BP(s){return LP(s.nsp)&&FP(s.id)&&jP(s.type,s.data)}const UP=Object.freeze(Object.defineProperty({__proto__:null,Decoder:lp,Encoder:OP,get PacketType(){return Ne},isPacketValid:BP,protocol:DP},Symbol.toStringTag,{value:"Module"}));function Bn(s,e,t){return s.on(e,t),function(){s.off(e,t)}}const zP=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Ww extends gt{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Bn(e,"open",this.onopen.bind(this)),Bn(e,"packet",this.onpacket.bind(this)),Bn(e,"error",this.onerror.bind(this)),Bn(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var n,r,o;if(zP.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const l={type:Ne.EVENT,data:t};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const f=this.ids++,p=t.pop();this._registerAckCallback(f,p),l.id=f}const c=(r=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||r===void 0?void 0:r.writable,u=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!c||(u?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(e,t){var n;const r=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(r===void 0){this.acks[e]=t;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===e&&this.sendBuffer.splice(c,1);t.call(this,new Error("operation has timed out"))},r),l=(...c)=>{this.io.clearTimeoutFn(o),t.apply(this,c)};l.withError=!0,this.acks[e]=l}emitWithAck(e,...t){return new Promise((n,r)=>{const o=(l,c)=>l?r(l):n(c);o.withError=!0,t.push(o),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((r,...o)=>(this._queue[0],r!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(r)):(this._queue.shift(),t&&t(null,...o)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Ne.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(n=>String(n.id)===e)){const n=this.acks[e];delete this.acks[e],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Ne.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ne.EVENT:case Ne.BINARY_EVENT:this.onevent(e);break;case Ne.ACK:case Ne.BINARY_ACK:this.onack(e);break;case Ne.DISCONNECT:this.ondisconnect();break;case Ne.CONNECT_ERROR:this.destroy();const n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(...r){n||(n=!0,t.packet({type:Ne.ACK,id:e,data:r}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ne.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function qi(s){s=s||{},this.ms=s.min||100,this.max=s.max||1e4,this.factor=s.factor||2,this.jitter=s.jitter>0&&s.jitter<=1?s.jitter:0,this.attempts=0}qi.prototype.duration=function(){var s=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*s);s=(Math.floor(e*10)&1)==0?s-t:s+t}return Math.min(s,this.max)|0};qi.prototype.reset=function(){this.attempts=0};qi.prototype.setMin=function(s){this.ms=s};qi.prototype.setMax=function(s){this.max=s};qi.prototype.setJitter=function(s){this.jitter=s};class Af extends gt{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,bu(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((n=t.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new qi({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const r=t.parser||UP;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new EP(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const r=Bn(t,"open",function(){n.onopen(),e&&e()}),o=c=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",c),e?e(c):this.maybeReconnectOnOpen()},l=Bn(t,"error",o);if(this._timeout!==!1){const c=this._timeout,u=this.setTimeoutFn(()=>{r(),o(new Error("timeout")),t.close()},c);this.opts.autoUnref&&u.unref(),this.subs.push(()=>{this.clearTimeoutFn(u)})}return this.subs.push(r),this.subs.push(l),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Bn(e,"ping",this.onping.bind(this)),Bn(e,"data",this.ondata.bind(this)),Bn(e,"error",this.onerror.bind(this)),Bn(e,"close",this.onclose.bind(this)),Bn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){vu(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new Ww(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t)if(this.nsps[n].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(r=>{r?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",r)):e.onreconnect()}))},t);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Bo={};function Jo(s,e){typeof s=="object"&&(e=s,s=void 0),e=e||{};const t=AP(s,e.path||"/socket.io"),n=t.source,r=t.id,o=t.path,l=Bo[r]&&o in Bo[r].nsps,c=e.forceNew||e["force new connection"]||e.multiplex===!1||l;let u;return c?u=new Af(n,e):(Bo[r]||(Bo[r]=new Af(n,e)),u=Bo[r]),t.query&&!e.query&&(e.query=t.queryKey),u.socket(t.path,e)}Object.assign(Jo,{Manager:Af,Socket:Ww,io:Jo,connect:Jo});function HP(s){const[e,t]=T.useState([]),[n,r]=T.useState(!0),[o,l]=T.useState(null),c=T.useRef(null),u=async()=>{try{l(null),r(!0);const h=await fetch("/api/delivery-runs/active");if(h.ok){const f=await h.json();t(f)}else console.warn("HTTP fallback failed:",h.status),t([]);r(!1)}catch(h){console.error("Failed to fetch delivery runs via HTTP:",h),l("Failed to load delivery runs"),r(!1)}};return T.useEffect(()=>{u();const h=`${window.location.protocol}//${window.location.host}`;let f;try{f=Jo(h,{path:"/socket.io",transports:["websocket","polling"],reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3}),c.current=f}catch(p){console.debug("Socket.IO connection failed (expected if backend not running)",p);return}return f.on("connect",()=>{console.debug("DeliveryRuns Socket.IO connected"),l(null),f.emit("join",{room:"delivery-runs"})}),f.on("active_runs",p=>{try{p.type==="active_runs"&&(t(p.data||[]),r(!1))}catch(y){console.warn("Failed to parse Socket.IO message",y)}}),f.on("disconnect",()=>{console.debug("DeliveryRuns Socket.IO disconnected")}),f.on("connect_error",p=>{console.debug("DeliveryRuns Socket.IO error (expected if backend not running)",p),l("Socket.IO connection failed - using cached data")}),()=>{try{f.disconnect()}catch{}}},[s]),{runs:e,loading:n,error:o,refetch:u}}function WP(){const{runs:s,loading:e,error:t}=HP();return g.jsxs("div",{className:"p-4",children:[t&&g.jsx("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded text-sm text-yellow-800",children:t}),e?g.jsx("div",{className:"text-sm text-gray-600",children:"Loading delivery runs..."}):s.length===0?g.jsx("div",{className:"text-sm text-gray-600",children:"No active delivery runs"}):g.jsx("div",{className:"grid grid-cols-1 gap-4",children:s.map(n=>g.jsx(Cn,{to:`/delivery/runs/${n.id}`,children:g.jsxs("div",{className:"border p-3 rounded hover:bg-gray-50 cursor-pointer transition-colors bg-white",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("div",{children:[g.jsx("div",{className:"text-sm text-gray-500",children:"Run"}),g.jsx("div",{className:"font-medium",children:n.name})]}),g.jsxs("div",{className:"text-right",children:[g.jsx("div",{className:"text-sm text-gray-500",children:"Vehicle"}),g.jsx("div",{className:"font-medium capitalize",children:n.vehicle.replace("_"," ")})]})]}),g.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-2 text-sm text-gray-700",children:[g.jsxs("div",{children:[g.jsx("div",{className:"text-xs text-gray-500",children:"Runner"}),g.jsx("div",{children:n.runner})]}),g.jsxs("div",{children:[g.jsx("div",{className:"text-xs text-gray-500",children:"Status"}),g.jsx("div",{children:n.status})]}),g.jsxs("div",{children:[g.jsx("div",{className:"text-xs text-gray-500",children:"Orders"}),g.jsx("div",{children:n.order_ids.length})]})]})]})},n.id))})]})}const wu={createRun:async s=>(await ze.post("/delivery-runs",s)).data,getRun:async s=>(await ze.get(`/delivery-runs/${s}`)).data,finishRun:async(s,e=!0)=>(await ze.put(`/delivery-runs/${s}/finish`,{create_remainders:e})).data,getRuns:async s=>{const e=new URLSearchParams;return s&&s.forEach(n=>e.append("status",n)),(await ze.get("/delivery-runs",{params:e})).data}};function $P(s,e=globalThis?.document){const t=Fi(s);T.useEffect(()=>{const n=r=>{r.key==="Escape"&&t(r)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[t,e])}var VP="DismissableLayer",Cf="dismissableLayer.update",qP="dismissableLayer.pointerDownOutside",GP="dismissableLayer.focusOutside",s0,$w=T.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Vw=T.forwardRef((s,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:n,onPointerDownOutside:r,onFocusOutside:o,onInteractOutside:l,onDismiss:c,...u}=s,h=T.useContext($w),[f,p]=T.useState(null),y=f?.ownerDocument??globalThis?.document,[,x]=T.useState({}),_=or(e,D=>p(D)),b=Array.from(h.layers),[w]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),E=b.indexOf(w),A=f?b.indexOf(f):-1,C=h.layersWithOutsidePointerEventsDisabled.size>0,k=A>=E,N=KP(D=>{const j=D.target,z=[...h.branches].some(q=>q.contains(j));!k||z||(r?.(D),l?.(D),D.defaultPrevented||c?.())},y),R=QP(D=>{const j=D.target;[...h.branches].some(q=>q.contains(j))||(o?.(D),l?.(D),D.defaultPrevented||c?.())},y);return $P(D=>{A===h.layers.size-1&&(n?.(D),!D.defaultPrevented&&c&&(D.preventDefault(),c()))},y),T.useEffect(()=>{if(f)return t&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(s0=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(f)),h.layers.add(f),i0(),()=>{t&&h.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=s0)}},[f,y,t,h]),T.useEffect(()=>()=>{f&&(h.layers.delete(f),h.layersWithOutsidePointerEventsDisabled.delete(f),i0())},[f,h]),T.useEffect(()=>{const D=()=>x({});return document.addEventListener(Cf,D),()=>document.removeEventListener(Cf,D)},[]),g.jsx(qt.div,{...u,ref:_,style:{pointerEvents:C?k?"auto":"none":void 0,...s.style},onFocusCapture:Dt(s.onFocusCapture,R.onFocusCapture),onBlurCapture:Dt(s.onBlurCapture,R.onBlurCapture),onPointerDownCapture:Dt(s.onPointerDownCapture,N.onPointerDownCapture)})});Vw.displayName=VP;var YP="DismissableLayerBranch",XP=T.forwardRef((s,e)=>{const t=T.useContext($w),n=T.useRef(null),r=or(e,n);return T.useEffect(()=>{const o=n.current;if(o)return t.branches.add(o),()=>{t.branches.delete(o)}},[t.branches]),g.jsx(qt.div,{...s,ref:r})});XP.displayName=YP;function KP(s,e=globalThis?.document){const t=Fi(s),n=T.useRef(!1),r=T.useRef(()=>{});return T.useEffect(()=>{const o=c=>{if(c.target&&!n.current){let u=function(){qw(qP,t,h,{discrete:!0})};const h={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=u,e.addEventListener("click",r.current,{once:!0})):u()}else e.removeEventListener("click",r.current);n.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",o),e.removeEventListener("click",r.current)}},[e,t]),{onPointerDownCapture:()=>n.current=!0}}function QP(s,e=globalThis?.document){const t=Fi(s),n=T.useRef(!1);return T.useEffect(()=>{const r=o=>{o.target&&!n.current&&qw(GP,t,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,t]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function i0(){const s=new CustomEvent(Cf);document.dispatchEvent(s)}function qw(s,e,t,{discrete:n}){const r=t.originalEvent.target,o=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:t});e&&r.addEventListener(s,e,{once:!0}),n?xk(r,o):r.dispatchEvent(o)}var Hh="focusScope.autoFocusOnMount",Wh="focusScope.autoFocusOnUnmount",o0={bubbles:!1,cancelable:!0},JP="FocusScope",Gw=T.forwardRef((s,e)=>{const{loop:t=!1,trapped:n=!1,onMountAutoFocus:r,onUnmountAutoFocus:o,...l}=s,[c,u]=T.useState(null),h=Fi(r),f=Fi(o),p=T.useRef(null),y=or(e,b=>u(b)),x=T.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;T.useEffect(()=>{if(n){let b=function(C){if(x.paused||!c)return;const k=C.target;c.contains(k)?p.current=k:Xr(p.current,{select:!0})},w=function(C){if(x.paused||!c)return;const k=C.relatedTarget;k!==null&&(c.contains(k)||Xr(p.current,{select:!0}))},E=function(C){if(document.activeElement===document.body)for(const N of C)N.removedNodes.length>0&&Xr(c)};document.addEventListener("focusin",b),document.addEventListener("focusout",w);const A=new MutationObserver(E);return c&&A.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",w),A.disconnect()}}},[n,c,x.paused]),T.useEffect(()=>{if(c){l0.add(x);const b=document.activeElement;if(!c.contains(b)){const E=new CustomEvent(Hh,o0);c.addEventListener(Hh,h),c.dispatchEvent(E),E.defaultPrevented||(ZP(sR(Yw(c)),{select:!0}),document.activeElement===b&&Xr(c))}return()=>{c.removeEventListener(Hh,h),setTimeout(()=>{const E=new CustomEvent(Wh,o0);c.addEventListener(Wh,f),c.dispatchEvent(E),E.defaultPrevented||Xr(b??document.body,{select:!0}),c.removeEventListener(Wh,f),l0.remove(x)},0)}}},[c,h,f,x]);const _=T.useCallback(b=>{if(!t&&!n||x.paused)return;const w=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,E=document.activeElement;if(w&&E){const A=b.currentTarget,[C,k]=eR(A);C&&k?!b.shiftKey&&E===k?(b.preventDefault(),t&&Xr(C,{select:!0})):b.shiftKey&&E===C&&(b.preventDefault(),t&&Xr(k,{select:!0})):E===A&&b.preventDefault()}},[t,n,x.paused]);return g.jsx(qt.div,{tabIndex:-1,...l,ref:y,onKeyDown:_})});Gw.displayName=JP;function ZP(s,{select:e=!1}={}){const t=document.activeElement;for(const n of s)if(Xr(n,{select:e}),document.activeElement!==t)return}function eR(s){const e=Yw(s),t=a0(e,s),n=a0(e.reverse(),s);return[t,n]}function Yw(s){const e=[],t=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const r=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||r?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function a0(s,e){for(const t of s)if(!tR(t,{upTo:e}))return t}function tR(s,{upTo:e}){if(getComputedStyle(s).visibility==="hidden")return!0;for(;s;){if(e!==void 0&&s===e)return!1;if(getComputedStyle(s).display==="none")return!0;s=s.parentElement}return!1}function nR(s){return s instanceof HTMLInputElement&&"select"in s}function Xr(s,{select:e=!1}={}){if(s&&s.focus){const t=document.activeElement;s.focus({preventScroll:!0}),s!==t&&nR(s)&&e&&s.select()}}var l0=rR();function rR(){let s=[];return{add(e){const t=s[0];e!==t&&t?.pause(),s=c0(s,e),s.unshift(e)},remove(e){s=c0(s,e),s[0]?.resume()}}}function c0(s,e){const t=[...s],n=t.indexOf(e);return n!==-1&&t.splice(n,1),t}function sR(s){return s.filter(e=>e.tagName!=="A")}var iR="Portal",Xw=T.forwardRef((s,e)=>{const{container:t,...n}=s,[r,o]=T.useState(!1);ia(()=>o(!0),[]);const l=t||r&&globalThis?.document?.body;return l?NE.createPortal(g.jsx(qt.div,{...n,ref:e}),l):null});Xw.displayName=iR;var $h=0;function oR(){T.useEffect(()=>{const s=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",s[0]??u0()),document.body.insertAdjacentElement("beforeend",s[1]??u0()),$h++,()=>{$h===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),$h--}},[])}function u0(){const s=document.createElement("span");return s.setAttribute("data-radix-focus-guard",""),s.tabIndex=0,s.style.outline="none",s.style.opacity="0",s.style.position="fixed",s.style.pointerEvents="none",s}var Qr=function(){return Qr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Qr.apply(this,arguments)};function aR(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(t[n[r]]=s[n[r]]);return t}function lR(s,e,t){if(t||arguments.length===2)for(var n=0,r=e.length,o;n<r;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return s.concat(o||Array.prototype.slice.call(e))}var Gc="right-scroll-bar-position",Yc="width-before-scroll-bar",cR="with-scroll-bars-hidden",uR="--removed-body-scroll-bar-size";function Vh(s,e){return typeof s=="function"?s(e):s&&(s.current=e),s}function dR(s,e){var t=T.useState(function(){return{value:s,callback:e,facade:{get current(){return t.value},set current(n){var r=t.value;r!==n&&(t.value=n,t.callback(n,r))}}}})[0];return t.callback=e,t.facade}var hR=typeof window<"u"?T.useLayoutEffect:T.useEffect,d0=new WeakMap;function fR(s,e){var t=dR(null,function(n){return s.forEach(function(r){return Vh(r,n)})});return hR(function(){var n=d0.get(t);if(n){var r=new Set(n),o=new Set(s),l=t.current;r.forEach(function(c){o.has(c)||Vh(c,null)}),o.forEach(function(c){r.has(c)||Vh(c,l)})}d0.set(t,s)},[s]),t}var nu=function(){return nu=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},nu.apply(this,arguments)};function pR(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(t[n[r]]=s[n[r]]);return t}function mR(s){return s}function gR(s,e){e===void 0&&(e=mR);var t=[],n=!1,r={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:s},useMedium:function(o){var l=e(o,n);return t.push(l),function(){t=t.filter(function(c){return c!==l})}},assignSyncMedium:function(o){for(n=!0;t.length;){var l=t;t=[],l.forEach(o)}t={push:function(c){return o(c)},filter:function(){return t}}},assignMedium:function(o){n=!0;var l=[];if(t.length){var c=t;t=[],c.forEach(o),l=t}var u=function(){var f=l;l=[],f.forEach(o)},h=function(){return Promise.resolve().then(u)};h(),t={push:function(f){l.push(f),h()},filter:function(f){return l=l.filter(f),t}}}};return r}function yR(s){s===void 0&&(s={});var e=gR(null);return e.options=nu({async:!0,ssr:!1},s),e}var Kw=function(s){var e=s.sideCar,t=pR(s,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return T.createElement(n,nu({},t))};Kw.isSideCarExport=!0;function vR(s,e){return s.useMedium(e),Kw}var Qw=yR(),qh=function(){},xu=T.forwardRef(function(s,e){var t=T.useRef(null),n=T.useState({onScrollCapture:qh,onWheelCapture:qh,onTouchMoveCapture:qh}),r=n[0],o=n[1],l=s.forwardProps,c=s.children,u=s.className,h=s.removeScrollBar,f=s.enabled,p=s.shards,y=s.sideCar,x=s.noRelative,_=s.noIsolation,b=s.inert,w=s.allowPinchZoom,E=s.as,A=E===void 0?"div":E,C=s.gapMode,k=aR(s,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=y,R=fR([t,e]),D=Qr(Qr({},k),r);return T.createElement(T.Fragment,null,f&&T.createElement(N,{sideCar:Qw,removeScrollBar:h,shards:p,noRelative:x,noIsolation:_,inert:b,setCallbacks:o,allowPinchZoom:!!w,lockRef:t,gapMode:C}),l?T.cloneElement(T.Children.only(c),Qr(Qr({},D),{ref:R})):T.createElement(A,Qr({},D,{className:u,ref:R}),c))});xu.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};xu.classNames={fullWidth:Yc,zeroRight:Gc};var bR=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function wR(){if(!document)return null;var s=document.createElement("style");s.type="text/css";var e=bR();return e&&s.setAttribute("nonce",e),s}function xR(s,e){s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}function SR(s){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(s)}var _R=function(){var s=0,e=null;return{add:function(t){s==0&&(e=wR())&&(xR(e,t),SR(e)),s++},remove:function(){s--,!s&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},ER=function(){var s=_R();return function(e,t){T.useEffect(function(){return s.add(e),function(){s.remove()}},[e&&t])}},Jw=function(){var s=ER(),e=function(t){var n=t.styles,r=t.dynamic;return s(n,r),null};return e},AR={left:0,top:0,right:0,gap:0},Gh=function(s){return parseInt(s||"",10)||0},CR=function(s){var e=window.getComputedStyle(document.body),t=e[s==="padding"?"paddingLeft":"marginLeft"],n=e[s==="padding"?"paddingTop":"marginTop"],r=e[s==="padding"?"paddingRight":"marginRight"];return[Gh(t),Gh(n),Gh(r)]},TR=function(s){if(s===void 0&&(s="margin"),typeof window>"u")return AR;var e=CR(s),t=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-t+e[2]-e[0])}},kR=Jw(),Ei="data-scroll-locked",PR=function(s,e,t,n){var r=s.left,o=s.top,l=s.right,c=s.gap;return t===void 0&&(t="margin"),`
  .`.concat(cR,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(c,"px ").concat(n,`;
  }
  body[`).concat(Ei,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),t==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(n,`;
    `),t==="padding"&&"padding-right: ".concat(c,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Gc,` {
    right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(Yc,` {
    margin-right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(Gc," .").concat(Gc,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Yc," .").concat(Yc,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Ei,`] {
    `).concat(uR,": ").concat(c,`px;
  }
`)},h0=function(){var s=parseInt(document.body.getAttribute(Ei)||"0",10);return isFinite(s)?s:0},RR=function(){T.useEffect(function(){return document.body.setAttribute(Ei,(h0()+1).toString()),function(){var s=h0()-1;s<=0?document.body.removeAttribute(Ei):document.body.setAttribute(Ei,s.toString())}},[])},NR=function(s){var e=s.noRelative,t=s.noImportant,n=s.gapMode,r=n===void 0?"margin":n;RR();var o=T.useMemo(function(){return TR(r)},[r]);return T.createElement(kR,{styles:PR(o,!e,r,t?"":"!important")})},Tf=!1;if(typeof window<"u")try{var Cc=Object.defineProperty({},"passive",{get:function(){return Tf=!0,!0}});window.addEventListener("test",Cc,Cc),window.removeEventListener("test",Cc,Cc)}catch{Tf=!1}var ui=Tf?{passive:!1}:!1,DR=function(s){return s.tagName==="TEXTAREA"},Zw=function(s,e){if(!(s instanceof Element))return!1;var t=window.getComputedStyle(s);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!DR(s)&&t[e]==="visible")},OR=function(s){return Zw(s,"overflowY")},MR=function(s){return Zw(s,"overflowX")},f0=function(s,e){var t=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=ex(s,n);if(r){var o=tx(s,n),l=o[1],c=o[2];if(l>c)return!0}n=n.parentNode}while(n&&n!==t.body);return!1},LR=function(s){var e=s.scrollTop,t=s.scrollHeight,n=s.clientHeight;return[e,t,n]},IR=function(s){var e=s.scrollLeft,t=s.scrollWidth,n=s.clientWidth;return[e,t,n]},ex=function(s,e){return s==="v"?OR(e):MR(e)},tx=function(s,e){return s==="v"?LR(e):IR(e)},FR=function(s,e){return s==="h"&&e==="rtl"?-1:1},jR=function(s,e,t,n,r){var o=FR(s,window.getComputedStyle(e).direction),l=o*n,c=t.target,u=e.contains(c),h=!1,f=l>0,p=0,y=0;do{if(!c)break;var x=tx(s,c),_=x[0],b=x[1],w=x[2],E=b-w-o*_;(_||E)&&ex(s,c)&&(p+=E,y+=_);var A=c.parentNode;c=A&&A.nodeType===Node.DOCUMENT_FRAGMENT_NODE?A.host:A}while(!u&&c!==document.body||u&&(e.contains(c)||e===c));return(f&&Math.abs(p)<1||!f&&Math.abs(y)<1)&&(h=!0),h},Tc=function(s){return"changedTouches"in s?[s.changedTouches[0].clientX,s.changedTouches[0].clientY]:[0,0]},p0=function(s){return[s.deltaX,s.deltaY]},m0=function(s){return s&&"current"in s?s.current:s},BR=function(s,e){return s[0]===e[0]&&s[1]===e[1]},UR=function(s){return`
  .block-interactivity-`.concat(s,` {pointer-events: none;}
  .allow-interactivity-`).concat(s,` {pointer-events: all;}
`)},zR=0,di=[];function HR(s){var e=T.useRef([]),t=T.useRef([0,0]),n=T.useRef(),r=T.useState(zR++)[0],o=T.useState(Jw)[0],l=T.useRef(s);T.useEffect(function(){l.current=s},[s]),T.useEffect(function(){if(s.inert){document.body.classList.add("block-interactivity-".concat(r));var b=lR([s.lockRef.current],(s.shards||[]).map(m0),!0).filter(Boolean);return b.forEach(function(w){return w.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),b.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(r))})}}},[s.inert,s.lockRef.current,s.shards]);var c=T.useCallback(function(b,w){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!l.current.allowPinchZoom;var E=Tc(b),A=t.current,C="deltaX"in b?b.deltaX:A[0]-E[0],k="deltaY"in b?b.deltaY:A[1]-E[1],N,R=b.target,D=Math.abs(C)>Math.abs(k)?"h":"v";if("touches"in b&&D==="h"&&R.type==="range")return!1;var j=window.getSelection(),z=j&&j.anchorNode,q=z?z===R||z.contains(R):!1;if(q)return!1;var Y=f0(D,R);if(!Y)return!0;if(Y?N=D:(N=D==="v"?"h":"v",Y=f0(D,R)),!Y)return!1;if(!n.current&&"changedTouches"in b&&(C||k)&&(n.current=N),!N)return!0;var ne=n.current||N;return jR(ne,w,b,ne==="h"?C:k)},[]),u=T.useCallback(function(b){var w=b;if(!(!di.length||di[di.length-1]!==o)){var E="deltaY"in w?p0(w):Tc(w),A=e.current.filter(function(N){return N.name===w.type&&(N.target===w.target||w.target===N.shadowParent)&&BR(N.delta,E)})[0];if(A&&A.should){w.cancelable&&w.preventDefault();return}if(!A){var C=(l.current.shards||[]).map(m0).filter(Boolean).filter(function(N){return N.contains(w.target)}),k=C.length>0?c(w,C[0]):!l.current.noIsolation;k&&w.cancelable&&w.preventDefault()}}},[]),h=T.useCallback(function(b,w,E,A){var C={name:b,delta:w,target:E,should:A,shadowParent:WR(E)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(k){return k!==C})},1)},[]),f=T.useCallback(function(b){t.current=Tc(b),n.current=void 0},[]),p=T.useCallback(function(b){h(b.type,p0(b),b.target,c(b,s.lockRef.current))},[]),y=T.useCallback(function(b){h(b.type,Tc(b),b.target,c(b,s.lockRef.current))},[]);T.useEffect(function(){return di.push(o),s.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:y}),document.addEventListener("wheel",u,ui),document.addEventListener("touchmove",u,ui),document.addEventListener("touchstart",f,ui),function(){di=di.filter(function(b){return b!==o}),document.removeEventListener("wheel",u,ui),document.removeEventListener("touchmove",u,ui),document.removeEventListener("touchstart",f,ui)}},[]);var x=s.removeScrollBar,_=s.inert;return T.createElement(T.Fragment,null,_?T.createElement(o,{styles:UR(r)}):null,x?T.createElement(NR,{noRelative:s.noRelative,gapMode:s.gapMode}):null)}function WR(s){for(var e=null;s!==null;)s instanceof ShadowRoot&&(e=s.host,s=s.host),s=s.parentNode;return e}const $R=vR(Qw,HR);var nx=T.forwardRef(function(s,e){return T.createElement(xu,Qr({},s,{ref:e,sideCar:$R}))});nx.classNames=xu.classNames;var VR=function(s){if(typeof document>"u")return null;var e=Array.isArray(s)?s[0]:s;return e.ownerDocument.body},hi=new WeakMap,kc=new WeakMap,Pc={},Yh=0,rx=function(s){return s&&(s.host||rx(s.parentNode))},qR=function(s,e){return e.map(function(t){if(s.contains(t))return t;var n=rx(t);return n&&s.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",s,". Doing nothing"),null)}).filter(function(t){return!!t})},GR=function(s,e,t,n){var r=qR(e,Array.isArray(s)?s:[s]);Pc[t]||(Pc[t]=new WeakMap);var o=Pc[t],l=[],c=new Set,u=new Set(r),h=function(p){!p||c.has(p)||(c.add(p),h(p.parentNode))};r.forEach(h);var f=function(p){!p||u.has(p)||Array.prototype.forEach.call(p.children,function(y){if(c.has(y))f(y);else try{var x=y.getAttribute(n),_=x!==null&&x!=="false",b=(hi.get(y)||0)+1,w=(o.get(y)||0)+1;hi.set(y,b),o.set(y,w),l.push(y),b===1&&_&&kc.set(y,!0),w===1&&y.setAttribute(t,"true"),_||y.setAttribute(n,"true")}catch(E){console.error("aria-hidden: cannot operate on ",y,E)}})};return f(e),c.clear(),Yh++,function(){l.forEach(function(p){var y=hi.get(p)-1,x=o.get(p)-1;hi.set(p,y),o.set(p,x),y||(kc.has(p)||p.removeAttribute(n),kc.delete(p)),x||p.removeAttribute(t)}),Yh--,Yh||(hi=new WeakMap,hi=new WeakMap,kc=new WeakMap,Pc={})}},YR=function(s,e,t){t===void 0&&(t="data-aria-hidden");var n=Array.from(Array.isArray(s)?s:[s]),r=VR(s);return r?(n.push.apply(n,Array.from(r.querySelectorAll("[aria-live], script"))),GR(n,r,t,"aria-hidden")):function(){return null}},Su="Dialog",[sx]=gu(Su),[XR,Hn]=sx(Su),ix=s=>{const{__scopeDialog:e,children:t,open:n,defaultOpen:r,onOpenChange:o,modal:l=!0}=s,c=T.useRef(null),u=T.useRef(null),[h,f]=np({prop:n,defaultProp:r??!1,onChange:o,caller:Su});return g.jsx(XR,{scope:e,triggerRef:c,contentRef:u,contentId:Qo(),titleId:Qo(),descriptionId:Qo(),open:h,onOpenChange:f,onOpenToggle:T.useCallback(()=>f(p=>!p),[f]),modal:l,children:t})};ix.displayName=Su;var ox="DialogTrigger",KR=T.forwardRef((s,e)=>{const{__scopeDialog:t,...n}=s,r=Hn(ox,t),o=or(e,r.triggerRef);return g.jsx(qt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":dp(r.open),...n,ref:o,onClick:Dt(s.onClick,r.onOpenToggle)})});KR.displayName=ox;var cp="DialogPortal",[QR,ax]=sx(cp,{forceMount:void 0}),lx=s=>{const{__scopeDialog:e,forceMount:t,children:n,container:r}=s,o=Hn(cp,e);return g.jsx(QR,{scope:e,forceMount:t,children:T.Children.map(n,l=>g.jsx(ba,{present:t||o.open,children:g.jsx(Xw,{asChild:!0,container:r,children:l})}))})};lx.displayName=cp;var ru="DialogOverlay",cx=T.forwardRef((s,e)=>{const t=ax(ru,s.__scopeDialog),{forceMount:n=t.forceMount,...r}=s,o=Hn(ru,s.__scopeDialog);return o.modal?g.jsx(ba,{present:n||o.open,children:g.jsx(ZR,{...r,ref:e})}):null});cx.displayName=ru;var JR=sa("DialogOverlay.RemoveScroll"),ZR=T.forwardRef((s,e)=>{const{__scopeDialog:t,...n}=s,r=Hn(ru,t);return g.jsx(nx,{as:JR,allowPinchZoom:!0,shards:[r.contentRef],children:g.jsx(qt.div,{"data-state":dp(r.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),Ns="DialogContent",ux=T.forwardRef((s,e)=>{const t=ax(Ns,s.__scopeDialog),{forceMount:n=t.forceMount,...r}=s,o=Hn(Ns,s.__scopeDialog);return g.jsx(ba,{present:n||o.open,children:o.modal?g.jsx(eN,{...r,ref:e}):g.jsx(tN,{...r,ref:e})})});ux.displayName=Ns;var eN=T.forwardRef((s,e)=>{const t=Hn(Ns,s.__scopeDialog),n=T.useRef(null),r=or(e,t.contentRef,n);return T.useEffect(()=>{const o=n.current;if(o)return YR(o)},[]),g.jsx(dx,{...s,ref:r,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Dt(s.onCloseAutoFocus,o=>{o.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:Dt(s.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0;(l.button===2||c)&&o.preventDefault()}),onFocusOutside:Dt(s.onFocusOutside,o=>o.preventDefault())})}),tN=T.forwardRef((s,e)=>{const t=Hn(Ns,s.__scopeDialog),n=T.useRef(!1),r=T.useRef(!1);return g.jsx(dx,{...s,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{s.onCloseAutoFocus?.(o),o.defaultPrevented||(n.current||t.triggerRef.current?.focus(),o.preventDefault()),n.current=!1,r.current=!1},onInteractOutside:o=>{s.onInteractOutside?.(o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const l=o.target;t.triggerRef.current?.contains(l)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&r.current&&o.preventDefault()}})}),dx=T.forwardRef((s,e)=>{const{__scopeDialog:t,trapFocus:n,onOpenAutoFocus:r,onCloseAutoFocus:o,...l}=s,c=Hn(Ns,t),u=T.useRef(null),h=or(e,u);return oR(),g.jsxs(g.Fragment,{children:[g.jsx(Gw,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:r,onUnmountAutoFocus:o,children:g.jsx(Vw,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":dp(c.open),...l,ref:h,onDismiss:()=>c.onOpenChange(!1)})}),g.jsxs(g.Fragment,{children:[g.jsx(nN,{titleId:c.titleId}),g.jsx(sN,{contentRef:u,descriptionId:c.descriptionId})]})]})}),up="DialogTitle",hx=T.forwardRef((s,e)=>{const{__scopeDialog:t,...n}=s,r=Hn(up,t);return g.jsx(qt.h2,{id:r.titleId,...n,ref:e})});hx.displayName=up;var fx="DialogDescription",px=T.forwardRef((s,e)=>{const{__scopeDialog:t,...n}=s,r=Hn(fx,t);return g.jsx(qt.p,{id:r.descriptionId,...n,ref:e})});px.displayName=fx;var mx="DialogClose",gx=T.forwardRef((s,e)=>{const{__scopeDialog:t,...n}=s,r=Hn(mx,t);return g.jsx(qt.button,{type:"button",...n,ref:e,onClick:Dt(s.onClick,()=>r.onOpenChange(!1))})});gx.displayName=mx;function dp(s){return s?"open":"closed"}var yx="DialogTitleWarning",[AM,vx]=mk(yx,{contentName:Ns,titleName:up,docsSlug:"dialog"}),nN=({titleId:s})=>{const e=vx(yx),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return T.useEffect(()=>{s&&(document.getElementById(s)||console.error(t))},[t,s]),null},rN="DialogDescriptionWarning",sN=({contentRef:s,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${vx(rN).contentName}}.`;return T.useEffect(()=>{const r=s.current?.getAttribute("aria-describedby");e&&r&&(document.getElementById(e)||console.warn(n))},[n,s,e]),null},iN=ix,oN=lx,bx=cx,wx=ux,xx=hx,Sx=px,aN=gx;var lN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const cN=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Tr=(s,e)=>{const t=T.forwardRef(({color:n="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:c="",children:u,...h},f)=>T.createElement("svg",{ref:f,...lN,width:r,height:r,stroke:n,strokeWidth:l?Number(o)*24/Number(r):o,className:["lucide",`lucide-${cN(s)}`,c].join(" "),...h},[...e.map(([p,y])=>T.createElement(p,y)),...Array.isArray(u)?u:[u]]));return t.displayName=`${s}`,t};const uN=Tr("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const g0=Tr("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const y0=Tr("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const dN=Tr("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const kf=Tr("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const hN=Tr("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);const Pf=Tr("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);const _x=Tr("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const fN=Tr("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Zo=iN,pN=oN,Ex=T.forwardRef(({className:s,...e},t)=>g.jsx(bx,{ref:t,className:Xe("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...e}));Ex.displayName=bx.displayName;const Ai=T.forwardRef(({className:s,children:e,...t},n)=>g.jsxs(pN,{children:[g.jsx(Ex,{}),g.jsxs(wx,{ref:n,className:Xe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t,children:[e,g.jsxs(aN,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[g.jsx(fN,{className:"h-4 w-4"}),g.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ai.displayName=wx.displayName;const Ci=({className:s,...e})=>g.jsx("div",{className:Xe("flex flex-col space-y-1.5 text-center sm:text-left",s),...e});Ci.displayName="DialogHeader";const Ti=({className:s,...e})=>g.jsx("div",{className:Xe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...e});Ti.displayName="DialogFooter";const ki=T.forwardRef(({className:s,...e},t)=>g.jsx(xx,{ref:t,className:Xe("text-lg font-semibold leading-none tracking-tight",s),...e}));ki.displayName=xx.displayName;const Pi=T.forwardRef(({className:s,...e},t)=>g.jsx(Sx,{ref:t,className:Xe("text-sm text-muted-foreground",s),...e}));Pi.displayName=Sx.displayName;function mN({isOpen:s,onClose:e,onCreateDelivery:t,selectedOrdersCount:n}){const[r,o]=T.useState(""),[l,c]=T.useState(""),[u,h]=T.useState(!1),f=async y=>{if(y.preventDefault(),!r.trim()){alert("Please enter a deliverer name");return}if(!l){alert("Please select a vehicle");return}h(!0);try{await t(r.trim(),l),o(""),c(""),e()}catch(x){console.error("Failed to create delivery:",x),alert("Failed to start delivery")}finally{h(!1)}},p=()=>{o(""),c(""),e()};return g.jsx(Zo,{open:s,onOpenChange:p,children:g.jsxs(Ai,{className:"sm:max-w-[425px]",children:[g.jsxs(Ci,{children:[g.jsx(ki,{children:"Start Delivery"}),g.jsxs(Pi,{children:["Create a delivery run for ",n," selected order",n!==1?"s":"","."]})]}),g.jsxs("form",{onSubmit:f,children:[g.jsxs("div",{className:"grid gap-4 py-4",children:[g.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[g.jsx("label",{htmlFor:"runner",className:"text-right",children:"Deliverer"}),g.jsx("input",{id:"runner",type:"text",placeholder:"Enter deliverer name",value:r,onChange:y=>o(y.target.value),className:"col-span-3 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",disabled:u})]}),g.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[g.jsx("label",{htmlFor:"vehicle",className:"text-right",children:"Vehicle"}),g.jsxs("select",{id:"vehicle",value:l,onChange:y=>c(y.target.value),className:"col-span-3 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",disabled:u,children:[g.jsx("option",{value:"",children:"Select a vehicle"}),g.jsx("option",{value:"van",children:"Van"}),g.jsx("option",{value:"golf_cart",children:"Golf Cart"})]})]})]}),g.jsxs(Ti,{children:[g.jsx(xt,{type:"button",variant:"outline",onClick:p,disabled:u,children:"Cancel"}),g.jsx(xt,{type:"submit",disabled:u,children:u?"Starting...":"Start Delivery"})]})]})]})})}function gN(s){const[e,t]=T.useState([]),[n,r]=T.useState(!0),[o,l]=T.useState(null),c=T.useRef(null),u=async()=>{try{l(null),r(!0);const h=await fetch("/api/orders");if(h.ok){const f=await h.json();t(f)}else console.warn("HTTP fallback failed:",h.status),t([]);r(!1)}catch(h){console.error("Failed to fetch orders via HTTP:",h),l("Failed to load orders"),r(!1)}};return T.useEffect(()=>{u();const h=`${window.location.protocol}//${window.location.host}`;let f;try{f=Jo(h,{path:"/socket.io",transports:["websocket","polling"],reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3}),c.current=f}catch(p){console.debug("Socket.IO connection failed (expected if backend not running)",p);return}return f.on("connect",()=>{console.debug("Orders Socket.IO connected"),l(null),f.emit("join",{room:"orders"})}),f.on("orders_update",p=>{try{p.type==="orders_update"&&(t(p.data||[]),r(!1))}catch(y){console.warn("Failed to parse Socket.IO message",y)}}),f.on("disconnect",()=>{console.debug("Orders Socket.IO disconnected")}),f.on("connect_error",p=>{console.debug("Orders Socket.IO error (expected if backend not running)",p),l("Socket.IO connection failed - using cached data")}),()=>{try{f.disconnect()}catch{}}},[s]),{orders:e,loading:n,error:o,refetch:u}}function Ax(){const[s,e]=T.useState([]),[t,n]=T.useState(!0),[r,o]=T.useState(new Set),[l,c]=T.useState(!1),{orders:u}=gN(),[h,f]=T.useState(!1),[p,y]=T.useState(""),[x,_]=T.useState(""),[b,w]=T.useState(!1),[E,A]=T.useState(""),[C,k]=T.useState(null),[N,R]=T.useState(!1),[D,j]=T.useState([]),z=os();T.useEffect(()=>{q()},[u]);const q=async()=>{n(!0);try{const V=await it.getOrders({status:Te.PRE_DELIVERY});e(V)}catch(V){console.error("Failed to load orders:",V)}finally{n(!1)}},Y=V=>{const Q=new Set(r);Q.has(V)?Q.delete(V):Q.add(V),o(Q)},ne=()=>{if(r.size===0){y("Selection Required"),_("Please select at least one order to start a delivery."),f(!0);return}const Q=s.filter(M=>r.has(M.id)).filter(M=>M.pick_status&&!M.pick_status.is_fully_picked);if(Q.length>0){j(Q),R(!0);return}c(!0)},ie=()=>{R(!1),c(!0)},ee=async(V,Q)=>{try{await wu.createRun({runner:V,order_ids:Array.from(r),vehicle:Q}),o(new Set),q(),c(!1),y("Success"),_("Delivery started successfully!"),f(!0)}catch(M){throw console.error("Failed to start delivery:",M),M}},ae=V=>{k(V),A(""),w(!0)},G=async()=>{C&&(await X(C,Te.ISSUE,E),w(!1),k(null))},X=async(V,Q,M)=>{try{await it.updateOrderStatus(V,{status:Q,reason:M}),q()}catch(W){console.error("Failed to update status:",W),y("Error"),_("Failed to update order status."),f(!0)}},I=V=>{z(`/orders/${V}`)};return t?g.jsx("div",{className:"flex items-center justify-center py-8",children:g.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading..."})}):g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("h2",{className:"text-lg font-semibold",children:"Pre-Delivery Queue"}),g.jsxs(xt,{onClick:ne,disabled:r.size===0,className:"bg-orange-500 hover:bg-orange-600",children:["Start Delivery (",r.size," selected)"]})]}),s.length===0?g.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"No orders in pre-delivery queue"}):g.jsx("div",{className:"rounded-md border",children:g.jsxs("table",{className:"w-full",children:[g.jsx("thead",{children:g.jsxs("tr",{className:"border-b",children:[g.jsx("th",{className:"h-12 px-4 text-left align-middle",children:g.jsx("input",{type:"checkbox",checked:r.size===s.length&&s.length>0,onChange:V=>{V.target.checked?o(new Set(s.map(Q=>Q.id))):o(new Set)}})}),g.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Order ID"}),g.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Recipient"}),g.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Location"}),g.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Deliverer"}),g.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Actions"})]})}),g.jsx("tbody",{children:s.map(V=>g.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[g.jsx("td",{className:"p-4 align-middle",children:g.jsx("input",{type:"checkbox",checked:r.has(V.id),onChange:()=>Y(V.id)})}),g.jsx("td",{className:"p-4 align-middle",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(xt,{variant:"link",onClick:()=>I(V.id),className:"p-0 h-auto font-normal",children:V.inflow_order_id}),V.pick_status&&!V.pick_status.is_fully_picked&&g.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800",title:`Partial pick: ${V.pick_status.total_picked}/${V.pick_status.total_ordered} items picked`,children:[g.jsx(g0,{className:"h-3 w-3"}),"Partial"]})]})}),g.jsx("td",{className:"p-4 align-middle",children:V.recipient_name||"N/A"}),g.jsx("td",{className:"p-4 align-middle",children:tp(V)}),g.jsx("td",{className:"p-4 align-middle",children:V.assigned_deliverer||"Unassigned"}),g.jsx("td",{className:"p-4 align-middle",children:g.jsx(xt,{variant:"destructive",size:"sm",onClick:()=>ae(V.id),children:"Flag Issue"})})]},V.id))})]})}),g.jsx(mN,{isOpen:l,onClose:()=>c(!1),onCreateDelivery:ee,selectedOrdersCount:r.size}),g.jsx(Zo,{open:h,onOpenChange:f,children:g.jsxs(Ai,{children:[g.jsxs(Ci,{children:[g.jsx(ki,{children:p}),g.jsx(Pi,{children:x})]}),g.jsx(Ti,{children:g.jsx(xt,{onClick:()=>f(!1),children:"OK"})})]})}),g.jsx(Zo,{open:b,onOpenChange:w,children:g.jsxs(Ai,{children:[g.jsxs(Ci,{children:[g.jsx(ki,{children:"Flag Order as Issue"}),g.jsx(Pi,{children:"Please provide a reason for flagging this order."})]}),g.jsxs("div",{className:"grid gap-4 py-4",children:[g.jsx("label",{htmlFor:"issue-reason",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Reason"}),g.jsx("textarea",{id:"issue-reason",value:E,onChange:V=>A(V.target.value),placeholder:"e.g., Wrong address, Recipient unavailable...",className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),g.jsxs(Ti,{children:[g.jsx(xt,{variant:"outline",onClick:()=>w(!1),children:"Cancel"}),g.jsx(xt,{onClick:G,children:"Submit"})]})]})}),g.jsx(Zo,{open:N,onOpenChange:R,children:g.jsxs(Ai,{children:[g.jsxs(Ci,{children:[g.jsxs(ki,{className:"flex items-center gap-2",children:[g.jsx(g0,{className:"h-5 w-5 text-amber-500"}),"Partial Pick Warning"]}),g.jsxs(Pi,{children:[D.length," order",D.length>1?"s are":" is"," only partially picked. Only the picked items will be delivered. Remainder orders will be created for unpicked items."]})]}),g.jsx("div",{className:"max-h-48 overflow-y-auto py-2",children:g.jsx("ul",{className:"space-y-1 text-sm",children:D.map(V=>g.jsxs("li",{className:"flex justify-between items-center px-2 py-1 bg-muted rounded",children:[g.jsx("span",{className:"font-medium",children:V.inflow_order_id}),g.jsxs("span",{className:"text-muted-foreground",children:[V.pick_status?.total_picked,"/",V.pick_status?.total_ordered," items"]})]},V.id))})}),g.jsxs(Ti,{children:[g.jsx(xt,{variant:"outline",onClick:()=>R(!1),children:"Cancel"}),g.jsx(xt,{onClick:ie,className:"bg-amber-500 hover:bg-amber-600",children:"Continue Anyway"})]})]})})]})}function Cx(){const[s,e]=T.useState([]),[t,n]=T.useState(!0),r=os();T.useEffect(()=>{o()},[]);const o=async()=>{n(!0);try{const c=await it.getOrders({status:Te.IN_DELIVERY});e(c)}catch(c){console.error("Failed to load orders:",c)}finally{n(!1)}},l=c=>{r(`/orders/${c}`)};return t?g.jsx("div",{className:"flex items-center justify-center py-8",children:g.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading..."})}):g.jsxs("div",{className:"space-y-4",children:[g.jsx("h2",{className:"text-lg font-semibold",children:"Active Deliveries"}),g.jsx(ow,{orders:s,onViewDetail:l})]})}function Tx(){const[s,e]=T.useState([]),[t,n]=T.useState(!0),[r,o]=T.useState(""),[l,c]=T.useState(null);T.useEffect(()=>{u()},[r]);const u=async()=>{n(!0);try{const f=await it.getOrders({status:Te.SHIPPING,search:r.trim()?r.trim():void 0});e(f)}catch(f){console.error("Failed to load orders:",f),alert("Failed to load orders")}finally{n(!1)}},h=async(f,p,y,x)=>{c(f);try{await it.updateShippingWorkflow(f,{status:p,carrier_name:y,tracking_number:x,updated_by:"shipping_coordinator"}),await u()}catch(_){console.error("Failed to update shipping workflow:",_),alert("Failed to update shipping status")}finally{c(null)}};return g.jsx("div",{className:"space-y-4",children:g.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[g.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-end md:justify-between",children:[g.jsx("h2",{className:"text-lg font-semibold",children:"Shipping"}),g.jsx("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-end",children:g.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:["Search",g.jsx("input",{className:"rounded-md border px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#800000]",value:r,onChange:f=>o(f.target.value),placeholder:"Order ID / recipient / location..."})]})})]}),t?g.jsx("div",{className:"p-4",children:"Loading..."}):g.jsx("div",{className:"mt-4 overflow-x-auto",children:g.jsxs("table",{className:"min-w-full border-collapse border border-gray-200",children:[g.jsx("thead",{children:g.jsxs("tr",{className:"bg-gray-50",children:[g.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Order"}),g.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Location / City"}),g.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Dock Status"}),g.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"FedEx"})]})}),g.jsxs("tbody",{children:[s.map(f=>{const p=f.shipping_workflow_status||br.WORK_AREA,y=l===f.id;return g.jsxs("tr",{className:"hover:bg-gray-50",children:[g.jsx("td",{className:"border border-gray-200 px-4 py-2 font-medium text-gray-900",children:f.inflow_order_id||f.id}),g.jsx("td",{className:"border border-gray-200 px-4 py-2 text-gray-800",children:tp(f)}),g.jsx("td",{className:"border border-gray-200 px-4 py-2",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-semibold ${p===br.DOCK?"bg-blue-100 text-blue-700":p===br.SHIPPED?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:IA[p]}),p===br.WORK_AREA&&g.jsx("button",{type:"button",onClick:()=>h(f.id,br.DOCK),disabled:y,className:"rounded-md border border-gray-200 px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Moving...":"Move to Dock"})]})}),g.jsx("td",{className:"border border-gray-200 px-4 py-2",children:g.jsxs("div",{className:"flex flex-col gap-2",children:[p===br.DOCK&&g.jsx("button",{type:"button",onClick:()=>{const x=prompt("Carrier name (FedEx, UPS, etc.):");x&&h(f.id,br.SHIPPED,x)},disabled:y,className:"w-fit rounded-md bg-[#800000] px-3 py-1.5 text-sm font-semibold text-white hover:bg-[#660000] disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Shipping...":"Mark as Shipped"}),p===br.SHIPPED&&f.carrier_name&&g.jsxs("div",{className:"text-xs text-gray-600",children:[g.jsxs("div",{children:["Shipped to: ",f.carrier_name]}),f.tracking_number&&g.jsxs("div",{children:["Tracking: ",f.tracking_number]}),f.shipped_to_carrier_at&&g.jsxs("div",{children:["At: ",new Date(f.shipped_to_carrier_at).toLocaleString()]})]})]})})]},f.id)}),!s.length&&g.jsx("tr",{children:g.jsx("td",{className:"border border-gray-200 px-4 py-6 text-center text-gray-600",colSpan:4,children:"No orders found."})})]})]})})]})})}function yN(){const[s,e]=T.useState([]),[t,n]=T.useState(!0);T.useEffect(()=>{(async()=>{try{n(!0);const u=await wu.getRuns(["Completed","Cancelled"]);e(u)}catch(u){console.error("Failed to fetch past runs:",u)}finally{n(!1)}})()},[]);const r=c=>c?new Date(c).toLocaleString():"N/A",o=c=>{switch(c.toLowerCase()){case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},l=c=>c.split("_").map(u=>u.charAt(0).toUpperCase()+u.slice(1)).join(" ");return t?g.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading past delivery runs..."}):s.length===0?g.jsx("div",{className:"text-center py-12 border rounded-lg bg-muted/10",children:g.jsx("p",{className:"text-muted-foreground",children:"No past delivery runs found"})}):g.jsx("div",{className:"space-y-4",children:s.map(c=>g.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-white hover:bg-gray-50",children:[g.jsxs("div",{className:"flex items-center gap-6",children:[g.jsxs("div",{children:[g.jsx("div",{className:"font-medium text-lg",children:c.name||`Run ${c.id.slice(0,8)}`}),g.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[g.jsx(kf,{className:"w-3 h-3"}),r(c.end_time||c.start_time)]})]}),g.jsxs("div",{className:"flex gap-4 text-sm text-gray-600",children:[g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx(_x,{className:"w-4 h-4"}),c.runner]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx(Pf,{className:"w-4 h-4"}),l(c.vehicle)]})]})]}),g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx(Zc,{className:o(c.status),children:c.status}),g.jsx(Cn,{to:`/delivery/runs/${c.id}`,children:g.jsx(xt,{variant:"outline",size:"sm",children:"View Details"})})]})]},c.id))})}function vN(){const[s,e]=T.useState({readyForDelivery:0,activeDeliveries:0,shippingQueue:0,completedToday:0}),[t,n]=T.useState(!0);return T.useEffect(()=>{const r=async()=>{try{n(!0);const[l,c,u,h]=await Promise.all([it.getOrders({status:Te.PRE_DELIVERY}),it.getOrders({status:Te.IN_DELIVERY}),it.getOrders({status:Te.SHIPPING}),it.getOrders({status:Te.DELIVERED})]),f=new Date;f.setHours(0,0,0,0);const p=h.filter(y=>{let x=null;if(y.signature_captured_at?x=y.signature_captured_at:y.shipped_to_carrier_at?x=y.shipped_to_carrier_at:y.updated_at&&(x=y.updated_at),!x)return!1;const _=new Date(x);return _.setHours(0,0,0,0),_.getTime()===f.getTime()}).length;e({readyForDelivery:l.length,activeDeliveries:c.length,shippingQueue:u.length,completedToday:p})}catch(l){console.error("Failed to fetch delivery stats:",l)}finally{n(!1)}};r();const o=setInterval(r,3e4);return()=>clearInterval(o)},[]),g.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[g.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Delivery Dashboard"}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[g.jsx("div",{className:"lg:col-span-1",children:g.jsxs(nr,{children:[g.jsx(Sr,{className:"pb-2",children:g.jsx(_r,{children:"Live Status"})}),g.jsx(rr,{children:g.jsx(WP,{})})]})}),g.jsx("div",{className:"lg:col-span-2",children:g.jsxs(nr,{children:[g.jsx(Sr,{className:"pb-2",children:g.jsx(_r,{children:"Operations"})}),g.jsx(rr,{children:g.jsxs($k,{defaultValue:"pre-delivery",className:"w-full",children:[g.jsxs(Pw,{className:"grid w-full grid-cols-4",children:[g.jsx(Vo,{value:"pre-delivery",children:"Pre-Delivery"}),g.jsx(Vo,{value:"in-delivery",children:"In Delivery"}),g.jsx(Vo,{value:"shipping",children:"Shipping"}),g.jsx(Vo,{value:"history",children:"History"})]}),g.jsx(qo,{value:"pre-delivery",className:"mt-4",children:g.jsx(Ax,{})}),g.jsx(qo,{value:"in-delivery",className:"mt-4",children:g.jsx(Cx,{})}),g.jsx(qo,{value:"shipping",className:"mt-4",children:g.jsx(Tx,{})}),g.jsx(qo,{value:"history",className:"mt-4",children:g.jsx(yN,{})})]})})]})})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[g.jsxs(nr,{children:[g.jsx(Sr,{className:"pb-2",children:g.jsx(_r,{className:"text-sm font-medium",children:"Ready for Delivery"})}),g.jsx(rr,{children:g.jsx("div",{className:"text-2xl font-bold",children:t?"...":s.readyForDelivery})})]}),g.jsxs(nr,{children:[g.jsx(Sr,{className:"pb-2",children:g.jsx(_r,{className:"text-sm font-medium",children:"Active Deliveries"})}),g.jsx(rr,{children:g.jsx("div",{className:"text-2xl font-bold",children:t?"...":s.activeDeliveries})})]}),g.jsxs(nr,{children:[g.jsx(Sr,{className:"pb-2",children:g.jsx(_r,{className:"text-sm font-medium",children:"Shipping Queue"})}),g.jsx(rr,{children:g.jsx("div",{className:"text-2xl font-bold",children:t?"...":s.shippingQueue})})]}),g.jsxs(nr,{children:[g.jsx(Sr,{className:"pb-2",children:g.jsx(_r,{className:"text-sm font-medium",children:"Completed Today"})}),g.jsx(rr,{children:g.jsx("div",{className:"text-2xl font-bold",children:t?"...":s.completedToday})})]})]})]})}const Xh={getConfig:async()=>(await ze.get("/teams/config")).data,updateConfig:async(s,e)=>(await ze.put("/teams/config",{webhook_url:s},{params:{updated_by:e}})).data,testWebhook:async()=>(await ze.post("/teams/test")).data},Uo={sync:async()=>(await ze.post("/inflow/sync")).data,getSyncStatus:async()=>(await ze.get("/inflow/sync-status")).data,registerWebhook:async s=>(await ze.post("/inflow/webhooks/register",s)).data,listWebhooks:async()=>(await ze.get("/inflow/webhooks")).data,getWebhookDefaults:async()=>(await ze.get("/inflow/webhooks/defaults")).data,deleteWebhook:async s=>(await ze.delete(`/inflow/webhooks/${s}`)).data,testWebhook:async()=>(await ze.post("/inflow/webhooks/test")).data},Kh={getStatus:async()=>(await ze.get("/sharepoint/status")).data,authenticate:async()=>(await ze.post("/sharepoint/authenticate")).data,testUpload:async()=>(await ze.post("/sharepoint/test-upload")).data};function bN(){const[s,e]=T.useState(""),[t,n]=T.useState(!0),[r,o]=T.useState(!1),[l,c]=T.useState(null),[u,h]=T.useState([]),[f,p]=T.useState(""),[y,x]=T.useState([]),[_,b]=T.useState(!1),[w,E]=T.useState(null),[A,C]=T.useState(!1),[k,N]=T.useState(!1);T.useEffect(()=>{R(),D(),j(),z()},[]);const R=async()=>{n(!0);try{const I=await Xh.getConfig();e(I.webhook_url||"")}catch(I){console.error("Failed to load config:",I),c({type:"error",text:"Failed to load configuration"})}finally{n(!1)}},D=async()=>{try{const I=await Uo.listWebhooks();h(I.webhooks);const V=I.webhooks.find(Q=>Q.status==="active");V&&(p(V.url),x(V.events))}catch(I){console.error("Failed to load Inflow webhooks:",I)}},j=async()=>{try{const I=await Uo.getWebhookDefaults();!f&&I.url&&p(I.url),y.length===0&&I.events?.length&&x(I.events)}catch(I){console.error("Failed to load Inflow webhook defaults:",I)}},z=async()=>{try{const I=await Kh.getStatus();E(I)}catch(I){console.error("Failed to load SharePoint status:",I)}},q=async()=>{C(!0),c(null);try{const I=await Kh.authenticate();I.success?(c({type:"success",text:I.message||"SharePoint authenticated successfully"}),await z()):c({type:"error",text:I.error||"Authentication failed"})}catch(I){console.error("Failed to authenticate SharePoint:",I),c({type:"error",text:I.response?.data?.error||"Authentication failed"})}finally{C(!1)}},Y=async()=>{N(!0),c(null);try{const I=await Kh.testUpload();I.success?c({type:"success",text:`Test file uploaded: ${I.filename}`}):c({type:"error",text:I.error||"Test upload failed"})}catch(I){console.error("Failed to test SharePoint:",I),c({type:"error",text:I.response?.data?.error||"Test upload failed"})}finally{N(!1)}},ne=async I=>{I&&I.preventDefault(),o(!0),c(null);try{await Xh.updateConfig(s,"admin"),c({type:"success",text:"Configuration saved successfully"})}catch(V){console.error("Failed to save config:",V),c({type:"error",text:"Failed to save configuration"})}finally{o(!1)}},ie=async()=>{try{await Xh.testWebhook(),c({type:"success",text:"Test notification sent successfully"})}catch(I){console.error("Failed to test webhook:",I),c({type:"error",text:"Failed to send test notification"})}},ee=async()=>{if(!f){c({type:"error",text:"Webhook URL is required"});return}b(!0),c(null);try{await Uo.registerWebhook({url:f,events:y}),c({type:"success",text:"Inflow webhook registered successfully"}),p(""),await D()}catch(I){console.error("Failed to register webhook:",I),c({type:"error",text:I.response?.data?.detail||"Failed to register webhook"})}finally{b(!1)}},ae=async I=>{if(confirm("Are you sure you want to delete this webhook?"))try{await Uo.deleteWebhook(I),c({type:"success",text:"Webhook deleted successfully"}),await D()}catch(V){console.error("Failed to delete webhook:",V),c({type:"error",text:V.response?.data?.detail||"Failed to delete webhook"})}},G=async()=>{try{await Uo.testWebhook(),c({type:"success",text:"Webhook endpoint is configured and reachable"})}catch(I){console.error("Failed to test webhook:",I),c({type:"error",text:I.response?.data?.detail||"Failed to test webhook"})}};if(t)return g.jsx("div",{className:"p-4",children:"Loading..."});const X=u.find(I=>I.status==="active");return g.jsxs("div",{className:"p-4 max-w-4xl space-y-6",children:[g.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Admin"}),g.jsxs("div",{className:"bg-white rounded-lg shadow p-6 space-y-4",children:[g.jsx("h2",{className:"text-xl font-semibold mb-4",children:"SharePoint Storage"}),w&&g.jsx("div",{className:`border rounded p-4 ${w.enabled?w.authenticated?"bg-green-50 border-green-200":"bg-yellow-50 border-yellow-200":"bg-gray-50 border-gray-200"}`,children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:`font-medium ${w.enabled?w.authenticated?"text-green-800":"text-yellow-800":"text-gray-800"}`,children:w.enabled?w.authenticated?" Connected":" Not Authenticated":"Disabled"}),w.site_url&&g.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Site: ",w.site_url]}),w.folder_path&&g.jsxs("p",{className:"text-sm text-gray-600",children:["Folder: Documents/",w.folder_path]}),w.error&&g.jsxs("p",{className:"text-sm text-red-600 mt-1",children:["Error: ",w.error]})]}),w.enabled&&g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:q,disabled:A,className:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:bg-gray-400 text-sm",children:A?"Authenticating...":"Authenticate"}),w.authenticated&&g.jsx("button",{onClick:Y,disabled:k,className:"px-3 py-1 bg-green-500 text-white rounded hover:bg-green-600 disabled:bg-gray-400 text-sm",children:k?"Testing...":"Test Upload"})]})]})}),!w?.enabled&&g.jsx("p",{className:"text-sm text-gray-500",children:"Set SHAREPOINT_ENABLED=true in .env to enable SharePoint storage."})]}),g.jsxs("div",{className:"bg-white rounded-lg shadow p-6 space-y-4",children:[g.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Teams Configuration"}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium mb-2",children:"Teams Webhook URL"}),g.jsx("input",{type:"text",value:s,onChange:I=>e(I.target.value),placeholder:"https://outlook.office.com/webhook/...",className:"w-full px-4 py-2 border rounded"})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:ne,disabled:r,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:bg-gray-400",children:r?"Saving...":"Save Configuration"}),g.jsx("button",{onClick:ie,disabled:!s,className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 disabled:bg-gray-400",children:"Test Webhook"})]})]}),g.jsxs("div",{className:"bg-white rounded-lg shadow p-6 space-y-4",children:[g.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Inflow Webhook Configuration"}),X&&g.jsx("div",{className:"bg-green-50 border border-green-200 rounded p-4",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"font-medium text-green-800",children:"Webhook Active"}),g.jsxs("p",{className:"text-sm text-green-600",children:["URL: ",X.url]}),g.jsxs("p",{className:"text-sm text-green-600",children:["Events: ",X.events.join(", ")]}),X.last_received_at&&g.jsxs("p",{className:"text-sm text-green-600",children:["Last received: ",new Date(X.last_received_at).toLocaleString()]}),X.failure_count>0&&g.jsxs("p",{className:"text-sm text-yellow-600",children:["Failures: ",X.failure_count]})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:G,className:"px-3 py-1 bg-green-500 text-white rounded hover:bg-green-600 text-sm",children:"Test"}),g.jsx("button",{onClick:()=>ae(X.webhook_id),className:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 text-sm",children:"Delete"})]})]})}),!X&&g.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-4",children:g.jsx("p",{className:"text-yellow-800",children:"No active webhook registered"})}),g.jsxs("div",{className:"border-t pt-4",children:[g.jsx("h3",{className:"font-medium mb-3",children:"Register New Webhook"}),g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium mb-2",children:"Webhook URL"}),g.jsx("input",{type:"text",value:f,onChange:I=>p(I.target.value),placeholder:"https://your-app.com/api/inflow/webhook",className:"w-full px-4 py-2 border rounded"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium mb-2",children:"Events"}),g.jsx("div",{className:"space-y-2",children:["orderCreated","orderUpdated"].map(I=>g.jsxs("label",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",checked:y.includes(I),onChange:V=>{V.target.checked?x([...y,I]):x(y.filter(Q=>Q!==I))},className:"mr-2"}),g.jsx("span",{className:"text-sm",children:I})]},I))})]}),g.jsx("button",{onClick:ee,disabled:_||!f,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:bg-gray-400",children:_?"Registering...":"Register Webhook"})]})]})]}),l&&g.jsx("div",{className:`p-3 rounded ${l.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:l.text})]})}const Ht=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Rf=[.001,0,0,.001,0,0],Qh=1.35,dn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},sr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},oa="pdfjs_internal_editor_",Ae={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Me={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},kx={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Rt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},ea={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},dt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},bi={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},wa={ERRORS:0,WARNINGS:1,INFOS:5},ji={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Rc={moveTo:0,lineTo:1,curveTo:2,closePath:3},Px={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let _u=wa.WARNINGS;function wN(s){Number.isInteger(s)&&(_u=s)}function xN(){return _u}function Eu(s){_u>=wa.INFOS&&console.info(`Info: ${s}`)}function Ce(s){_u>=wa.WARNINGS&&console.warn(`Warning: ${s}`)}function $e(s){throw new Error(s)}function Ie(s,e){s||$e(e)}function SN(s){switch(s?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function hp(s,e=null,t=null){if(!s)return null;if(t&&typeof s=="string"&&(t.addDefaultProtocol&&s.startsWith("www.")&&s.match(/\./g)?.length>=2&&(s=`http://${s}`),t.tryConvertEncoding))try{s=TN(s)}catch{}const n=e?URL.parse(s,e):URL.parse(s);return SN(n)?n:null}function fp(s,e,t=!1){const n=URL.parse(s);return n?(n.hash=e,n.href):t&&hp(s,"http://example.com")?s.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Re(s,e,t,n=!1){return Object.defineProperty(s,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const Fs=(function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e})();class v0 extends Fs{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Jh extends Fs{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class su extends Fs{constructor(e){super(e,"InvalidPDFException")}}class aa extends Fs{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class _N extends Fs{constructor(e){super(e,"FormatError")}}class Ar extends Fs{constructor(e){super(e,"AbortException")}}function Rx(s){(typeof s!="object"||s?.length===void 0)&&$e("Invalid argument for bytesToString");const e=s.length,t=8192;if(e<t)return String.fromCharCode.apply(null,s);const n=[];for(let r=0;r<e;r+=t){const o=Math.min(r+t,e),l=s.subarray(r,o);n.push(String.fromCharCode.apply(null,l))}return n.join("")}function xa(s){typeof s!="string"&&$e("Invalid argument for stringToBytes");const e=s.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=s.charCodeAt(n)&255;return t}function EN(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function AN(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function CN(){try{return new Function(""),!0}catch{return!1}}class Tt{static get isLittleEndian(){return Re(this,"isLittleEndian",AN())}static get isEvalSupported(){return Re(this,"isEvalSupported",CN())}static get isOffscreenCanvasSupported(){return Re(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Re(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return Re(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){return Re(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Zh=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0"));class fe{static makeHexColor(e,t,n){return`#${Zh[e]}${Zh[t]}${Zh[n]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,n=0){const r=e[n],o=e[n+1];e[n]=r*t[0]+o*t[2]+t[4],e[n+1]=r*t[1]+o*t[3]+t[5]}static applyTransformToBezier(e,t,n=0){const r=t[0],o=t[1],l=t[2],c=t[3],u=t[4],h=t[5];for(let f=0;f<6;f+=2){const p=e[n+f],y=e[n+f+1];e[n+f]=p*r+y*l+u,e[n+f+1]=p*o+y*c+h}}static applyInverseTransform(e,t){const n=e[0],r=e[1],o=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-r*t[2]+t[2]*t[5]-t[4]*t[3])/o,e[1]=(-n*t[1]+r*t[0]+t[4]*t[1]-t[5]*t[0])/o}static axialAlignedBoundingBox(e,t,n){const r=t[0],o=t[1],l=t[2],c=t[3],u=t[4],h=t[5],f=e[0],p=e[1],y=e[2],x=e[3];let _=r*f+u,b=_,w=r*y+u,E=w,A=c*p+h,C=A,k=c*x+h,N=k;if(o!==0||l!==0){const R=o*f,D=o*y,j=l*p,z=l*x;_+=j,E+=j,w+=z,b+=z,A+=R,N+=R,k+=D,C+=D}n[0]=Math.min(n[0],_,w,b,E),n[1]=Math.min(n[1],A,k,C,N),n[2]=Math.max(n[2],_,w,b,E),n[3]=Math.max(n[3],A,k,C,N)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],r=e[1],o=e[2],l=e[3],c=n**2+r**2,u=n*o+r*l,h=o**2+l**2,f=(c+h)/2,p=Math.sqrt(f**2-(c*h-u**2));t[0]=Math.sqrt(f+p||1),t[1]=Math.sqrt(f-p||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>r)return null;const o=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),l=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return o>l?null:[n,o,r,l]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,r,o){o[0]=Math.min(o[0],e,n),o[1]=Math.min(o[1],t,r),o[2]=Math.max(o[2],e,n),o[3]=Math.max(o[3],t,r)}static#e(e,t,n,r,o,l,c,u,h,f){if(h<=0||h>=1)return;const p=1-h,y=h*h,x=y*h,_=p*(p*(p*e+3*h*t)+3*y*n)+x*r,b=p*(p*(p*o+3*h*l)+3*y*c)+x*u;f[0]=Math.min(f[0],_),f[1]=Math.min(f[1],b),f[2]=Math.max(f[2],_),f[3]=Math.max(f[3],b)}static#t(e,t,n,r,o,l,c,u,h,f,p,y){if(Math.abs(h)<1e-12){Math.abs(f)>=1e-12&&this.#e(e,t,n,r,o,l,c,u,-p/f,y);return}const x=f**2-4*p*h;if(x<0)return;const _=Math.sqrt(x),b=2*h;this.#e(e,t,n,r,o,l,c,u,(-f+_)/b,y),this.#e(e,t,n,r,o,l,c,u,(-f-_)/b,y)}static bezierBoundingBox(e,t,n,r,o,l,c,u,h){h[0]=Math.min(h[0],e,c),h[1]=Math.min(h[1],t,u),h[2]=Math.max(h[2],e,c),h[3]=Math.max(h[3],t,u),this.#t(e,n,o,c,t,r,l,u,3*(-e+3*(n-o)+c),6*(e-2*n+o),3*(n-e),h),this.#t(e,n,o,c,t,r,l,u,3*(-t+3*(r-l)+u),6*(t-2*r+l),3*(r-t),h)}}function TN(s){return decodeURIComponent(escape(s))}let ef=null,b0=null;function Nx(s){return ef||(ef=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,b0=new Map([["","t"]])),s.replaceAll(ef,(e,t,n)=>t?t.normalize("NFKC"):b0.get(n))}function pp(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const s=new Uint8Array(32);return crypto.getRandomValues(s),Rx(s)}const mp="pdfjs_internal_id_";function kN(s,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[n,r,...o]=t;if(!s(n)&&!Number.isInteger(n)||!e(r))return!1;const l=o.length;let c=!0;switch(r.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;c=!1;break;default:return!1}for(const u of o)if(!(typeof u=="number"||c&&u===null))return!1;return!0}function Ft(s,e,t){return Math.min(Math.max(s,e),t)}function Dx(s){return Uint8Array.prototype.toBase64?s.toBase64():btoa(Rx(s))}function PN(s){return Uint8Array.fromBase64?Uint8Array.fromBase64(s):xa(atob(s))}typeof Promise.try!="function"&&(Promise.try=function(s,...e){return new Promise(t=>{t(s(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(s){return s.reduce((e,t)=>e+t,0)});class la{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function r(o){if(!o)return;let l=null;const c=o.name;if(c==="#text")l=o.value;else if(la.shouldBuildText(c))o?.attributes?.textContent?l=o.attributes.textContent:o.value&&(l=o.value);else return;if(l!==null&&t.push({str:l}),!!o.children)for(const u of o.children)r(u)}return r(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class gp{static setupStorage(e,t,n,r,o){const l=r.getValue(t,{value:null});switch(n.name){case"textarea":if(l.value!==null&&(e.textContent=l.value),o==="print")break;e.addEventListener("input",c=>{r.setValue(t,{value:c.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(l.value===n.attributes.xfaOn?e.setAttribute("checked",!0):l.value===n.attributes.xfaOff&&e.removeAttribute("checked"),o==="print")break;e.addEventListener("change",c=>{r.setValue(t,{value:c.target.checked?c.target.getAttribute("xfaOn"):c.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&e.setAttribute("value",l.value),o==="print")break;e.addEventListener("input",c=>{r.setValue(t,{value:c.target.value})})}break;case"select":if(l.value!==null){e.setAttribute("value",l.value);for(const c of n.children)c.attributes.value===l.value?c.attributes.selected=!0:c.attributes.hasOwnProperty("selected")&&delete c.attributes.selected}e.addEventListener("input",c=>{const u=c.target.options,h=u.selectedIndex===-1?"":u[u.selectedIndex].value;r.setValue(t,{value:h})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:r,linkService:o}){const{attributes:l}=t,c=e instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${r}`);for(const[u,h]of Object.entries(l))if(h!=null)switch(u){case"class":h.length&&e.setAttribute(u,h.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",h);break;case"style":Object.assign(e.style,h);break;case"textContent":e.textContent=h;break;default:(!c||u!=="href"&&u!=="newWindow")&&e.setAttribute(u,h)}c&&o.addLinkAttributes(e,l.href,l.newWindow),n&&l.dataId&&this.setupStorage(e,l.dataId,t,n)}static render(e){const t=e.annotationStorage,n=e.linkService,r=e.xfaHtml,o=e.intent||"display",l=document.createElement(r.name);r.attributes&&this.setAttributes({html:l,element:r,intent:o,linkService:n});const c=o!=="richText",u=e.div;if(u.append(l),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;u.style.transform=p}c&&u.setAttribute("class","xfaLayer xfaFont");const h=[];if(r.children.length===0){if(r.value){const p=document.createTextNode(r.value);l.append(p),c&&la.shouldBuildText(r.name)&&h.push(p)}return{textDivs:h}}const f=[[r,-1,l]];for(;f.length>0;){const[p,y,x]=f.at(-1);if(y+1===p.children.length){f.pop();continue}const _=p.children[++f.at(-1)[1]];if(_===null)continue;const{name:b}=_;if(b==="#text"){const E=document.createTextNode(_.value);h.push(E),x.append(E);continue}const w=_?.attributes?.xmlns?document.createElementNS(_.attributes.xmlns,b):document.createElement(b);if(x.append(w),_.attributes&&this.setAttributes({html:w,element:_,storage:t,intent:o,linkService:n}),_.children?.length>0)f.push([_,-1,w]);else if(_.value){const E=document.createTextNode(_.value);c&&la.shouldBuildText(b)&&h.push(E),w.append(E)}}for(const p of u.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:h}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const wr="http://www.w3.org/2000/svg";class Ds{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Gi(s,e="text"){if(Yo(s,document.baseURI)){const t=await fetch(s);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const r=new XMLHttpRequest;r.open("GET",s,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})}class Sa{constructor({viewBox:e,userUnit:t,scale:n,rotation:r,offsetX:o=0,offsetY:l=0,dontFlip:c=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=r,this.offsetX=o,this.offsetY=l,n*=t;const u=(e[2]+e[0])/2,h=(e[3]+e[1])/2;let f,p,y,x;switch(r%=360,r<0&&(r+=360),r){case 180:f=-1,p=0,y=0,x=1;break;case 90:f=0,p=1,y=1,x=0;break;case 270:f=0,p=-1,y=-1,x=0;break;case 0:f=1,p=0,y=0,x=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(y=-y,x=-x);let _,b,w,E;f===0?(_=Math.abs(h-e[1])*n+o,b=Math.abs(u-e[0])*n+l,w=(e[3]-e[1])*n,E=(e[2]-e[0])*n):(_=Math.abs(u-e[0])*n+o,b=Math.abs(h-e[1])*n+l,w=(e[2]-e[0])*n,E=(e[3]-e[1])*n),this.transform=[f*n,p*n,y*n,x*n,_-f*n*u-y*n*h,b-p*n*u-x*n*h],this.width=w,this.height=E}get rawDims(){const e=this.viewBox;return Re(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:o=!1}={}){return new Sa({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:o})}convertToViewportPoint(e,t){const n=[e,t];return fe.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];fe.applyTransform(t,this.transform);const n=[e[2],e[3]];return fe.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return fe.applyInverseTransform(n,this.transform),n}}class Au extends Fs{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function _a(s){const e=s.length;let t=0;for(;t<e&&s[t].trim()==="";)t++;return s.substring(t,t+5).toLowerCase()==="data:"}function Cu(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function Ox(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function Mx(s,e="document.pdf"){if(typeof s!="string")return e;if(_a(s))return Ce('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=(c=>{try{return new URL(c)}catch{try{return new URL(decodeURIComponent(c))}catch{try{return new URL(c,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(c),"https://foo.bar")}catch{return null}}}}})(s);if(!n)return e;const r=c=>{try{let u=decodeURIComponent(c);return u.includes("/")?(u=u.split("/").at(-1),u.test(/^\.pdf$/i)?u:c):u}catch{return c}},o=/\.pdf$/i,l=n.pathname.split("/").at(-1);if(o.test(l))return r(l);if(n.searchParams.size>0){const c=Array.from(n.searchParams.values()).reverse();for(const h of c)if(o.test(h))return r(h);const u=Array.from(n.searchParams.keys()).reverse();for(const h of u)if(o.test(h))return r(h)}if(n.hash){const u=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(u)return r(u[0])}return e}class w0{started=Object.create(null);times=[];time(e){e in this.started&&Ce(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Ce(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:r,end:o}of this.times)e.push(`${n.padEnd(t)} ${o-r}ms
`);return e.join("")}}function Yo(s,e){const t=e?URL.parse(s,e):URL.parse(s);return t?.protocol==="http:"||t?.protocol==="https:"}function pn(s){s.preventDefault()}function st(s){s.preventDefault(),s.stopPropagation()}function RN(s){console.log("Deprecated API usage: "+s)}class iu{static#e;static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=this.#e.exec(e);if(!t)return null;const n=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let o=parseInt(t[3],10);o=o>=1&&o<=31?o:1;let l=parseInt(t[4],10);l=l>=0&&l<=23?l:0;let c=parseInt(t[5],10);c=c>=0&&c<=59?c:0;let u=parseInt(t[6],10);u=u>=0&&u<=59?u:0;const h=t[7]||"Z";let f=parseInt(t[8],10);f=f>=0&&f<=23?f:0;let p=parseInt(t[9],10)||0;return p=p>=0&&p<=59?p:0,h==="-"?(l+=f,c+=p):h==="+"&&(l-=f,c-=p),new Date(Date.UTC(n,r,o,l,c,u))}}function Lx(s,{scale:e=1,rotation:t=0}){const{width:n,height:r}=s.attributes.style,o=[0,0,parseInt(n),parseInt(r)];return new Sa({viewBox:o,userUnit:1,scale:e,rotation:t})}function Yi(s){if(s.startsWith("#")){const e=parseInt(s.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(e=>parseInt(e)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Ce(`Not a valid color format: "${s}"`),[0,0,0])}function NN(s){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of s.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;s.set(t,Yi(n))}e.remove()}function rt(s){const{a:e,b:t,c:n,d:r,e:o,f:l}=s.getTransform();return[e,t,n,r,o,l]}function Qn(s){const{a:e,b:t,c:n,d:r,e:o,f:l}=s.getTransform().invertSelf();return[e,t,n,r,o,l]}function rs(s,e,t=!1,n=!0){if(e instanceof Sa){const{pageWidth:r,pageHeight:o}=e.rawDims,{style:l}=s,c=Tt.isCSSRoundSupported,u=`var(--total-scale-factor) * ${r}px`,h=`var(--total-scale-factor) * ${o}px`,f=c?`round(down, ${u}, var(--scale-round-x))`:`calc(${u})`,p=c?`round(down, ${h}, var(--scale-round-y))`:`calc(${h})`;!t||e.rotation%180===0?(l.width=f,l.height=p):(l.width=p,l.height=f)}n&&s.setAttribute("data-main-rotation",e.rotation)}class Un{constructor(){const{pixelRatio:e}=Un;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,r,o=-1){let l=1/0,c=1/0,u=1/0;n=Un.capPixels(n,o),n>0&&(l=Math.sqrt(n/(e*t))),r!==-1&&(c=r/e,u=r/t);const h=Math.min(l,c,u);return this.sx>h||this.sy>h?(this.sx=h,this.sy=h,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const ou=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class DN{static get isDarkMode(){return Re(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class Ix{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:n}=window.getComputedStyle(e);return e.remove(),Re(this,"commentForegroundColor",Yi(n))}}function Fx(s,e,t,n){n=Math.min(Math.max(n??1,0),1);const r=255*(1-n);return s=Math.round(s*n+r),e=Math.round(e*n+r),t=Math.round(t*n+r),[s,e,t]}function x0(s,e){const t=s[0]/255,n=s[1]/255,r=s[2]/255,o=Math.max(t,n,r),l=Math.min(t,n,r),c=(o+l)/2;if(o===l)e[0]=e[1]=0;else{const u=o-l;switch(e[1]=c<.5?u/(o+l):u/(2-o-l),o){case t:e[0]=((n-r)/u+(n<r?6:0))*60;break;case n:e[0]=((r-t)/u+2)*60;break;case r:e[0]=((t-n)/u+4)*60;break}}e[2]=c}function Nf(s,e){const t=s[0],n=s[1],r=s[2],o=(1-Math.abs(2*r-1))*n,l=o*(1-Math.abs(t/60%2-1)),c=r-o/2;switch(Math.floor(t/60)){case 0:e[0]=o+c,e[1]=l+c,e[2]=c;break;case 1:e[0]=l+c,e[1]=o+c,e[2]=c;break;case 2:e[0]=c,e[1]=o+c,e[2]=l+c;break;case 3:e[0]=c,e[1]=l+c,e[2]=o+c;break;case 4:e[0]=l+c,e[1]=c,e[2]=o+c;break;case 5:case 6:e[0]=o+c,e[1]=c,e[2]=l+c;break}}function S0(s){return s<=.03928?s/12.92:((s+.055)/1.055)**2.4}function _0(s,e,t){Nf(s,t),t.map(S0);const n=.2126*t[0]+.7152*t[1]+.0722*t[2];Nf(e,t),t.map(S0);const r=.2126*t[0]+.7152*t[1]+.0722*t[2];return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)}const E0=new Map;function jx(s,e){const t=s[0]+s[1]*256+s[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let n=E0.get(t);if(n)return n;const r=new Float32Array(9),o=r.subarray(0,3),l=r.subarray(3,6);x0(s,l);const c=r.subarray(6,9);x0(e,c);const u=c[2]<.5,h=u?12:4.5;if(l[2]=u?Math.sqrt(l[2]):1-Math.sqrt(1-l[2]),_0(l,c,o)<h){let f,p;u?(f=l[2],p=1):(f=0,p=l[2]);const y=.005;for(;p-f>y;){const x=l[2]=(f+p)/2;u===_0(l,c,o)<h?f=x:p=x}l[2]=u?p:f}return Nf(l,o),n=fe.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),E0.set(t,n),n}function yp({html:s,dir:e,className:t},n){const r=document.createDocumentFragment();if(typeof s=="string"){const o=document.createElement("p");o.dir=e||"auto";const l=s.split(/(?:\r\n?|\n)/);for(let c=0,u=l.length;c<u;++c){const h=l[c];o.append(document.createTextNode(h)),c<u-1&&o.append(document.createElement("br"))}r.append(o)}else gp.render({xfaHtml:s,div:r,intent:"richText"});r.firstChild.classList.add("richText",t),n.append(r)}class ta{#e=null;#t=null;#r;#n=null;#o=null;#s=null;#i=null;#a=null;static#c=null;constructor(e){this.#r=e,ta.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=this.#r._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",pn,{signal:t}),e.addEventListener("pointerdown",ta.#l,{signal:t}));const n=this.#n=document.createElement("div");n.className="buttons",e.append(n);const r=this.#r.toolbarPosition;if(r){const{style:o}=e,l=this.#r._uiManager.direction==="ltr"?1-r[0]:r[0];o.insetInlineEnd=`${100*l}%`,o.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return this.#e}static#l(e){e.stopPropagation()}#h(e){this.#r._focusEventsAllowed=!1,st(e)}#d(e){this.#r._focusEventsAllowed=!0,st(e)}#f(e){const t=this.#r._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",this.#h.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#d.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",pn,{signal:t}),!0)}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#o?.shown(),this.#s?.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=this.#r,n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",ta.#c[e]),this.#f(n)&&n.addEventListener("click",r=>{t.delete()},{signal:t._signal}),this.#n.append(n)}get#g(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const t=await e.render();this.#f(t),this.#n.append(t,this.#g),this.#o=e}addComment(e,t=null){if(this.#s)return;const n=e.renderForToolbar();if(!n)return;this.#f(n);const r=this.#i=this.#g;t?(this.#n.insertBefore(n,t),this.#n.insertBefore(r,t)):this.#n.append(n,r),this.#s=e,e.toolbar=this}addColorPicker(e){if(this.#t)return;this.#t=e;const t=e.renderButton();this.#f(t),this.#n.append(t,this.#g)}async addEditSignatureButton(e){const t=this.#a=await e.renderEditButton(this.#r);this.#f(t),this.#n.append(t,this.#g)}removeButton(e){e==="comment"&&(this.#s?.removeToolbarCommentButton(),this.#s=null,this.#i?.remove(),this.#i=null)}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}async addButtonBefore(e,t,n){const r=this.#n.querySelector(n);r&&e==="comment"&&this.addComment(t,r)}updateEditSignatureButton(e){this.#a&&(this.#a.title=e)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class ON{#e=null;#t=null;#r;constructor(e){this.#r=e}#n(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar");const t=this.#r._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",pn,{signal:t});const n=this.#e=document.createElement("div");return n.className="buttons",e.append(n),this.#r.hasCommentManager()&&this.#s("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#r.commentSelection("floating_button")}),this.#s("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#r.highlightSelection("floating_button")}),e}#o(e,t){let n=0,r=0;for(const o of e){const l=o.y+o.height;if(l<n)continue;const c=o.x+(t?o.width:0);if(l>n){r=c,n=l;continue}t?c>r&&(r=c):c<r&&(r=c)}return[t?1-r:r,n]}show(e,t,n){const[r,o]=this.#o(t,n),{style:l}=this.#t||=this.#n();e.append(this.#t),l.insetInlineEnd=`${100*r}%`,l.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#s(e,t,n,r){const o=document.createElement("button");o.classList.add("basic",e),o.tabIndex=0,o.setAttribute("data-l10n-id",t);const l=document.createElement("span");o.append(l),l.className="visuallyHidden",l.setAttribute("data-l10n-id",n);const c=this.#r._signal;c instanceof AbortSignal&&!c.aborted&&(o.addEventListener("contextmenu",pn,{signal:c}),o.addEventListener("click",r,{signal:c})),this.#e.append(o)}}function Bx(s,e,t){for(const n of t)e.addEventListener(n,s[n].bind(s))}class MN{#e=0;get id(){return`${oa}${this.#e++}`}}class vp{#e=pp();#t=0;#r=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const o=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Re(this,"_isSVGFittingCanvas",o)}async#n(e,t){this.#r||=new Map;let n=this.#r.get(e);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let r;if(typeof t=="string"?(n.url=t,r=await Gi(t,"blob")):t instanceof File?r=n.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const o=vp._isSVGFittingCanvas,l=new FileReader,c=new Image,u=new Promise((h,f)=>{c.onload=()=>{n.bitmap=c,n.isSvg=!0,h()},l.onload=async()=>{const p=n.svgUrl=l.result;c.src=await o?`${p}#svgView(preserveAspectRatio(none))`:p},c.onerror=l.onerror=f});l.readAsDataURL(r),await u}else n.bitmap=await createImageBitmap(r);n.refCounter=1}catch(r){Ce(r),n=null}return this.#r.set(e,n),n&&this.#r.set(n.id,n),n}async getFromFile(e){const{lastModified:t,name:n,size:r,type:o}=e;return this.#n(`${t}_${n}_${r}_${o}`,e)}async getFromUrl(e){return this.#n(e,e)}async getFromBlob(e,t){const n=await t;return this.#n(e,n)}async getFromId(e){this.#r||=new Map;const t=this.#r.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){this.#r||=new Map;let n=this.#r.get(e);if(n?.bitmap)return n.refCounter+=1,n;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#r.set(e,n),this.#r.set(n.id,n),n}getSvgUrl(e){const t=this.#r.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#r||=new Map;const t=this.#r.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const r=new OffscreenCanvas(n.width,n.height);r.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=r.convertToBlob()}n.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class LN{#e=[];#t=!1;#r;#n=-1;constructor(e=128){this.#r=e}add({cmd:e,undo:t,post:n,mustExec:r,type:o=NaN,overwriteIfSameType:l=!1,keepUndo:c=!1}){if(r&&e(),this.#t)return;const u={cmd:e,undo:t,post:n,type:o};if(this.#n===-1){this.#e.length>0&&(this.#e.length=0),this.#n=0,this.#e.push(u);return}if(l&&this.#e[this.#n].type===o){c&&(u.undo=this.#e[this.#n].undo),this.#e[this.#n]=u;return}const h=this.#n+1;h===this.#r?this.#e.splice(0,1):(this.#n=h,h<this.#e.length&&this.#e.splice(h)),this.#e.push(u)}undo(){if(this.#n===-1)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1,this.#n-=1}redo(){if(this.#n<this.#e.length-1){this.#n+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#e.length-1}cleanType(e){if(this.#n!==-1){for(let t=this.#n;t>=0;t--)if(this.#e[t].type!==e){this.#e.splice(t+1,this.#n-t),this.#n=t;return}this.#e.length=0,this.#n=-1}}destroy(){this.#e=null}}class Ea{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Tt.platform;for(const[n,r,o={}]of e)for(const l of n){const c=l.startsWith("mac+");t&&c?(this.callbacks.set(l.slice(4),{callback:r,options:o}),this.allKeys.add(l.split("+").at(-1))):!t&&!c&&(this.callbacks.set(l,{callback:r,options:o}),this.allKeys.add(l.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(this.#e(t));if(!n)return;const{callback:r,options:{bubbles:o=!1,args:l=[],checker:c=null}}=n;c&&!c(e,t)||(r.bind(e,...l,t)(),o||st(t))}}class bp{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return NN(e),Re(this,"_colors",e)}convert(e){const t=Yi(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,r]of this._colors)if(r.every((o,l)=>o===t[l]))return bp._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?fe.makeHexColor(...t):e}}class Cr{#e=new AbortController;#t=null;#r=null;#n=new Map;#o=new Map;#s=null;#i=null;#a=null;#c=new LN;#l=null;#h=null;#d=null;#f=0;#g=new Set;#p=null;#u=null;#m=new Set;_editorUndoBar=null;#y=!1;#b=!1;#v=!1;#A=null;#_=null;#w=null;#T=null;#S=!1;#E=null;#R=new MN;#k=!1;#P=!1;#F=!1;#D=null;#M=null;#j=null;#L=null;#$=null;#C=Ae.NONE;#x=new Set;#O=null;#B=null;#z=null;#G=null;#q=null;#Y={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#H=[0,0];#I=null;#V=null;#J=null;#Z=null;#U=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=Cr.prototype,t=l=>l.#V.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),n=(l,{target:c})=>{if(c instanceof HTMLInputElement){const{type:u}=c;return u!=="text"&&u!=="number"}return!0},r=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return Re(this,"_keyboardManager",new Ea([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(l,{target:c})=>!(c instanceof HTMLButtonElement)&&l.#V.contains(c)&&!l.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(l,{target:c})=>!(c instanceof HTMLButtonElement)&&l.#V.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-o,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[o,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-o],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,o],checker:t}]]))}constructor(e,t,n,r,o,l,c,u,h,f,p,y,x,_,b,w){const E=this._signal=this.#e.signal;this.#V=e,this.#J=t,this.#Z=n,this.#s=r,this.#l=o,this.#B=l,this.#q=u,this._eventBus=c,c._on("editingaction",this.onEditingAction.bind(this),{signal:E}),c._on("pagechanging",this.onPageChanging.bind(this),{signal:E}),c._on("scalechanging",this.onScaleChanging.bind(this),{signal:E}),c._on("rotationchanging",this.onRotationChanging.bind(this),{signal:E}),c._on("setpreference",this.onSetPreference.bind(this),{signal:E}),c._on("switchannotationeditorparams",A=>this.updateParams(A.type,A.value),{signal:E}),window.addEventListener("pointerdown",()=>{this.#P=!0},{capture:!0,signal:E}),window.addEventListener("pointerup",()=>{this.#P=!1},{capture:!0,signal:E}),this.#le(),this.#he(),this.#te(),this.#i=u.annotationStorage,this.#A=u.filterFactory,this.#z=h,this.#T=f||null,this.#y=p,this.#b=y,this.#v=x,this.#$=_||null,this.viewParameters={realScale:Ds.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=b||null,this._supportsPinchToZoom=w!==!1,o?.setSidebarUiManager(this)}destroy(){this.#U?.resolve(),this.#U=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#o.values())e.destroy();this.#o.clear(),this.#n.clear(),this.#m.clear(),this.#L?.clear(),this.#t=null,this.#x.clear(),this.#c.destroy(),this.#s?.destroy(),this.#l?.destroy(),this.#B?.destroy(),this.#E?.hide(),this.#E=null,this.#j?.destroy(),this.#j=null,this.#r=null,this.#_&&(clearTimeout(this.#_),this.#_=null),this.#I&&(clearTimeout(this.#I),this.#I=null),this._editorUndoBar?.destroy(),this.#q=null}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#$}get useNewAltTextFlow(){return this.#b}get useNewAltTextWhenAddingImage(){return this.#v}get hcmFilter(){return Re(this,"hcmFilter",this.#z?this.#A.addHCMFilter(this.#z.foreground,this.#z.background):"none")}get direction(){return Re(this,"direction",getComputedStyle(this.#V).direction)}get _highlightColors(){return Re(this,"_highlightColors",this.#T?new Map(this.#T.split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Re(this,"highlightColors",null);const t=new Map,n=!!this.#z;for(const[r,o]of e){const l=r.endsWith("_HCM");if(n&&l){t.set(r.replace("_HCM",""),o);continue}!n&&!l&&t.set(r,o)}return Re(this,"highlightColors",t)}get highlightColorNames(){return Re(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#d=e}setMainHighlightColorPicker(e){this.#j=e}editAltText(e,t=!1){this.#s?.editAltText(this,e,t)}hasCommentManager(){return!!this.#l}editComment(e,t,n,r){this.#l?.showDialog(this,e,t,n,r)}selectComment(e,t){this.#o.get(e)?.getEditorByUID(t)?.toggleComment(!0,!0)}updateComment(e){this.#l?.updateComment(e.getData())}updatePopupColor(e){this.#l?.updatePopupColor(e)}removeComment(e){this.#l?.removeComments([e.uid])}toggleComment(e,t,n=void 0){this.#l?.toggleCommentPopup(e,t,n)}makeCommentColor(e,t){return e&&this.#l?.makeCommentColor(e,t)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(e){if(this.#o.has(e-1))return;const{resolve:t,promise:n}=Promise.withResolvers(),r=o=>{o.pageNumber===e&&(this._eventBus._off("editorsrendered",r),t())};this._eventBus.on("editorsrendered",r),await n}getSignature(e){this.#B?.getSignature({uiManager:this,editor:e})}get signatureManager(){return this.#B}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){e==="enableNewAltTextWhenAddingImage"&&(this.#v=t)}onPageChanging({pageNumber:e}){this.#f=e-1}focusMainContainer(){this.#V.focus()}findParent(e,t){for(const n of this.#o.values()){const{x:r,y:o,width:l,height:c}=n.div.getBoundingClientRect();if(e>=r&&e<=r+l&&t>=o&&t<=o+c)return n}return null}disableUserSelect(e=!1){this.#J.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#m.add(e)}removeShouldRescale(e){this.#m.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Ds.PDF_TO_CSS_UNITS;for(const t of this.#m)t.onScaleChanging();this.#d?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#Q({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#ee(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of this.#o.values())if(n.hasTextLayer(e))return n;return null}highlightSelection(e="",t=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:r,anchorOffset:o,focusNode:l,focusOffset:c}=n,u=n.toString(),f=this.#Q(n).closest(".textLayer"),p=this.getSelectionBoxes(f);if(!p)return;n.empty();const y=this.#ee(f),x=this.#C===Ae.NONE,_=()=>{const b=y?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:p,anchorNode:r,anchorOffset:o,focusNode:l,focusOffset:c,text:u});x&&this.showAllEditors("highlight",!0,!0),t&&b?.editComment()};if(x){this.switchToMode(Ae.HIGHLIGHT,_);return}_()}commentSelection(e=""){this.highlightSelection(e,!0)}#oe(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=this.#Q(e).closest(".textLayer"),r=this.getSelectionBoxes(n);r&&(this.#E||=new ON(this),this.#E.show(n,r,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(e){if(!this.#i)return null;const t=`${oa}${e}`,n=this.#i.getRawValue(t);return n&&this.#i.remove(t),n}addToAnnotationStorage(e){!e.isEmpty()&&this.#i&&!this.#i.has(e.id)&&this.#i.setValue(e.id,e)}a11yAlert(e,t=null){const n=this.#Z;n&&(n.setAttribute("data-l10n-id",e),t?n.setAttribute("data-l10n-args",JSON.stringify(t)):n.removeAttribute("data-l10n-args"))}#ae(){const e=document.getSelection();if(!e||e.isCollapsed){this.#O&&(this.#E?.hide(),this.#O=null,this.#N({hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===this.#O)return;const r=this.#Q(e).closest(".textLayer");if(!r){this.#O&&(this.#E?.hide(),this.#O=null,this.#N({hasSelectedText:!1}));return}if(this.#E?.hide(),this.#O=t,this.#N({hasSelectedText:!0}),!(this.#C!==Ae.HIGHLIGHT&&this.#C!==Ae.NONE)&&(this.#C===Ae.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#S=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#C===Ae.HIGHLIGHT?this.#ee(r):null;if(o?.toggleDrawing(),this.#P){const l=new AbortController,c=this.combinedSignal(l),u=h=>{h.type==="pointerup"&&h.button!==0||(l.abort(),o?.toggleDrawing(!0),h.type==="pointerup"&&this.#X("main_toolbar"))};window.addEventListener("pointerup",u,{signal:c}),window.addEventListener("blur",u,{signal:c})}else o?.toggleDrawing(!0),this.#X("main_toolbar")}}#X(e=""){this.#C===Ae.HIGHLIGHT?this.highlightSelection(e):this.#y&&this.#oe()}#le(){document.addEventListener("selectionchange",this.#ae.bind(this),{signal:this._signal})}#ce(){if(this.#w)return;this.#w=new AbortController;const e=this.combinedSignal(this.#w);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#ue(){this.#w?.abort(),this.#w=null}blur(){if(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#X("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of this.#x)if(t.div.contains(e)){this.#M=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#M)return;const[e,t]=this.#M;this.#M=null,t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}#te(){if(this.#D)return;this.#D=new AbortController;const e=this.combinedSignal(this.#D);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#de(){this.#D?.abort(),this.#D=null}#ne(){if(this.#h)return;this.#h=new AbortController;const e=this.combinedSignal(this.#h);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#re(){this.#h?.abort(),this.#h=null}#he(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#te(),this.#ne()}removeEditListeners(){this.#de(),this.#re()}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of this.#u)if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of this.#u)if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const t=[];for(const n of this.#x){const r=n.serialize(!0);r&&t.push(r)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const o of t.items)for(const l of this.#u)if(l.isHandlingMimeForPasting(o.type)){l.paste(o,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(o){Ce(`paste: "${o.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const o=[];for(const u of n){const h=await r.deserialize(u);if(!h)return;o.push(h)}const l=()=>{for(const u of o)this.#se(u);this.#ie(o)},c=()=>{for(const u of o)u.remove()};this.addCommands({cmd:l,undo:c,mustExec:!0})}catch(o){Ce(`paste: "${o.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#C!==Ae.NONE&&!this.isEditorHandlingKeyboard&&Cr._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#X("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#N(e){Object.entries(e).some(([n,r])=>this.#Y[n]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#Y,e)}),this.#C===Ae.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#W([[Me.HIGHLIGHT_FREE,!0]]))}#W(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#ce(),this.#ne(),this.#N({isEditing:this.#C!==Ae.NONE,isEmpty:this.#K(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ue(),this.#re(),this.#N({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#u){this.#u=e;for(const t of this.#u)this.#W(t.defaultPropertiesToUpdate)}}getId(){return this.#R.id}get currentLayer(){return this.#o.get(this.#f)}getLayer(e){return this.#o.get(e)}get currentPageIndex(){return this.#f}addLayer(e){this.#o.set(e.pageIndex,e),this.#k?e.enable():e.disable()}removeLayer(e){this.#o.delete(e.pageIndex)}async updateMode(e,t=null,n=!1,r=!1,o=!1){if(this.#C!==e&&!(this.#U&&(await this.#U.promise,!this.#U))){if(this.#U=Promise.withResolvers(),this.#d?.commitOrRemove(),this.#C===Ae.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#C=e,e===Ae.NONE){this.setEditingState(!1),this.#pe();for(const l of this.#n.values())l.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#U.resolve();return}for(const l of this.#n.values())l.addStandaloneCommentButton();e===Ae.SIGNATURE&&await this.#B?.loadSignatures(),this.setEditingState(!0),await this.#fe(),this.unselectAll();for(const l of this.#o.values())l.updateMode(e);if(e===Ae.POPUP){this.#r||=await this.#q.getAnnotationsByType(new Set(this.#u.map(u=>u._editorType)));const l=new Set,c=[];for(const u of this.#n.values()){const{annotationElementId:h,hasComment:f,deleted:p}=u;h&&l.add(h),f&&!p&&c.push(u.getData())}for(const u of this.#r){const{id:h,popupRef:f,contentsObj:p}=u;f&&p?.str&&!l.has(h)&&!this.#g.has(h)&&c.push(u)}this.#l?.showSidebar(c)}if(!t){n&&this.addNewEditorFromKeyboard(),this.#U.resolve();return}for(const l of this.#n.values())l.uid===t?(this.setSelected(l),o?l.editComment():r?l.enterInEditMode():l.focus()):l.unselect();this.#U.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==this.#C&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(this.#u){switch(e){case Me.CREATE:this.currentLayer.addNewEditor(t);return;case Me.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#G||=new Map).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const n of this.#x)n.updateParams(e,t);else for(const n of this.#u)n.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){for(const o of this.#n.values())o.editorType===e&&o.show(t);(this.#G?.get(Me.HIGHLIGHT_SHOW_ALL)??!0)!==t&&this.#W([[Me.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(this.#F!==e){this.#F=e;for(const t of this.#o.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}async#fe(){if(!this.#k){this.#k=!0;const e=[];for(const t of this.#o.values())e.push(t.enable());await Promise.all(e);for(const t of this.#n.values())t.enable()}}#pe(){if(this.unselectAll(),this.#k){this.#k=!1;for(const e of this.#o.values())e.disable();for(const e of this.#n.values())e.disable()}}*getEditors(e){for(const t of this.#n.values())t.pageIndex===e&&(yield t)}getEditor(e){return this.#n.get(e)}addEditor(e){this.#n.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#_&&clearTimeout(this.#_),this.#_=setTimeout(()=>{this.focusMainContainer(),this.#_=null},0)),this.#n.delete(e.id),e.annotationElementId&&this.#L?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!this.#g.has(e.annotationElementId))&&this.#i?.remove(e.id)}addDeletedAnnotationElement(e){this.#g.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#g.has(e)}removeDeletedAnnotationElement(e){this.#g.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#se(e){const t=this.#o.get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#W(e.propertiesToUpdate))}get#me(){let e=null;for(e of this.#x);return e}updateUI(e){this.#me===e&&this.#W(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#W(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#x.has(e)){this.#x.delete(e),e.unselect(),this.#N({hasSelectedEditor:this.hasSelection});return}this.#x.add(e),e.select(),this.#W(e.propertiesToUpdate),this.#N({hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.id}),this.#d?.commitOrRemove();for(const t of this.#x)t!==e&&t.unselect();this.#x.clear(),this.#x.add(e),e.select(),this.#W(e.propertiesToUpdate),this.#N({hasSelectedEditor:!0})}isSelected(e){return this.#x.has(e)}get firstSelectedEditor(){return this.#x.values().next().value}unselect(e){e.unselect(),this.#x.delete(e),this.#N({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#x.size!==0}get isEnterHandled(){return this.#x.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#N({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#K()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#N({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#K()})}addCommands(e){this.#c.add(e),this.#N({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#K()})}cleanUndoStack(e){this.#c.cleanType(e)}#K(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const e of this.#n.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();const e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...this.#x],n=()=>{this._editorUndoBar?.show(r,t.length===1?t[0].editorType:t.length);for(const o of t)o.remove()},r=()=>{for(const o of t)this.#se(o)};this.addCommands({cmd:n,undo:r,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#ie(e){for(const t of this.#x)t.unselect();this.#x.clear();for(const t of e)t.isEmpty()||(this.#x.add(t),t.select());this.#N({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#x)e.commit();this.#ie(this.#n.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#C!==Ae.NONE))&&!this.#d?.commitOrRemove()&&this.hasSelection){for(const e of this.#x)e.unselect();this.#x.clear(),this.#N({hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;this.#H[0]+=e,this.#H[1]+=t;const[r,o]=this.#H,l=[...this.#x],c=1e3;this.#I&&clearTimeout(this.#I),this.#I=setTimeout(()=>{this.#I=null,this.#H[0]=this.#H[1]=0,this.addCommands({cmd:()=>{for(const u of l)this.#n.has(u.id)&&(u.translateInPage(r,o),u.translationDone())},undo:()=>{for(const u of l)this.#n.has(u.id)&&(u.translateInPage(-r,-o),u.translationDone())},mustExec:!1})},c);for(const u of l)u.translateInPage(e,t),u.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#p=new Map;for(const e of this.#x)this.#p.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#p)return!1;this.disableUserSelect(!1);const e=this.#p;this.#p=null;let t=!1;for(const[{x:r,y:o,pageIndex:l},c]of e)c.newX=r,c.newY=o,c.newPageIndex=l,t||=r!==c.savedX||o!==c.savedY||l!==c.savedPageIndex;if(!t)return!1;const n=(r,o,l,c)=>{if(this.#n.has(r.id)){const u=this.#o.get(c);u?r._setParentAndPosition(u,o,l):(r.pageIndex=c,r.x=o,r.y=l)}};return this.addCommands({cmd:()=>{for(const[r,{newX:o,newY:l,newPageIndex:c}]of e)n(r,o,l,c)},undo:()=>{for(const[r,{savedX:o,savedY:l,savedPageIndex:c}]of e)n(r,o,l,c)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#p)for(const n of this.#p.keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#x.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#C}isEditingMode(){return this.#C!==Ae.NONE}get imageManager(){return Re(this,"imageManager",new vp)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let h=0,f=t.rangeCount;h<f;h++)if(!e.contains(t.getRangeAt(h).commonAncestorContainer))return null;const{x:n,y:r,width:o,height:l}=e.getBoundingClientRect();let c;switch(e.getAttribute("data-main-rotation")){case"90":c=(h,f,p,y)=>({x:(f-r)/l,y:1-(h+p-n)/o,width:y/l,height:p/o});break;case"180":c=(h,f,p,y)=>({x:1-(h+p-n)/o,y:1-(f+y-r)/l,width:p/o,height:y/l});break;case"270":c=(h,f,p,y)=>({x:1-(f+y-r)/l,y:(h-n)/o,width:y/l,height:p/o});break;default:c=(h,f,p,y)=>({x:(h-n)/o,y:(f-r)/l,width:p/o,height:y/l});break}const u=[];for(let h=0,f=t.rangeCount;h<f;h++){const p=t.getRangeAt(h);if(!p.collapsed)for(const{x:y,y:x,width:_,height:b}of p.getClientRects())_===0||b===0||u.push(c(y,x,_,b))}return u.length===0?null:u}addChangedExistingAnnotation({annotationElementId:e,id:t}){(this.#a||=new Map).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){this.#a?.delete(e)}renderAnnotationElement(e){const t=this.#a?.get(e.data.id);if(!t)return;const n=this.#i.getRawValue(t);n&&(this.#C===Ae.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}setMissingCanvas(e,t,n){const r=this.#L?.get(e);r&&(r.setCanvas(t,n),this.#L.delete(e))}addMissingCanvas(e,t){(this.#L||=new Map).set(e,t)}}class er{#e=null;#t=!1;#r=null;#n=null;#o=null;#s=null;#i=!1;#a=null;#c=null;#l=null;#h=null;#d=!1;static#f=null;static _l10n=null;constructor(e){this.#c=e,this.#d=e._uiManager.useNewAltTextFlow,er.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){er._l10n??=e}async render(){const e=this.#r=document.createElement("button");e.className="altText",e.tabIndex="0";const t=this.#n=document.createElement("span");e.append(t),this.#d?(e.classList.add("new"),e.setAttribute("data-l10n-id",er.#f.missing),t.setAttribute("data-l10n-id",er.#f["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=this.#c._uiManager._signal;e.addEventListener("contextmenu",pn,{signal:n}),e.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const r=o=>{o.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#d&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return e.addEventListener("click",r,{capture:!0,signal:n}),e.addEventListener("keydown",o=>{o.target===e&&o.key==="Enter"&&(this.#i=!0,r(o))},{signal:n}),await this.#p(),e}get#g(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#r&&(this.#r.focus({focusVisible:this.#i}),this.#i=!1)}isEmpty(){return this.#d?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#d?this.#e!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(e){this.#e===null&&(this.#l=e,this.#h=await er._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#p())}toggleAltTextBadge(e=!1){if(!this.#d||this.#e){this.#a?.remove(),this.#a=null;return}if(!this.#a){const t=this.#a=document.createElement("div");t.className="noAltTextBadge",this.#c.div.append(t)}this.#a.classList.toggle("hidden",!e)}serialize(e){let t=this.#e;return!e&&this.#l===t&&(t=this.#h),{altText:t,decorative:this.#t,guessedText:this.#l,textWithDisclaimer:this.#h}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:r,cancel:o=!1}){n&&(this.#l=n,this.#h=r),!(this.#e===e&&this.#t===t)&&(o||(this.#e=e,this.#t=t),this.#p())}toggle(e=!1){this.#r&&(!e&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#r.disabled=!e)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#r?.remove(),this.#r=null,this.#n=null,this.#o=null,this.#a?.remove(),this.#a=null}async#p(){const e=this.#r;if(!e)return;if(this.#d){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",er.#f[this.#g]),this.#n?.setAttribute("data-l10n-id",er.#f[`${this.#g}-label`]),!this.#e){this.#o?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#o?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=this.#o;if(!t){this.#o=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${this.#c.id}`;const r=100,o=this.#c._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#o.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:o}),e.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#o?.classList.remove("show")},{signal:o})}this.#t?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=this.#e),t.parentNode||e.append(t),this.#c.getElementForAltText()?.setAttribute("aria-describedby",t.id)}}class Nc{#e=null;#t=null;#r=!1;#n=null;#o=null;#s=null;#i=null;#a=null;#c=!1;#l=null;constructor(e){this.#n=e}renderForToolbar(){const e=this.#t=document.createElement("button");return e.className="comment",this.#h(e,!1)}renderForStandalone(){const e=this.#e=document.createElement("button");e.className="annotationCommentButton";const t=this.#n.commentButtonPosition;if(t){const{style:n}=e;n.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const r=this.#n.commentButtonColor;r&&(n.backgroundColor=r)}return this.#h(e,!0)}focusButton(){setTimeout(()=>{(this.#e??this.#t)?.focus()},0)}onUpdatedColor(){if(!this.#e)return;const e=this.#n.commentButtonColor;e&&(this.#e.style.backgroundColor=e),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#e?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#e)return null;const{x:e,y:t,height:n}=this.#e.getBoundingClientRect(),{x:r,y:o,width:l,height:c}=this.#n.parent.boundingClientRect;return[(e-r)/l,(t+n-o)/c]}set commentPopupPositionInLayer(e){this.#l=e}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#e?.remove(),this.#e=null}removeToolbarCommentButton(){this.#t?.remove(),this.#t=null}setCommentButtonStates({selected:e,hasPopup:t}){this.#e&&(this.#e.classList.toggle("selected",e),this.#e.ariaExpanded=t)}#h(e,t){if(!this.#n._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const n=this.#n._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return e;e.addEventListener("contextmenu",pn,{signal:n}),t&&(e.addEventListener("focusin",o=>{this.#n._focusEventsAllowed=!1,st(o)},{capture:!0,signal:n}),e.addEventListener("focusout",o=>{this.#n._focusEventsAllowed=!0,st(o)},{capture:!0,signal:n})),e.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const r=o=>{o.preventDefault(),e===this.#t?this.edit():this.#n.toggleComment(!0)};return e.addEventListener("click",r,{capture:!0,signal:n}),e.addEventListener("keydown",o=>{o.target===e&&o.key==="Enter"&&(this.#r=!0,r(o))},{signal:n}),e.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:n}),e.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:n}),e}edit(e){const t=this.commentPopupPositionInLayer;let n,r;if(t)[n,r]=t;else{[n,r]=this.#n.commentButtonPosition;const{width:f,height:p,x:y,y:x}=this.#n;n=y+n*f,r=x+r*p}const o=this.#n.parent.boundingClientRect,{x:l,y:c,width:u,height:h}=o;this.#n._uiManager.editComment(this.#n,l+n*u,c+r*h,{...e,parentDimensions:o})}finish(){this.#t&&(this.#t.focus({focusVisible:this.#r}),this.#r=!1)}isDeleted(){return this.#c||this.#i===""}isEmpty(){return this.#i===null}hasBeenEdited(){return this.isDeleted()||this.#i!==this.#o}serialize(){return this.data}get data(){return{text:this.#i,richText:this.#s,date:this.#a,deleted:this.isDeleted()}}set data(e){if(e!==this.#i&&(this.#s=null),e===null){this.#i="",this.#c=!0;return}this.#i=e,this.#a=new Date,this.#c=!1}setInitialText(e,t=null){this.#o=e,this.data=e,this.#a=null,this.#s=t}shown(){}destroy(){this.#t?.remove(),this.#t=null,this.#e?.remove(),this.#e=null,this.#i="",this.#s=null,this.#a=null,this.#n=null,this.#r=!1,this.#c=!1}}class Aa{#e;#t=!1;#r=null;#n;#o;#s;#i;#a=null;#c;#l=null;#h;#d=null;constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:r=null,onPinching:o=null,onPinchEnd:l=null,signal:c}){this.#e=e,this.#r=n,this.#n=t,this.#o=r,this.#s=o,this.#i=l,this.#h=new AbortController,this.#c=AbortSignal.any([c,this.#h.signal]),e.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Un.pixelRatio}#f(e){if(this.#n?.())return;if(e.touches.length===1){if(this.#a)return;const r=this.#a=new AbortController,o=AbortSignal.any([this.#c,r.signal]),l=this.#e,c={capture:!0,signal:o,passive:!1},u=h=>{h.pointerType==="touch"&&(this.#a?.abort(),this.#a=null)};l.addEventListener("pointerdown",h=>{h.pointerType==="touch"&&(st(h),u(h))},c),l.addEventListener("pointerup",u,c),l.addEventListener("pointercancel",u,c);return}if(!this.#d){this.#d=new AbortController;const r=AbortSignal.any([this.#c,this.#d.signal]),o=this.#e,l={signal:r,capture:!1,passive:!1};o.addEventListener("touchmove",this.#g.bind(this),l);const c=this.#p.bind(this);o.addEventListener("touchend",c,l),o.addEventListener("touchcancel",c,l),l.capture=!0,o.addEventListener("pointerdown",st,l),o.addEventListener("pointermove",st,l),o.addEventListener("pointercancel",st,l),o.addEventListener("pointerup",st,l),this.#o?.()}if(st(e),e.touches.length!==2||this.#r?.()){this.#l=null;return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),this.#l={touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY}}#g(e){if(!this.#l||e.touches.length!==2)return;st(e);let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:r,screenY:o}=t,{screenX:l,screenY:c}=n,u=this.#l,{touch0X:h,touch0Y:f,touch1X:p,touch1Y:y}=u,x=p-h,_=y-f,b=l-r,w=c-o,E=Math.hypot(b,w)||1,A=Math.hypot(x,_)||1;if(!this.#t&&Math.abs(A-E)<=Aa.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(u.touch0X=r,u.touch0Y=o,u.touch1X=l,u.touch1Y=c,!this.#t){this.#t=!0;return}const C=[(r+l)/2,(o+c)/2];this.#s?.(C,A,E)}#p(e){e.touches.length>=2||(this.#d&&(this.#d.abort(),this.#d=null,this.#i?.()),this.#l&&(st(e),this.#l=null,this.#t=!1))}destroy(){this.#h?.abort(),this.#h=null,this.#a?.abort(),this.#a=null}}class be{#e=null;#t=null;#r=null;#n=null;#o=null;#s=!1;#i=null;#a="";#c=null;#l=null;#h=null;#d=null;#f=null;#g="";#p=!1;#u=null;#m=!1;#y=!1;#b=!1;#v=null;#A=0;#_=0;#w=null;#T=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#S=!1;#E=be._zIndex++;static _borderLineWidth=-1;static _colorManager=new bp;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=be.prototype._resizeWithKeyboard,t=Cr.TRANSLATE_SMALL,n=Cr.TRANSLATE_BIG;return Re(this,"_resizerKeyboardManager",new Ea([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],be.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:r,pageX:o,pageY:l}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[o,l];const[c,u]=this.parentDimensions;this.x=e.x/c,this.y=e.y/u,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Re(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new IN({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(be._l10n??=e,be._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),be._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);be._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){$e("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#S}set _isDraggable(e){this.#S=e,this.div?.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#E}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(this.#I(),this.#d?.remove(),this.#d=null),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#p?this.#p=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,r){const[o,l]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(e+n)/o,this.y=(t+r)/l,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,r]=this.parentDimensions;this.setAt(e*n,t*r,this.width*n,this.height*r),this._onTranslated()}#R([e,t],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/e,this.y+=r/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,t){this.#R(this.parentDimensions,e,t)}translateInPage(e,t){this.#u||=[this.x,this.y,this.width,this.height],this.#R(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){this.#u||=[this.x,this.y,this.width,this.height];const{div:n,parentDimensions:[r,o]}=this;if(this.x+=e/r,this.y+=t/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:p,y}=this.div.getBoundingClientRect();this.parent.findNewParent(this,p,y)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:c}=this;const[u,h]=this.getBaseTranslation();l+=u,c+=h;const{style:f}=n;f.left=`${(100*l).toFixed(2)}%`,f.top=`${(100*c).toFixed(2)}%`,this._onTranslating(l,c),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=be,r=n/e,o=n/t;switch(this.rotation){case 90:return[-r,o];case 180:return[r,o];case 270:return[r,-o];default:return[-r,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,r]}=this;let{x:o,y:l,width:c,height:u}=this;if(c*=n,u*=r,o*=n,l*=r,this._mustFixPosition)switch(e){case 0:o=Ft(o,0,n-c),l=Ft(l,0,r-u);break;case 90:o=Ft(o,0,n-u),l=Ft(l,c,r);break;case 180:o=Ft(o,c,n),l=Ft(l,u,r);break;case 270:o=Ft(o,u,n),l=Ft(l,0,r-c);break}this.x=o/=n,this.y=l/=r;const[h,f]=this.getBaseTranslation();o+=h,l+=f,t.left=`${(100*o).toFixed(2)}%`,t.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}static#k(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return be.#k(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return be.#k(e,t,360-this.parentRotation)}#P(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(){const{div:{style:e},width:t,height:n}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#F(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const r=document.createElement("div");this.#c.append(r),r.classList.add("resizer",n),r.setAttribute("data-resizer-name",n),r.addEventListener("pointerdown",this.#D.bind(this,n),{signal:t}),r.addEventListener("contextmenu",pn,{signal:t}),r.tabIndex=-1}this.div.prepend(this.#c)}#D(e,t){t.preventDefault();const{isMac:n}=Tt.platform;if(t.button!==0||t.ctrlKey&&n)return;this.#r?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,this.#l=[t.screenX,t.screenY];const o=new AbortController,l=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#L.bind(this,e),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",st,{passive:!1,signal:l}),window.addEventListener("contextmenu",pn,{signal:l}),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const c=this.parent.div.style.cursor,u=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const h=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#r?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=c,this.div.style.cursor=u,this.#j()};window.addEventListener("pointerup",h,{signal:l}),window.addEventListener("blur",h,{signal:l})}#M(e,t,n,r){this.width=n,this.height=r,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#j(){if(!this.#h)return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:r}=this.#h;this.#h=null;const o=this.x,l=this.y,c=this.width,u=this.height;o===e&&l===t&&c===n&&u===r||this.addCommands({cmd:this.#M.bind(this,o,l,c,u),undo:this.#M.bind(this,e,t,n,r),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#L(e,t){const[n,r]=this.parentDimensions,o=this.x,l=this.y,c=this.width,u=this.height,h=be.MIN_SIZE/n,f=be.MIN_SIZE/r,p=this.#P(this.rotation),y=(G,X)=>[p[0]*G+p[2]*X,p[1]*G+p[3]*X],x=this.#P(360-this.rotation),_=(G,X)=>[x[0]*G+x[2]*X,x[1]*G+x[3]*X];let b,w,E=!1,A=!1;switch(e){case"topLeft":E=!0,b=(G,X)=>[0,0],w=(G,X)=>[G,X];break;case"topMiddle":b=(G,X)=>[G/2,0],w=(G,X)=>[G/2,X];break;case"topRight":E=!0,b=(G,X)=>[G,0],w=(G,X)=>[0,X];break;case"middleRight":A=!0,b=(G,X)=>[G,X/2],w=(G,X)=>[0,X/2];break;case"bottomRight":E=!0,b=(G,X)=>[G,X],w=(G,X)=>[0,0];break;case"bottomMiddle":b=(G,X)=>[G/2,X],w=(G,X)=>[G/2,0];break;case"bottomLeft":E=!0,b=(G,X)=>[0,X],w=(G,X)=>[G,0];break;case"middleLeft":A=!0,b=(G,X)=>[0,X/2],w=(G,X)=>[G,X/2];break}const C=b(c,u),k=w(c,u);let N=y(...k);const R=be._round(o+N[0]),D=be._round(l+N[1]);let j=1,z=1,q,Y;if(t.fromKeyboard)({deltaX:q,deltaY:Y}=t);else{const{screenX:G,screenY:X}=t,[I,V]=this.#l;[q,Y]=this.screenToPageTranslation(G-I,X-V),this.#l[0]=G,this.#l[1]=X}if([q,Y]=_(q/n,Y/r),E){const G=Math.hypot(c,u);j=z=Math.max(Math.min(Math.hypot(k[0]-C[0]-q,k[1]-C[1]-Y)/G,1/c,1/u),h/c,f/u)}else A?j=Ft(Math.abs(k[0]-C[0]-q),h,1)/c:z=Ft(Math.abs(k[1]-C[1]-Y),f,1)/u;const ne=be._round(c*j),ie=be._round(u*z);N=y(...w(ne,ie));const ee=R-N[0],ae=D-N[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=ne,this.height=ie,this.x=ee,this.y=ae,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#r?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new ta(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,n]of e)await this._editToolbar.addButton(t,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#r?.destroy()}addContainer(e){const t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#r||(er.initialize(be._l10n),this.#r=new er(this),this.#e&&(this.#r.data=this.#e,this.#e=null)),this.#r}get altTextData(){return this.#r?.data}set altTextData(e){this.#r&&(this.#r.data=e)}get guessedAltText(){return this.#r?.guessedText}async setGuessedAltText(e){await this.#r?.setGuessedText(e)}serializeAltText(e){return this.#r?.serialize(e)}hasAltText(){return!!this.#r&&!this.#r.isEmpty()}hasAltTextData(){return this.#r?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.#n||=new Nc(this)}addStandaloneCommentButton(){if(this.#o){this._uiManager.isEditingMode()&&this.#o.classList.remove("hidden");return}this.hasComment&&(this.#o=this.#n.renderForStandalone(),this.div.append(this.#o))}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#o=null}hideStandaloneCommentButton(){this.#o?.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:n,deleted:r}}=this.#n;return{text:t,richText:e,date:n,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){this.#n||=new Nc(this),this.#n.data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:n}){if(!t||(this.#n||=new Nc(this),this.#n.setInitialText(e,n),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(e){this.#n||=new Nc(this),this.#n.edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){this.#n.setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,r]=e.rect,[o]=this.pageDimensions,[l]=this.pageTranslation,c=l+o+1,u=r-100,h=c+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[c,u,h,r]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){this.#n.data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=this.#s?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),this.#z();const[t,n]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*n/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/n).toFixed(2)}%`);const[r,o]=this.getInitialTranslation();return this.translate(r,o),Bx(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#T||=new Aa({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#$.bind(this),onPinching:this.#C.bind(this),onPinchEnd:this.#x.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),e}#$(){this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#r?.toggle(!1),this.parent.togglePointerEvents(!1)}#C(e,t,n){let o=.7*(n/t)+1-.7;if(o===1)return;const l=this.#P(this.rotation),c=(R,D)=>[l[0]*R+l[2]*D,l[1]*R+l[3]*D],[u,h]=this.parentDimensions,f=this.x,p=this.y,y=this.width,x=this.height,_=be.MIN_SIZE/u,b=be.MIN_SIZE/h;o=Math.max(Math.min(o,1/y,1/x),_/y,b/x);const w=be._round(y*o),E=be._round(x*o);if(w===y&&E===x)return;this.#u||=[f,p,y,x];const A=c(y/2,x/2),C=be._round(f+A[0]),k=be._round(p+A[1]),N=c(w/2,E/2);this.x=C-N[0],this.y=k-N[1],this.width=w,this.height=E,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#x(){this.#r?.toggle(!0),this.parent.togglePointerEvents(!0),this.#j()}pointerdown(e){const{isMac:t}=Tt.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#p=!0,this._isDraggable){this.#B(e);return}this.#O(e)}#O(e){const{isMac:t}=Tt.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#B(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const r=new AbortController,o=this._uiManager.combinedSignal(r),l={capture:!0,passive:!1,signal:o},c=h=>{r.abort(),this.#i=null,this.#p=!1,this._uiManager.endDragSession()||this.#O(h),n&&this._onStopDragging()};t&&(this.#A=e.clientX,this.#_=e.clientY,this.#i=e.pointerId,this.#a=e.pointerType,window.addEventListener("pointermove",h=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:f,clientY:p,pointerId:y}=h;if(y!==this.#i){st(h);return}const[x,_]=this.screenToPageTranslation(f-this.#A,p-this.#_);this.#A=f,this.#_=p,this._uiManager.dragSelectedEditors(x,_)},l),window.addEventListener("touchmove",st,l),window.addEventListener("pointerdown",h=>{h.pointerType===this.#a&&(this.#T||h.isPrimary)&&c(h),st(h)},l));const u=h=>{if(!this.#i||this.#i===h.pointerId){c(h);return}st(h)};window.addEventListener("pointerup",u,{signal:o}),window.addEventListener("blur",u,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.#v=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const r=this.parentScale,[o,l]=this.pageDimensions,[c,u]=this.pageTranslation,h=e/r,f=t/r,p=this.x*o,y=this.y*l,x=this.width*o,_=this.height*l;switch(n){case 0:return[p+h+c,l-y-f-_+u,p+h+x+c,l-y-f+u];case 90:return[p+f+c,l-y+h+u,p+f+_+c,l-y+h+x+u];case 180:return[p-h-x+c,l-y+f+u,p-h+c,l-y+f+_+u];case 270:return[p-f-_+c,l-y-h-x+u,p-f+c,l-y-h+u];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,r,o,l]=e,c=o-n,u=l-r;switch(this.rotation){case 0:return[n,t-l,c,u];case 90:return[n,t-r,u,c];case 180:return[o,t-r,c,u];case 270:return[o,t-l,u,c];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&be._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:n,opacity:r,deleted:o,richText:l},uid:c,pageIndex:u,creationDate:h,modificationDate:f}=this;return{id:c,pageIndex:u,rect:this.getPDFRect(),richText:l,contentsObj:{str:e},creationDate:h,modificationDate:n||f,popupRef:!o,color:t,opacity:r}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#b}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:o,innerWidth:l}=window;return t<l&&r>0&&e<o&&n>0}#z(){if(this.#f||!this.div)return;this.#f=new AbortController;const e=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#z()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(e,t,n){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});r.rotation=e.rotation,r.#e=e.accessibilityData,r._isCopy=e.isCopy||!1;const[o,l]=r.pageDimensions,[c,u,h,f]=r.getRectInCurrentCoords(e.rect,l);return r.x=c/o,r.y=u/l,r.width=h/o,r.height=f/l,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#v&&(clearTimeout(this.#v),this.#v=null),this.#I(),this.removeEditToolbar(),this.#w){for(const e of this.#w.values())clearTimeout(e);this.#w=null}this.parent=null,this.#T?.destroy(),this.#T=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#F(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[n,r,o,l]=this.getPDFRect();return[be._round(n+(o-n)*e),be._round(r+(l-r)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(e){this.#n.commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){this.#n.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#c.children;if(!this.#t){this.#t=Array.from(t);const l=this.#G.bind(this),c=this.#q.bind(this),u=this._uiManager._signal;for(const h of this.#t){const f=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",l,{signal:u}),h.addEventListener("blur",c,{signal:u}),h.addEventListener("focus",this.#Y.bind(this,f),{signal:u}),h.setAttribute("data-l10n-id",be._l10nResizer[f])}}const n=this.#t[0];let r=0;for(const l of t){if(l===n)break;r++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(o!==r){if(o<r)for(let c=0;c<r-o;c++)this.#c.append(this.#c.firstChild);else if(o>r)for(let c=0;c<o-r;c++)this.#c.firstChild.before(this.#c.lastChild);let l=0;for(const c of t){const h=this.#t[l++].getAttribute("data-resizer-name");c.setAttribute("data-l10n-id",be._l10nResizer[h])}}this.#H(0),this.#b=!0,this.#c.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#G(e){be._resizerKeyboardManager.exec(this,e)}#q(e){this.#b&&e.relatedTarget?.parentNode!==this.#c&&this.#I()}#Y(e){this.#g=this.#b?e:""}#H(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#b&&this.#L(this.#g,{deltaX:e,deltaY:t,fromKeyboard:!0})}#I(){this.#b=!1,this.#H(-1),this.#j()}_stopResizingWithKeyboard(){this.#I(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#r?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#r?.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#m}set isEditing(e){this.#m=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#w||=new Map;const{action:n}=e;let r=this.#w.get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),this.#w.delete(n),this.#w.size===0&&(this.#w=null)},be._telemetryTimeout),this.#w.set(n,r);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#s=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#s=!0}updateFakeAnnotationElement(e){if(!this.#d&&!this.deleted){this.#d=e.addFakeAnnotation(this);return}if(this.deleted){this.#d.remove(),this.#d=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#d.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}}class IN extends be{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const A0=3285377520,Sn=4294901760,Jn=65535;class Ux{constructor(e){this.h1=e?e&4294967295:A0,this.h2=e?e&4294967295:A0}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let b=0,w=e.length;b<w;b++){const E=e.charCodeAt(b);E<=255?t[n++]=E:(t[n++]=E>>>8,t[n++]=E&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=n>>2,o=n-r*4,l=new Uint32Array(t.buffer,0,r);let c=0,u=0,h=this.h1,f=this.h2;const p=3432918353,y=461845907,x=p&Jn,_=y&Jn;for(let b=0;b<r;b++)b&1?(c=l[b],c=c*p&Sn|c*x&Jn,c=c<<15|c>>>17,c=c*y&Sn|c*_&Jn,h^=c,h=h<<13|h>>>19,h=h*5+3864292196):(u=l[b],u=u*p&Sn|u*x&Jn,u=u<<15|u>>>17,u=u*y&Sn|u*_&Jn,f^=u,f=f<<13|f>>>19,f=f*5+3864292196);switch(c=0,o){case 3:c^=t[r*4+2]<<16;case 2:c^=t[r*4+1]<<8;case 1:c^=t[r*4],c=c*p&Sn|c*x&Jn,c=c<<15|c>>>17,c=c*y&Sn|c*_&Jn,r&1?h^=c:f^=c}this.h1=h,this.h2=f}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Sn|e*36045&Jn,t=t*4283543511&Sn|((t<<16|e>>>16)*2950163797&Sn)>>>16,e^=t>>>1,e=e*444984403&Sn|e*60499&Jn,t=t*3301882366&Sn|((t<<16|e>>>16)*3120437893&Sn)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Df=Object.freeze({map:null,hash:"",transfer:void 0});class wp{#e=!1;#t=null;#r=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=this.#n.get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return this.#n.get(e)}remove(e){const t=this.#n.get(e);if(t!==void 0&&(t instanceof be&&this.#r.delete(t.annotationElementId),this.#n.delete(e),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of this.#n.values())if(n instanceof be)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=this.#n.get(e);let r=!1;if(n!==void 0)for(const[o,l]of Object.entries(t))n[o]!==l&&(r=!0,n[o]=l);else r=!0,this.#n.set(e,t);r&&this.#o(),t instanceof be&&((this.#r||=new Map).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return this.#n.has(e)}get size(){return this.#n.size}#o(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new zx(this)}get serializable(){if(this.#n.size===0)return Df;const e=new Map,t=new Ux,n=[],r=Object.create(null);let o=!1;for(const[l,c]of this.#n){const u=c instanceof be?c.serialize(!1,r):c;u&&(e.set(l,u),t.update(`${l}:${JSON.stringify(u)}`),o||=!!u.bitmap)}if(o)for(const l of e.values())l.bitmap&&n.push(l.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:Df}get editorStats(){let e=null;const t=new Map;let n=0,r=0;for(const o of this.#n.values()){if(!(o instanceof be)){o.popup&&(o.popup.deleted?r+=1:n+=1);continue}o.isCommentDeleted?r+=1:o.hasEditedComment&&(n+=1);const l=o.telemetryFinalData;if(!l)continue;const{type:c}=l;t.has(c)||t.set(c,Object.getPrototypeOf(o).constructor),e||=Object.create(null);const u=e[c]||=new Map;for(const[h,f]of Object.entries(l)){if(h==="type")continue;let p=u.get(h);p||(p=new Map,u.set(h,p));const y=p.get(f)??0;p.set(f,y+1)}}if((r>0||n>0)&&(e||=Object.create(null),e.comments={deleted:r,edited:n}),!e)return null;for(const[o,l]of t)e[o]=l.computeTelemetryFinalData(e[o]);return e}resetModifiedIds(){this.#t=null}updateEditor(e,t){const n=this.#r?.get(e);return n?(n.updateFromAnnotationLayer(t),!0):!1}getEditor(e){return this.#r?.get(e)||null}get modifiedIds(){if(this.#t)return this.#t;const e=[];if(this.#r)for(const t of this.#r.values())t.serialize()&&e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class zx extends wp{#e;constructor(e){super();const{map:t,hash:n,transfer:r}=e.serializable,o=structuredClone(t,r?{transfer:r}:null);this.#e={map:o,hash:n,transfer:r}}get print(){$e("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return Re(this,"modifiedIds",{ids:new Set,hash:""})}}class FN{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:n}){if(!(!e||this.#e.has(e.loadedName))){if(Ie(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:o,style:l}=e,c=new FontFace(r,o,l);this.addNativeFontFace(c);try{await c.load(),this.#e.add(r),n?.(e)}catch{Ce(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}$e("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(r){throw Ce(`Failed to load font '${n.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return Re(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Re(this,"isSyncFontLoadingSupported",Ht||Tt.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Ie(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){const o=n.shift();setTimeout(o.callback,0)}}const{loadingRequests:n}=this,r={done:!1,complete:t,callback:e};return n.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Re(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(k,N){return k.charCodeAt(N)<<24|k.charCodeAt(N+1)<<16|k.charCodeAt(N+2)<<8|k.charCodeAt(N+3)&255}function r(k,N,R,D){const j=k.substring(0,N),z=k.substring(N+R);return j+D+z}let o,l;const c=this._document.createElement("canvas");c.width=1,c.height=1;const u=c.getContext("2d");let h=0;function f(k,N){if(++h>30){Ce("Load test font never loaded."),N();return}if(u.font="30px "+k,u.fillText(".",0,20),u.getImageData(0,0,1,1).data[3]>0){N();return}setTimeout(f.bind(null,k,N))}const p=`lt${Date.now()}${this.loadTestFontId++}`;let y=this._loadTestFont;y=r(y,976,p.length,p);const _=16,b=1482184792;let w=n(y,_);for(o=0,l=p.length-3;o<l;o+=4)w=w-b+n(p,o)|0;o<p.length&&(w=w-b+n(p+"XXX",o)|0),y=r(y,_,4,EN(w));const E=`url(data:font/opentype;base64,${btoa(y)});`,A=`@font-face {font-family:"${p}";src:${E}}`;this.insertRule(A);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const k of[e.loadedName,p]){const N=this._document.createElement("span");N.textContent="Hi",N.style.fontFamily=k,C.append(N)}this._document.body.append(C),f(p,()=>{C.remove(),t.complete()})}}class jN{#e;constructor(e,t=null,n,r){this.compiledGlyphs=Object.create(null),this.#e=e,this._inspectFont=t,n&&Object.assign(this,n),r&&(this.charProcOperatorList=r)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${Dx(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let r;try{r=e.get(n)}catch(l){Ce(`getPathGenerator - ignoring character: "${l}".`)}const o=new Path2D(r||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=o}get black(){return this.#e.black}get bold(){return this.#e.bold}get disableFontFace(){return this.#e.disableFontFace??!1}get fontExtraProperties(){return this.#e.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#e.isInvalidPDFjsFont}get isType3Font(){return this.#e.isType3Font}get italic(){return this.#e.italic}get missingFile(){return this.#e.missingFile}get remeasure(){return this.#e.remeasure}get vertical(){return this.#e.vertical}get ascent(){return this.#e.ascent}get defaultWidth(){return this.#e.defaultWidth}get descent(){return this.#e.descent}get bbox(){return this.#e.bbox}get fontMatrix(){return this.#e.fontMatrix}get fallbackName(){return this.#e.fallbackName}get loadedName(){return this.#e.loadedName}get mimetype(){return this.#e.mimetype}get name(){return this.#e.name}get data(){return this.#e.data}clearData(){this.#e.clearData()}get cssFontInfo(){return this.#e.cssFontInfo}get systemFontInfo(){return this.#e.systemFontInfo}get defaultVMetrics(){return this.#e.defaultVMetrics}}function BN(s){if(s instanceof URL)return s.href;if(typeof s=="string"){if(Ht)return s;const e=URL.parse(s,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function UN(s){if(Ht&&typeof Buffer<"u"&&s instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return xa(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s?.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Dc(s){if(typeof s!="string")return null;if(s.endsWith("/"))return s;throw new Error(`Invalid factory url: "${s}" must include trailing slash.`)}const Of=s=>typeof s=="object"&&Number.isInteger(s?.num)&&s.num>=0&&Number.isInteger(s?.gen)&&s.gen>=0,zN=s=>typeof s=="object"&&typeof s?.name=="string",Hx=kN.bind(null,Of,zN);class HN{#e=new Map;#t=Promise.resolve();postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const[r]of this.#e)r.call(this,n)})}addEventListener(e,t,n=null){let r=null;if(n?.signal instanceof AbortSignal){const{signal:o}=n;if(o.aborted){Ce("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(e,t);r=()=>o.removeEventListener("abort",l),o.addEventListener("abort",l)}this.#e.set(t,r)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}const Oc={DATA:1,ERROR:2},mt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function C0(){}function tn(s){if(s instanceof Ar||s instanceof su||s instanceof v0||s instanceof aa||s instanceof Jh)return s;switch(s instanceof Error||typeof s=="object"&&s!==null||$e('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new Ar(s.message);case"InvalidPDFException":return new su(s.message);case"PasswordException":return new v0(s.message,s.code);case"ResponseException":return new aa(s.message,s.status,s.missing);case"UnknownErrorException":return new Jh(s.message,s.details)}return new Jh(s.message,s.toString())}class Xo{#e=new AbortController;constructor(e,t,n){this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#n(e);return}if(e.callback){const n=e.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===Oc.DATA)r.resolve(e.data);else if(e.callback===Oc.ERROR)r.reject(tn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,r=e.sourceName,o=this.comObj;Promise.try(t,e.data).then(function(l){o.postMessage({sourceName:n,targetName:r,callback:Oc.DATA,callbackId:e.callbackId,data:l})},function(l){o.postMessage({sourceName:n,targetName:r,callback:Oc.ERROR,callbackId:e.callbackId,reason:tn(l)})});return}if(e.streamId){this.#r(e);return}t(e.data)}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const r=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},n)}catch(l){o.reject(l)}return o.promise}sendWithStream(e,t,n,r){const o=this.streamId++,l=this.sourceName,c=this.targetName,u=this.comObj;return new ReadableStream({start:h=>{const f=Promise.withResolvers();return this.streamControllers[o]={controller:h,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},u.postMessage({sourceName:l,targetName:c,action:e,streamId:o,data:t,desiredSize:h.desiredSize},r),f.promise},pull:h=>{const f=Promise.withResolvers();return this.streamControllers[o].pullCall=f,u.postMessage({sourceName:l,targetName:c,stream:mt.PULL,streamId:o,desiredSize:h.desiredSize}),f.promise},cancel:h=>{Ie(h instanceof Error,"cancel must have a valid reason");const f=Promise.withResolvers();return this.streamControllers[o].cancelCall=f,this.streamControllers[o].isClosed=!0,u.postMessage({sourceName:l,targetName:c,stream:mt.CANCEL,streamId:o,reason:tn(h)}),f.promise}},n)}#r(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,o=this.comObj,l=this,c=this.actionHandler[e.action],u={enqueue(h,f=1,p){if(this.isCancelled)return;const y=this.desiredSize;this.desiredSize-=f,y>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:r,stream:mt.ENQUEUE,streamId:t,chunk:h},p)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:r,stream:mt.CLOSE,streamId:t}),delete l.streamSinks[t])},error(h){Ie(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:r,stream:mt.ERROR,streamId:t,reason:tn(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[t]=u,Promise.try(c,e.data,u).then(function(){o.postMessage({sourceName:n,targetName:r,stream:mt.START_COMPLETE,streamId:t,success:!0})},function(h){o.postMessage({sourceName:n,targetName:r,stream:mt.START_COMPLETE,streamId:t,reason:tn(h)})})}#n(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,o=this.comObj,l=this.streamControllers[t],c=this.streamSinks[t];switch(e.stream){case mt.START_COMPLETE:e.success?l.startCall.resolve():l.startCall.reject(tn(e.reason));break;case mt.PULL_COMPLETE:e.success?l.pullCall.resolve():l.pullCall.reject(tn(e.reason));break;case mt.PULL:if(!c){o.postMessage({sourceName:n,targetName:r,stream:mt.PULL_COMPLETE,streamId:t,success:!0});break}c.desiredSize<=0&&e.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=e.desiredSize,Promise.try(c.onPull||C0).then(function(){o.postMessage({sourceName:n,targetName:r,stream:mt.PULL_COMPLETE,streamId:t,success:!0})},function(h){o.postMessage({sourceName:n,targetName:r,stream:mt.PULL_COMPLETE,streamId:t,reason:tn(h)})});break;case mt.ENQUEUE:if(Ie(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(e.chunk);break;case mt.CLOSE:if(Ie(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#o(l,t);break;case mt.ERROR:Ie(l,"error should have stream controller"),l.controller.error(tn(e.reason)),this.#o(l,t);break;case mt.CANCEL_COMPLETE:e.success?l.cancelCall.resolve():l.cancelCall.reject(tn(e.reason)),this.#o(l,t);break;case mt.CANCEL:if(!c)break;const u=tn(e.reason);Promise.try(c.onCancel||C0,u).then(function(){o.postMessage({sourceName:n,targetName:r,stream:mt.CANCEL_COMPLETE,streamId:t,success:!0})},function(h){o.postMessage({sourceName:n,targetName:r,stream:mt.CANCEL_COMPLETE,streamId:t,reason:tn(h)})}),c.sinkCapability.reject(u),c.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#o(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.#e?.abort(),this.#e=null}}class Wx{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){$e("Abstract method `_createCanvas` called.")}}class WN extends Wx{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class $x{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){$e("Abstract method `_fetch` called.")}}class T0 extends $x{async _fetch(e){const t=await Gi(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):xa(t)}}class Vx{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,r,o){return"none"}destroy(e=!1){}}class $N extends Vx{#e;#t;#r;#n;#o;#s;#i=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#n=e,this.#o=t}get#a(){return this.#t||=new Map}get#c(){return this.#s||=new Map}get#l(){if(!this.#r){const e=this.#o.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const n=this.#o.createElementNS(wr,"svg");n.setAttribute("width",0),n.setAttribute("height",0),this.#r=this.#o.createElementNS(wr,"defs"),e.append(n),n.append(this.#r),this.#o.body.append(e)}return this.#r}#h(e){if(e.length===1){const u=e[0],h=new Array(256);for(let p=0;p<256;p++)h[p]=u[p]/255;const f=h.join(",");return[f,f,f]}const[t,n,r]=e,o=new Array(256),l=new Array(256),c=new Array(256);for(let u=0;u<256;u++)o[u]=t[u]/255,l[u]=n[u]/255,c[u]=r[u]/255;return[o.join(","),l.join(","),c.join(",")]}#d(e){if(this.#e===void 0){this.#e="";const t=this.#o.URL;t!==this.#o.baseURI&&(_a(t)?Ce('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=fp(t,""))}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#a.get(e);if(t)return t;const[n,r,o]=this.#h(e),l=e.length===1?n:`${n}${r}${o}`;if(t=this.#a.get(l),t)return this.#a.set(e,t),t;const c=`g_${this.#n}_transfer_map_${this.#i++}`,u=this.#d(c);this.#a.set(e,u),this.#a.set(l,u);const h=this.#p(c);return this.#m(n,r,o,h),u}addHCMFilter(e,t){const n=`${e}-${t}`,r="base";let o=this.#c.get(r);if(o?.key===n||(o?(o.filter?.remove(),o.key=n,o.url="none",o.filter=null):(o={key:n,url:"none",filter:null},this.#c.set(r,o)),!e||!t))return o.url;const l=this.#b(e);e=fe.makeHexColor(...l);const c=this.#b(t);if(t=fe.makeHexColor(...c),this.#l.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return o.url;const u=new Array(256);for(let x=0;x<=255;x++){const _=x/255;u[x]=_<=.03928?_/12.92:((_+.055)/1.055)**2.4}const h=u.join(","),f=`g_${this.#n}_hcm_filter`,p=o.filter=this.#p(f);this.#m(h,h,h,p),this.#g(p);const y=(x,_)=>{const b=l[x]/255,w=c[x]/255,E=new Array(_+1);for(let A=0;A<=_;A++)E[A]=b+A/_*(w-b);return E.join(",")};return this.#m(y(0,5),y(1,5),y(2,5),p),o.url=this.#d(f),o.url}addAlphaFilter(e){let t=this.#a.get(e);if(t)return t;const[n]=this.#h([e]),r=`alpha_${n}`;if(t=this.#a.get(r),t)return this.#a.set(e,t),t;const o=`g_${this.#n}_alpha_map_${this.#i++}`,l=this.#d(o);this.#a.set(e,l),this.#a.set(r,l);const c=this.#p(o);return this.#y(n,c),l}addLuminosityFilter(e){let t=this.#a.get(e||"luminosity");if(t)return t;let n,r;if(e?([n]=this.#h([e]),r=`luminosity_${n}`):r="luminosity",t=this.#a.get(r),t)return this.#a.set(e,t),t;const o=`g_${this.#n}_luminosity_map_${this.#i++}`,l=this.#d(o);this.#a.set(e,l),this.#a.set(r,l);const c=this.#p(o);return this.#f(c),e&&this.#y(n,c),l}addHighlightHCMFilter(e,t,n,r,o){const l=`${t}-${n}-${r}-${o}`;let c=this.#c.get(e);if(c?.key===l||(c?(c.filter?.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},this.#c.set(e,c)),!t||!n))return c.url;const[u,h]=[t,n].map(this.#b.bind(this));let f=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),p=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[y,x]=[r,o].map(this.#b.bind(this));p<f&&([f,p,y,x]=[p,f,x,y]),this.#l.style.color="";const _=(E,A,C)=>{const k=new Array(256),N=(p-f)/C,R=E/255,D=(A-E)/(255*C);let j=0;for(let z=0;z<=C;z++){const q=Math.round(f+z*N),Y=R+z*D;for(let ne=j;ne<=q;ne++)k[ne]=Y;j=q+1}for(let z=j;z<256;z++)k[z]=k[j-1];return k.join(",")},b=`g_${this.#n}_hcm_${e}_filter`,w=c.filter=this.#p(b);return this.#g(w),this.#m(_(y[0],x[0],5),_(y[1],x[1],5),_(y[2],x[2],5),w),c.url=this.#d(b),c.url}destroy(e=!1){e&&this.#s?.size||(this.#r?.parentNode.parentNode.remove(),this.#r=null,this.#t?.clear(),this.#t=null,this.#s?.clear(),this.#s=null,this.#i=0)}#f(e){const t=this.#o.createElementNS(wr,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#g(e){const t=this.#o.createElementNS(wr,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#p(e){const t=this.#o.createElementNS(wr,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#l.append(t),t}#u(e,t,n){const r=this.#o.createElementNS(wr,t);r.setAttribute("type","discrete"),r.setAttribute("tableValues",n),e.append(r)}#m(e,t,n,r){const o=this.#o.createElementNS(wr,"feComponentTransfer");r.append(o),this.#u(o,"feFuncR",e),this.#u(o,"feFuncG",t),this.#u(o,"feFuncB",n)}#y(e,t){const n=this.#o.createElementNS(wr,"feComponentTransfer");t.append(n),this.#u(n,"feFuncA",e)}#b(e){return this.#l.style.color=e,Yi(getComputedStyle(this.#l).getPropertyValue("color"))}}class qx{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){$e("Abstract method `_fetch` called.")}}class k0 extends qx{async _fetch(e){const t=await Gi(e,"arraybuffer");return new Uint8Array(t)}}class Gx{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){$e("Abstract method `_fetch` called.")}}class P0 extends Gx{async _fetch(e){const t=await Gi(e,"arraybuffer");return new Uint8Array(t)}}Ht&&Ce("Please use the `legacy` build in Node.js environments.");async function xp(s){const t=await process.getBuiltinModule("fs").promises.readFile(s);return new Uint8Array(t)}class VN extends Vx{}class qN extends Wx{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class GN extends $x{async _fetch(e){return xp(e)}}class YN extends qx{async _fetch(e){return xp(e)}}class XN extends Gx{async _fetch(e){return xp(e)}}const fi="__forcedDependency",{floor:R0,ceil:N0}=Math;function Mc(s,e,t,n,r,o){s[e*4+0]=Math.min(s[e*4+0],t),s[e*4+1]=Math.min(s[e*4+1],n),s[e*4+2]=Math.max(s[e*4+2],r),s[e*4+3]=Math.max(s[e*4+3],o)}const Mf=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class KN{#e;#t;constructor(e,t){this.#e=e,this.#t=t}get length(){return this.#e.length}isEmpty(e){return this.#e[e]===Mf}minX(e){return this.#t[e*4+0]/256}minY(e){return this.#t[e*4+1]/256}maxX(e){return(this.#t[e*4+2]+1)/256}maxY(e){return(this.#t[e*4+3]+1)/256}}const Lc=(s,e)=>{if(!s)return;let t=s.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},s.set(e,t)),t};class QN{#e={__proto__:null};#t={__proto__:null,transform:[],moveText:[],sameLineText:[],[fi]:[]};#r=new Map;#n=[];#o=[];#s=[[1,0,0,1,0,0]];#i=[-1/0,-1/0,1/0,1/0];#a=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#h=new Map;#d=new Map;#f;#g;#p;#u;#m;constructor(e,t,n=!1){this.#f=e.width,this.#g=e.height,this.#y(t),n&&(this.#m=new Map)}growOperationsCount(e){e>=this.#u.length&&this.#y(e,this.#u)}#y(e,t){const n=new ArrayBuffer(e*4);this.#p=new Uint8ClampedArray(n),this.#u=new Uint32Array(n),t&&t.length>0?(this.#u.set(t),this.#u.fill(Mf,t.length)):this.#u.fill(Mf)}save(e){return this.#e={__proto__:this.#e},this.#t={__proto__:this.#t,transform:{__proto__:this.#t.transform},moveText:{__proto__:this.#t.moveText},sameLineText:{__proto__:this.#t.sameLineText},[fi]:{__proto__:this.#t[fi]}},this.#i={__proto__:this.#i},this.#n.push(e),this}restore(e){const t=Object.getPrototypeOf(this.#e);if(t===null)return this;this.#e=t,this.#t=Object.getPrototypeOf(this.#t),this.#i=Object.getPrototypeOf(this.#i);const n=this.#n.pop();return n!==void 0&&(Lc(this.#m,e)?.dependencies.add(n),this.#u[e]=this.#u[n]),this}recordOpenMarker(e){return this.#n.push(e),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(e){const t=this.#n.pop();return t!==void 0&&(Lc(this.#m,e)?.dependencies.add(t),this.#u[e]=this.#u[t]),this}beginMarkedContent(e){return this.#o.push(e),this}endMarkedContent(e){const t=this.#o.pop();return t!==void 0&&(Lc(this.#m,e)?.dependencies.add(t),this.#u[e]=this.#u[t]),this}pushBaseTransform(e){return this.#s.push(fe.multiplyByDOMMatrix(this.#s.at(-1),e.getTransform())),this}popBaseTransform(){return this.#s.length>1&&this.#s.pop(),this}recordSimpleData(e,t){return this.#e[e]=t,this}recordIncrementalData(e,t){return this.#t[e].push(t),this}resetIncrementalData(e,t){return this.#t[e].length=0,this}recordNamedData(e,t){return this.#r.set(e,t),this}recordSimpleDataFromNamed(e,t,n){this.#e[e]=this.#r.get(t)??n}recordFutureForcedDependency(e,t){return this.recordIncrementalData(fi,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in this.#e&&this.recordFutureForcedDependency(t,this.#e[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of this.#l)this.recordFutureForcedDependency(fi,e);return this}resetBBox(e){return this.#c!==e&&(this.#c=e,this.#a[0]=1/0,this.#a[1]=1/0,this.#a[2]=-1/0,this.#a[3]=-1/0),this}recordClipBox(e,t,n,r,o,l){const c=fe.multiplyByDOMMatrix(this.#s.at(-1),t.getTransform()),u=[1/0,1/0,-1/0,-1/0];fe.axialAlignedBoundingBox([n,o,r,l],c,u);const h=fe.intersect(this.#i,u);return h?(this.#i[0]=h[0],this.#i[1]=h[1],this.#i[2]=h[2],this.#i[3]=h[3]):(this.#i[0]=this.#i[1]=1/0,this.#i[2]=this.#i[3]=-1/0),this}recordBBox(e,t,n,r,o,l){const c=this.#i;if(c[0]===1/0)return this;const u=fe.multiplyByDOMMatrix(this.#s.at(-1),t.getTransform());if(c[0]===-1/0)return fe.axialAlignedBoundingBox([n,o,r,l],u,this.#a),this;const h=[1/0,1/0,-1/0,-1/0];return fe.axialAlignedBoundingBox([n,o,r,l],u,h),this.#a[0]=Math.min(this.#a[0],Math.max(h[0],c[0])),this.#a[1]=Math.min(this.#a[1],Math.max(h[1],c[1])),this.#a[2]=Math.max(this.#a[2],Math.min(h[2],c[2])),this.#a[3]=Math.max(this.#a[3],Math.min(h[3],c[3])),this}recordCharacterBBox(e,t,n,r=1,o=0,l=0,c){const u=n.bbox;let h,f;if(u&&(h=u[2]!==u[0]&&u[3]!==u[1]&&this.#d.get(n),h!==!1&&(f=[0,0,0,0],fe.axialAlignedBoundingBox(u,n.fontMatrix,f),(r!==1||o!==0||l!==0)&&fe.scaleMinMax([r,0,0,-r,o,l],f),h)))return this.recordBBox(e,t,f[0],f[2],f[1],f[3]);if(!c)return this.recordFullPageBBox(e);const p=c();return u&&f&&h===void 0&&(h=f[0]<=o-p.actualBoundingBoxLeft&&f[2]>=o+p.actualBoundingBoxRight&&f[1]<=l-p.actualBoundingBoxAscent&&f[3]>=l+p.actualBoundingBoxDescent,this.#d.set(n,h),h)?this.recordBBox(e,t,f[0],f[2],f[1],f[3]):this.recordBBox(e,t,o-p.actualBoundingBoxLeft,o+p.actualBoundingBoxRight,l-p.actualBoundingBoxAscent,l+p.actualBoundingBoxDescent)}recordFullPageBBox(e){return this.#a[0]=Math.max(0,this.#i[0]),this.#a[1]=Math.max(0,this.#i[1]),this.#a[2]=Math.min(this.#f,this.#i[2]),this.#a[3]=Math.min(this.#g,this.#i[3]),this}getSimpleIndex(e){return this.#e[e]}recordDependencies(e,t){const n=this.#l,r=this.#e,o=this.#t;for(const l of t)l in this.#e?n.add(r[l]):l in o&&o[l].forEach(n.add,n);return this}recordNamedDependency(e,t){return this.#r.has(t)&&this.#l.add(this.#r.get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[fi]),this.#m){const n=Lc(this.#m,e),{dependencies:r}=n;this.#l.forEach(r.add,r),this.#n.forEach(r.add,r),this.#o.forEach(r.add,r),r.delete(e),n.isRenderingOperation=!0}if(this.#c===e){const n=R0(this.#a[0]*256/this.#f),r=R0(this.#a[1]*256/this.#g),o=N0(this.#a[2]*256/this.#f),l=N0(this.#a[3]*256/this.#g);Mc(this.#p,e,n,r,o,l);for(const c of this.#l)c!==e&&Mc(this.#p,c,n,r,o,l);for(const c of this.#n)c!==e&&Mc(this.#p,c,n,r,o,l);for(const c of this.#o)c!==e&&Mc(this.#p,c,n,r,o,l);t||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(e,t=!1){const n=Array.from(this.#l);this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const r of n)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(e,t=!1){return this.#c===e&&(this.#c=-1,this.#i[0]=Math.max(this.#i[0],this.#a[0]),this.#i[1]=Math.max(this.#i[1],this.#a[1]),this.#i[2]=Math.min(this.#i[2],this.#a[2]),this.#i[3]=Math.min(this.#i[3],this.#a[3]),t||this.#l.clear()),this}_takePendingDependencies(){const e=this.#l;return this.#l=new Set,e}_extractOperation(e){const t=this.#h.get(e);return this.#h.delete(e),t}_pushPendingDependencies(e){for(const t of e)this.#l.add(t)}take(){return this.#d.clear(),new KN(this.#u,this.#p)}takeDebugMetadata(){return this.#m}}class au{#e;#t;#r;#n=0;#o=0;constructor(e,t,n){if(e instanceof au&&e.#r===!!n)return e;this.#e=e,this.#t=t,this.#r=!!n}growOperationsCount(){throw new Error("Unreachable")}save(e){return this.#o++,this.#e.save(this.#t),this}restore(e){return this.#o>0&&(this.#e.restore(this.#t),this.#o--),this}recordOpenMarker(e){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#t:this.#e.getOpenMarker()}recordCloseMarker(e){return this.#n--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return this.#e.pushBaseTransform(e),this}popBaseTransform(){return this.#e.popBaseTransform(),this}recordSimpleData(e,t){return this.#e.recordSimpleData(e,this.#t),this}recordIncrementalData(e,t){return this.#e.recordIncrementalData(e,this.#t),this}resetIncrementalData(e,t){return this.#e.resetIncrementalData(e,this.#t),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,n){return this.#e.recordSimpleDataFromNamed(e,t,this.#t),this}recordFutureForcedDependency(e,t){return this.#e.recordFutureForcedDependency(e,this.#t),this}inheritSimpleDataAsFutureForcedDependencies(e){return this.#e.inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#e.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return this.#r||this.#e.resetBBox(this.#t),this}recordClipBox(e,t,n,r,o,l){return this.#r||this.#e.recordClipBox(this.#t,t,n,r,o,l),this}recordBBox(e,t,n,r,o,l){return this.#r||this.#e.recordBBox(this.#t,t,n,r,o,l),this}recordCharacterBBox(e,t,n,r,o,l,c){return this.#r||this.#e.recordCharacterBBox(this.#t,t,n,r,o,l,c),this}recordFullPageBBox(e){return this.#r||this.#e.recordFullPageBBox(this.#t),this}getSimpleIndex(e){return this.#e.getSimpleIndex(e)}recordDependencies(e,t){return this.#e.recordDependencies(this.#t,t),this}recordNamedDependency(e,t){return this.#e.recordNamedDependency(this.#t,t),this}recordOperation(e){return this.#e.recordOperation(this.#t,!0),this}recordShowTextOperation(e){return this.#e.recordShowTextOperation(this.#t,!0),this}bboxToClipBoxDropOperation(e){return this.#r||this.#e.bboxToClipBoxDropOperation(this.#t,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const _n={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Nt={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Lf(s,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,n),s.clip(r)}class Sp{isModifyingCurrentTransform(){return!1}getPattern(){$e("Abstract method `getPattern` called.")}}class JN extends Sp{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,r){let o;if(r===Nt.STROKE||r===Nt.FILL){const l=t.current.getClippedPathBoundingBox(r,rt(e))||[0,0,0,0],c=Math.ceil(l[2]-l[0])||1,u=Math.ceil(l[3]-l[1])||1,h=t.cachedCanvases.getCanvas("pattern",c,u),f=h.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-l[0],-l[1]),n=fe.transform(n,[1,0,0,1,l[0],l[1]]),f.transform(...t.baseTransform),this.matrix&&f.transform(...this.matrix),Lf(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),o=e.createPattern(h.canvas,"no-repeat");const p=new DOMMatrix(n);o.setTransform(p)}else Lf(e,this._bbox),o=this._createGradient(e);return o}}function tf(s,e,t,n,r,o,l,c){const u=e.coords,h=e.colors,f=s.data,p=s.width*4;let y;u[t+1]>u[n+1]&&(y=t,t=n,n=y,y=o,o=l,l=y),u[n+1]>u[r+1]&&(y=n,n=r,r=y,y=l,l=c,c=y),u[t+1]>u[n+1]&&(y=t,t=n,n=y,y=o,o=l,l=y);const x=(u[t]+e.offsetX)*e.scaleX,_=(u[t+1]+e.offsetY)*e.scaleY,b=(u[n]+e.offsetX)*e.scaleX,w=(u[n+1]+e.offsetY)*e.scaleY,E=(u[r]+e.offsetX)*e.scaleX,A=(u[r+1]+e.offsetY)*e.scaleY;if(_>=A)return;const C=h[o],k=h[o+1],N=h[o+2],R=h[l],D=h[l+1],j=h[l+2],z=h[c],q=h[c+1],Y=h[c+2],ne=Math.round(_),ie=Math.round(A);let ee,ae,G,X,I,V,Q,M;for(let W=ne;W<=ie;W++){if(W<w){const ge=W<_?0:(_-W)/(_-w);ee=x-(x-b)*ge,ae=C-(C-R)*ge,G=k-(k-D)*ge,X=N-(N-j)*ge}else{let ge;W>A?ge=1:w===A?ge=0:ge=(w-W)/(w-A),ee=b-(b-E)*ge,ae=R-(R-z)*ge,G=D-(D-q)*ge,X=j-(j-Y)*ge}let oe;W<_?oe=0:W>A?oe=1:oe=(_-W)/(_-A),I=x-(x-E)*oe,V=C-(C-z)*oe,Q=k-(k-q)*oe,M=N-(N-Y)*oe;const ce=Math.round(Math.min(ee,I)),ve=Math.round(Math.max(ee,I));let we=p*W+ce*4;for(let ge=ce;ge<=ve;ge++)oe=(ee-ge)/(ee-I),oe<0?oe=0:oe>1&&(oe=1),f[we++]=ae-(ae-V)*oe|0,f[we++]=G-(G-Q)*oe|0,f[we++]=X-(X-M)*oe|0,f[we++]=255}}function ZN(s,e,t){const n=e.coords,r=e.colors;let o,l;switch(e.type){case"lattice":const c=e.verticesPerRow,u=Math.floor(n.length/c)-1,h=c-1;for(o=0;o<u;o++){let f=o*c;for(let p=0;p<h;p++,f++)tf(s,t,n[f],n[f+1],n[f+c],r[f],r[f+1],r[f+c]),tf(s,t,n[f+c+1],n[f+1],n[f+c],r[f+c+1],r[f+1],r[f+c])}break;case"triangles":for(o=0,l=n.length;o<l;o+=3)tf(s,t,n[o],n[o+1],n[o+2],r[o],r[o+1],r[o+2]);break;default:throw new Error("illegal figure")}}class eD extends Sp{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const c=Math.floor(this._bounds[0]),u=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-c,f=Math.ceil(this._bounds[3])-u,p=Math.min(Math.ceil(Math.abs(h*e[0]*1.1)),3e3),y=Math.min(Math.ceil(Math.abs(f*e[1]*1.1)),3e3),x=h/p,_=f/y,b={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-u,scaleX:1/x,scaleY:1/_},w=p+4,E=y+4,A=n.getCanvas("mesh",w,E),C=A.context,k=C.createImageData(p,y);if(t){const R=k.data;for(let D=0,j=R.length;D<j;D+=4)R[D]=t[0],R[D+1]=t[1],R[D+2]=t[2],R[D+3]=255}for(const R of this._figures)ZN(k,R,b);return C.putImageData(k,2,2),{canvas:A.canvas,offsetX:c-2*x,offsetY:u-2*_,scaleX:x,scaleY:_}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,r){Lf(e,this._bbox);const o=new Float32Array(2);if(r===Nt.SHADING)fe.singularValueDecompose2dScale(rt(e),o);else if(this.matrix){fe.singularValueDecompose2dScale(this.matrix,o);const[c,u]=o;fe.singularValueDecompose2dScale(t.baseTransform,o),o[0]*=c,o[1]*=u}else fe.singularValueDecompose2dScale(t.baseTransform,o);const l=this._createMeshCanvas(o,r===Nt.SHADING?null:this._background,t.cachedCanvases);return r!==Nt.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(l.offsetX,l.offsetY),e.scale(l.scaleX,l.scaleY),e.createPattern(l.canvas,"no-repeat")}}class tD extends Sp{getPattern(){return"hotpink"}}function nD(s){switch(s[0]){case"RadialAxial":return new JN(s);case"Mesh":return new eD(s);case"Dummy":return new tD}throw new Error(`Unknown IR type: ${s[0]}`)}const D0={COLORED:1,UNCOLORED:2};class _p{static MAX_PATTERN_SIZE=3e3;constructor(e,t,n,r){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=r}createPatternCanvas(e,t){const{bbox:n,operatorList:r,paintType:o,tilingType:l,color:c,canvasGraphicsFactory:u}=this;let{xstep:h,ystep:f}=this;h=Math.abs(h),f=Math.abs(f),Eu("TilingType: "+l);const p=n[0],y=n[1],x=n[2],_=n[3],b=x-p,w=_-y,E=new Float32Array(2);fe.singularValueDecompose2dScale(this.matrix,E);const[A,C]=E;fe.singularValueDecompose2dScale(this.baseTransform,E);const k=A*E[0],N=C*E[1];let R=b,D=w,j=!1,z=!1;const q=Math.ceil(h*k),Y=Math.ceil(f*N),ne=Math.ceil(b*k),ie=Math.ceil(w*N);q>=ne?R=h:j=!0,Y>=ie?D=f:z=!0;const ee=this.getSizeAndScale(R,this.ctx.canvas.width,k),ae=this.getSizeAndScale(D,this.ctx.canvas.height,N),G=e.cachedCanvases.getCanvas("pattern",ee.size,ae.size),X=G.context,I=u.createCanvasGraphics(X,t);if(I.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(I,o,c),X.translate(-ee.scale*p,-ae.scale*y),I.transform(0,ee.scale,0,0,ae.scale,0,0),X.save(),I.dependencyTracker?.save(),this.clipBbox(I,p,y,x,_),I.baseTransform=rt(I.ctx),I.executeOperatorList(r),I.endDrawing(),I.dependencyTracker?.restore(),X.restore(),j||z){const V=G.canvas;j&&(R=h),z&&(D=f);const Q=this.getSizeAndScale(R,this.ctx.canvas.width,k),M=this.getSizeAndScale(D,this.ctx.canvas.height,N),W=Q.size,oe=M.size,ce=e.cachedCanvases.getCanvas("pattern-workaround",W,oe),ve=ce.context,we=j?Math.floor(b/h):0,ge=z?Math.floor(w/f):0;for(let K=0;K<=we;K++)for(let se=0;se<=ge;se++)ve.drawImage(V,W*K,oe*se,W,oe,0,0,W,oe);return{canvas:ce.canvas,scaleX:Q.scale,scaleY:M.scale,offsetX:p,offsetY:y}}return{canvas:G.canvas,scaleX:ee.scale,scaleY:ae.scale,offsetX:p,offsetY:y}}getSizeAndScale(e,t,n){const r=Math.max(_p.MAX_PATTERN_SIZE,t);let o=Math.ceil(e*n);return o>=r?o=r:n=o/e,{scale:n,size:o}}clipBbox(e,t,n,r,o){const l=r-t,c=o-n;e.ctx.rect(t,n,l,c),fe.axialAlignedBoundingBox([t,n,r,o],rt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const r=e.ctx,o=e.current;switch(t){case D0.COLORED:const{fillStyle:l,strokeStyle:c}=this.ctx;r.fillStyle=o.fillColor=l,r.strokeStyle=o.strokeColor=c;break;case D0.UNCOLORED:r.fillStyle=r.strokeStyle=n,o.fillColor=o.strokeColor=n;break;default:throw new _N(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,r,o){let l=n;r!==Nt.SHADING&&(l=fe.transform(l,t.baseTransform),this.matrix&&(l=fe.transform(l,this.matrix)));const c=this.createPatternCanvas(t,o);let u=new DOMMatrix(l);u=u.translate(c.offsetX,c.offsetY),u=u.scale(1/c.scaleX,1/c.scaleY);const h=e.createPattern(c.canvas,"repeat");return h.setTransform(u),h}}function rD({src:s,srcPos:e=0,dest:t,width:n,height:r,nonBlackColor:o=4294967295,inverseDecode:l=!1}){const c=Tt.isLittleEndian?4278190080:255,[u,h]=l?[o,c]:[c,o],f=n>>3,p=n&7,y=s.length;t=new Uint32Array(t.buffer);let x=0;for(let _=0;_<r;_++){for(const w=e+f;e<w;e++){const E=e<y?s[e]:255;t[x++]=E&128?h:u,t[x++]=E&64?h:u,t[x++]=E&32?h:u,t[x++]=E&16?h:u,t[x++]=E&8?h:u,t[x++]=E&4?h:u,t[x++]=E&2?h:u,t[x++]=E&1?h:u}if(p===0)continue;const b=e<y?s[e++]:255;for(let w=0;w<p;w++)t[x++]=b&1<<7-w?h:u}return{srcPos:e,destPos:x}}const O0=16,M0=100,sD=15,L0=10,nn=16,nf=new DOMMatrix,fn=new Float32Array(2),xi=new Float32Array([1/0,1/0,-1/0,-1/0]);function iD(s,e){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){e.save(),this.__originalSave()},s.restore=function(){e.restore(),this.__originalRestore()},s.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},s.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},s.transform=function(t,n,r,o,l,c){e.transform(t,n,r,o,l,c),this.__originalTransform(t,n,r,o,l,c)},s.setTransform=function(t,n,r,o,l,c){e.setTransform(t,n,r,o,l,c),this.__originalSetTransform(t,n,r,o,l,c)},s.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},s.rotate=function(t){e.rotate(t),this.__originalRotate(t)},s.clip=function(t){e.clip(t),this.__originalClip(t)},s.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},s.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},s.bezierCurveTo=function(t,n,r,o,l,c){e.bezierCurveTo(t,n,r,o,l,c),this.__originalBezierCurveTo(t,n,r,o,l,c)},s.rect=function(t,n,r,o){e.rect(t,n,r,o),this.__originalRect(t,n,r,o)},s.closePath=function(){e.closePath(),this.__originalClosePath()},s.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class oD{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,n)):(r=this.canvasFactory.create(t,n),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Ic(s,e,t,n,r,o,l,c,u,h){const[f,p,y,x,_,b]=rt(s);if(p===0&&y===0){const A=l*f+_,C=Math.round(A),k=c*x+b,N=Math.round(k),R=(l+u)*f+_,D=Math.abs(Math.round(R)-C)||1,j=(c+h)*x+b,z=Math.abs(Math.round(j)-N)||1;return s.setTransform(Math.sign(f),0,0,Math.sign(x),C,N),s.drawImage(e,t,n,r,o,0,0,D,z),s.setTransform(f,p,y,x,_,b),[D,z]}if(f===0&&x===0){const A=c*y+_,C=Math.round(A),k=l*p+b,N=Math.round(k),R=(c+h)*y+_,D=Math.abs(Math.round(R)-C)||1,j=(l+u)*p+b,z=Math.abs(Math.round(j)-N)||1;return s.setTransform(0,Math.sign(p),Math.sign(y),0,C,N),s.drawImage(e,t,n,r,o,0,0,z,D),s.setTransform(f,p,y,x,_,b),[z,D]}s.drawImage(e,t,n,r,o,l,c,u,h);const w=Math.hypot(f,p),E=Math.hypot(y,x);return[w*u,E*h]}class I0{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Rf;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Rt.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(e,t,n){n?.(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=xi.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Nt.FILL,t=null){const n=this.minMax.slice();if(e===Nt.STROKE){t||$e("Stroke bounding box must include transform."),fe.singularValueDecompose2dScale(t,fn);const r=fn[0]*this.lineWidth/2,o=fn[1]*this.lineWidth/2;n[0]-=r,n[1]-=o,n[2]+=r,n[3]+=o}return n}updateClipFromPath(){const e=fe.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(xi,0)}getClippedPathBoundingBox(e=Nt.FILL,t=null){return fe.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function F0(s,e){if(e instanceof ImageData){s.putImageData(e,0,0);return}const t=e.height,n=e.width,r=t%nn,o=(t-r)/nn,l=r===0?o:o+1,c=s.createImageData(n,nn);let u=0,h;const f=e.data,p=c.data;let y,x,_,b;if(e.kind===ea.GRAYSCALE_1BPP){const w=f.byteLength,E=new Uint32Array(p.buffer,0,p.byteLength>>2),A=E.length,C=n+7>>3,k=4294967295,N=Tt.isLittleEndian?4278190080:255;for(y=0;y<l;y++){for(_=y<o?nn:r,h=0,x=0;x<_;x++){const R=w-u;let D=0;const j=R>C?n:R*8-7,z=j&-8;let q=0,Y=0;for(;D<z;D+=8)Y=f[u++],E[h++]=Y&128?k:N,E[h++]=Y&64?k:N,E[h++]=Y&32?k:N,E[h++]=Y&16?k:N,E[h++]=Y&8?k:N,E[h++]=Y&4?k:N,E[h++]=Y&2?k:N,E[h++]=Y&1?k:N;for(;D<j;D++)q===0&&(Y=f[u++],q=128),E[h++]=Y&q?k:N,q>>=1}for(;h<A;)E[h++]=0;s.putImageData(c,0,y*nn)}}else if(e.kind===ea.RGBA_32BPP){for(x=0,b=n*nn*4,y=0;y<o;y++)p.set(f.subarray(u,u+b)),u+=b,s.putImageData(c,0,x),x+=nn;y<l&&(b=n*r*4,p.set(f.subarray(u,u+b)),s.putImageData(c,0,x))}else if(e.kind===ea.RGB_24BPP)for(_=nn,b=n*_,y=0;y<l;y++){for(y>=o&&(_=r,b=n*_),h=0,x=b;x--;)p[h++]=f[u++],p[h++]=f[u++],p[h++]=f[u++],p[h++]=255;s.putImageData(c,0,y*nn)}else throw new Error(`bad image kind: ${e.kind}`)}function j0(s,e){if(e.bitmap){s.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,r=t%nn,o=(t-r)/nn,l=r===0?o:o+1,c=s.createImageData(n,nn);let u=0;const h=e.data,f=c.data;for(let p=0;p<l;p++){const y=p<o?nn:r;({srcPos:u}=rD({src:h,srcPos:u,dest:f,width:n,height:y,nonBlackColor:0})),s.putImageData(c,0,p*nn)}}function zo(s,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)s[n]!==void 0&&(e[n]=s[n]);s.setLineDash!==void 0&&(e.setLineDash(s.getLineDash()),e.lineDashOffset=s.lineDashOffset)}function Fc(s){s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0);const{filter:e}=s;e!=="none"&&e!==""&&(s.filter="none")}function B0(s,e){if(e)return!0;fe.singularValueDecompose2dScale(s,fn);const t=Math.fround(Un.pixelRatio*Ds.PDF_TO_CSS_UNITS);return fn[0]<=t&&fn[1]<=t}const aD=["butt","round","square"],lD=["miter","round","bevel"],cD={},U0={};class Ri{constructor(e,t,n,r,o,{optionalContentConfig:l,markedContentStack:c=null},u,h,f){this.ctx=e,this.current=new I0(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=r,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=l,this.cachedCanvases=new oD(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=u,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=f??null}getObject(e,t,n=null){return typeof t=="string"?(this.dependencyTracker?.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):n}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:r=null}){const o=this.ctx.canvas.width,l=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,o,l),this.ctx.fillStyle=c,n){const u=this.cachedCanvases.getCanvas("transparent",o,l);this.compositeCtx=this.ctx,this.transparentCanvas=u.canvas,this.ctx=u.context,this.ctx.save(),this.ctx.transform(...rt(this.compositeCtx))}this.ctx.save(),Fc(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=rt(this.ctx)}executeOperatorList(e,t,n,r,o){const l=e.argsArray,c=e.fnArray;let u=t||0;const h=l.length;if(h===u)return u;const f=h-u>L0&&typeof n=="function",p=f?Date.now()+sD:0;let y=0;const x=this.commonObjs,_=this.objs;let b,w;for(;;){if(r!==void 0&&u===r.nextBreakPoint)return r.breakIt(u,n),u;if(!o||o(u))if(b=c[u],w=l[u]??null,b!==ji.dependency)w===null?this[b](u):this[b](u,...w);else for(const E of w){this.dependencyTracker?.recordNamedData(E,u);const A=E.startsWith("g_")?x:_;if(!A.has(E))return A.get(E,n),u}if(u++,u===h)return u;if(f&&++y>L0){if(Date.now()>p)return n(),u;y=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const n=e.width??e.displayWidth,r=e.height??e.displayHeight;let o=Math.max(Math.hypot(t[0],t[1]),1),l=Math.max(Math.hypot(t[2],t[3]),1),c=n,u=r,h="prescale1",f,p;for(;o>2&&c>1||l>2&&u>1;){let y=c,x=u;o>2&&c>1&&(y=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),o/=c/y),l>2&&u>1&&(x=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u)/2,l/=u/x),f=this.cachedCanvases.getCanvas(h,y,x),p=f.context,p.clearRect(0,0,y,x),p.drawImage(e,0,0,c,u,0,0,y,x),e=f.canvas,c=y,u=x,h=h==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:c,paintHeight:u}}_createMaskCanvas(e,t){const n=this.ctx,{width:r,height:o}=t,l=this.current.fillColor,c=this.current.patternFill,u=rt(n);let h,f,p,y;if((t.bitmap||t.data)&&t.count>1){const q=t.bitmap||t.data.buffer;f=JSON.stringify(c?u:[u.slice(0,4),l]),h=this._cachedBitmapsMap.get(q),h||(h=new Map,this._cachedBitmapsMap.set(q,h));const Y=h.get(f);if(Y&&!c){const ne=Math.round(Math.min(u[0],u[2])+u[4]),ie=Math.round(Math.min(u[1],u[3])+u[5]);return this.dependencyTracker?.recordDependencies(e,_n.transformAndFill),{canvas:Y,offsetX:ne,offsetY:ie}}p=Y}p||(y=this.cachedCanvases.getCanvas("maskCanvas",r,o),j0(y.context,t));let x=fe.transform(u,[1/r,0,0,-1/o,0,0]);x=fe.transform(x,[1,0,0,1,0,-o]);const _=xi.slice();fe.axialAlignedBoundingBox([0,0,r,o],x,_);const[b,w,E,A]=_,C=Math.round(E-b)||1,k=Math.round(A-w)||1,N=this.cachedCanvases.getCanvas("fillCanvas",C,k),R=N.context,D=b,j=w;R.translate(-D,-j),R.transform(...x),p||(p=this._scaleImage(y.canvas,Qn(R)),p=p.img,h&&c&&h.set(f,p)),R.imageSmoothingEnabled=B0(rt(R),t.interpolate),Ic(R,p,0,0,p.width,p.height,0,0,r,o),R.globalCompositeOperation="source-in";const z=fe.transform(Qn(R),[1,0,0,1,-D,-j]);return R.fillStyle=c?l.getPattern(n,this,z,Nt.FILL,e):l,R.fillRect(0,0,r,o),h&&!c&&(this.cachedCanvases.delete("fillCanvas"),h.set(f,N.canvas)),this.dependencyTracker?.recordDependencies(e,_n.transformAndFill),{canvas:N.canvas,offsetX:Math.round(D),offsetY:Math.round(j)}}setLineWidth(e,t){this.dependencyTracker?.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){this.dependencyTracker?.recordSimpleData("lineCap",e),this.ctx.lineCap=aD[t]}setLineJoin(e,t){this.dependencyTracker?.recordSimpleData("lineJoin",e),this.ctx.lineJoin=lD[t]}setMiterLimit(e,t){this.dependencyTracker?.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,n){this.dependencyTracker?.recordSimpleData("dash",e);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(t),r.lineDashOffset=n)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){for(const[n,r]of t)switch(n){case"LW":this.setLineWidth(e,r);break;case"LC":this.setLineCap(e,r);break;case"LJ":this.setLineJoin(e,r);break;case"ML":this.setMiterLimit(e,r);break;case"D":this.setDash(e,r[0],r[1]);break;case"RI":this.setRenderingIntent(e,r);break;case"FL":this.setFlatness(e,r);break;case"Font":this.setFont(e,r[0],r[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=r;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=r;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=r;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",e),this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,n=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(r,t,n);this.suspendedCtx=this.ctx;const l=this.ctx=o.context;l.setTransform(this.suspendedCtx.getTransform()),zo(this.suspendedCtx,l),iD(l,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),zo(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,r){const o=r[0],l=r[1],c=r[2]-o,u=r[3]-l;c===0||u===0||(this.genericComposeSMask(t.context,n,c,u,t.subtype,t.backdrop,t.transferMap,o,l,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,r,o,l,c,u,h,f,p){let y=e.canvas,x=u-f,_=h-p;if(l)if(x<0||_<0||x+n>y.width||_+r>y.height){const w=this.cachedCanvases.getCanvas("maskExtension",n,r),E=w.context;E.drawImage(y,-x,-_),E.globalCompositeOperation="destination-atop",E.fillStyle=l,E.fillRect(0,0,n,r),E.globalCompositeOperation="source-over",y=w.canvas,x=_=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const w=new Path2D;w.rect(x,_,n,r),e.clip(w),e.globalCompositeOperation="destination-atop",e.fillStyle=l,e.fillRect(x,_,n,r),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),o==="Alpha"&&c?t.filter=this.filterFactory.addAlphaFilter(c):o==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(c));const b=new Path2D;b.rect(u,h,n,r),t.clip(b),t.globalCompositeOperation="destination-in",t.drawImage(y,x,_,n,r,u,h,n,r),t.restore()}save(e){this.inSMaskMode&&zo(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),this.dependencyTracker?.save(e)}restore(e){if(this.dependencyTracker?.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&zo(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,n,r,o,l,c){this.dependencyTracker?.recordIncrementalData("transform",e),this.ctx.transform(t,n,r,o,l,c),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n,r){let[o]=n;if(!r){o||=n[0]=new Path2D,this[t](e,o);return}if(this.dependencyTracker!==null){const l=t===ji.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,r[0]-l,r[2]+l,r[1]-l,r[3]+l).recordDependencies(e,["transform"])}if(!(o instanceof Path2D)){const l=n[0]=new Path2D;for(let c=0,u=o.length;c<u;)switch(o[c++]){case Rc.moveTo:l.moveTo(o[c++],o[c++]);break;case Rc.lineTo:l.lineTo(o[c++],o[c++]);break;case Rc.curveTo:l.bezierCurveTo(o[c++],o[c++],o[c++],o[c++],o[c++],o[c++]);break;case Rc.closePath:l.closePath();break;default:Ce(`Unrecognized drawing path operator: ${o[c-1]}`);break}o=l}fe.axialAlignedBoundingBox(r,rt(this.ctx),this.current.minMax),this[t](e,o),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,n=!0){const r=this.ctx,o=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){const l=o.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=o.getPattern(r,this,Qn(r),Nt.STROKE,e),l){const c=new Path2D;c.addPath(t,r.getTransform().invertSelf().multiplySelf(l)),t=c}this.rescaleAndStroke(t,!1),r.restore()}else this.rescaleAndStroke(t,!0);this.dependencyTracker?.recordDependencies(e,_n.stroke),n&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(Nt.STROKE,rt(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,n=!0){const r=this.ctx,o=this.current.fillColor,l=this.current.patternFill;let c=!1;if(l){const h=o.isModifyingCurrentTransform()?r.getTransform():null;if(this.dependencyTracker?.save(e),r.save(),r.fillStyle=o.getPattern(r,this,Qn(r),Nt.FILL,e),h){const f=new Path2D;f.addPath(t,r.getTransform().invertSelf().multiplySelf(h)),t=f}c=!0}const u=this.current.getClippedPathBoundingBox();this.contentVisible&&u!==null&&(this.pendingEOFill?(r.fill(t,"evenodd"),this.pendingEOFill=!1):r.fill(t)),this.dependencyTracker?.recordDependencies(e,_n.fill),c&&(r.restore(),this.dependencyTracker?.restore(e)),n&&this.consumePath(e,t,u)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){this.ctx.fill(t),this.dependencyTracker?.recordDependencies(e,_n.rawFillPath).recordOperation(e)}clip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=cD}eoClip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=U0}beginText(e){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;t!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",e),r.recordCloseMarker(e)}if(t!==void 0){const r=new Path2D,o=n.getTransform().invertSelf();for(const{transform:l,x:c,y:u,fontSize:h,path:f}of t)f&&r.addPath(f,new DOMMatrix(l).preMultiplySelf(o).translate(c,u).scale(h,-h));n.clip(r)}delete this.pendingTextPaths}setCharSpacing(e,t){this.dependencyTracker?.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){this.dependencyTracker?.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){this.dependencyTracker?.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){this.dependencyTracker?.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,n){this.dependencyTracker?.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const r=this.commonObjs.get(t),o=this.current;if(!r)throw new Error(`Can't find font for ${t}`);if(o.fontMatrix=r.fontMatrix||Rf,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&Ce("Invalid font matrix for font "+t),n<0?(n=-n,o.fontDirection=-1):o.fontDirection=1,this.current.font=r,this.current.fontSize=n,r.isType3Font)return;const l=r.loadedName||"sans-serif",c=r.systemFontInfo?.css||`"${l}", ${r.fallbackName}`;let u="normal";r.black?u="900":r.bold&&(u="bold");const h=r.italic?"italic":"normal";let f=n;n<O0?f=O0:n>M0&&(f=M0),this.current.fontSizeScale=n/f,this.ctx.font=`${h} ${u} ${f}px ${c}`}setTextRenderingMode(e,t){this.dependencyTracker?.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){this.dependencyTracker?.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,n){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,t,n){this.setLeading(e,-n),this.moveText(e,t,n)}setTextMatrix(e,t){this.dependencyTracker?.recordSimpleData("textMatrix",e);const{current:n}=this;n.textMatrix=t,n.textMatrixScale=Math.hypot(t[0],t[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(e){this.moveText(e,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}#r(e,t,n){const r=new Path2D;return r.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),r}paintChar(e,t,n,r,o,l){const c=this.ctx,u=this.current,h=u.font,f=u.textRenderingMode,p=u.fontSize/u.fontSizeScale,y=f&Rt.FILL_STROKE_MASK,x=!!(f&Rt.ADD_TO_PATH_FLAG),_=u.patternFill&&!h.missingFile,b=u.patternStroke&&!h.missingFile;let w;if((h.disableFontFace||x||_||b)&&!h.missingFile&&(w=h.getPathGenerator(this.commonObjs,t)),w&&(h.disableFontFace||_||b)){c.save(),c.translate(n,r),c.scale(p,-p),this.dependencyTracker?.recordCharacterBBox(e,c,h);let E;if(y===Rt.FILL||y===Rt.FILL_STROKE)if(o){E=c.getTransform(),c.setTransform(...o);const A=this.#r(w,E,o);c.fill(A)}else c.fill(w);if(y===Rt.STROKE||y===Rt.FILL_STROKE)if(l){E||=c.getTransform(),c.setTransform(...l);const{a:A,b:C,c:k,d:N}=E,R=fe.inverseTransform(l),D=fe.transform([A,C,k,N,0,0],R);fe.singularValueDecompose2dScale(D,fn),c.lineWidth*=Math.max(fn[0],fn[1])/p,c.stroke(this.#r(w,E,l))}else c.lineWidth/=p,c.stroke(w);c.restore()}else(y===Rt.FILL||y===Rt.FILL_STROKE)&&(c.fillText(t,n,r),this.dependencyTracker?.recordCharacterBBox(e,c,h,p,n,r,()=>c.measureText(t))),(y===Rt.STROKE||y===Rt.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(e,c,h,p,n,r,()=>c.measureText(t)).recordDependencies(e,_n.stroke),c.strokeText(t,n,r));x&&((this.pendingTextPaths||=[]).push({transform:rt(c),x:n,y:r,fontSize:p,path:w}),this.dependencyTracker?.recordCharacterBBox(e,c,h,p,n,r))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){n=!0;break}return Re(this,"isFontSubpixelAAEnabled",n)}showText(e,t){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,_n.showText).resetBBox(e),this.current.textRenderingMode&Rt.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,r=n.font;if(r.isType3Font){this.showType3Text(e,t),this.dependencyTracker?.recordShowTextOperation(e);return}const o=n.fontSize;if(o===0){this.dependencyTracker?.recordOperation(e);return}const l=this.ctx,c=n.fontSizeScale,u=n.charSpacing,h=n.wordSpacing,f=n.fontDirection,p=n.textHScale*f,y=t.length,x=r.vertical,_=x?1:-1,b=r.defaultVMetrics,w=o*n.fontMatrix[0],E=n.textRenderingMode===Rt.FILL&&!r.disableFontFace&&!n.patternFill;l.save(),n.textMatrix&&l.transform(...n.textMatrix),l.translate(n.x,n.y+n.textRise),f>0?l.scale(p,-1):l.scale(p,1);let A,C;if(n.patternFill){l.save();const j=n.fillColor.getPattern(l,this,Qn(l),Nt.FILL,e);A=rt(l),l.restore(),l.fillStyle=j}if(n.patternStroke){l.save();const j=n.strokeColor.getPattern(l,this,Qn(l),Nt.STROKE,e);C=rt(l),l.restore(),l.strokeStyle=j}let k=n.lineWidth;const N=n.textMatrixScale;if(N===0||k===0){const j=n.textRenderingMode&Rt.FILL_STROKE_MASK;(j===Rt.STROKE||j===Rt.FILL_STROKE)&&(k=this.getSinglePixelWidth())}else k/=N;if(c!==1&&(l.scale(c,c),k/=c),l.lineWidth=k,r.isInvalidPDFjsFont){const j=[];let z=0;for(const Y of t)j.push(Y.unicode),z+=Y.width;const q=j.join("");if(l.fillText(q,0,0),this.dependencyTracker!==null){const Y=l.measureText(q);this.dependencyTracker.recordBBox(e,this.ctx,-Y.actualBoundingBoxLeft,Y.actualBoundingBoxRight,-Y.actualBoundingBoxAscent,Y.actualBoundingBoxDescent).recordShowTextOperation(e)}n.x+=z*w*p,l.restore(),this.compose();return}let R=0,D;for(D=0;D<y;++D){const j=t[D];if(typeof j=="number"){R+=_*j*o/1e3;continue}let z=!1;const q=(j.isSpace?h:0)+u,Y=j.fontChar,ne=j.accent;let ie,ee,ae=j.width;if(x){const I=j.vmetric||b,V=-(j.vmetric?I[1]:ae*.5)*w,Q=I[2]*w;ae=I?-I[0]:ae,ie=V/c,ee=(R+Q)/c}else ie=R/c,ee=0;let G;if(r.remeasure&&ae>0){G=l.measureText(Y);const I=G.width*1e3/o*c;if(ae<I&&this.isFontSubpixelAAEnabled){const V=ae/I;z=!0,l.save(),l.scale(V,1),ie/=V}else ae!==I&&(ie+=(ae-I)/2e3*o/c)}if(this.contentVisible&&(j.isInFont||r.missingFile)){if(E&&!ne)l.fillText(Y,ie,ee),this.dependencyTracker?.recordCharacterBBox(e,l,G?{bbox:null}:r,o/c,ie,ee,()=>G??l.measureText(Y));else if(this.paintChar(e,Y,ie,ee,A,C),ne){const I=ie+o*ne.offset.x/c,V=ee-o*ne.offset.y/c;this.paintChar(e,ne.fontChar,I,V,A,C)}}const X=x?ae*w-q*f:ae*w+q*f;R+=X,z&&l.restore()}x?n.y-=R:n.x+=R*p,l.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(e)}showType3Text(e,t){const n=this.ctx,r=this.current,o=r.font,l=r.fontSize,c=r.fontDirection,u=o.vertical?1:-1,h=r.charSpacing,f=r.wordSpacing,p=r.textHScale*c,y=r.fontMatrix||Rf,x=t.length,_=r.textRenderingMode===Rt.INVISIBLE;let b,w,E,A;if(_||l===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),r.textMatrix&&n.transform(...r.textMatrix),n.translate(r.x,r.y+r.textRise),n.scale(p,c);const C=this.dependencyTracker;for(this.dependencyTracker=C?new au(C,e):null,b=0;b<x;++b){if(w=t[b],typeof w=="number"){A=u*w*l/1e3,this.ctx.translate(A,0),r.x+=A*p;continue}const k=(w.isSpace?f:0)+h,N=o.charProcOperatorList[w.operatorListId];N?this.contentVisible&&(this.save(),n.scale(l,l),n.transform(...y),this.executeOperatorList(N),this.restore()):Ce(`Type3 character "${w.operatorListId}" is not available.`);const R=[w.width,0];fe.applyTransform(R,y),E=R[0]*l+k,n.translate(E,0),r.x+=E*p}n.restore(),C&&(this.dependencyTracker=C)}setCharWidth(e,t,n){}setCharWidthAndBounds(e,t,n,r,o,l,c){const u=new Path2D;u.rect(r,o,l-r,c-o),this.ctx.clip(u),this.dependencyTracker?.recordBBox(e,this.ctx,r,l,o,c).recordClipBox(e,this.ctx,r,l,o,c),this.endPath(e)}getColorN_Pattern(e,t){let n;if(t[0]==="TilingPattern"){const r=this.baseTransform||rt(this.ctx),o={createCanvasGraphics:(l,c)=>new Ri(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new au(this.dependencyTracker,c,!0):null)};n=new _p(t,this.ctx,o,r)}else n=this._getPattern(e,t[1],t[2]);return n}setStrokeColorN(e,...t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,n=null){let r;return this.cachedPatterns.has(t)?r=this.cachedPatterns.get(t):(r=nD(this.getObject(e,t)),this.cachedPatterns.set(t,r)),n&&(r.matrix=n),r}shadingFill(e,t){if(!this.contentVisible)return;const n=this.ctx;this.save(e);const r=this._getPattern(e,t);n.fillStyle=r.getPattern(n,this,Qn(n),Nt.SHADING,e);const o=Qn(n);if(o){const{width:l,height:c}=n.canvas,u=xi.slice();fe.axialAlignedBoundingBox([0,0,l,c],o,u);const[h,f,p,y]=u;this.ctx.fillRect(h,f,p-h,y-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,_n.transform).recordDependencies(e,_n.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){$e("Should not call beginInlineImage")}beginImageData(){$e("Should not call beginImageData")}paintFormXObjectBegin(e,t,n){if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=rt(this.ctx),n)){fe.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[r,o,l,c]=n,u=new Path2D;u.rect(r,o,l-r,c-o),this.ctx.clip(u),this.dependencyTracker?.recordClipBox(e,this.ctx,r,l,o,c),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;t.isolated||Eu("TODO: Support non-isolated groups."),t.knockout&&Ce("Knockout groups not supported.");const r=rt(n);if(t.matrix&&n.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let o=xi.slice();fe.axialAlignedBoundingBox(t.bbox,rt(n),o);const l=[0,0,n.canvas.width,n.canvas.height];o=fe.intersect(o,l)||[0,0,0,0];const c=Math.floor(o[0]),u=Math.floor(o[1]),h=Math.max(Math.ceil(o[2])-c,1),f=Math.max(Math.ceil(o[3])-u,1);this.current.startNewPathAndClipBox([0,0,h,f]);let p="groupAt"+this.groupLevel;t.smask&&(p+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(p,h,f),x=y.context;x.translate(-c,-u),x.transform(...r);let _=new Path2D;const[b,w,E,A]=t.bbox;if(_.rect(b,w,E-b,A-w),t.matrix){const C=new Path2D;C.addPath(_,new DOMMatrix(t.matrix)),_=C}x.clip(_),t.smask&&this.smaskStack.push({canvas:y.canvas,context:x,offsetX:c,offsetY:u,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(c,u),n.save()),zo(n,x),this.ctx=x,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(e,t){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=rt(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...o);const l=xi.slice();fe.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],o,l),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(e,t,n,r,o,l){if(this.#e(),Fc(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const c=n[2]-n[0],u=n[3]-n[1];if(l&&this.annotationCanvasMap){r=r.slice(),r[4]-=n[0],r[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=c,n[3]=u,fe.singularValueDecompose2dScale(rt(this.ctx),fn);const{viewportScale:h}=this,f=Math.ceil(c*this.outputScaleX*h),p=Math.ceil(u*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(f,p);const{canvas:y,context:x}=this.annotationCanvas;this.annotationCanvasMap.set(t,y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=x,this.ctx.save(),this.ctx.setTransform(fn[0],0,0,-fn[1],0,u*fn[1]),Fc(this.ctx)}else{Fc(this.ctx),this.endPath(e);const h=new Path2D;h.rect(n[0],n[1],c,u),this.ctx.clip(h)}}this.current=new I0(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...r),this.transform(e,...o)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){if(!this.contentVisible)return;const n=t.count;t=this.getObject(e,t.data,t),t.count=n;const r=this.ctx,o=this._createMaskCanvas(e,t),l=o.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(l,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,o.offsetX,o.offsetX+l.width,o.offsetY,o.offsetY+l.height).recordOperation(e),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n,r=0,o=0,l,c){if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const u=this.ctx;u.save();const h=rt(u);u.transform(n,r,o,l,0,0);const f=this._createMaskCanvas(e,t);u.setTransform(1,0,0,1,f.offsetX-h[4],f.offsetY-h[5]),this.dependencyTracker?.resetBBox(e);for(let p=0,y=c.length;p<y;p+=2){const x=fe.transform(h,[n,r,o,l,c[p],c[p+1]]);u.drawImage(f.canvas,x[4],x[5]),this.dependencyTracker?.recordBBox(e,this.ctx,x[4],x[4]+f.canvas.width,x[5],x[5]+f.canvas.height)}u.restore(),this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageMaskXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx,r=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(e).recordDependencies(e,_n.transformAndFill);for(const l of t){const{data:c,width:u,height:h,transform:f}=l,p=this.cachedCanvases.getCanvas("maskCanvas",u,h),y=p.context;y.save();const x=this.getObject(e,c,l);j0(y,x),y.globalCompositeOperation="source-in",y.fillStyle=o?r.getPattern(y,this,Qn(n),Nt.FILL,e):r,y.fillRect(0,0,u,h),y.restore(),n.save(),n.transform(...f),n.scale(1,-1),Ic(n,p.canvas,0,0,u,h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,n,0,u,0,h),n.restore()}this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const n=this.getObject(e,t);if(!n){Ce("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,n)}paintImageXObjectRepeat(e,t,n,r,o){if(!this.contentVisible)return;const l=this.getObject(e,t);if(!l){Ce("Dependent image isn't ready yet");return}const c=l.width,u=l.height,h=[];for(let f=0,p=o.length;f<p;f+=2)h.push({transform:[n,0,0,r,o[f],o[f+1]],x:0,y:0,w:c,h:u});this.paintInlineImageXObjectGroup(e,l,h)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:r}=e,o=this.cachedCanvases.getCanvas("inlineImage",n,r),l=o.context;return l.filter=this.current.transferMaps,l.drawImage(t,0,0),l.filter="none",o.canvas}paintInlineImageXObject(e,t){if(!this.contentVisible)return;const n=t.width,r=t.height,o=this.ctx;this.save(e);const{filter:l}=o;l!=="none"&&l!==""&&(o.filter="none"),o.scale(1/n,-1/r);let c;if(t.bitmap)c=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)c=t;else{const f=this.cachedCanvases.getCanvas("inlineImage",n,r).context;F0(f,t),c=this.applyTransferMapsToCanvas(f)}const u=this._scaleImage(c,Qn(o));o.imageSmoothingEnabled=B0(rt(o),t.interpolate),this.dependencyTracker?.resetBBox(e).recordBBox(e,o,0,n,-r,0).recordDependencies(e,_n.imageXObject).recordOperation(e),Ic(o,u.img,0,0,u.paintWidth,u.paintHeight,0,-r,n,r),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,n){if(!this.contentVisible)return;const r=this.ctx;let o;if(t.bitmap)o=t.bitmap;else{const l=t.width,c=t.height,h=this.cachedCanvases.getCanvas("inlineImage",l,c).context;F0(h,t),o=this.applyTransferMapsToCanvas(h)}this.dependencyTracker?.resetBBox(e);for(const l of n)r.save(),r.transform(...l.transform),r.scale(1,-1),Ic(r,o,l.x,l.y,l.w,l.h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,r,0,1,-1,0),r.restore();this.dependencyTracker?.recordOperation(e),this.compose()}paintSolidColorImageMask(e){this.contentVisible&&(this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,_n.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,n){}beginMarkedContent(e,t){this.dependencyTracker?.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,n){this.dependencyTracker?.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){this.dependencyTracker?.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,n){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const o=this.ctx;this.pendingClip?(r||(this.pendingClip===U0?o.clip(t,"evenodd"):o.clip(t)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):this.dependencyTracker?.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=rt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:r,d:o}=this.ctx.getTransform();let l,c;if(n===0&&r===0){const u=Math.abs(t),h=Math.abs(o);if(u===h)if(e===0)l=c=1/u;else{const f=u*e;l=c=f<1?1/f:1}else if(e===0)l=1/u,c=1/h;else{const f=u*e,p=h*e;l=f<1?1/f:1,c=p<1?1/p:1}}else{const u=Math.abs(t*o-n*r),h=Math.hypot(t,n),f=Math.hypot(r,o);if(e===0)l=f/u,c=h/u;else{const p=e*u;l=f>p?f/p:1,c=h>p?h/p:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=c}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:r}}=this,[o,l]=this.getScaleForStroking();if(o===l){n.lineWidth=(r||1)*o,n.stroke(e);return}const c=n.getLineDash();t&&n.save(),n.scale(o,l),nf.a=1/o,nf.d=1/l;const u=new Path2D;if(u.addPath(e,nf),c.length>0){const h=Math.max(o,l);n.setLineDash(c.map(f=>f/h)),n.lineDashOffset/=h}n.lineWidth=r||1,n.stroke(u),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const s in ji)Ri.prototype[s]!==void 0&&(Ri.prototype[ji[s]]=Ri.prototype[s]);class Ni{#e;#t;#r;static strings=["fontFamily","fontWeight","italicAngle"];static write(e){const t=new TextEncoder,n={};let r=0;for(const h of Ni.strings){const f=t.encode(e[h]);n[h]=f,r+=4+f.length}const o=new ArrayBuffer(r),l=new Uint8Array(o),c=new DataView(o);let u=0;for(const h of Ni.strings){const f=n[h],p=f.length;c.setUint32(u,p),l.set(f,u+4),u+=4+p}return Ie(u===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#r=new TextDecoder}#n(e){Ie(e<Ni.strings.length,"Invalid string index");let t=0;for(let r=0;r<e;r++)t+=this.#t.getUint32(t)+4;const n=this.#t.getUint32(t);return this.#r.decode(new Uint8Array(this.#e,t+4,n))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class Di{#e;#t;#r;static strings=["css","loadedName","baseFontName","src"];static write(e){const t=new TextEncoder,n={};let r=0;for(const y of Di.strings){const x=t.encode(e[y]);n[y]=x,r+=4+x.length}r+=4;let o,l,c=1+r;e.style&&(o=t.encode(e.style.style),l=t.encode(e.style.weight),c+=4+o.length+4+l.length);const u=new ArrayBuffer(c),h=new Uint8Array(u),f=new DataView(u);let p=0;f.setUint8(p++,e.guessFallback?1:0),f.setUint32(p,0),p+=4,r=0;for(const y of Di.strings){const x=n[y],_=x.length;r+=4+_,f.setUint32(p,_),h.set(x,p+4),p+=4+_}return f.setUint32(p-r-4,r),e.style&&(f.setUint32(p,o.length),h.set(o,p+4),p+=4+o.length,f.setUint32(p,l.length),h.set(l,p+4),p+=4+l.length),Ie(p<=u.byteLength,"SubstitionInfo.write: Buffer overflow"),u.transferToFixedLength(p)}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#r=new TextDecoder}get guessFallback(){return this.#t.getUint8(0)!==0}#n(e){Ie(e<Di.strings.length,"Invalid string index");let t=5;for(let r=0;r<e;r++)t+=this.#t.getUint32(t)+4;const n=this.#t.getUint32(t);return this.#r.decode(new Uint8Array(this.#e,t+4,n))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let e=1;e+=4+this.#t.getUint32(e);const t=this.#t.getUint32(e),n=this.#r.decode(new Uint8Array(this.#e,e+4,t));e+=4+t;const r=this.#t.getUint32(e),o=this.#r.decode(new Uint8Array(this.#e,e+4,r));return{style:n,weight:o}}}class He{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#e=Math.ceil(this.bools.length*2/8);static#t=this.#e+this.numbers.length*8;static#r=this.#t+1+8;static#n=this.#r+1+48;static#o=this.#n+1+6;#s;#i;#a;constructor({data:e,extra:t}){this.#s=e,this.#i=new TextDecoder,this.#a=new DataView(this.#s),t&&Object.assign(this,t)}#c(e){Ie(e<He.bools.length,"Invalid boolean index");const t=Math.floor(e/4),n=e*2%8,r=this.#a.getUint8(t)>>n&3;return r===0?void 0:r===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(e){return Ie(e<He.numbers.length,"Invalid number index"),this.#a.getFloat64(He.#e+e*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let e=He.#t;if(this.#a.getUint8(e)===0)return;e+=1;const n=[];for(let r=0;r<4;r++)n.push(this.#a.getInt16(e,!0)),e+=2;return n}get fontMatrix(){let e=He.#r;if(this.#a.getUint8(e)===0)return;e+=1;const n=[];for(let r=0;r<6;r++)n.push(this.#a.getFloat64(e,!0)),e+=8;return n}get defaultVMetrics(){let e=He.#n;if(this.#a.getUint8(e)===0)return;e+=1;const n=[];for(let r=0;r<3;r++)n.push(this.#a.getInt16(e,!0)),e+=2;return n}#h(e){Ie(e<He.strings.length,"Invalid string index");let t=He.#o+4;for(let o=0;o<e;o++)t+=this.#a.getUint32(t)+4;const n=this.#a.getUint32(t),r=new Uint8Array(n);return r.set(new Uint8Array(this.#s,t+4,n)),this.#i.decode(r)}get fallbackName(){return this.#h(0)}get loadedName(){return this.#h(1)}get mimetype(){return this.#h(2)}get name(){return this.#h(3)}get data(){let e=He.#o;const t=this.#a.getUint32(e);e+=4+t;const n=this.#a.getUint32(e);e+=4+n;const r=this.#a.getUint32(e);e+=4+r;const o=this.#a.getUint32(e);if(o!==0)return new Uint8Array(this.#s,e+4,o)}clearData(){let e=He.#o;const t=this.#a.getUint32(e);e+=4+t;const n=this.#a.getUint32(e);e+=4+n;const r=this.#a.getUint32(e);e+=4+r;const o=this.#a.getUint32(e);new Uint8Array(this.#s,e+4,o).fill(0),this.#a.setUint32(e,0)}get cssFontInfo(){let e=He.#o;const t=this.#a.getUint32(e);e+=4+t;const n=this.#a.getUint32(e);e+=4+n;const r=this.#a.getUint32(e);if(r===0)return null;const o=new Uint8Array(r);return o.set(new Uint8Array(this.#s,e+4,r)),new Ni(o.buffer)}get systemFontInfo(){let e=He.#o;const t=this.#a.getUint32(e);e+=4+t;const n=this.#a.getUint32(e);if(n===0)return null;const r=new Uint8Array(n);return r.set(new Uint8Array(this.#s,e+4,n)),new Di(r.buffer)}static write(e){const t=e.systemFontInfo?Di.write(e.systemFontInfo):null,n=e.cssFontInfo?Ni.write(e.cssFontInfo):null,r=new TextEncoder,o={};let l=0;for(const b of He.strings)o[b]=r.encode(e[b]),l+=4+o[b].length;const c=He.#o+4+l+4+(t?t.byteLength:0)+4+(n?n.byteLength:0)+4+(e.data?e.data.length:0),u=new ArrayBuffer(c),h=new Uint8Array(u),f=new DataView(u);let p=0;const y=He.bools.length;let x=0,_=0;for(let b=0;b<y;b++){const w=e[He.bools[b]];x|=(w===void 0?0:w?2:1)<<_,_+=2,(_===8||b===y-1)&&(f.setUint8(p++,x),x=0,_=0)}Ie(p===He.#e,"FontInfo.write: Boolean properties offset mismatch");for(const b of He.numbers)f.setFloat64(p,e[b]),p+=8;if(Ie(p===He.#t,"FontInfo.write: Number properties offset mismatch"),e.bbox){f.setUint8(p++,4);for(const b of e.bbox)f.setInt16(p,b,!0),p+=2}else f.setUint8(p++,0),p+=8;if(Ie(p===He.#r,"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){f.setUint8(p++,6);for(const b of e.fontMatrix)f.setFloat64(p,b,!0),p+=8}else f.setUint8(p++,0),p+=48;if(Ie(p===He.#n,"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){f.setUint8(p++,1);for(const b of e.defaultVMetrics)f.setInt16(p,b,!0),p+=2}else f.setUint8(p++,0),p+=6;Ie(p===He.#o,"FontInfo.write: DefaultVMetrics properties offset mismatch"),f.setUint32(He.#o,0),p+=4;for(const b of He.strings){const w=o[b],E=w.length;f.setUint32(p,E),h.set(w,p+4),p+=4+E}if(f.setUint32(He.#o,p-He.#o-4),!t)f.setUint32(p,0),p+=4;else{const b=t.byteLength;f.setUint32(p,b),Ie(p+4+b<=u.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),h.set(new Uint8Array(t),p+4),p+=4+b}if(!n)f.setUint32(p,0),p+=4;else{const b=n.byteLength;f.setUint32(p,b),Ie(p+4+b<=u.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),h.set(new Uint8Array(n),p+4),p+=4+b}return e.data===void 0?(f.setUint32(p,0),p+=4):(f.setUint32(p,e.data.length),h.set(e.data,p+4),p+=4+e.data.length),Ie(p<=u.byteLength,"FontInfo.write: Buffer overflow"),u.transferToFixedLength(p)}}class ns{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}class uD{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}[Symbol.iterator](){return this.#e.entries()}}const wi=Symbol("INTERNAL");class dD{#e=!1;#t=!1;#r=!1;#n=!0;constructor(e,{name:t,intent:n,usage:r,rbGroups:o}){this.#e=!!(e&dn.DISPLAY),this.#t=!!(e&dn.PRINT),this.name=t,this.intent=n,this.usage=r,this.rbGroups=o}get visible(){if(this.#r)return this.#n;if(!this.#n)return!1;const{print:e,view:t}=this.usage;return this.#e?t?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,t,n=!1){e!==wi&&$e("Internal method `_setVisible` called."),this.#r=n,this.#n=t}}class hD{#e=null;#t=new Map;#r=null;#n=null;constructor(e,t=dn.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#n=e.order;for(const n of e.groups)this.#t.set(n.id,new dD(t,n));if(e.baseState==="OFF")for(const n of this.#t.values())n._setVisible(wi,!1);for(const n of e.on)this.#t.get(n)._setVisible(wi,!0);for(const n of e.off)this.#t.get(n)._setVisible(wi,!1);this.#r=this.getHash()}}#o(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let r=1;r<t;r++){const o=e[r];let l;if(Array.isArray(o))l=this.#o(o);else if(this.#t.has(o))l=this.#t.get(o).visible;else return Ce(`Optional content group not found: ${o}`),!0;switch(n){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return n==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return Eu("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(Ce(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#o(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!this.#t.has(t))return Ce(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!this.#t.has(t))return Ce(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!this.#t.has(t))return Ce(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!this.#t.has(t))return Ce(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return Ce(`Unknown optional content policy ${e.policy}.`),!0}return Ce(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){const r=this.#t.get(e);if(!r){Ce(`Optional content group not found: ${e}`);return}if(n&&t&&r.rbGroups.length)for(const o of r.rbGroups)for(const l of o)l!==e&&this.#t.get(l)?._setVisible(wi,!1,!0);r._setVisible(wi,!!t,!0),this.#e=null}setOCGState({state:e,preserveRB:t}){let n;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}const o=this.#t.get(r);if(o)switch(n){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!o.visible,t);break}}this.#e=null}get hasInitialVisibility(){return this.#r===null||this.getHash()===this.#r}getOrder(){return this.#t.size?this.#n?this.#n.slice():[...this.#t.keys()]:null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new Ux;for(const[t,n]of this.#t)e.update(`${t}:${n.visible}`);return this.#e=e.hexdigest()}[Symbol.iterator](){return this.#t.entries()}}class fD{constructor(e,{disableRange:t=!1,disableStream:n=!1}){Ie(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:o,progressiveDone:l,contentDispositionFilename:c}=e;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=c,o?.length>0){const u=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(u)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((u,h)=>{this._onReceiveData({begin:u,chunk:h})}),e.addProgressListener((u,h)=>{this._onProgress({loaded:u,total:h})}),e.addProgressiveReadListener(u=>{this._onReceiveData({chunk:u})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const r=this._rangeReaders.some(function(o){return o._begin!==e?!1:(o._enqueue(n),!0)});Ie(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Ie(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new pD(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new mD(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}class pD{constructor(e,t,n=!1,r=null){this._stream=e,this._done=n||!1,this._filename=Cu(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class mD{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function gD(s){let e=!0,t=n("filename\\*","i").exec(s);if(t){t=t[1];let f=c(t);return f=unescape(f),f=u(f),f=h(f),o(f)}if(t=l(s),t){const f=h(t);return o(f)}if(t=n("filename","i").exec(s),t){t=t[1];let f=c(t);return f=h(f),o(f)}function n(f,p){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',p)}function r(f,p){if(f){if(!/^[\x00-\xFF]+$/.test(p))return p;try{const y=new TextDecoder(f,{fatal:!0}),x=xa(p);p=y.decode(x),e=!1}catch{}}return p}function o(f){return e&&/[\x80-\xff]/.test(f)&&(f=r("utf-8",f),e&&(f=r("iso-8859-1",f))),f}function l(f){const p=[];let y;const x=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=x.exec(f))!==null;){let[,b,w,E]=y;if(b=parseInt(b,10),b in p){if(b===0)break;continue}p[b]=[w,E]}const _=[];for(let b=0;b<p.length&&b in p;++b){let[w,E]=p[b];E=c(E),w&&(E=unescape(E),b===0&&(E=u(E))),_.push(E)}return _.join("")}function c(f){if(f.startsWith('"')){const p=f.slice(1).split('\\"');for(let y=0;y<p.length;++y){const x=p[y].indexOf('"');x!==-1&&(p[y]=p[y].slice(0,x),p.length=y+1),p[y]=p[y].replaceAll(/\\(.)/g,"$1")}f=p.join('"')}return f}function u(f){const p=f.indexOf("'");if(p===-1)return f;const y=f.slice(0,p),_=f.slice(p+1).replace(/^[^']*'/,"");return r(y,_)}function h(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(p,y,x,_){if(x==="q"||x==="Q")return _=_.replaceAll("_"," "),_=_.replaceAll(/=([0-9a-fA-F]{2})/g,function(b,w){return String.fromCharCode(parseInt(w,16))}),r(y,_);try{_=atob(_)}catch{}return r(y,_)})}return""}function Yx(s,e){const t=new Headers;if(!s||!e||typeof e!="object")return t;for(const n in e){const r=e[n];r!==void 0&&t.append(n,r)}return t}function Tu(s){return URL.parse(s)?.origin??null}function Xx({responseHeaders:s,isHttp:e,rangeChunkSize:t,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(s.get("Content-Length"),10);return!Number.isInteger(o)||(r.suggestedLength=o,o<=2*t)||n||!e||s.get("Accept-Ranges")!=="bytes"||(s.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function Kx(s){const e=s.get("Content-Disposition");if(e){let t=gD(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Cu(t))return t}return null}function Ca(s,e){return new aa(`Unexpected server response (${s}) while retrieving PDF "${e}".`,s,s===404||s===0&&e.startsWith("file:"))}function Qx(s){return s===200||s===206}function Jx(s,e,t){return{method:"GET",headers:s,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function Zx(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(Ce(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class yD{_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=Yx(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Ie(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new vD(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new bD(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class vD{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),r=t.url;fetch(r,Jx(n,this._withCredentials,this._abortController)).then(o=>{if(e._responseOrigin=Tu(o.url),!Qx(o.status))throw Ca(o.status,r);this._reader=o.body.getReader(),this._headersCapability.resolve();const l=o.headers,{allowRangeRequests:c,suggestedLength:u}=Xx({responseHeaders:l,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=u||this._contentLength,this._filename=Kx(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ar("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Zx(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class bD{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const o=new Headers(e.headers);o.append("Range",`bytes=${t}-${n-1}`);const l=r.url;fetch(l,Jx(o,this._withCredentials,this._abortController)).then(c=>{const u=Tu(c.url);if(u!==e._responseOrigin)throw new Error(`Expected range response-origin "${u}" to match "${e._responseOrigin}".`);if(!Qx(c.status))throw Ca(c.status,l);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:Zx(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const rf=200,sf=206;function wD(s){const e=s.response;return typeof e!="string"?e:xa(e).buffer}class xD{_responseOrigin=null;constructor({url:e,httpHeaders:t,withCredentials:n}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=Yx(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[o,l]of this.headers)t.setRequestHeader(o,l);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=sf):r.expectedStatus=rf,t.responseType="arraybuffer",Ie(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){const n=this.pendingRequests[e];n&&n.onProgress?.(t)}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){n.onError(r.status);return}const o=r.status||rf;if(!(o===rf&&n.expectedStatus===sf)&&o!==n.expectedStatus){n.onError(r.status);return}const c=wD(r);if(o===sf){const u=r.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(u);h?n.onDone({begin:parseInt(h[1],10),chunk:c}):(Ce('Missing or invalid "Content-Range" header.'),n.onError(0))}else c?n.onDone({begin:0,chunk:c}):n.onError(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class SD{constructor(e){this._source=e,this._manager=new xD(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Ie(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new _D(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new ED(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class _D{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=Tu(t.responseURL);const n=t.getAllResponseHeaders(),r=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(c=>{const[u,...h]=c.split(": ");return[u,h.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:l}=Xx({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=Kx(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Ca(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class ED{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const e=Tu(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=Ca(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const AD=/^[a-z][a-z0-9\-+.]+:/i;function CD(s){if(AD.test(s))return new URL(s);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(s))}class TD{constructor(e){this.source=e,this.url=CD(e.url),Ie(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Ie(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new kD(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new PD(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class kD{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=Ca(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ar("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class PD{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=e.source;this._isStreamingSupported=!r.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Ho=Symbol("INITIAL_DATA");class eS{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:Ho}}get(e,t=null){if(t){const r=this.#t(e);return r.promise.then(()=>t(r.data)),null}const n=this.#e[e];if(!n||n.data===Ho)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=this.#e[e];return!!t&&t.data!==Ho}delete(e){const t=this.#e[e];return!t||t.data===Ho?!1:(delete this.#e[e],!0)}resolve(e,t=null){const n=this.#t(e);n.data=t,n.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==Ho&&(yield[e,t])}}}const RD=1e5,z0=30;let ca=class En{#e=Promise.withResolvers();#t=null;#r=!1;#n=!!globalThis.FontInspector?.enabled;#o=null;#s=null;#i=0;#a=0;#c=null;#l=null;#h=0;#d=0;#f=Object.create(null);#g=[];#p=null;#u=[];#m=new WeakMap;#y=null;static#b=new Map;static#v=new Map;static#A=new WeakMap;static#_=null;static#w=new Set;constructor({textContentSource:e,container:t,viewport:n}){if(e instanceof ReadableStream)this.#p=e;else if(typeof e=="object")this.#p=new ReadableStream({start(u){u.enqueue(e),u.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#l=t,this.#d=n.scale*Un.pixelRatio,this.#h=n.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:o,pageX:l,pageY:c}=n.rawDims;this.#y=[1,0,0,-1,-l,c+o],this.#a=r,this.#i=o,En.#P(),rs(t,n),this.#e.promise.finally(()=>{En.#w.delete(this),this.#s=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Tt.platform;return Re(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#c.read().then(({value:t,done:n})=>{if(n){this.#e.resolve();return}this.#o??=t.lang,Object.assign(this.#f,t.styles),this.#T(t.items),e()},this.#e.reject)};return this.#c=this.#p.getReader(),En.#w.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const n=e.scale*Un.pixelRatio,r=e.rotation;if(r!==this.#h&&(t?.(),this.#h=r,rs(this.#l,{rotation:r})),n!==this.#d){t?.(),this.#d=n;const o={div:null,properties:null,ctx:En.#R(this.#o)};for(const l of this.#u)o.properties=this.#m.get(l),o.div=l,this.#E(o)}}cancel(){const e=new Ar("TextLayer task cancelled.");this.#c?.cancel(e).catch(()=>{}),this.#c=null,this.#e.reject(e)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#g}#T(e){if(this.#r)return;this.#s.ctx??=En.#R(this.#o);const t=this.#u,n=this.#g;for(const r of e){if(t.length>RD){Ce("Ignoring additional textDivs for performance reasons."),this.#r=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const o=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),r.id&&this.#t.setAttribute("id",`${r.id}`),o.append(this.#t)}else r.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}n.push(r.str),this.#S(r)}}#S(e){const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#u.push(t);const r=fe.transform(this.#y,e.transform);let o=Math.atan2(r[1],r[0]);const l=this.#f[e.fontName];l.vertical&&(o+=Math.PI/2);let c=this.#n&&l.fontSubstitution||l.fontFamily;c=En.fontFamilyMap.get(c)||c;const u=Math.hypot(r[2],r[3]),h=u*En.#F(c,l,this.#o);let f,p;o===0?(f=r[4],p=r[5]-h):(f=r[4]+h*Math.sin(o),p=r[5]-h*Math.cos(o));const y="calc(var(--total-scale-factor) *",x=t.style;this.#t===this.#l?(x.left=`${(100*f/this.#a).toFixed(2)}%`,x.top=`${(100*p/this.#i).toFixed(2)}%`):(x.left=`${y}${f.toFixed(2)}px)`,x.top=`${y}${p.toFixed(2)}px)`),x.fontSize=`${y}${(En.#_*u).toFixed(2)}px)`,x.fontFamily=c,n.fontSize=u,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#n&&(t.dataset.fontName=l.fontSubstitutionLoadedName||e.fontName),o!==0&&(n.angle=o*(180/Math.PI));let _=!1;if(e.str.length>1)_=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const b=Math.abs(e.transform[0]),w=Math.abs(e.transform[3]);b!==w&&Math.max(b,w)/Math.min(b,w)>1.5&&(_=!0)}if(_&&(n.canvasWidth=l.vertical?e.height:e.width),this.#m.set(t,n),this.#s.div=t,this.#s.properties=n,this.#E(this.#s),n.hasText&&this.#t.append(t),n.hasEOL){const b=document.createElement("br");b.setAttribute("role","presentation"),this.#t.append(b)}}#E(e){const{div:t,properties:n,ctx:r}=e,{style:o}=t;let l="";if(En.#_>1&&(l=`scale(${1/En.#_})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:c}=o,{canvasWidth:u,fontSize:h}=n;En.#k(r,h*this.#d,c);const{width:f}=r.measureText(t.textContent);f>0&&(l=`scaleX(${u*this.#d/f}) ${l}`)}n.angle!==0&&(l=`rotate(${n.angle}deg) ${l}`),l.length>0&&(o.transform=l)}static cleanup(){if(!(this.#w.size>0)){this.#b.clear();for(const{canvas:e}of this.#v.values())e.remove();this.#v.clear()}}static#R(e=null){let t=this.#v.get(e||="");if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#v.set(e,t),this.#A.set(t,{size:0,family:""})}return t}static#k(e,t,n){const r=this.#A.get(e);t===r.size&&n===r.family||(e.font=`${t}px ${n}`,r.size=t,r.family=n)}static#P(){if(this.#_!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#_=e.getBoundingClientRect().height,e.remove()}static#F(e,t,n){const r=this.#b.get(e);if(r)return r;const o=this.#R(n);o.canvas.width=o.canvas.height=z0,this.#k(o,z0,e);const l=o.measureText(""),c=l.fontBoundingBoxAscent,u=Math.abs(l.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let h=.8;return c?h=c/(c+u):(Tt.platform.isFirefox&&Ce("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?h=t.ascent:t.descent&&(h=1+t.descent)),this.#b.set(e,h),h}};const ND=100;function Ep(s={}){typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const e=new Ap,{docId:t}=e,n=s.url?BN(s.url):null,r=s.data?UN(s.data):null,o=s.httpHeaders||null,l=s.withCredentials===!0,c=s.password??null,u=s.range instanceof Cp?s.range:null,h=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:2**16;let f=s.worker instanceof Bi?s.worker:null;const p=s.verbosity,y=typeof s.docBaseUrl=="string"&&!_a(s.docBaseUrl)?s.docBaseUrl:null,x=Dc(s.cMapUrl),_=s.cMapPacked!==!1,b=s.CMapReaderFactory||(Ht?GN:T0),w=Dc(s.iccUrl),E=Dc(s.standardFontDataUrl),A=s.StandardFontDataFactory||(Ht?YN:k0),C=Dc(s.wasmUrl),k=s.WasmFactory||(Ht?XN:P0),N=s.stopAtErrors!==!0,R=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,D=s.isEvalSupported!==!1,j=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!Ht,z=typeof s.isImageDecoderSupported=="boolean"?s.isImageDecoderSupported:!Ht&&(Tt.platform.isFirefox||!globalThis.chrome),q=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,Y=typeof s.disableFontFace=="boolean"?s.disableFontFace:Ht,ne=s.fontExtraProperties===!0,ie=s.enableXfa===!0,ee=s.ownerDocument||globalThis.document,ae=s.disableRange===!0,G=s.disableStream===!0,X=s.disableAutoFetch===!0,I=s.pdfBug===!0,V=s.CanvasFactory||(Ht?qN:WN),Q=s.FilterFactory||(Ht?VN:$N),M=s.enableHWA===!0,W=s.useWasm!==!1,oe=u?u.length:s.length??NaN,ce=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!Ht&&!Y,ve=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:!!(b===T0&&A===k0&&k===P0&&x&&E&&C&&Yo(x,document.baseURI)&&Yo(E,document.baseURI)&&Yo(C,document.baseURI)),we=null;wN(p);const ge={canvasFactory:new V({ownerDocument:ee,enableHWA:M}),filterFactory:new Q({docId:t,ownerDocument:ee}),cMapReaderFactory:ve?null:new b({baseUrl:x,isCompressed:_}),standardFontDataFactory:ve?null:new A({baseUrl:E}),wasmFactory:ve?null:new k({baseUrl:C})};f||(f=Bi.create({verbosity:p,port:ns.workerPort}),e._worker=f);const K={docId:t,apiVersion:"5.4.296",data:r,password:c,disableAutoFetch:X,rangeChunkSize:h,length:oe,docBaseUrl:y,enableXfa:ie,evaluatorOptions:{maxImageSize:R,disableFontFace:Y,ignoreErrors:N,isEvalSupported:D,isOffscreenCanvasSupported:j,isImageDecoderSupported:z,canvasMaxAreaInBytes:q,fontExtraProperties:ne,useSystemFonts:ce,useWasm:W,useWorkerFetch:ve,cMapUrl:x,iccUrl:w,standardFontDataUrl:E,wasmUrl:C}},se={ownerDocument:ee,pdfBug:I,styleElement:we,loadingParams:{disableAutoFetch:X,enableXfa:ie}};return f.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const ue=f.messageHandler.sendWithPromise("GetDocRequest",K,r?[r.buffer]:null);let et;if(u)et=new fD(u,{disableRange:ae,disableStream:G});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");const Gt=Yo(n)?yD:Ht?TD:SD;et=new Gt({url:n,length:oe,httpHeaders:o,withCredentials:l,rangeChunkSize:h,disableRange:ae,disableStream:G})}return ue.then(Gt=>{if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const De=new Xo(t,Gt,f.port),Be=new MD(De,e,et,se,ge,M);e._transport=Be,De.send("Ready",null)})}).catch(e._capability.reject),e}class Ap{static#e=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${Ap.#e++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let Cp=class{#e=Promise.withResolvers();#t=[];#r=[];#n=[];#o=[];constructor(e,t,n=!1,r=null){this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=r}addRangeListener(e){this.#o.push(e)}addProgressListener(e){this.#n.push(e)}addProgressiveReadListener(e){this.#r.push(e)}addProgressiveDoneListener(e){this.#t.push(e)}onDataRange(e,t){for(const n of this.#o)n(e,t)}onDataProgress(e,t){this.#e.promise.then(()=>{for(const n of this.#n)n(e,t)})}onDataProgressiveRead(e){this.#e.promise.then(()=>{for(const t of this.#r)t(e)})}onDataProgressiveDone(){this.#e.promise.then(()=>{for(const e of this.#t)e()})}transportReady(){this.#e.resolve()}requestDataRange(e,t){$e("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class DD{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Re(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class OD{#e=!1;constructor(e,t,n,r=!1){this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=r?new w0:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new eS,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:o=!1}={}){return new Sa({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:o})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Re(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,canvas:t=e.canvas,viewport:n,intent:r="display",annotationMode:o=sr.ENABLE,transform:l=null,background:c=null,optionalContentConfigPromise:u=null,annotationCanvasMap:h=null,pageColors:f=null,printAnnotationStorage:p=null,isEditing:y=!1,recordOperations:x=!1,operationsFilter:_=null}){this._stats?.time("Overall");const b=this._transport.getRenderingIntent(r,o,p,y),{renderingIntent:w,cacheKey:E}=b;this.#e=!1,u||=this._transport.getOptionalContentConfig(w);let A=this._intentStates.get(E);A||(A=Object.create(null),this._intentStates.set(E,A)),A.streamReaderCancelTimeout&&(clearTimeout(A.streamReaderCancelTimeout),A.streamReaderCancelTimeout=null);const C=!!(w&dn.PRINT);A.displayReadyCapability||(A.displayReadyCapability=Promise.withResolvers(),A.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(b));const k=!!(this._pdfBug&&globalThis.StepperManager?.enabled),N=!this.recordedBBoxes&&(x||k),R=z=>{if(A.renderTasks.delete(D),N){const q=D.gfx?.dependencyTracker.take();q&&(D.stepper&&D.stepper.setOperatorBBoxes(q,D.gfx.dependencyTracker.takeDebugMetadata()),x&&(this.recordedBBoxes=q))}C&&(this.#e=!0),this.#t(),z?(D.capability.reject(z),this._abortOperatorList({intentState:A,reason:z instanceof Error?z:new Error(z)})):D.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},D=new Si({callback:R,params:{canvas:t,canvasContext:e,dependencyTracker:N?new QN(t,A.operatorList.length,k):null,viewport:n,transform:l,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:A.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!C,pdfBug:this._pdfBug,pageColors:f,enableHWA:this._transport.enableHWA,operationsFilter:_});(A.renderTasks||=new Set).add(D);const j=D.task;return Promise.all([A.displayReadyCapability.promise,u]).then(([z,q])=>{if(this.destroyed){R();return}if(this._stats?.time("Rendering"),!(q.renderingIntent&w))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");D.initializeGraphics({transparency:z,optionalContentConfig:q}),D.operatorListChanged()}).catch(R),j}getOperatorList({intent:e="display",annotationMode:t=sr.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){function o(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(u))}const l=this._transport.getRenderingIntent(e,t,n,r,!0);let c=this._intentStates.get(l.cacheKey);c||(c=Object.create(null),this._intentStates.set(l.cacheKey,c));let u;return c.opListReadCapability||(u=Object.create(null),u.operatorListChanged=o,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||=new Set).add(u),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>la.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,r){function o(){l.read().then(function({value:u,done:h}){if(h){n(c);return}c.lang??=u.lang,Object.assign(c.styles,u.styles),c.items.push(...u.items),o()},r)}const l=t.getReader(),c={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),this.#e=!1,Promise.all(e)}cleanup(e=!1){this.#e=!0;const t=this.#t();return e&&t&&(this._stats&&=new w0),t}#t(){if(!this.#e||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}_startRenderPage(e,t){const n=this._intentStates.get(t);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let n=0,r=e.length;n<r;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&this.#t()}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:r}){const{map:o,transfer:l}=n,u=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:o,modifiedIds:r},l).getReader(),h=this._intentStates.get(t);h.streamReader=u;const f=()=>{u.read().then(({value:p,done:y})=>{if(y){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(p,h),f())},p=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const y of h.renderTasks)y.operatorListChanged();this.#t()}if(h.displayReadyCapability)h.displayReadyCapability.reject(p);else if(h.opListReadCapability)h.opListReadCapability.reject(p);else throw p}})};f()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof Au){let r=ND;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new Ar(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,o]of this._intentStates)if(o===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}var Jr,jn,Er,Cs,lu,Ts,ks,$t,Xc,tS,nS,Ko,Li,Kc;const Ze=class Ze{constructor({name:e=null,port:t=null,verbosity:n=xN()}={}){Yn(this,$t);Yn(this,Jr,Promise.withResolvers());Yn(this,jn,null);Yn(this,Er,null);Yn(this,Cs,null);if(this.name=e,this.destroyed=!1,this.verbosity=n,t){if(Je(Ze,ks).has(t))throw new Error("Cannot use more than one PDFWorker per port.");Je(Ze,ks).set(t,this),Xn(this,$t,tS).call(this,t)}else Xn(this,$t,nS).call(this)}get promise(){return Je(this,Jr).promise}get port(){return Je(this,Er)}get messageHandler(){return Je(this,jn)}destroy(){this.destroyed=!0,Je(this,Cs)?.terminate(),Zt(this,Cs,null),Je(Ze,ks).delete(Je(this,Er)),Zt(this,Er,null),Je(this,jn)?.destroy(),Zt(this,jn,null)}static create(e){const t=Je(this,ks).get(e?.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Ze(e)}static get workerSrc(){if(ns.workerSrc)return ns.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Re(this,"_setupFakeWorkerGlobal",(async()=>Je(this,Li,Kc)?Je(this,Li,Kc):(await import(this.workerSrc)).WorkerMessageHandler)())}};Jr=new WeakMap,jn=new WeakMap,Er=new WeakMap,Cs=new WeakMap,lu=new WeakMap,Ts=new WeakMap,ks=new WeakMap,$t=new WeakSet,Xc=function(){Je(this,Jr).resolve(),Je(this,jn).send("configure",{verbosity:this.verbosity})},tS=function(e){Zt(this,Er,e),Zt(this,jn,new Xo("main","worker",e)),Je(this,jn).on("ready",()=>{}),Xn(this,$t,Xc).call(this)},nS=function(){if(Je(Ze,Ts)||Je(Ze,Li,Kc)){Xn(this,$t,Ko).call(this);return}let{workerSrc:e}=Ze;try{Ze._isSameOrigin(window.location,e)||(e=Ze._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new Xo("main","worker",t),r=()=>{o.abort(),n.destroy(),t.terminate(),this.destroyed?Je(this,Jr).reject(new Error("Worker was destroyed")):Xn(this,$t,Ko).call(this)},o=new AbortController;t.addEventListener("error",()=>{Je(this,Cs)||r()},{signal:o.signal}),n.on("test",c=>{if(o.abort(),this.destroyed||!c){r();return}Zt(this,jn,n),Zt(this,Er,t),Zt(this,Cs,t),Xn(this,$t,Xc).call(this)}),n.on("ready",c=>{if(o.abort(),this.destroyed){r();return}try{l()}catch{Xn(this,$t,Ko).call(this)}});const l=()=>{const c=new Uint8Array;n.send("test",c,[c.buffer])};l();return}catch{Eu("The worker has been disabled.")}Xn(this,$t,Ko).call(this)},Ko=function(){Je(Ze,Ts)||(Ce("Setting up fake worker."),Zt(Ze,Ts,!0)),Ze._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){Je(this,Jr).reject(new Error("Worker was destroyed"));return}const t=new HN;Zt(this,Er,t);const n=`fake${by(Ze,lu)._++}`,r=new Xo(n+"_worker",n,t);e.setup(r,t),Zt(this,jn,new Xo(n,n+"_worker",t)),Xn(this,$t,Xc).call(this)}).catch(e=>{Je(this,Jr).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Li=new WeakSet,Kc=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Yn(Ze,Li),Yn(Ze,lu,0),Yn(Ze,Ts,!1),Yn(Ze,ks,new WeakMap),Ht&&(Zt(Ze,Ts,!0),ns.workerSrc||="./pdf.worker.mjs"),Ze._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(!n?.origin||n.origin==="null")return!1;const r=new URL(t,n);return n.origin===r.origin},Ze._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},Ze.fromPort=e=>{if(RN("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Ze.create(e)};let Bi=Ze;class MD{#e=new Map;#t=new Map;#r=new Map;#n=new Map;#o=null;constructor(e,t,n,r,o,l){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new eS,this.fontLoader=new FN({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=l,this.setupMessageHandler()}#s(e,t=null){const n=this.#e.get(e);if(n)return n;const r=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,r),r}get annotationStorage(){return Re(this,"annotationStorage",new wp)}getRenderingIntent(e,t=sr.ENABLE,n=null,r=!1,o=!1){let l=dn.DISPLAY,c=Df;switch(e){case"any":l=dn.ANY;break;case"display":break;case"print":l=dn.PRINT;break;default:Ce(`getRenderingIntent - invalid intent: ${e}`)}const u=l&dn.PRINT&&n instanceof zx?n:this.annotationStorage;switch(t){case sr.DISABLE:l+=dn.ANNOTATIONS_DISABLE;break;case sr.ENABLE:break;case sr.ENABLE_FORMS:l+=dn.ANNOTATIONS_FORMS;break;case sr.ENABLE_STORAGE:l+=dn.ANNOTATIONS_STORAGE,c=u.serializable;break;default:Ce(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(l+=dn.IS_EDITING),o&&(l+=dn.OPLIST);const{ids:h,hash:f}=u.modifiedIds,p=[l,c.hash,f];return{renderingIntent:l,cacheKey:p.join("_"),annotationStorageSerializable:c,modifiedIds:h}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#o?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const n of this.#t.values())e.push(n._destroy());this.#t.clear(),this.#r.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),ca.cleanup(),this._networkStream?.cancelAllRequests(new Ar("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,r)=>{Ie(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},r.onPull=()=>{this._fullReader.read().then(function({value:o,done:l}){if(l){r.close();return}Ie(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{this._fullReader.cancel(o),r.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("ReaderHeadersReady",async n=>{await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:o,contentLength:l}=this._fullReader;return(!r||!o)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=c=>{t.onProgress?.({loaded:c.loaded,total:c.total})}),{isStreamingSupported:r,isRangeSupported:o,contentLength:l}}),e.on("GetRangeReader",(n,r)=>{Ie(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(n.begin,n.end);if(!o){r.close();return}r.onPull=()=>{o.read().then(function({value:l,done:c}){if(c){r.close();return}Ie(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{r.error(l)})},r.onCancel=l=>{o.cancel(l),r.ready.catch(c=>{if(!this.destroyed)throw c})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new DD(n,this))}),e.on("DocException",n=>{t._capability.reject(tn(n))}),e.on("PasswordRequest",n=>{this.#o=Promise.withResolvers();try{if(!t.onPassword)throw tn(n);const r=o=>{o instanceof Error?this.#o.reject(o):this.#o.resolve({password:o})};t.onPassword(r,n.code)}catch(r){this.#o.reject(r)}return this.#o.promise}),e.on("DataLoaded",n=>{t.onProgress?.({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;this.#t.get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,r,o])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":if("error"in o){const f=o.error;Ce(`Error during font loading: ${f}`),this.commonObjs.resolve(n,f);break}const l=new He(o),c=this._params.pdfBug&&globalThis.FontInspector?.enabled?(f,p)=>globalThis.FontInspector.fontAdded(f,p):null,u=new jN(l,c,o.extra,o.charProcOperatorList);this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!u.fontExtraProperties&&u.data&&u.clearData(),this.commonObjs.resolve(n,u)});break;case"CopyLocalImage":const{imageRef:h}=o;Ie(h,"The imageRef must be defined.");for(const f of this.#t.values())for(const[,p]of f.objs)if(p?.ref===h)return p.dataLen?(this.commonObjs.resolve(n,structuredClone(p)),p.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,o);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([n,r,o,l])=>{if(this.destroyed)return;const c=this.#t.get(r);if(!c.objs.has(n)){if(c._intentStates.size===0){l?.bitmap?.close();return}switch(o){case"Image":case"Pattern":c.objs.resolve(n,l);break;default:throw new Error(`Got unknown object type ${o}`)}}}),e.on("DocProgress",n=>{this.destroyed||t.onProgress?.({loaded:n.loaded,total:n.total})}),e.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[n.type];if(!r)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Ce("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=this.#r.get(t);if(n)return n;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&this.#n.set(o.refStr,e);const l=new OD(t,o,this,this._params.pdfBug);return this.#t.set(t,l),l});return this.#r.set(t,r),r}getPageIndex(e){return Of(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#s("GetOptionalContentConfig").then(t=>new hD(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#e.get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(r=>({info:r[0],metadata:r[1]?new uD(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#t.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),ca.cleanup()}}cachedPageNumber(e){if(!Of(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#n.get(t)??null}}class LD{#e=null;onContinue=null;onError=null;constructor(e){this.#e=e}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}}class Si{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:n,commonObjs:r,annotationCanvasMap:o,operatorList:l,pageIndex:c,canvasFactory:u,filterFactory:h,useRequestAnimationFrame:f=!1,pdfBug:p=!1,pageColors:y=null,enableHWA:x=!1,operationsFilter:_=null}){this.callback=e,this.params=t,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=c,this.canvasFactory=u,this.filterFactory=h,this._pdfBug=p,this.pageColors=y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new LD(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=x,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=_}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(Si.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Si.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:r,background:o,dependencyTracker:l}=this.params,c=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Ri(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:r,viewport:n,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),Si.#t.delete(this._canvas),e||=new Au(`Rendering cancelled, page ${this._pageIndex+1}`,t),this.callback(e),this.task.onError?.(e)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Si.#t.delete(this._canvas),this.callback())))}}const rS="5.4.296",sS="f56dc8601";class hn{#e=null;#t=null;#r;#n=null;#o=!1;#s=!1;#i=null;#a;#c=null;#l=null;static#h=null;static get _keyboardManager(){return Re(this,"_keyboardManager",new Ea([[["Escape","mac+Escape"],hn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],hn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],hn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],hn.prototype._moveToPrevious],[["Home","mac+Home"],hn.prototype._moveToBeginning],[["End","mac+End"],hn.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#s=!1,this.#i=e):this.#s=!0,this.#l=e?._uiManager||t,this.#a=this.#l._eventBus,this.#r=e?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",hn.#h||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",this.#i&&(e.ariaControls=`${this.#i.id}_colorpicker_dropdown`);const t=this.#l._signal;e.addEventListener("click",this.#p.bind(this),{signal:t}),e.addEventListener("keydown",this.#g.bind(this),{signal:t});const n=this.#t=document.createElement("span");return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=this.#r,e.append(n),e}renderMainDropdown(){const e=this.#n=this.#d();return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}#d(){const e=document.createElement("div"),t=this.#l._signal;e.addEventListener("contextmenu",pn,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#i&&(e.id=`${this.#i.id}_colorpicker_dropdown`);for(const[n,r]of this.#l.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",r),o.title=n,o.setAttribute("data-l10n-id",hn.#h[n]);const l=document.createElement("span");o.append(l),l.className="swatch",l.style.backgroundColor=r,o.ariaSelected=r===this.#r,o.addEventListener("click",this.#f.bind(this,r),{signal:t}),e.append(o)}return e.addEventListener("keydown",this.#g.bind(this),{signal:t}),e}#f(e,t){t.stopPropagation(),this.#a.dispatch("switchannotationeditorparams",{source:this,type:Me.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#p(e);return}const t=e.target.getAttribute("data-color");t&&this.#f(t,e)}_moveToNext(e){if(!this.#m){this.#p(e);return}if(e.target===this.#e){this.#n.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#n?.firstChild||e.target===this.#e){this.#m&&this._hideDropdownFromKeyboard();return}this.#m||this.#p(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#m){this.#p(e);return}this.#n.firstChild?.focus()}_moveToEnd(e){if(!this.#m){this.#p(e);return}this.#n.lastChild?.focus()}#g(e){hn._keyboardManager.exec(this,e)}#p(e){if(this.#m){this.hideDropdown();return}if(this.#o=e.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#e.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const t=this.#n=this.#d();this.#e.append(t)}#u(e){this.#n?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#e.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#m(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#m){this.#i?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#o})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#n)return;const t=this.#l.highlightColors.values();for(const n of this.#n.children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#n?.remove(),this.#n=null}}class ua{#e=null;#t=null;#r=null;static#n=null;constructor(e){this.#t=e,this.#r=e._uiManager,ua.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#e)return this.#e;const{editorType:e,colorType:t,colorValue:n}=this.#t,r=this.#e=document.createElement("input");return r.type="color",r.value=n||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",ua.#n[e]),r.addEventListener("input",()=>{this.#r.updateParams(t,r.value)},{signal:this.#r._signal}),r}update(e){this.#e&&(this.#e.value=e)}destroy(){this.#e?.remove(),this.#e=null}hideDropdown(){}}function H0(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function Wo(s){return Math.max(0,Math.min(255,255*s))}class W0{static CMYK_G([e,t,n,r]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Wo(e),[e,e,e]}static G_HTML([e]){const t=H0(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(Wo)}static RGB_HTML(e){return`#${e.map(H0).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,n+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,n,r]){return[Wo(1-Math.min(1,e+r)),Wo(1-Math.min(1,n+r)),Wo(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const r=1-e,o=1-t,l=1-n,c=Math.min(r,o,l);return["CMYK",r,o,l,c]}}class ID{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){$e("Abstract method `_createSVG` called.")}}class da extends ID{_createSVG(e){return document.createElementNS(wr,e)}}const FD=9,Os=new WeakSet,jD=new Date().getTimezoneOffset()*60*1e3;class $0{static create(e){switch(e.data.annotationType){case dt.LINK:return new Tp(e);case dt.TEXT:return new UD(e);case dt.WIDGET:switch(e.data.fieldType){case"Tx":return new zD(e);case"Btn":return e.data.radioButton?new iS(e):e.data.checkBox?new WD(e):new $D(e);case"Ch":return new VD(e);case"Sig":return new HD(e)}return new js(e);case dt.POPUP:return new If(e);case dt.FREETEXT:return new oS(e);case dt.LINE:return new GD(e);case dt.SQUARE:return new YD(e);case dt.CIRCLE:return new XD(e);case dt.POLYLINE:return new aS(e);case dt.CARET:return new QD(e);case dt.INK:return new kp(e);case dt.POLYGON:return new KD(e);case dt.HIGHLIGHT:return new lS(e);case dt.UNDERLINE:return new JD(e);case dt.SQUIGGLY:return new ZD(e);case dt.STRIKEOUT:return new eO(e);case dt.STAMP:return new cS(e);case dt.FILEATTACHMENT:return new tO(e);default:return new ot(e)}}}class ot{#e=null;#t=!1;#r=null;constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e?.str||t?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return ot._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:e}=this,t=this.annotationStorage?.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const e=this.annotationStorage?.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:n,rect:r}=this.data;let o=-1/0,l=-1/0;if(t?.length>=8){for(let c=0;c<t.length;c+=8)t[c+1]>l?(l=t[c+1],o=t[c+2]):t[c+1]===l&&(o=Math.max(o,t[c+2]));return[o,l]}if(n?.length>=1){for(const c of n)for(let u=0,h=c.length;u<h;u+=2)c[u+1]>l?(l=c[u+1],o=c[u]):c[u+1]===l&&(o=Math.max(o,c[u]));if(o!==1/0)return[o,l]}return r?[r[2],r[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:r,pageX:o,pageY:l}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-o)/n,e[1]=100*(e[1]-l)/r,e}get commentText(){const{data:e}=this;return this.annotationStorage.getRawValue(`${oa}${e.id}`)?.popup?.contents||e.contentsObj?.str||""}set commentText(e){const{data:t}=this,n={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:n})||this.annotationStorage.setValue(`${oa}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){(this.#r?.popup||this.popup)?.remove(),this.#r=this.popup=null}updateEdited(e){if(!this.container)return;e.rect&&(this.#e||={rect:this.data.rect.slice(0)});const{rect:t,popup:n}=e;t&&this.#n(t);let r=this.#r?.popup||this.popup;!r&&n?.text&&(this._createPopup(n),r=this.#r.popup),r&&(r.updateEdited(e),n?.deleted&&(r.remove(),this.#r=null,this.popup=null))}resetEdited(){this.#e&&(this.#n(this.#e.rect),this.#r?.popup.resetEdited(),this.#e=null)}#n(e){const{container:{style:t},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:l,pageX:c,pageY:u}}}}=this;n?.splice(0,4,...e),t.left=`${100*(e[0]-c)/o}%`,t.top=`${100*(l-e[3]+u)/l}%`,r===0?(t.width=`${100*(e[2]-e[0])/o}%`,t.height=`${100*(e[3]-e[1])/l}%`):this.setRotation(r)}_createContainer(e){const{data:t,parent:{page:n,viewport:r}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",t.id),!(this instanceof js)&&!(this instanceof Tp)&&(o.tabIndex=0);const{style:l}=o;if(l.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(o.title=t.alternativeText),t.noRotate&&o.classList.add("norotate"),!t.rect||this instanceof If){const{rotation:b}=t;return!t.hasOwnCanvas&&b!==0&&this.setRotation(b,o),o}const{width:c,height:u}=this;if(!e&&t.borderStyle.width>0){l.borderWidth=`${t.borderStyle.width}px`;const b=t.borderStyle.horizontalCornerRadius,w=t.borderStyle.verticalCornerRadius;if(b>0||w>0){const A=`calc(${b}px * var(--total-scale-factor)) / calc(${w}px * var(--total-scale-factor))`;l.borderRadius=A}else if(this instanceof iS){const A=`calc(${c}px * var(--total-scale-factor)) / calc(${u}px * var(--total-scale-factor))`;l.borderRadius=A}switch(t.borderStyle.style){case bi.SOLID:l.borderStyle="solid";break;case bi.DASHED:l.borderStyle="dashed";break;case bi.BEVELED:Ce("Unimplemented border style: beveled");break;case bi.INSET:Ce("Unimplemented border style: inset");break;case bi.UNDERLINE:l.borderBottomStyle="solid";break}const E=t.borderColor||null;E?(this.#t=!0,l.borderColor=fe.makeHexColor(E[0]|0,E[1]|0,E[2]|0)):l.borderWidth=0}const h=fe.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:f,pageHeight:p,pageX:y,pageY:x}=r.rawDims;l.left=`${100*(h[0]-y)/f}%`,l.top=`${100*(h[1]-x)/p}%`;const{rotation:_}=t;return t.hasOwnCanvas||_===0?(l.width=`${100*c/f}%`,l.height=`${100*u/p}%`):this.setRotation(_,o),o}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims;let{width:o,height:l}=this;e%180!==0&&([o,l]=[l,o]),t.style.width=`${100*o/n}%`,t.style.height=`${100*l/r}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,r)=>{const o=r.detail[t],l=o[0],c=o.slice(1);r.target.style[n]=W0[`${l}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[n]:W0[`${l}_rgb`](c)})};return Re(this,"_commonActions",{display:t=>{const{display:n}=t.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const r of Object.keys(t.detail))(e[r]||n[r])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[r,o]of Object.entries(t)){const l=n[r];if(l){const c={detail:{[r]:o},target:e};l(c),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,r,o]=this.data.rect.map(b=>Math.fround(b));if(e.length===8){const[b,w,E,A]=e.subarray(2,6);if(r===b&&o===w&&t===E&&n===A)return}const{style:l}=this.container;let c;if(this.#t){const{borderColor:b,borderWidth:w}=l;l.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${b}" stroke-width="${w}">`],this.container.classList.add("hasBorder")}const u=r-t,h=o-n,{svgFactory:f}=this,p=f.createElement("svg");p.classList.add("quadrilateralsContainer"),p.setAttribute("width",0),p.setAttribute("height",0),p.role="none";const y=f.createElement("defs");p.append(y);const x=f.createElement("clipPath"),_=`clippath_${this.data.id}`;x.setAttribute("id",_),x.setAttribute("clipPathUnits","objectBoundingBox"),y.append(x);for(let b=2,w=e.length;b<w;b+=8){const E=e[b],A=e[b+1],C=e[b+2],k=e[b+3],N=f.createElement("rect"),R=(C-t)/u,D=(o-A)/h,j=(E-C)/u,z=(A-k)/h;N.setAttribute("x",R),N.setAttribute("y",D),N.setAttribute("width",j),N.setAttribute("height",z),x.append(N),c?.push(`<rect vector-effect="non-scaling-stroke" x="${R}" y="${D}" width="${j}" height="${z}"/>`)}this.#t&&(c.push("</g></svg>')"),l.backgroundImage=c.join("")),this.container.append(p),this.container.style.clipPath=`url(#${_})`}_createPopup(e=null){const{data:t}=this;let n,r;e?(n={str:e.text},r=e.date):(n=t.contentsObj,r=t.modificationDate);const o=this.#r=new If({data:{color:t.color,titleObj:t.titleObj,modificationDate:r,contentsObj:n,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent._commentManager||this.parent.div.append(o.render())}get hasPopupElement(){return!!(this.#r||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#r}render(){$e("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:o,id:l,exportValues:c}of r){if(o===-1||l===t)continue;const u=typeof c=="string"?c:null,h=document.querySelector(`[data-element-id="${l}"]`);if(h&&!Os.has(h)){Ce(`_getElementsByName - element not allowed: ${l}`);continue}n.push({id:l,exportValue:u,domElement:h})}return n}for(const r of document.getElementsByName(e)){const{exportValue:o}=r,l=r.getAttribute("data-element-id");l!==t&&Os.has(r)&&n.push({id:l,exportValue:o,domElement:r})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class BD extends ot{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&(this._createPopup(e.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}class Tp extends ot{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let r=!1;return e.url?(t.addLinkAttributes(n,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(n,e.action,e.overlaidText),r=!0):e.attachment?(this.#t(n,e.attachment,e.overlaidText,e.attachmentDest),r=!0):e.setOCGState?(this.#r(n,e.setOCGState,e.overlaidText),r=!0):e.dest?(this._bindLink(n,e.dest,e.overlaidText),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),r=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(n,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(n),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t,n=""){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#e(),n&&(e.title=n)}_bindNamedAction(e,t,n=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),n&&(e.title=n),this.#e()}#t(e,t,n="",r=null){e.href=this.linkService.getAnchorUrl(""),t.description?e.title=t.description:n&&(e.title=n),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,r),!1),this.#e()}#r(e,t,n=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),n&&(e.title=n),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(t.actions)){const o=n.get(r);o&&(e[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:r}}),!1))}t.overlaidText&&(e.title=t.overlaidText),e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){Ce('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(e.onclick=()=>!1);return}e.onclick=()=>{n?.();const{fields:r,refs:o,include:l}=t,c=[];if(r.length!==0||o.length!==0){const f=new Set(o);for(const p of r){const y=this._fieldObjects[p]||[];for(const{id:x}of y)f.add(x)}for(const p of Object.values(this._fieldObjects))for(const y of p)f.has(y.id)===l&&c.push(y)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const u=this.annotationStorage,h=[];for(const f of c){const{id:p}=f;switch(h.push(p),f.type){case"text":{const x=f.defaultValue||"";u.setValue(p,{value:x});break}case"checkbox":case"radiobutton":{const x=f.defaultValue===f.exportValues;u.setValue(p,{value:x});break}case"combobox":case"listbox":{const x=f.defaultValue||"";u.setValue(p,{value:x});break}default:continue}const y=document.querySelector(`[data-element-id="${p}"]`);if(y){if(!Os.has(y)){Ce(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}}),!1}}}class UD extends ot{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class js extends ot{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Tt.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,r,o){n.includes("mouse")?e.addEventListener(n,l=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):e.addEventListener(n,l=>{if(n==="blur"){if(!t.focused||!l.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(l)}})})}_setEventListeners(e,t,n,r){for(const[o,l]of n)(l==="Action"||this.data.actions?.[l])&&((l==="Focus"||l==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,o,l,r),l==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):l==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":fe.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||FD,o=e.style;let l;const c=2,u=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-c),f=Math.round(h/(Qh*r))||1,p=h/f;l=Math.min(r,u(p/Qh))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-c);l=Math.min(r,u(h/Qh))}o.fontSize=`calc(${l}px * var(--total-scale-factor))`,o.color=fe.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(o.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class zD extends js{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,r){const o=this.annotationStorage;for(const l of this._getElementsByName(e.name,e.id))l.domElement&&(l.domElement[t]=n),o.setValue(l.id,{[r]:n})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const r=e.getValue(t,{value:this.data.fieldValue});let o=r.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let c=r.formattedValue||this.data.textContent?.join(`
`)||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const u={userValue:o,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=c??o,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",c??o),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Os.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:h,datetimeType:f,timeStep:p}=this.data,y=!!f&&this.enableScripting;h&&(n.title=h),this._setRequired(n,this.data.required),l&&(n.maxLength=l),n.addEventListener("input",_=>{e.setValue(t,{value:_.target.value}),this.setPropertyOnSiblings(n,"value",_.target.value,"value"),u.formattedValue=null}),n.addEventListener("resetform",_=>{const b=this.data.defaultFieldValue??"";n.value=u.userValue=b,u.formattedValue=null});let x=_=>{const{formattedValue:b}=u;b!=null&&(_.target.value=b),_.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",b=>{if(u.focused)return;const{target:w}=b;if(y&&(w.type=f,p&&(w.step=p)),u.userValue){const E=u.userValue;if(y)if(f==="time"){const A=new Date(E),C=[A.getHours(),A.getMinutes(),A.getSeconds()];w.value=C.map(k=>k.toString().padStart(2,"0")).join(":")}else w.value=new Date(E-jD).toISOString().split(f==="date"?"T":".",1)[0];else w.value=E}u.lastCommittedValue=w.value,u.commitKey=1,this.data.actions?.Focus||(u.focused=!0)}),n.addEventListener("updatefromsandbox",b=>{this.showElementAndHideCanvas(b.target);const w={value(E){u.userValue=E.detail.value??"",y||e.setValue(t,{value:u.userValue.toString()}),E.target.value=u.userValue},formattedValue(E){const{formattedValue:A}=E.detail;u.formattedValue=A,A!=null&&E.target!==document.activeElement&&(E.target.value=A);const C={formattedValue:A};y&&(C.value=A),e.setValue(t,C)},selRange(E){E.target.setSelectionRange(...E.detail.selRange)},charLimit:E=>{const{charLimit:A}=E.detail,{target:C}=E;if(A===0){C.removeAttribute("maxLength");return}C.setAttribute("maxLength",A);let k=u.userValue;!k||k.length<=A||(k=k.slice(0,A),C.value=u.userValue=k,e.setValue(t,{value:k}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:k,willCommit:!0,commitKey:1,selStart:C.selectionStart,selEnd:C.selectionEnd}}))}};this._dispatchEventFromSandbox(w,b)}),n.addEventListener("keydown",b=>{u.commitKey=1;let w=-1;if(b.key==="Escape"?w=0:b.key==="Enter"&&!this.data.multiLine?w=2:b.key==="Tab"&&(u.commitKey=3),w===-1)return;const{value:E}=b.target;u.lastCommittedValue!==E&&(u.lastCommittedValue=E,u.userValue=E,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,willCommit:!0,commitKey:w,selStart:b.target.selectionStart,selEnd:b.target.selectionEnd}}))});const _=x;x=null,n.addEventListener("blur",b=>{if(!u.focused||!b.relatedTarget)return;this.data.actions?.Blur||(u.focused=!1);const{target:w}=b;let{value:E}=w;if(y){if(E&&f==="time"){const A=E.split(":").map(C=>parseInt(C,10));E=new Date(2e3,0,1,A[0],A[1],A[2]||0).valueOf(),w.step=""}else E.includes("T")||(E=`${E}T00:00`),E=new Date(E).valueOf();w.type="text"}u.userValue=E,u.lastCommittedValue!==E&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,willCommit:!0,commitKey:u.commitKey,selStart:b.target.selectionStart,selEnd:b.target.selectionEnd}}),_(b)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",b=>{u.lastCommittedValue=null;const{data:w,target:E}=b,{value:A,selectionStart:C,selectionEnd:k}=E;let N=C,R=k;switch(b.inputType){case"deleteWordBackward":{const D=A.substring(0,C).match(/\w*[^\w]*$/);D&&(N-=D[0].length);break}case"deleteWordForward":{const D=A.substring(C).match(/^[^\w]*\w*/);D&&(R+=D[0].length);break}case"deleteContentBackward":C===k&&(N-=1);break;case"deleteContentForward":C===k&&(R+=1);break}b.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,change:w||"",willCommit:!1,selStart:N,selEnd:R}})}),this._setEventListeners(n,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],b=>b.target.value)}if(x&&n.addEventListener("blur",x),this.data.comb){const b=(this.data.rect[2]-this.data.rect[0])/l;n.classList.add("comb"),n.style.letterSpacing=`calc(${b}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class HD extends js{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class WD extends js{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return Os.add(o),o.setAttribute("data-element-id",n),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=t.fieldName,r&&o.setAttribute("checked",!0),o.setAttribute("exportValue",t.exportValue),o.tabIndex=0,o.addEventListener("change",l=>{const{name:c,checked:u}=l.target;for(const h of this._getElementsByName(c,n)){const f=u&&h.exportValue===t.exportValue;h.domElement&&(h.domElement.checked=f),e.setValue(h.id,{value:f})}e.setValue(n,{value:u})}),o.addEventListener("resetform",l=>{const c=t.defaultFieldValue||"Off";l.target.checked=c===t.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",l=>{const c={value(u){u.target.checked=u.detail.value!=="Off",e.setValue(n,{value:u.target.checked})}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class iS extends js{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(n,{value:r})),r)for(const l of this._getElementsByName(t.fieldName,n))e.setValue(l.id,{value:!1});const o=document.createElement("input");if(Os.add(o),o.setAttribute("data-element-id",n),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=t.fieldName,r&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",l=>{const{name:c,checked:u}=l.target;for(const h of this._getElementsByName(c,n))e.setValue(h.id,{value:!1});e.setValue(n,{value:u})}),o.addEventListener("resetform",l=>{const c=t.defaultFieldValue;l.target.checked=c!=null&&c===t.buttonValue}),this.enableScripting&&this.hasJSActions){const l=t.buttonValue;o.addEventListener("updatefromsandbox",c=>{const u={value:h=>{const f=l===h.detail.value;for(const p of this._getElementsByName(h.target.name)){const y=f&&p.id===n;p.domElement&&(p.domElement.checked=y),e.setValue(p.id,{value:y})}}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class $D extends Tp{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class VD extends js{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");Os.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",f=>{const p=this.data.defaultFieldValue;for(const y of r.options)y.selected=y.value===p});for(const f of this.data.options){const p=document.createElement("option");p.textContent=f.displayValue,p.value=f.exportValue,n.value.includes(f.exportValue)&&(p.setAttribute("selected",!0),o=!1),r.append(p)}let l=null;if(o){const f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),r.prepend(f),l=()=>{f.remove(),r.removeEventListener("input",l),l=null},r.addEventListener("input",l)}const c=f=>{const p=f?"value":"textContent",{options:y,multiple:x}=r;return x?Array.prototype.filter.call(y,_=>_.selected).map(_=>_[p]):y.selectedIndex===-1?null:y[y.selectedIndex][p]};let u=c(!1);const h=f=>{const p=f.target.options;return Array.prototype.map.call(p,y=>({displayValue:y.textContent,exportValue:y.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",f=>{const p={value(y){l?.();const x=y.detail.value,_=new Set(Array.isArray(x)?x:[x]);for(const b of r.options)b.selected=_.has(b.value);e.setValue(t,{value:c(!0)}),u=c(!1)},multipleSelection(y){r.multiple=!0},remove(y){const x=r.options,_=y.detail.remove;x[_].selected=!1,r.remove(_),x.length>0&&Array.prototype.findIndex.call(x,w=>w.selected)===-1&&(x[0].selected=!0),e.setValue(t,{value:c(!0),items:h(y)}),u=c(!1)},clear(y){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),u=c(!1)},insert(y){const{index:x,displayValue:_,exportValue:b}=y.detail.insert,w=r.children[x],E=document.createElement("option");E.textContent=_,E.value=b,w?w.before(E):r.append(E),e.setValue(t,{value:c(!0),items:h(y)}),u=c(!1)},items(y){const{items:x}=y.detail;for(;r.length!==0;)r.remove(0);for(const _ of x){const{displayValue:b,exportValue:w}=_,E=document.createElement("option");E.textContent=b,E.value=w,r.append(E)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:c(!0),items:h(y)}),u=c(!1)},indices(y){const x=new Set(y.detail.indices);for(const _ of y.target.options)_.selected=x.has(_.index);e.setValue(t,{value:c(!0)}),u=c(!1)},editable(y){y.target.disabled=!y.detail.editable}};this._dispatchEventFromSandbox(p,f)}),r.addEventListener("input",f=>{const p=c(!0),y=c(!1);e.setValue(t,{value:p}),f.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:u,change:y,changeEx:p,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):r.addEventListener("input",function(f){e.setValue(t,{value:c(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class If extends ot{constructor(e){const{data:t,elements:n,parent:r}=e,o=!!r._commentManager;if(super(e,{isRenderable:!o&&ot._hasPopupData(t)}),this.elements=n,o&&ot._hasPopupData(t)){const l=this.popup=this.#e();for(const c of n)c.popup=l}else this.popup=null}#e(){return new qD({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=this.#e(),n=[];for(const r of this.elements)r.popup=t,r.container.ariaHasPopup="dialog",n.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(r=>`${mp}${r}`).join(",")),this.container}}class qD{#e=null;#t=this.#$.bind(this);#r=this.#B.bind(this);#n=this.#O.bind(this);#o=this.#x.bind(this);#s=null;#i=null;#a=null;#c=null;#l=null;#h=null;#d=null;#f=!1;#g=null;#p=null;#u=null;#m=null;#y=null;#b=null;#v=null;#A=null;#_=null;#w=null;#T=!1;#S=null;#E=null;constructor({container:e,color:t,elements:n,titleObj:r,modificationDate:o,contentsObj:l,richText:c,parent:u,rect:h,parentRect:f,open:p,commentManager:y=null}){this.#i=e,this.#_=r,this.#a=l,this.#A=c,this.#h=u,this.#s=t,this.#v=h,this.#d=f,this.#l=n,this.#e=y,this.#S=n[0],this.#c=iu.toDateObject(o),this.trigger=n.flatMap(x=>x.getElementsToTriggerPopup()),y?this.renderCommentButton():(this.#R(),this.#i.hidden=!0,p&&this.#x())}#R(){if(this.#p)return;this.#p=new AbortController;const{signal:e}=this.#p;for(const t of this.trigger)t.addEventListener("click",this.#o,{signal:e}),t.addEventListener("pointerenter",this.#n,{signal:e}),t.addEventListener("pointerleave",this.#r,{signal:e}),t.classList.add("popupTriggerArea");for(const t of this.#l)t.container?.addEventListener("keydown",this.#t,{signal:e})}#k(){const e=this.#l.find(t=>t.hasCommentButton);e&&(this.#y=e._normalizePoint(e.commentButtonPosition))}renderCommentButton(){if(this.#m||(this.#y||this.#k(),!this.#y))return;const{signal:e}=this.#p=new AbortController,t=!!this.#S.extraPopupElement,n=()=>{this.#e.toggleCommentPopup(this,!0,void 0,!t)},r=()=>{this.#e.toggleCommentPopup(this,!1,!0,!t)},o=()=>{this.#e.toggleCommentPopup(this,!1,!1)};if(t){this.#m=this.#S.container;for(const l of this.trigger)l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.addEventListener("keydown",this.#t,{signal:e}),l.addEventListener("click",n,{signal:e}),l.addEventListener("pointerenter",r,{signal:e}),l.addEventListener("pointerleave",o,{signal:e}),l.classList.add("popupTriggerArea")}else{const l=this.#m=document.createElement("button");l.className="annotationCommentButton";const c=this.#S.container;l.style.zIndex=c.style.zIndex+1,l.tabIndex=0,l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#F(),this.#P(),l.addEventListener("keydown",this.#t,{signal:e}),l.addEventListener("click",n,{signal:e}),l.addEventListener("pointerenter",r,{signal:e}),l.addEventListener("pointerleave",o,{signal:e}),c.after(l)}}#P(){if(this.#S.extraPopupElement&&!this.#S.editor)return;this.renderCommentButton();const[e,t]=this.#y,{style:n}=this.#m;n.left=`calc(${e}%)`,n.top=`calc(${t}% - var(--comment-button-dim))`}#F(){this.#S.extraPopupElement||(this.renderCommentButton(),this.#m.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:e,opacity:t}=this.#S.commentData;return e?this.#h._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{this.#m?.focus()},0)}getData(){const{richText:e,color:t,opacity:n,creationDate:r,modificationDate:o}=this.#S.commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:n,creationDate:r,modificationDate:o}}get elementBeforePopup(){return this.#m}get comment(){return this.#E||=this.#S.commentText,this.#E}set comment(e){e!==this.comment&&(this.#S.commentText=this.#E=e)}get parentBoundingClientRect(){return this.#S.layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){this.#m&&(this.#m.classList.toggle("selected",e),this.#m.ariaExpanded=t)}setSelectedCommentButton(e){this.#m.classList.toggle("selected",e)}get commentPopupPosition(){if(this.#b)return this.#b;const{x:e,y:t,height:n}=this.#m.getBoundingClientRect(),{x:r,y:o,width:l,height:c}=this.#S.layer.getBoundingClientRect();return[(e-r)/l,(t+n-o)/c]}set commentPopupPosition(e){this.#b=e}hasDefaultPopupPosition(){return this.#b===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#m.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,n]=this.#b||this.commentButtonPosition.map(h=>h/100),r=this.parentBoundingClientRect,{x:o,y:l,width:c,height:u}=r;this.#e.showDialog(null,this,o+t*c,l+n*u,{...e,parentDimensions:r})}render(){if(this.#g)return;const e=this.#g=document.createElement("div");if(e.className="popup",this.#s){const n=e.style.outlineColor=fe.makeHexColor(...this.#s);e.style.backgroundColor=`color-mix(in srgb, ${n} 30%, white)`}const t=document.createElement("span");if(t.className="header",this.#_?.str){const n=document.createElement("span");n.className="title",t.append(n),{dir:n.dir,str:n.textContent}=this.#_}if(e.append(t),this.#c){const n=document.createElement("time");n.className="popupDate",n.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),n.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),n.dateTime=this.#c.toISOString(),t.append(n)}yp({html:this.#D||this.#a.str,dir:this.#a?.dir,className:"popupContent"},e),this.#i.append(e)}get#D(){const e=this.#A,t=this.#a;return e?.str&&(!t?.str||t.str===e.str)&&this.#A.html||null}get#M(){return this.#D?.attributes?.style?.fontSize||0}get#j(){return this.#D?.attributes?.style?.color||null}#L(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:this.#j,fontSize:this.#M?`calc(${this.#M}px * var(--total-scale-factor))`:""}};for(const o of e.split(`
`))t.push({name:"span",value:o,attributes:r});return n}#$(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#f)&&this.#x()}updateEdited({rect:e,popup:t,deleted:n}){if(this.#e){n?(this.remove(),this.#E=null):t&&(t.deleted?this.remove():(this.#F(),this.#E=t.text)),e&&(this.#y=null,this.#k(),this.#P());return}if(n||t?.deleted){this.remove();return}this.#R(),this.#w||={contentsObj:this.#a,richText:this.#A},e&&(this.#u=null),t&&t.text&&(this.#A=this.#L(t.text),this.#c=iu.toDateObject(t.date),this.#a=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#w&&({contentsObj:this.#a,richText:this.#A}=this.#w,this.#w=null,this.#g?.remove(),this.#g=null,this.#u=null)}remove(){if(this.#p?.abort(),this.#p=null,this.#g?.remove(),this.#g=null,this.#T=!1,this.#f=!1,this.#m?.remove(),this.#m=null,this.trigger)for(const e of this.trigger)e.classList.remove("popupTriggerArea")}#C(){if(this.#u!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:r,pageY:o}}}=this.#h;let l=!!this.#d,c=l?this.#d:this.#v;for(const _ of this.#l)if(!c||fe.intersect(_.data.rect,c)!==null){c=_.data.rect,l=!0;break}const u=fe.normalizeRect([c[0],e[3]-c[1]+e[1],c[2],e[3]-c[3]+e[1]]),f=l?c[2]-c[0]+5:0,p=u[0]+f,y=u[1];this.#u=[100*(p-r)/t,100*(y-o)/n];const{style:x}=this.#i;x.left=`${this.#u[0]}%`,x.top=`${this.#u[1]}%`}#x(){if(this.#e){this.#e.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#O(),this.#i.addEventListener("click",this.#o),this.#i.addEventListener("keydown",this.#t)):(this.#B(),this.#i.removeEventListener("click",this.#o),this.#i.removeEventListener("keydown",this.#t))}#O(){this.#g||this.render(),this.isVisible?this.#f&&this.#i.classList.add("focused"):(this.#C(),this.#i.hidden=!1,this.#i.style.zIndex=parseInt(this.#i.style.zIndex)+1e3)}#B(){this.#i.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#i.hidden=!0,this.#i.style.zIndex=parseInt(this.#i.style.zIndex)-1e3)}forceHide(){this.#T=this.isVisible,this.#T&&(this.#i.hidden=!0)}maybeShow(){this.#e||(this.#R(),this.#T&&(this.#g||this.#O(),this.#T=!1,this.#i.hidden=!1))}get isVisible(){return this.#e?!1:this.#i.hidden===!1}}class oS extends ot{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Ae.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class GD extends ot{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:e,width:t,height:n}=this,r=this.svgFactory.create(t,n,!0),o=this.#e=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class YD extends ot{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:e,width:t,height:n}=this,r=this.svgFactory.create(t,n,!0),o=e.borderStyle.width,l=this.#e=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",t-o),l.setAttribute("height",n-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class XD extends ot{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:e,width:t,height:n}=this,r=this.svgFactory.create(t,n,!0),o=e.borderStyle.width,l=this.#e=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",t/2),l.setAttribute("cy",n/2),l.setAttribute("rx",t/2-o/2),l.setAttribute("ry",n/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class aS extends ot{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:n,popupRef:r},width:o,height:l}=this;if(!t)return this.container;const c=this.svgFactory.create(o,l,!0);let u=[];for(let f=0,p=t.length;f<p;f+=2){const y=t[f]-e[0],x=e[3]-t[f+1];u.push(`${y},${x}`)}u=u.join(" ");const h=this.#e=this.svgFactory.createElement(this.svgElementName);return h.setAttribute("points",u),h.setAttribute("stroke-width",n.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class KD extends aS{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class QD extends ot{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class kp extends ot{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Ae.HIGHLIGHT:Ae.INK}#r(e,t){switch(e){case 90:return{transform:`rotate(90) translate(${-t[0]},${t[1]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:`rotate(180) translate(${-t[2]},${t[1]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:`rotate(270) translate(${-t[2]},${t[3]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:`translate(${-t[0]},${t[3]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:n,borderStyle:r,popupRef:o}}=this,{transform:l,width:c,height:u}=this.#r(t,e),h=this.svgFactory.create(c,u,!0),f=this.#e=this.svgFactory.createElement("svg:g");h.append(f),f.setAttribute("stroke-width",r.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",l);for(let p=0,y=n.length;p<y;p++){const x=this.svgFactory.createElement(this.svgElementName);this.#t.push(x),x.setAttribute("points",n[p].join(",")),f.append(x)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:n,rect:r}=e,o=this.#e;if(t>=0&&o.setAttribute("stroke-width",t||1),n)for(let l=0,c=this.#t.length;l<c;l++)this.#t[l].setAttribute("points",n[l].join(","));if(r){const{transform:l,width:c,height:u}=this.#r(this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${u}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class lS extends ot{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Ae.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class JD extends ot{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class ZD extends ot{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class eO extends ot{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class cS extends ot{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Ae.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class tO extends ot{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let n;t.hasAppearance||t.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),n.addEventListener("dblclick",this.#t.bind(this)),this.#e=n;const{isMac:r}=Tt.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let Pp=class uS{#e=null;#t=null;#r=null;#n=new Map;#o=null;#s=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:r,page:o,viewport:l,structTreeLayer:c,commentManager:u,linkService:h,annotationStorage:f}){this.div=e,this.#e=t,this.#t=n,this.#o=c||null,this.#s=h||null,this.#r=f||new wp,this.page=o,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=u||null}hasEditableAnnotations(){return this.#n.size>0}async#i(e,t,n){const r=e.firstChild||e,o=r.id=`${mp}${t}`,l=await this.#o?.getAriaAttributes(o);if(l)for(const[c,u]of l)r.setAttribute(c,u);n?n.at(-1).container.after(e):(this.div.append(e),this.#e?.moveElementInDOM(this.div,e,r,!1))}async render(e){const{annotations:t}=e,n=this.div;rs(n,this.viewport);const r=new Map,o={data:null,layer:n,linkService:this.#s,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new da,annotationStorage:this.#r,enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const l of t){if(l.noHTML)continue;const c=l.annotationType===dt.POPUP;if(c){const f=r.get(l.id);if(!f)continue;o.elements=f}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;o.data=l;const u=$0.create(o);if(!u.isRenderable)continue;if(!c&&l.popupRef){const f=r.get(l.popupRef);f?f.push(u):r.set(l.popupRef,[u])}const h=u.render();l.hidden&&(h.style.visibility="hidden"),await this.#i(h,l.id,o.elements),u.extraPopupElement?.popup?.renderCommentButton(),u._isEditable&&(this.#n.set(u.data.id,u),this._annotationEditorUIManager?.renderAnnotationElement(u))}this.#a()}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:this.#s,svgFactory:new da,parent:this};for(const n of e){n.borderStyle||=uS._defaultBorderStyle,t.data=n;const r=$0.create(t);if(!r.isRenderable)continue;const o=r.render();await this.#i(o,n.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,rs(t,{rotation:e.rotation}),this.#a(),t.hidden=!1}#a(){if(!this.#t)return;const e=this.div;for(const[t,n]of this.#t){const r=e.querySelector(`[data-annotation-id="${t}"]`);if(!r)continue;n.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(n):o.classList.contains("annotationContent")?o.after(n):o.before(n):r.append(n);const l=this.#n.get(t);l&&(l._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(t,r.id,n),l._hasNoCanvas=!1):l.canvas=n)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}addFakeAnnotation(e){const{div:t}=this,{id:n,rotation:r}=e,o=new BD({data:{id:n,rect:e.getPDFRect(),rotation:r},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:this.#s,annotationStorage:this.#r}),l=o.render();return t.append(l),this.#e?.moveElementInDOM(t,l,l,!1),o.createOrUpdatePopup(),o}static get _defaultBorderStyle(){return Re(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:bi.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const jc=/\r\n?|\n/g;class At extends be{#e="";#t=`${this.id}-editor`;#r=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=At.prototype,t=o=>o.isEmpty(),n=Cr.TRANSLATE_SMALL,r=Cr.TRANSLATE_BIG;return Re(this,"_keyboardManager",new Ea([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:t}]]))}static _type="freetext";static _editorType=Ae.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.color=e.color||At._defaultColor||be._defaultLineColor,this.#n=e.fontSize||At._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(e,t){be.initialize(e,t);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case Me.FREETEXT_SIZE:At._defaultFontSize=t;break;case Me.FREETEXT_COLOR:At._defaultColor=t;break}}updateParams(e,t){switch(e){case Me.FREETEXT_SIZE:this.#o(t);break;case Me.FREETEXT_COLOR:this.#s(t);break}}static get defaultPropertiesToUpdate(){return[[Me.FREETEXT_SIZE,At._defaultFontSize],[Me.FREETEXT_COLOR,At._defaultColor||be._defaultLineColor]]}get propertiesToUpdate(){return[[Me.FREETEXT_SIZE,this.#n],[Me.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new ua(this),[["colorPicker",this._colorPicker]]}get colorType(){return Me.FREETEXT_COLOR}#o(e){const t=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-this.#n)*this.parentScale),this.#n=r,this.#a()},n=this.#n;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Me.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#s(e){const t=r=>{this.color=r,this.onUpdatedColor()},n=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Me.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-At._internalPadding*e,-(At._internalPadding+this.#n)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#r=new AbortController;const e=this._uiManager.combinedSignal(this.#r);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#t),this._isDraggable=!0,this.#r?.abort(),this.#r=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#i(){const e=[];this.editorDiv.normalize();let t=null;for(const n of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&n.nodeName==="BR"||(e.push(At.#c(n)),t=n);return e.join(`
`)}#a(){const[e,t]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,l=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),n=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/t):(this.width=n.height/e,this.height=n.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#e,t=this.#e=this.#i().trimEnd();if(e===t)return;const n=r=>{if(this.#e=r,!r){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#a()};this.addCommands({cmd:()=>{n(t)},undo:()=>{n(e)},mustExec:!1}),this.#a()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){At._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,t;(this._isCopy||this.annotationElementId)&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#t),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,n.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[h,f]=this.pageDimensions,[p,y]=this.pageTranslation;let x,_;switch(this.rotation){case 0:x=e+(l[0]-p)/h,_=t+this.height-(l[1]-y)/f;break;case 90:x=e+(l[0]-p)/h,_=t-(l[1]-y)/f,[c,u]=[u,-c];break;case 180:x=e-this.width+(l[0]-p)/h,_=t-(l[1]-y)/f,[c,u]=[-c,-u];break;case 270:x=e+(l[0]-p-this.height*f)/h,_=t+(l[1]-y-this.width*h)/f,[c,u]=[-u,c];break}this.setAt(x*r,_*o,c,u)}else this._moveAfterPaste(e,t);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(jc,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:n}=t;if(n.length===1&&n[0]==="text/plain")return;e.preventDefault();const r=At.#d(t.getData("text")||"").replaceAll(jc,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!r.includes(`
`)){l.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:u}=l,h=[],f=[];if(c.nodeType===Node.TEXT_NODE){const x=c.parentElement;if(f.push(c.nodeValue.slice(u).replaceAll(jc,"")),x!==this.editorDiv){let _=h;for(const b of this.editorDiv.childNodes){if(b===x){_=f;continue}_.push(At.#c(b))}}h.push(c.nodeValue.slice(0,u).replaceAll(jc,""))}else if(c===this.editorDiv){let x=h,_=0;for(const b of this.editorDiv.childNodes)_++===u&&(x=f),x.push(At.#c(b))}this.#e=`${h.join(`
`)}${r}${f.join(`
`)}`,this.#l();const p=new Range;let y=Math.sumPrecise(h.map(x=>x.length));for(const{firstChild:x}of this.editorDiv.childNodes)if(x.nodeType===Node.TEXT_NODE){const _=x.nodeValue.length;if(y<=_){p.setStart(x,y),p.setEnd(x,y);break}y-=_}o.removeAllRanges(),o.addRange(p)}#l(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const e of this.#e.split(`
`)){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#h(){return this.#e.replaceAll(""," ")}static#d(e){return e.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const e=At._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,t,n){let r=null;if(e instanceof oS){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:u,rotation:h,id:f,popupRef:p,richText:y,contentsObj:x,creationDate:_,modificationDate:b},textContent:w,textPosition:E,parent:{page:{pageNumber:A}}}=e;if(!w||w.length===0)return null;r=e={annotationType:Ae.FREETEXT,color:Array.from(c),fontSize:l,value:w.join(`
`),position:E,pageIndex:A-1,rect:u.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:p,comment:x?.str||null,richText:y,creationDate:_,modificationDate:b}}const o=await super.deserialize(e,t,n);return o.#n=e.fontSize,o.color=fe.makeHexColor(...e.color),o.#e=At.#d(e.value),o._initialData=r,e.comment&&o.setCommentData(e),o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=be._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),n=Object.assign(super.serialize(e),{color:t,fontSize:this.#n,value:this.#h()});return this.addComment(n),e?(n.isCopy=!0,n):this.annotationElementId&&!this.#f(n)?null:(n.id=this.annotationElementId,n)}#f(e){const{value:t,fontSize:n,color:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==t||e.fontSize!==n||e.color.some((l,c)=>l!==r[c])||e.pageIndex!==o}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(!t)return null;const{style:n}=t;n.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,n.color=this.color,t.replaceChildren();for(const r of this.#e.split(`
`)){const o=document.createElement("div");o.append(r?document.createTextNode(r):document.createElement("br")),t.append(o)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#e}}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class he{static PRECISION=1e-4;toSVGPath(){$e("Abstract method `toSVGPath` must be implemented.")}get box(){$e("Abstract getter `box` must be implemented.")}serialize(e,t){$e("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,r,o,l){l||=new Float32Array(e.length);for(let c=0,u=e.length;c<u;c+=2)l[c]=t+e[c]*r,l[c+1]=n+e[c+1]*o;return l}static _rescaleAndSwap(e,t,n,r,o,l){l||=new Float32Array(e.length);for(let c=0,u=e.length;c<u;c+=2)l[c]=t+e[c+1]*r,l[c+1]=n+e[c]*o;return l}static _translate(e,t,n,r){r||=new Float32Array(e.length);for(let o=0,l=e.length;o<l;o+=2)r[o]=t+e[o],r[o+1]=n+e[o+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,r,o){switch(o){case 90:return[1-t/n,e/r];case 180:return[1-e/n,1-t/r];case 270:return[t/n,1-e/r];default:return[e/n,t/r]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,r,o,l){return[(e+5*n)/6,(t+5*r)/6,(5*n+o)/6,(5*r+l)/6,(n+o)/2,(r+l)/2]}}class As{#e;#t=[];#r;#n;#o=[];#s=new Float32Array(18);#i;#a;#c;#l;#h;#d;#f=[];static#g=8;static#p=2;static#u=As.#g+As.#p;constructor({x:e,y:t},n,r,o,l,c=0){this.#e=n,this.#d=o*r,this.#n=l,this.#s.set([NaN,NaN,NaN,NaN,e,t],6),this.#r=c,this.#l=As.#g*r,this.#c=As.#u*r,this.#h=r,this.#f.push(e,t)}isEmpty(){return isNaN(this.#s[8])}#m(){const e=this.#s.subarray(4,6),t=this.#s.subarray(16,18),[n,r,o,l]=this.#e;return[(this.#i+(e[0]-t[0])/2-n)/o,(this.#a+(e[1]-t[1])/2-r)/l,(this.#i+(t[0]-e[0])/2-n)/o,(this.#a+(t[1]-e[1])/2-r)/l]}add({x:e,y:t}){this.#i=e,this.#a=t;const[n,r,o,l]=this.#e;let[c,u,h,f]=this.#s.subarray(8,12);const p=e-h,y=t-f,x=Math.hypot(p,y);if(x<this.#c)return!1;const _=x-this.#l,b=_/x,w=b*p,E=b*y;let A=c,C=u;c=h,u=f,h+=w,f+=E,this.#f?.push(e,t);const k=-E/_,N=w/_,R=k*this.#d,D=N*this.#d;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([h+R,f+D],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([h-R,f-D],16),isNaN(this.#s[6])?(this.#o.length===0&&(this.#s.set([c+R,u+D],2),this.#o.push(NaN,NaN,NaN,NaN,(c+R-n)/o,(u+D-r)/l),this.#s.set([c-R,u-D],14),this.#t.push(NaN,NaN,NaN,NaN,(c-R-n)/o,(u-D-r)/l)),this.#s.set([A,C,c,u,h,f],6),!this.isEmpty()):(this.#s.set([A,C,c,u,h,f],6),Math.abs(Math.atan2(C-u,A-c)-Math.atan2(E,w))<Math.PI/2?([c,u,h,f]=this.#s.subarray(2,6),this.#o.push(NaN,NaN,NaN,NaN,((c+h)/2-n)/o,((u+f)/2-r)/l),[c,u,A,C]=this.#s.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((A+c)/2-n)/o,((C+u)/2-r)/l),!0):([A,C,c,u,h,f]=this.#s.subarray(0,6),this.#o.push(((A+5*c)/6-n)/o,((C+5*u)/6-r)/l,((5*c+h)/6-n)/o,((5*u+f)/6-r)/l,((c+h)/2-n)/o,((u+f)/2-r)/l),[h,f,c,u,A,C]=this.#s.subarray(12,18),this.#t.push(((A+5*c)/6-n)/o,((C+5*u)/6-r)/l,((5*c+h)/6-n)/o,((5*u+f)/6-r)/l,((c+h)/2-n)/o,((u+f)/2-r)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#o,t=this.#t;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#y();const n=[];n.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?n.push(`L${e[r+4]} ${e[r+5]}`):n.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);this.#v(n);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return this.#b(n),n.join(" ")}#y(){const[e,t,n,r]=this.#e,[o,l,c,u]=this.#m();return`M${(this.#s[2]-e)/n} ${(this.#s[3]-t)/r} L${(this.#s[4]-e)/n} ${(this.#s[5]-t)/r} L${o} ${l} L${c} ${u} L${(this.#s[16]-e)/n} ${(this.#s[17]-t)/r} L${(this.#s[14]-e)/n} ${(this.#s[15]-t)/r} Z`}#b(e){const t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#v(e){const[t,n,r,o]=this.#e,l=this.#s.subarray(4,6),c=this.#s.subarray(16,18),[u,h,f,p]=this.#m();e.push(`L${(l[0]-t)/r} ${(l[1]-n)/o} L${u} ${h} L${f} ${p} L${(c[0]-t)/r} ${(c[1]-n)/o}`)}newFreeDrawOutline(e,t,n,r,o,l){return new dS(e,t,n,r,o,l)}getOutlines(){const e=this.#o,t=this.#t,n=this.#s,[r,o,l,c]=this.#e,u=new Float32Array((this.#f?.length??0)+2);for(let p=0,y=u.length-2;p<y;p+=2)u[p]=(this.#f[p]-r)/l,u[p+1]=(this.#f[p+1]-o)/c;if(u[u.length-2]=(this.#i-r)/l,u[u.length-1]=(this.#a-o)/c,isNaN(n[6])&&!this.isEmpty())return this.#A(u);const h=new Float32Array(this.#o.length+24+this.#t.length);let f=e.length;for(let p=0;p<f;p+=2){if(isNaN(e[p])){h[p]=h[p+1]=NaN;continue}h[p]=e[p],h[p+1]=e[p+1]}f=this.#w(h,f);for(let p=t.length-6;p>=6;p-=6)for(let y=0;y<6;y+=2){if(isNaN(t[p+y])){h[f]=h[f+1]=NaN,f+=2;continue}h[f]=t[p+y],h[f+1]=t[p+y+1],f+=2}return this.#_(h,f),this.newFreeDrawOutline(h,u,this.#e,this.#h,this.#r,this.#n)}#A(e){const t=this.#s,[n,r,o,l]=this.#e,[c,u,h,f]=this.#m(),p=new Float32Array(36);return p.set([NaN,NaN,NaN,NaN,(t[2]-n)/o,(t[3]-r)/l,NaN,NaN,NaN,NaN,(t[4]-n)/o,(t[5]-r)/l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(t[16]-n)/o,(t[17]-r)/l,NaN,NaN,NaN,NaN,(t[14]-n)/o,(t[15]-r)/l],0),this.newFreeDrawOutline(p,e,this.#e,this.#h,this.#r,this.#n)}#_(e,t){const n=this.#t;return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6}#w(e,t){const n=this.#s.subarray(4,6),r=this.#s.subarray(16,18),[o,l,c,u]=this.#e,[h,f,p,y]=this.#m();return e.set([NaN,NaN,NaN,NaN,(n[0]-o)/c,(n[1]-l)/u,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,p,y,NaN,NaN,NaN,NaN,(r[0]-o)/c,(r[1]-l)/u],t),t+=24}}class dS extends he{#e;#t=new Float32Array(4);#r;#n;#o;#s;#i;constructor(e,t,n,r,o,l){super(),this.#i=e,this.#o=t,this.#e=n,this.#s=r,this.#r=o,this.#n=l,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#a(l);const[c,u,h,f]=this.#t;for(let p=0,y=e.length;p<y;p+=2)e[p]=(e[p]-c)/h,e[p+1]=(e[p+1]-u)/f;for(let p=0,y=t.length;p<y;p+=2)t[p]=(t[p]-c)/h,t[p+1]=(t[p+1]-u)/f}toSVGPath(){const e=[`M${this.#i[4]} ${this.#i[5]}`];for(let t=6,n=this.#i.length;t<n;t+=6){if(isNaN(this.#i[t])){e.push(`L${this.#i[t+4]} ${this.#i[t+5]}`);continue}e.push(`C${this.#i[t]} ${this.#i[t+1]} ${this.#i[t+2]} ${this.#i[t+3]} ${this.#i[t+4]} ${this.#i[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,n,r],o){const l=n-e,c=r-t;let u,h;switch(o){case 0:u=he._rescale(this.#i,e,r,l,-c),h=he._rescale(this.#o,e,r,l,-c);break;case 90:u=he._rescaleAndSwap(this.#i,e,t,l,c),h=he._rescaleAndSwap(this.#o,e,t,l,c);break;case 180:u=he._rescale(this.#i,n,t,-l,c),h=he._rescale(this.#o,n,t,-l,c);break;case 270:u=he._rescaleAndSwap(this.#i,n,r,-l,-c),h=he._rescaleAndSwap(this.#o,n,r,-l,-c);break}return{outline:Array.from(u),points:[Array.from(h)]}}#a(e){const t=this.#i;let n=t[4],r=t[5];const o=[n,r,n,r];let l=n,c=r,u=n,h=r;const f=e?Math.max:Math.min,p=new Float32Array(4);for(let x=6,_=t.length;x<_;x+=6){const b=t[x+4],w=t[x+5];isNaN(t[x])?(fe.pointBoundingBox(b,w,o),c>w?(l=b,c=w):c===w&&(l=f(l,b)),h<w?(u=b,h=w):h===w&&(u=f(u,b))):(p[0]=p[1]=1/0,p[2]=p[3]=-1/0,fe.bezierBoundingBox(n,r,...t.slice(x,x+6),p),fe.rectBoundingBox(p[0],p[1],p[2],p[3],o),c>p[1]?(l=p[0],c=p[1]):c===p[1]&&(l=f(l,p[0])),h<p[3]?(u=p[2],h=p[3]):h===p[3]&&(u=f(u,p[2]))),n=b,r=w}const y=this.#t;y[0]=o[0]-this.#r,y[1]=o[1]-this.#r,y[2]=o[2]-o[0]+2*this.#r,y[3]=o[3]-o[1]+2*this.#r,this.firstPoint=[l,c],this.lastPoint=[u,h]}get box(){return this.#t}newOutliner(e,t,n,r,o,l=0){return new As(e,t,n,r,o,l)}getNewOutline(e,t){const[n,r,o,l]=this.#t,[c,u,h,f]=this.#e,p=o*h,y=l*f,x=n*h+c,_=r*f+u,b=this.newOutliner({x:this.#o[0]*p+x,y:this.#o[1]*y+_},this.#e,this.#s,e,this.#n,t??this.#r);for(let w=2;w<this.#o.length;w+=2)b.add({x:this.#o[w]*p+x,y:this.#o[w+1]*y+_});return b.getOutlines()}}class Ff{#e;#t;#r;#n=[];#o=[];constructor(e,t=0,n=0,r=!0){const o=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:b,y:w,width:E,height:A}of e){const C=Math.floor((b-t)/l)*l,k=Math.ceil((b+E+t)/l)*l,N=Math.floor((w-t)/l)*l,R=Math.ceil((w+A+t)/l)*l,D=[C,N,R,!0],j=[k,N,R,!1];this.#n.push(D,j),fe.rectBoundingBox(C,N,k,R,o)}const c=o[2]-o[0]+2*n,u=o[3]-o[1]+2*n,h=o[0]-n,f=o[1]-n;let p=r?-1/0:1/0,y=1/0;const x=this.#n.at(r?-1:-2),_=[x[0],x[2]];for(const b of this.#n){const[w,E,A,C]=b;!C&&r?E<y?(y=E,p=w):E===y&&(p=Math.max(p,w)):C&&!r&&(E<y?(y=E,p=w):E===y&&(p=Math.min(p,w))),b[0]=(w-h)/c,b[1]=(E-f)/u,b[2]=(A-f)/u}this.#e=new Float32Array([h,f,c,u]),this.#t=[p,y],this.#r=_}getOutlines(){this.#n.sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of this.#n)t[3]?(e.push(...this.#l(t)),this.#a(t)):(this.#c(t),e.push(...this.#l(t)));return this.#s(e)}#s(e){const t=[],n=new Set;for(const l of e){const[c,u,h]=l;t.push([c,u,l],[c,h,l])}t.sort((l,c)=>l[1]-c[1]||l[0]-c[0]);for(let l=0,c=t.length;l<c;l+=2){const u=t[l][2],h=t[l+1][2];u.push(h),h.push(u),n.add(u),n.add(h)}const r=[];let o;for(;n.size>0;){const l=n.values().next().value;let[c,u,h,f,p]=l;n.delete(l);let y=c,x=u;for(o=[c,h],r.push(o);;){let _;if(n.has(f))_=f;else if(n.has(p))_=p;else break;n.delete(_),[c,u,h,f,p]=_,y!==c&&(o.push(y,x,c,x===u?u:h),y=c),x=x===u?h:u}o.push(y,x)}return new nO(r,this.#e,this.#t,this.#r)}#i(e){const t=this.#o;let n=0,r=t.length-1;for(;n<=r;){const o=n+r>>1,l=t[o][0];if(l===e)return o;l<e?n=o+1:r=o-1}return r+1}#a([,e,t]){const n=this.#i(e);this.#o.splice(n,0,[e,t])}#c([,e,t]){const n=this.#i(e);for(let r=n;r<this.#o.length;r++){const[o,l]=this.#o[r];if(o!==e)break;if(o===e&&l===t){this.#o.splice(r,1);return}}for(let r=n-1;r>=0;r--){const[o,l]=this.#o[r];if(o!==e)break;if(o===e&&l===t){this.#o.splice(r,1);return}}}#l(e){const[t,n,r]=e,o=[[t,n,r]],l=this.#i(r);for(let c=0;c<l;c++){const[u,h]=this.#o[c];for(let f=0,p=o.length;f<p;f++){const[,y,x]=o[f];if(!(h<=y||x<=u)){if(y>=u){if(x>h)o[f][1]=h;else{if(p===1)return[];o.splice(f,1),f--,p--}continue}o[f][2]=u,x>h&&o.push([t,h,x])}}}return o}}class nO extends he{#e;#t;constructor(e,t,n,r){super(),this.#t=e,this.#e=t,this.firstPoint=n,this.lastPoint=r}toSVGPath(){const e=[];for(const t of this.#t){let[n,r]=t;e.push(`M${n} ${r}`);for(let o=2;o<t.length;o+=2){const l=t[o],c=t[o+1];l===n?(e.push(`V${c}`),r=c):c===r&&(e.push(`H${l}`),n=l)}e.push("Z")}return e.join(" ")}serialize([e,t,n,r],o){const l=[],c=n-e,u=r-t;for(const h of this.#t){const f=new Array(h.length);for(let p=0;p<h.length;p+=2)f[p]=e+h[p]*c,f[p+1]=r-h[p+1]*u;l.push(f)}return l}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}}class jf extends As{newFreeDrawOutline(e,t,n,r,o,l){return new rO(e,t,n,r,o,l)}}class rO extends dS{newOutliner(e,t,n,r,o,l=0){return new jf(e,t,n,r,o,l)}}class ht extends be{#e=null;#t=0;#r;#n=null;#o=null;#s=null;#i=null;#a=0;#c=null;#l=null;#h=null;#d=!1;#f=null;#g=null;#p=null;#u="";#m;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Ae.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=ht.prototype;return Re(this,"_keyboardManager",new Ea([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||ht._defaultColor,this.#m=e.thickness||ht._defaultThickness,this.opacity=e.opacity||ht._defaultOpacity,this.#r=e.boxes||null,this.#y=e.methodOfCreation||"",this.#u=e.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(this.#d=!0,this.#v(e),this.#S()):this.#r&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#i=e.focusNode,this.#a=e.focusOffset,this.#b(),this.#S(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#d?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#m,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#b(){const e=new Ff(this.#r,.001);this.#l=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const t=new Ff(this.#r,.0025,.001,this._uiManager.direction==="ltr");this.#s=t.getOutlines();const{firstPoint:n}=this.#l;this.#f=[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height];const{lastPoint:r}=this.#s;this.#g=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]}#v({highlightOutlines:e,highlightId:t,clipPathId:n}){this.#l=e;const r=1.5;if(this.#s=e.getNewOutline(this.#m/2+r,.0025),t>=0)this.#h=t,this.#n=n,this.parent.drawLayer.finalizeDraw(t,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:ht.#E(this.#l.box,(p-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:ht.#E(this.#s.box,p),path:{d:this.#s.toSVGPath()}})}const[o,l,c,u]=e.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=c,this.height=u;break;case 90:{const[p,y]=this.parentDimensions;this.x=l,this.y=1-o,this.width=c*y/p,this.height=u*p/y;break}case 180:this.x=1-o,this.y=1-l,this.width=c,this.height=u;break;case 270:{const[p,y]=this.parentDimensions;this.x=1-l,this.y=o,this.width=c*y/p,this.height=u*p/y;break}}const{firstPoint:h}=e;this.#f=[(h[0]-o)/c,(h[1]-l)/u];const{lastPoint:f}=this.#s;this.#g=[(f[0]-o)/c,(f[1]-l)/u]}static initialize(e,t){be.initialize(e,t),ht._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case Me.HIGHLIGHT_COLOR:ht._defaultColor=t;break;case Me.HIGHLIGHT_THICKNESS:ht._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#g}get commentButtonPosition(){return this.#f}updateParams(e,t){switch(e){case Me.HIGHLIGHT_COLOR:this.#A(t);break;case Me.HIGHLIGHT_THICKNESS:this.#_(t);break}}static get defaultPropertiesToUpdate(){return[[Me.HIGHLIGHT_COLOR,ht._defaultColor],[Me.HIGHLIGHT_THICKNESS,ht._defaultThickness]]}get propertiesToUpdate(){return[[Me.HIGHLIGHT_COLOR,this.color||ht._defaultColor],[Me.HIGHLIGHT_THICKNESS,this.#m||ht._defaultThickness],[Me.HIGHLIGHT_FREE,this.#d]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#o?.updateColor(this.color),super.onUpdatedColor()}#A(e){const t=(o,l)=>{this.color=o,this.opacity=l,this.onUpdatedColor()},n=this.color,r=this.opacity;this.addCommands({cmd:t.bind(this,e,ht._defaultOpacity),undo:t.bind(this,n,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Me.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)}#_(e){const t=this.#m,n=r=>{this.#m=r,this.#w(r)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Me.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#o=new hn({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#P())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#P())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#T(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#S(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#T():e&&(this.#S(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#w(e){this.#d&&(this.#v({highlightOutlines:this.#l.getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}#T(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#S(e=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#n}=e.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#d},path:{d:this.#l.toSVGPath()}},!1,!0),this.#p=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#d},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#d),this.#c&&(this.#c.style.clipPath=this.#n))}static#E([e,t,n,r],o){switch(o){case 90:return[1-t-r,e,r,n];case 180:return[1-e-n,1-t-r,n,r];case 270:return[t,1-e-n,r,n]}return[e,t,n,r]}rotate(e){const{drawLayer:t}=this.parent;let n;this.#d?(e=(e-this.rotation+360)%360,n=ht.#E(this.#l.box,e)):n=ht.#E([this.x,this.y,this.width,this.height],e),t.updateProperties(this.#h,{bbox:n,root:{"data-main-rotation":e}}),t.updateProperties(this.#p,{bbox:ht.#E(this.#s.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();this.#u&&(e.setAttribute("aria-label",this.#u),e.setAttribute("role","mark")),this.#d?e.classList.add("free"):this.div.addEventListener("keydown",this.#R.bind(this),{signal:this._uiManager._signal});const t=this.#c=document.createElement("div");return e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#n,this.setDims(this.width,this.height),Bx(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#R(e){ht._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#k(!0);break;case 1:case 3:this.#k(!1);break}}#k(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#i,this.#a)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#d||this.#k(!1))}get _mustFixPosition(){return!this.#d}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!e}}))}#P(){return this.#d?this.rotation:0}#F(){if(this.#d)return null;const[e,t]=this.pageDimensions,[n,r]=this.pageTranslation,o=this.#r,l=new Float32Array(o.length*8);let c=0;for(const{x:u,y:h,width:f,height:p}of o){const y=u*e+n,x=(1-h)*t+r;l[c]=l[c+4]=y,l[c+1]=l[c+3]=x,l[c+2]=l[c+6]=y+f*e,l[c+5]=l[c+7]=x-p*t,c+=8}return l}#D(e){return this.#l.serialize(e,this.#P())}static startHighlighting(e,t,{target:n,x:r,y:o}){const{x:l,y:c,width:u,height:h}=n.getBoundingClientRect(),f=new AbortController,p=e.combinedSignal(f),y=x=>{f.abort(),this.#j(e,x)};window.addEventListener("blur",y,{signal:p}),window.addEventListener("pointerup",y,{signal:p}),window.addEventListener("pointerdown",st,{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",pn,{signal:p}),n.addEventListener("pointermove",this.#M.bind(this,e),{signal:p}),this._freeHighlight=new jf({x:r,y:o},[l,c,u,h],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#M(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#j(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,t,n){let r=null;if(e instanceof lS){const{data:{quadPoints:_,rect:b,rotation:w,id:E,color:A,opacity:C,popupRef:k,richText:N,contentsObj:R,creationDate:D,modificationDate:j},parent:{page:{pageNumber:z}}}=e;r=e={annotationType:Ae.HIGHLIGHT,color:Array.from(A),opacity:C,quadPoints:_,boxes:null,pageIndex:z-1,rect:b.slice(0),rotation:w,annotationElementId:E,id:E,deleted:!1,popupRef:k,richText:N,comment:R?.str||null,creationDate:D,modificationDate:j}}else if(e instanceof kp){const{data:{inkLists:_,rect:b,rotation:w,id:E,color:A,borderStyle:{rawWidth:C},popupRef:k,richText:N,contentsObj:R,creationDate:D,modificationDate:j},parent:{page:{pageNumber:z}}}=e;r=e={annotationType:Ae.HIGHLIGHT,color:Array.from(A),thickness:C,inkLists:_,boxes:null,pageIndex:z-1,rect:b.slice(0),rotation:w,annotationElementId:E,id:E,deleted:!1,popupRef:k,richText:N,comment:R?.str||null,creationDate:D,modificationDate:j}}const{color:o,quadPoints:l,inkLists:c,opacity:u}=e,h=await super.deserialize(e,t,n);h.color=fe.makeHexColor(...o),h.opacity=u||1,c&&(h.#m=e.thickness),h._initialData=r,e.comment&&h.setCommentData(e);const[f,p]=h.pageDimensions,[y,x]=h.pageTranslation;if(l){const _=h.#r=[];for(let b=0;b<l.length;b+=8)_.push({x:(l[b]-y)/f,y:1-(l[b+1]-x)/p,width:(l[b+2]-l[b])/f,height:(l[b+1]-l[b+5])/p});h.#b(),h.#S(),h.rotate(h.rotation)}else if(c){h.#d=!0;const _=c[0],b={x:_[0]-y,y:p-(_[1]-x)},w=new jf(b,[0,0,f,p],1,h.#m/2,!0,.001);for(let C=0,k=_.length;C<k;C+=2)b.x=_[C]-y,b.y=p-(_[C+1]-x),w.add(b);const{id:E,clipPathId:A}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:w.toSVGPath()}},!0,!0);h.#v({highlightOutlines:w.getOutlines(),highlightId:E,clipPathId:A}),h.#S(),h.rotate(h.parentRotation)}return h}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=be._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),n=super.serialize(e);return Object.assign(n,{color:t,opacity:this.opacity,thickness:this.#m,quadPoints:this.#F(),outlines:this.#D(n.rect)}),this.addComment(n),this.annotationElementId&&!this.#L(n)?null:(n.id=this.annotationElementId,n)}#L(e){const{color:t}=this._initialData;return this.hasEditedComment||e.color.some((n,r)=>n!==t[r])}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class hS{#e=Object.create(null);updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){this.#e[e]=t}toSVGProperties(){const e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){$e("Not implemented")}}class _e extends be{#e=null;#t;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#r=null;static#n=null;static#o=null;static#s=NaN;static#i=null;static#a=null;static#c=NaN;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,this._addOutlines(e)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(this.#l(e),this.#f())}#l({drawOutlines:e,drawId:t,drawingOptions:n}){this.#e=e,this._drawingOptions||=n,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),t>=0?(this._drawId=t,this.parent.drawLayer.finalizeDraw(t,e.defaultProperties)):this._drawId=this.#h(e,this.parent),this.#u(e.box)}#h(e,t){const{id:n}=t.drawLayer.draw(_e._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return n}static _mergeSVGProperties(e,t){const n=new Set(Object.keys(e));for(const[r,o]of Object.entries(t))n.has(r)?Object.assign(e[r],o):e[r]=o;return e}static getDefaultDrawingOptions(e){$e("Not implemented")}static get typesMap(){$e("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){const n=this.typesMap.get(e);n&&this._defaultDrawingOptions.updateProperty(n,t),this._currentParent&&(_e.#r.updateProperty(n,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const n=this.constructor.typesMap.get(e);n&&this._updateProperty(e,n,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[n,r]of this.typesMap)e.push([n,t[r]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[n,r]of this.constructor.typesMap)e.push([n,t[r]]);return e}_updateProperty(e,t,n){const r=this._drawingOptions,o=r[t],l=c=>{r.updateProperty(t,c);const u=this.#e.updateProperty(t,c);u&&this.#u(u),this.parent?.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,n),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,_e._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#p()),{bbox:this.#m()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,_e._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#p()),{bbox:this.#m()}))}_onTranslating(e,t){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#m()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,_e._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#m()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#d(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#u(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#d()):e&&(this._uiManager.addShouldRescale(this),this.#f(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),t&&this.select()}#d(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#h(this.#e,e)}}#g([e,t,n,r]){const{parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[t,1-e,n*(l/o),r*(o/l)];case 180:return[1-e,1-t,n,r];case 270:return[1-t,e,n*(l/o),r*(o/l)];default:return[e,t,n,r]}}#p(){const{x:e,y:t,width:n,height:r,parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[1-t,e,n*(o/l),r*(l/o)];case 180:return[1-e,1-t,n,r];case 270:return[t,1-e,n*(o/l),r*(l/o)];default:return[e,t,n,r]}}#u(e){[this.x,this.y,this.width,this.height]=this.#g(e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#m(){const{x:e,y:t,width:n,height:r,rotation:o,parentRotation:l,parentDimensions:[c,u]}=this;switch((o*4+l)/90){case 1:return[1-t-r,e,r,n];case 2:return[1-e-n,1-t-r,n,r];case 3:return[t,1-e-n,r,n];case 4:return[e,t-n*(c/u),r*(u/c),n*(c/u)];case 5:return[1-t,e,n*(c/u),r*(u/c)];case 6:return[1-e-r*(u/c),1-t,r*(u/c),n*(c/u)];case 7:return[t-n*(c/u),1-e-r*(u/c),n*(c/u),r*(u/c)];case 8:return[e-n,t-r,n,r];case 9:return[1-t,e-n,r,n];case 10:return[1-e,1-t,n,r];case 11:return[t-r,1-e,r,n];case 12:return[e-r*(u/c),t,r*(u/c),n*(c/u)];case 13:return[1-t-n*(c/u),e-r*(u/c),n*(c/u),r*(u/c)];case 14:return[1-e,1-t-n*(c/u),r*(u/c),n*(c/u)];case 15:return[t,1-e,n*(c/u),r*(u/c)];default:return[e,t,n,r]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,_e._mergeSVGProperties({bbox:this.#m()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,t;this._isCopy&&(e=this.x,t=this.y);const n=super.render();n.classList.add("draw");const r=document.createElement("div");return n.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,t),n}static createDrawerInstance(e,t,n,r,o){$e("Not implemented")}static startDrawing(e,t,n,r){const{target:o,offsetX:l,offsetY:c,pointerId:u,pointerType:h}=r;if(_e.#i&&_e.#i!==h)return;const{viewport:{rotation:f}}=e,{width:p,height:y}=o.getBoundingClientRect(),x=_e.#n=new AbortController,_=e.combinedSignal(x);if(_e.#s||=u,_e.#i??=h,window.addEventListener("pointerup",b=>{_e.#s===b.pointerId?this._endDraw(b):_e.#a?.delete(b.pointerId)},{signal:_}),window.addEventListener("pointercancel",b=>{_e.#s===b.pointerId?this._currentParent.endDrawingSession():_e.#a?.delete(b.pointerId)},{signal:_}),window.addEventListener("pointerdown",b=>{_e.#i===b.pointerType&&((_e.#a||=new Set).add(b.pointerId),_e.#r.isCancellable()&&(_e.#r.removeLastElement(),_e.#r.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:_}),window.addEventListener("contextmenu",pn,{signal:_}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:_}),o.addEventListener("touchmove",b=>{b.timeStamp===_e.#c&&st(b)},{signal:_}),e.toggleDrawing(),t._editorUndoBar?.hide(),_e.#r){e.drawLayer.updateProperties(this._currentDrawId,_e.#r.startNew(l,c,p,y,f));return}t.updateUIForDefaultProperties(this),_e.#r=this.createDrawerInstance(l,c,p,y,f),_e.#o=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(_e.#o.toSVGProperties(),_e.#r.defaultSVGProperties),!0,!1)}static _drawMove(e){if(_e.#c=-1,!_e.#r)return;const{offsetX:t,offsetY:n,pointerId:r}=e;if(_e.#s===r){if(_e.#a?.size>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,_e.#r.add(t,n)),_e.#c=e.timeStamp,st(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,_e.#r=null,_e.#o=null,_e.#i=null,_e.#c=NaN),_e.#n&&(_e.#n.abort(),_e.#n=null,_e.#s=NaN,_e.#a=null)}static _endDraw(e){const t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),e?.target===t.div&&t.drawLayer.updateProperties(this._currentDrawId,_e.#r.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const n=_e.#r,r=this._currentDrawId,o=n.getLastElement();t.addCommands({cmd:()=>{t.drawLayer.updateProperties(r,n.setLastElement(o))},undo:()=>{t.drawLayer.updateProperties(r,n.removeLastElement())},mustExec:!1,type:Me.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(Me.DRAW_STEP),!_e.#r.isEmpty()){const{pageDimensions:[n,r],scale:o}=t,l=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:_e.#r.getOutlines(n*o,r*o,o,this._INNER_MARGIN),drawingOptions:_e.#o,mustBeCommitted:!e});return this._cleanup(!0),l}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,n,r,o,l){$e("Not implemented")}static async deserialize(e,t,n){const{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:c}}=t.viewport,u=this.deserializeDraw(l,c,r,o,this._INNER_MARGIN,e),h=await super.deserialize(e,t,n);return h.createDrawingOptions(e),h.#l({drawOutlines:u}),h.#f(),h.onScaleChanging(),h.rotate(),h}serializeDraw(e){const[t,n]=this.pageTranslation,[r,o]=this.pageDimensions;return this.#e.serialize([t,n,r,o],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class sO{#e=new Float64Array(6);#t;#r;#n;#o;#s;#i="";#a=0;#c=new Ta;#l;#h;constructor(e,t,n,r,o,l){this.#l=n,this.#h=r,this.#n=o,this.#o=l,[e,t]=this.#d(e,t);const c=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#s=[e,t],this.#r=[{line:c,points:this.#s}],this.#e.set(c,0)}updateProperty(e,t){e==="stroke-width"&&(this.#o=t)}#d(e,t){return he._normalizePoint(e,t,this.#l,this.#h,this.#n)}isEmpty(){return!this.#r||this.#r.length===0}isCancellable(){return this.#s.length<=10}add(e,t){[e,t]=this.#d(e,t);const[n,r,o,l]=this.#e.subarray(2,6),c=e-o,u=t-l;return Math.hypot(this.#l*c,this.#h*u)<=2?null:(this.#s.push(e,t),isNaN(n)?(this.#e.set([o,l,e,t],2),this.#t.push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([n,r,o,l,e,t],0),this.#t.push(...he.createBezierPoints(n,r,o,l,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(this.#s.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,r,o){this.#l=n,this.#h=r,this.#n=o,[e,t]=this.#d(e,t);const l=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#s=[e,t];const c=this.#r.at(-1);return c&&(c.line=new Float32Array(c.line),c.points=new Float32Array(c.points)),this.#r.push({line:l,points:this.#s}),this.#e.set(l,0),this.#a=0,this.toSVGPath(),null}getLastElement(){return this.#r.at(-1)}setLastElement(e){return this.#r?(this.#r.push(e),this.#t=e.line,this.#s=e.points,this.#a=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(e)}removeLastElement(){if(!this.#r)return this.#c.removeLastElement();this.#r.pop(),this.#i="";for(let e=0,t=this.#r.length;e<t;e++){const{line:n,points:r}=this.#r[e];this.#t=n,this.#s=r,this.#a=0,this.toSVGPath()}return{path:{d:this.#i}}}toSVGPath(){const e=he.svgRound(this.#t[4]),t=he.svgRound(this.#t[5]);if(this.#s.length===2)return this.#i=`${this.#i} M ${e} ${t} Z`,this.#i;if(this.#s.length<=6){const r=this.#i.lastIndexOf("M");this.#i=`${this.#i.slice(0,r)} M ${e} ${t}`,this.#a=6}if(this.#s.length===4){const r=he.svgRound(this.#t[10]),o=he.svgRound(this.#t[11]);return this.#i=`${this.#i} L ${r} ${o}`,this.#a=12,this.#i}const n=[];this.#a===0&&(n.push(`M ${e} ${t}`),this.#a=6);for(let r=this.#a,o=this.#t.length;r<o;r+=6){const[l,c,u,h,f,p]=this.#t.slice(r,r+6).map(he.svgRound);n.push(`C${l} ${c} ${u} ${h} ${f} ${p}`)}return this.#i+=n.join(" "),this.#a=this.#t.length,this.#i}getOutlines(e,t,n,r){const o=this.#r.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#c.build(this.#r,e,t,n,this.#n,this.#o,r),this.#e=null,this.#t=null,this.#r=null,this.#i=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Ta extends he{#e;#t=0;#r;#n;#o;#s;#i;#a;#c;build(e,t,n,r,o,l,c){this.#o=t,this.#s=n,this.#i=r,this.#a=o,this.#c=l,this.#r=c??0,this.#n=e,this.#d()}get thickness(){return this.#c}setLastElement(e){return this.#n.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of this.#n){if(e.push(`M${he.svgRound(t[4])} ${he.svgRound(t[5])}`),t.length===6){e.push("Z");continue}if(t.length===12&&isNaN(t[6])){e.push(`L${he.svgRound(t[10])} ${he.svgRound(t[11])}`);continue}for(let n=6,r=t.length;n<r;n+=6){const[o,l,c,u,h,f]=t.subarray(n,n+6).map(he.svgRound);e.push(`C${o} ${l} ${c} ${u} ${h} ${f}`)}}return e.join("")}serialize([e,t,n,r],o){const l=[],c=[],[u,h,f,p]=this.#h();let y,x,_,b,w,E,A,C,k;switch(this.#a){case 0:k=he._rescale,y=e,x=t+r,_=n,b=-r,w=e+u*n,E=t+(1-h-p)*r,A=e+(u+f)*n,C=t+(1-h)*r;break;case 90:k=he._rescaleAndSwap,y=e,x=t,_=n,b=r,w=e+h*n,E=t+u*r,A=e+(h+p)*n,C=t+(u+f)*r;break;case 180:k=he._rescale,y=e+n,x=t,_=-n,b=r,w=e+(1-u-f)*n,E=t+h*r,A=e+(1-u)*n,C=t+(h+p)*r;break;case 270:k=he._rescaleAndSwap,y=e+n,x=t+r,_=-n,b=-r,w=e+(1-h-p)*n,E=t+(1-u-f)*r,A=e+(1-h)*n,C=t+(1-u)*r;break}for(const{line:N,points:R}of this.#n)l.push(k(N,y,x,_,b,o?new Array(N.length):null)),c.push(k(R,y,x,_,b,o?new Array(R.length):null));return{lines:l,points:c,rect:[w,E,A,C]}}static deserialize(e,t,n,r,o,{paths:{lines:l,points:c},rotation:u,thickness:h}){const f=[];let p,y,x,_,b;switch(u){case 0:b=he._rescale,p=-e/n,y=t/r+1,x=1/n,_=-1/r;break;case 90:b=he._rescaleAndSwap,p=-t/r,y=-e/n,x=1/r,_=1/n;break;case 180:b=he._rescale,p=e/n+1,y=-t/r,x=-1/n,_=1/r;break;case 270:b=he._rescaleAndSwap,p=t/r+1,y=e/n+1,x=-1/r,_=-1/n;break}if(!l){l=[];for(const E of c){const A=E.length;if(A===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1]]));continue}if(A===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1],NaN,NaN,NaN,NaN,E[2],E[3]]));continue}const C=new Float32Array(3*(A-2));l.push(C);let[k,N,R,D]=E.subarray(0,4);C.set([NaN,NaN,NaN,NaN,k,N],0);for(let j=4;j<A;j+=2){const z=E[j],q=E[j+1];C.set(he.createBezierPoints(k,N,R,D,z,q),(j-2)*3),[k,N,R,D]=[R,D,z,q]}}}for(let E=0,A=l.length;E<A;E++)f.push({line:b(l[E].map(C=>C??NaN),p,y,x,_),points:b(c[E].map(C=>C??NaN),p,y,x,_)});const w=new this.prototype.constructor;return w.build(f,n,r,1,u,h,o),w}#l(e=this.#c){const t=this.#r+e/2*this.#i;return this.#a%180===0?[t/this.#o,t/this.#s]:[t/this.#s,t/this.#o]}#h(){const[e,t,n,r]=this.#e,[o,l]=this.#l(0);return[e+o,t+l,n-2*o,r-2*l]}#d(){const e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:r}of this.#n){if(r.length<=12){for(let c=4,u=r.length;c<u;c+=6)fe.pointBoundingBox(r[c],r[c+1],e);continue}let o=r[4],l=r[5];for(let c=6,u=r.length;c<u;c+=6){const[h,f,p,y,x,_]=r.subarray(c,c+6);fe.bezierBoundingBox(o,l,h,f,p,y,x,_,e),o=x,l=_}}const[t,n]=this.#l();e[0]=Ft(e[0]-t,0,1),e[1]=Ft(e[1]-n,0,1),e[2]=Ft(e[2]+t,0,1),e[3]=Ft(e[3]+n,0,1),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,t){return e==="stroke-width"?this.#f(t):null}#f(e){const[t,n]=this.#l();this.#c=e;const[r,o]=this.#l(),[l,c]=[r-t,o-n],u=this.#e;return u[0]-=l,u[1]-=c,u[2]+=2*l,u[3]+=2*c,u}updateParentDimensions([e,t],n){const[r,o]=this.#l();this.#o=e,this.#s=t,this.#i=n;const[l,c]=this.#l(),u=l-r,h=c-o,f=this.#e;return f[0]-=u,f[1]-=h,f[2]+=2*u,f[3]+=2*h,f}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(he.svgRound).join(" ")}get defaultProperties(){const[e,t]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${he.svgRound(e)} ${he.svgRound(t)}`}}}get rotationTransform(){const[,,e,t]=this.#e;let n=0,r=0,o=0,l=0,c=0,u=0;switch(this.#t){case 90:r=t/e,o=-e/t,c=e;break;case 180:n=-1,l=-1,c=e,u=t;break;case 270:r=-t/e,o=e/t,u=t;break;default:return""}return`matrix(${n} ${r} ${o} ${l} ${he.svgRound(c)} ${he.svgRound(u)})`}getPathResizingSVGProperties([e,t,n,r]){const[o,l]=this.#l(),[c,u,h,f]=this.#e;if(Math.abs(h-o)<=he.PRECISION||Math.abs(f-l)<=he.PRECISION){const b=e+n/2-(c+h/2),w=t+r/2-(u+f/2);return{path:{"transform-origin":`${he.svgRound(e)} ${he.svgRound(t)}`,transform:`${this.rotationTransform} translate(${b} ${w})`}}}const p=(n-2*o)/(h-2*o),y=(r-2*l)/(f-2*l),x=h/n,_=f/r;return{path:{"transform-origin":`${he.svgRound(c)} ${he.svgRound(u)}`,transform:`${this.rotationTransform} scale(${x} ${_}) translate(${he.svgRound(o)} ${he.svgRound(l)}) scale(${p} ${y}) translate(${he.svgRound(-o)} ${he.svgRound(-l)})`}}}getPathResizedSVGProperties([e,t,n,r]){const[o,l]=this.#l(),c=this.#e,[u,h,f,p]=c;if(c[0]=e,c[1]=t,c[2]=n,c[3]=r,Math.abs(f-o)<=he.PRECISION||Math.abs(p-l)<=he.PRECISION){const w=e+n/2-(u+f/2),E=t+r/2-(h+p/2);for(const{line:A,points:C}of this.#n)he._translate(A,w,E,A),he._translate(C,w,E,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${he.svgRound(e)} ${he.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const y=(n-2*o)/(f-2*o),x=(r-2*l)/(p-2*l),_=-y*(u+o)+e+o,b=-x*(h+l)+t+l;if(y!==1||x!==1||_!==0||b!==0)for(const{line:w,points:E}of this.#n)he._rescale(w,_,b,y,x,w),he._rescale(E,_,b,y,x,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${he.svgRound(e)} ${he.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,t],n){const[r,o]=n,l=this.#e,c=e-l[0],u=t-l[1];if(this.#o===r&&this.#s===o)for(const{line:h,points:f}of this.#n)he._translate(h,c,u,h),he._translate(f,c,u,f);else{const h=this.#o/r,f=this.#s/o;this.#o=r,this.#s=o;for(const{line:p,points:y}of this.#n)he._rescale(p,c,u,h,f,p),he._rescale(y,c,u,h,f,y);l[2]*=h,l[3]*=f}return l[0]=e,l[1]=t,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${he.svgRound(e)} ${he.svgRound(t)}`}}}get defaultSVGProperties(){const e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${he.svgRound(e[0])} ${he.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}class ku extends hS{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:be._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??=this["stroke-width"],t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new ku(this._viewParameters);return e.updateAll(this),e}}class Rp extends _e{static _type="ink";static _editorType=Ae.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,t){be.initialize(e,t),this._defaultDrawingOptions=new ku(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return Re(this,"typesMap",new Map([[Me.INK_THICKNESS,"stroke-width"],[Me.INK_COLOR,"stroke"],[Me.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,n,r,o){return new sO(e,t,n,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,n,r,o,l){return Ta.deserialize(e,t,n,r,o,l)}static async deserialize(e,t,n){let r=null;if(e instanceof kp){const{data:{inkLists:l,rect:c,rotation:u,id:h,color:f,opacity:p,borderStyle:{rawWidth:y},popupRef:x,richText:_,contentsObj:b,creationDate:w,modificationDate:E},parent:{page:{pageNumber:A}}}=e;r=e={annotationType:Ae.INK,color:Array.from(f),thickness:y,opacity:p,paths:{points:l},boxes:null,pageIndex:A-1,rect:c.slice(0),rotation:u,annotationElementId:h,id:h,deleted:!1,popupRef:x,richText:_,comment:b?.str||null,creationDate:w,modificationDate:E}}const o=await super.deserialize(e,t,n);return o._initialData=r,e.comment&&o.setCommentData(e),o}get toolbarButtons(){return this._colorPicker||=new ua(this),[["colorPicker",this._colorPicker]]}get colorType(){return Me.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:n}=this;t.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:t,opacity:n}){this._drawingOptions=Rp.getDefaultDrawingOptions({stroke:fe.makeHexColor(...e),"stroke-width":t,"stroke-opacity":n})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:n}=this.serializeDraw(e),{_drawingOptions:{stroke:r,"stroke-opacity":o,"stroke-width":l}}=this,c=Object.assign(super.serialize(e),{color:be._colorManager.convert(r),opacity:o,thickness:l,paths:{lines:t,points:n}});return this.addComment(c),e?(c.isCopy=!0,c):this.annotationElementId&&!this.#e(c)?null:(c.id=this.annotationElementId,c)}#e(e){const{color:t,thickness:n,opacity:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((l,c)=>l!==t[c])||e.thickness!==n||e.opacity!==r||e.pageIndex!==o}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:t,rect:n}=this.serializeDraw(!1);return e.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:t,popup:this.comment}),null}}class Bf extends Ta{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Bc=8,$o=3;class _s{static#e={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#t(e,t,n,r){return n-=e,r-=t,n===0?r>0?0:4:n===1?r+6:2-r}static#r=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(e,t,n,r,o,l,c){const u=this.#t(n,r,o,l);for(let h=0;h<8;h++){const f=(-h+u-c+16)%8,p=this.#r[2*f],y=this.#r[2*f+1];if(e[(n+p)*t+(r+y)]!==0)return f}return-1}static#o(e,t,n,r,o,l,c){const u=this.#t(n,r,o,l);for(let h=0;h<8;h++){const f=(h+u+c+16)%8,p=this.#r[2*f],y=this.#r[2*f+1];if(e[(n+p)*t+(r+y)]!==0)return f}return-1}static#s(e,t,n,r){const o=e.length,l=new Int32Array(o);for(let f=0;f<o;f++)l[f]=e[f]<=r?1:0;for(let f=1;f<n-1;f++)l[f*t]=l[f*t+t-1]=0;for(let f=0;f<t;f++)l[f]=l[t*n-1-f]=0;let c=1,u;const h=[];for(let f=1;f<n-1;f++){u=1;for(let p=1;p<t-1;p++){const y=f*t+p,x=l[y];if(x===0)continue;let _=f,b=p;if(x===1&&l[y-1]===0)c+=1,b-=1;else if(x>=1&&l[y+1]===0)c+=1,b+=1,x>1&&(u=x);else{x!==1&&(u=Math.abs(x));continue}const w=[p,f],E=b===p+1,A={isHole:E,points:w,id:c,parent:0};h.push(A);let C;for(const Y of h)if(Y.id===u){C=Y;break}C?C.isHole?A.parent=E?C.parent:u:A.parent=E?u:C.parent:A.parent=E?u:0;const k=this.#n(l,t,f,p,_,b,0);if(k===-1){l[y]=-c,l[y]!==1&&(u=Math.abs(l[y]));continue}let N=this.#r[2*k],R=this.#r[2*k+1];const D=f+N,j=p+R;_=D,b=j;let z=f,q=p;for(;;){const Y=this.#o(l,t,z,q,_,b,1);N=this.#r[2*Y],R=this.#r[2*Y+1];const ne=z+N,ie=q+R;w.push(ie,ne);const ee=z*t+q;if(l[ee+1]===0?l[ee]=-c:l[ee]===1&&(l[ee]=c),ne===f&&ie===p&&z===D&&q===j){l[y]!==1&&(u=Math.abs(l[y]));break}else _=z,b=q,z=ne,q=ie}}}return h}static#i(e,t,n,r){if(n-t<=4){for(let D=t;D<n-2;D+=2)r.push(e[D],e[D+1]);return}const o=e[t],l=e[t+1],c=e[n-4]-o,u=e[n-3]-l,h=Math.hypot(c,u),f=c/h,p=u/h,y=f*l-p*o,x=u/c,_=1/h,b=Math.atan(x),w=Math.cos(b),E=Math.sin(b),A=_*(Math.abs(w)+Math.abs(E)),C=_*(1-A+A**2),k=Math.max(Math.atan(Math.abs(E+w)*C),Math.atan(Math.abs(E-w)*C));let N=0,R=t;for(let D=t+2;D<n-2;D+=2){const j=Math.abs(y-f*e[D+1]+p*e[D]);j>N&&(R=D,N=j)}N>(h*k)**2?(this.#i(e,t,R+2,r),this.#i(e,R,n,r)):r.push(o,l)}static#a(e){const t=[],n=e.length;return this.#i(e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t}static#c(e,t,n,r,o,l){const c=new Float32Array(l**2),u=-2*r**2,h=l>>1;for(let b=0;b<l;b++){const w=(b-h)**2;for(let E=0;E<l;E++)c[b*l+E]=Math.exp((w+(E-h)**2)/u)}const f=new Float32Array(256),p=-2*o**2;for(let b=0;b<256;b++)f[b]=Math.exp(b**2/p);const y=e.length,x=new Uint8Array(y),_=new Uint32Array(256);for(let b=0;b<n;b++)for(let w=0;w<t;w++){const E=b*t+w,A=e[E];let C=0,k=0;for(let R=0;R<l;R++){const D=b+R-h;if(!(D<0||D>=n))for(let j=0;j<l;j++){const z=w+j-h;if(z<0||z>=t)continue;const q=e[D*t+z],Y=c[R*l+j]*f[Math.abs(q-A)];C+=q*Y,k+=Y}}const N=x[E]=Math.round(C/k);_[N]++}return[x,_]}static#l(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t}static#h(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let r=-1/0,o=1/0;for(let c=0,u=n.length;c<u;c++){const h=n[c]=e[c<<2];r=Math.max(r,h),o=Math.min(o,h)}const l=255/(r-o);for(let c=0,u=n.length;c<u;c++)n[c]=(n[c]-o)*l;return n}static#d(e){let t,n=-1/0,r=-1/0;const o=e.findIndex(u=>u!==0);let l=o,c=o;for(t=o;t<256;t++){const u=e[t];u>n&&(t-l>r&&(r=t-l,c=t-1),n=u,l=t)}for(t=c-1;t>=0&&!(e[t]>e[t+1]);t--);return t}static#f(e){const t=e,{width:n,height:r}=e,{maxDim:o}=this.#e;let l=n,c=r;if(n>o||r>o){let y=n,x=r,_=Math.log2(Math.max(n,r)/o);const b=Math.floor(_);_=_===b?b-1:b;for(let E=0;E<_;E++){l=Math.ceil(y/2),c=Math.ceil(x/2);const A=new OffscreenCanvas(l,c);A.getContext("2d").drawImage(e,0,0,y,x,0,0,l,c),y=l,x=c,e!==t&&e.close(),e=A.transferToImageBitmap()}const w=Math.min(o/l,o/c);l=Math.round(l*w),c=Math.round(c*w)}const h=new OffscreenCanvas(l,c).getContext("2d",{willReadFrequently:!0});h.fillStyle="white",h.fillRect(0,0,l,c),h.filter="grayscale(1)",h.drawImage(e,0,0,e.width,e.height,0,0,l,c);const f=h.getImageData(0,0,l,c).data;return[this.#h(f),l,c]}static extractContoursFromText(e,{fontFamily:t,fontStyle:n,fontWeight:r},o,l,c,u){let h=new OffscreenCanvas(1,1),f=h.getContext("2d",{alpha:!1});const p=200,y=f.font=`${n} ${r} ${p}px ${t}`,{actualBoundingBoxLeft:x,actualBoundingBoxRight:_,actualBoundingBoxAscent:b,actualBoundingBoxDescent:w,fontBoundingBoxAscent:E,fontBoundingBoxDescent:A,width:C}=f.measureText(e),k=1.5,N=Math.ceil(Math.max(Math.abs(x)+Math.abs(_)||0,C)*k),R=Math.ceil(Math.max(Math.abs(b)+Math.abs(w)||p,Math.abs(E)+Math.abs(A)||p)*k);h=new OffscreenCanvas(N,R),f=h.getContext("2d",{alpha:!0,willReadFrequently:!0}),f.font=y,f.filter="grayscale(1)",f.fillStyle="white",f.fillRect(0,0,N,R),f.fillStyle="black",f.fillText(e,N*(k-1)/2,R*(3-k)/2);const D=this.#h(f.getImageData(0,0,N,R).data),j=this.#l(D),z=this.#d(j),q=this.#s(D,N,R,z);return this.processDrawnLines({lines:{curves:q,width:N,height:R},pageWidth:o,pageHeight:l,rotation:c,innerMargin:u,mustSmooth:!0,areContours:!0})}static process(e,t,n,r,o){const[l,c,u]=this.#f(e),[h,f]=this.#c(l,c,u,Math.hypot(c,u)*this.#e.sigmaSFactor,this.#e.sigmaR,this.#e.kernelSize),p=this.#d(f),y=this.#s(h,c,u,p);return this.processDrawnLines({lines:{curves:y,width:c,height:u},pageWidth:t,pageHeight:n,rotation:r,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:r,innerMargin:o,mustSmooth:l,areContours:c}){r%180!==0&&([t,n]=[n,t]);const{curves:u,width:h,height:f}=e,p=e.thickness??0,y=[],x=Math.min(t/h,n/f),_=x/t,b=x/n,w=[];for(const{points:A}of u){const C=l?this.#a(A):A;if(!C)continue;w.push(C);const k=C.length,N=new Float32Array(k),R=new Float32Array(3*(k===2?2:k-2));if(y.push({line:R,points:N}),k===2){N[0]=C[0]*_,N[1]=C[1]*b,R.set([NaN,NaN,NaN,NaN,N[0],N[1]],0);continue}let[D,j,z,q]=C;D*=_,j*=b,z*=_,q*=b,N.set([D,j,z,q],0),R.set([NaN,NaN,NaN,NaN,D,j],0);for(let Y=4;Y<k;Y+=2){const ne=N[Y]=C[Y]*_,ie=N[Y+1]=C[Y+1]*b;R.set(he.createBezierPoints(D,j,z,q,ne,ie),(Y-2)*3),[D,j,z,q]=[z,q,ne,ie]}}if(y.length===0)return null;const E=c?new Bf:new Ta;return E.build(y,t,n,1,r,c?0:p,o),{outline:E,newCurves:w,areContours:c,thickness:p,width:h,height:f}}static async compressSignature({outlines:e,areContours:t,thickness:n,width:r,height:o}){let l=1/0,c=-1/0,u=0;for(const C of e){u+=C.length;for(let k=2,N=C.length;k<N;k++){const R=C[k]-C[k-2];l=Math.min(l,R),c=Math.max(c,R)}}let h;l>=-128&&c<=127?h=Int8Array:l>=-32768&&c<=32767?h=Int16Array:h=Int32Array;const f=e.length,p=Bc+$o*f,y=new Uint32Array(p);let x=0;y[x++]=p*Uint32Array.BYTES_PER_ELEMENT+(u-2*f)*h.BYTES_PER_ELEMENT,y[x++]=0,y[x++]=r,y[x++]=o,y[x++]=t?0:1,y[x++]=Math.max(0,Math.floor(n??0)),y[x++]=f,y[x++]=h.BYTES_PER_ELEMENT;for(const C of e)y[x++]=C.length-2,y[x++]=C[0],y[x++]=C[1];const _=new CompressionStream("deflate-raw"),b=_.writable.getWriter();await b.ready,b.write(y);const w=h.prototype.constructor;for(const C of e){const k=new w(C.length-2);for(let N=2,R=C.length;N<R;N++)k[N-2]=C[N]-C[N-2];b.write(k)}b.close();const E=await new Response(_.readable).arrayBuffer(),A=new Uint8Array(E);return Dx(A)}static async decompressSignature(e){try{const t=PN(e),{readable:n,writable:r}=new DecompressionStream("deflate-raw"),o=r.getWriter();await o.ready,o.write(t).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let l=null,c=0;for await(const C of n)l||=new Uint8Array(new Uint32Array(C.buffer,0,4)[0]),l.set(C,c),c+=C.length;const u=new Uint32Array(l.buffer,0,l.length>>2),h=u[1];if(h!==0)throw new Error(`Invalid version: ${h}`);const f=u[2],p=u[3],y=u[4]===0,x=u[5],_=u[6],b=u[7],w=[],E=(Bc+$o*_)*Uint32Array.BYTES_PER_ELEMENT;let A;switch(b){case Int8Array.BYTES_PER_ELEMENT:A=new Int8Array(l.buffer,E);break;case Int16Array.BYTES_PER_ELEMENT:A=new Int16Array(l.buffer,E);break;case Int32Array.BYTES_PER_ELEMENT:A=new Int32Array(l.buffer,E);break}c=0;for(let C=0;C<_;C++){const k=u[$o*C+Bc],N=new Float32Array(k+2);w.push(N);for(let R=0;R<$o-1;R++)N[R]=u[$o*C+Bc+R+1];for(let R=0;R<k;R++)N[R+2]=N[R]+A[c++]}return{areContours:y,thickness:x,outlines:w,width:f,height:p}}catch(t){return Ce(`decompressSignature: ${t}`),null}}}class Np extends hS{constructor(){super(),super.updateProperties({fill:be._defaultLineColor,"stroke-width":0})}clone(){const e=new Np;return e.updateAll(this),e}}class Dp extends ku{constructor(e){super(e),super.updateProperties({stroke:be._defaultLineColor,"stroke-width":1})}clone(){const e=new Dp(this._viewParameters);return e.updateAll(this),e}}class Zn extends _e{#e=!1;#t=null;#r=null;#n=null;static _type="signature";static _editorType=Ae.SIGNATURE;static _defaultDrawingOptions=null;constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#r=e.signatureData||null,this.#t=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,t){be.initialize(e,t),this._defaultDrawingOptions=new Np,this._defaultDrawnSignatureOptions=new Dp(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!1}static get typesMap(){return Re(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#t}}static computeTelemetryFinalData(e){const t=e.get("hasDescription");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,t;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,e=this.x,t=this.y),super.render(),this._drawId===null)if(this.#r){const{lines:r,mustSmooth:o,areContours:l,description:c,uuid:u,heightInPage:h}=this.#r,{rawDims:{pageWidth:f,pageHeight:p},rotation:y}=this.parent.viewport,x=_s.processDrawnLines({lines:r,pageWidth:f,pageHeight:p,rotation:y,innerMargin:Zn._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(x,h,c,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#t||""}));return n&&(this._isCopy=!0,this._moveAfterPaste(e,t)),this.div}setUuid(e){this.#n=e,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#t}set description(e){this.#t=e,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(t=>{t?.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:t,thickness:n,width:r,height:o}=this.#r,l=Math.max(r,o),c=_s.processDrawnLines({lines:{curves:e.map(u=>({points:u})),thickness:n,width:r,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:t});return{areContours:t,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,t,n,r){const{x:o,y:l}=this,{outline:c}=this.#r=e;this.#e=c instanceof Bf,this.description=n;let u;this.#e?u=Zn.getDefaultDrawingOptions():(u=Zn._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:u});const[,h]=this.pageDimensions;let f=t/h;f=f>=1?.5:f,this.width*=f/this.height,this.width>=1&&(f*=.9/this.width,this.width=.9),this.height=f,this.setDims(),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:r}=this.parent.viewport;return _s.process(e,t,n,r,Zn._INNER_MARGIN)}getFromText(e,t){const{rawDims:{pageWidth:n,pageHeight:r},rotation:o}=this.parent.viewport;return _s.extractContoursFromText(e,t,n,r,o,Zn._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:r}=this.parent.viewport;return _s.processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:r,innerMargin:Zn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:t}){e?this._drawingOptions=Zn.getDefaultDrawingOptions():(this._drawingOptions=Zn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":t}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:t,points:n}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":r}}=this,o=Object.assign(super.serialize(e),{isSignature:!0,areContours:this.#e,color:[0,0,0],thickness:this.#e?0:r});return this.addComment(o),e?(o.paths={lines:t,points:n},o.uuid=this.#n,o.isCopy=!0):o.lines=t,this.#t&&(o.accessibilityData={type:"Figure",alt:this.#t}),o}static deserializeDraw(e,t,n,r,o,l){return l.areContours?Bf.deserialize(e,t,n,r,o,l):Ta.deserialize(e,t,n,r,o,l)}static async deserialize(e,t,n){const r=await super.deserialize(e,t,n);return r.#e=e.areContours,r.description=e.accessibilityData?.alt||"",r.#n=e.uuid,r}}class iO extends be{#e=null;#t=null;#r=null;#n=null;#o=null;#s="";#i=null;#a=!1;#c=null;#l=!1;#h=!1;static _type="stamp";static _editorType=Ae.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#n=e.bitmapUrl,this.#o=e.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,t){be.initialize(e,t)}static isHandlingMimeForPasting(e){return ou.includes(e)}static paste(e,t){t.pasteEditor({mode:Ae.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#d(e,t=!1){if(!e){this.remove();return}this.#e=e.bitmap,t||(this.#t=e.id,this.#l=e.isSvg),e.file&&(this.#s=e.file.name),this.#p()}#f(){if(this.#r=null,this._uiManager.enableWaiting(!1),!!this.#i){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,t=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:l}=e||this.copyCanvas(null,null,!0).imageData,c=await n.guess({name:"altText",request:{data:r,width:o,height:l,channels:r.length/(o*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),t&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}#g(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(n=>this.#d(n,!0)).finally(()=>this.#f());return}if(this.#n){const n=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#r=this._uiManager.imageManager.getFromUrl(n).then(r=>this.#d(r)).finally(()=>this.#f());return}if(this.#o){const n=this.#o;this.#o=null,this._uiManager.enableWaiting(!0),this.#r=this._uiManager.imageManager.getFromFile(n).then(r=>this.#d(r)).finally(()=>this.#f());return}const e=document.createElement("input");e.type="file",e.accept=ou.join(",");const t=this._uiManager._signal;this.#r=new Promise(n=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#d(r)}n()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),n()},{signal:t})}).finally(()=>this.#f()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#i?.remove(),this.#i=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#g();return}super.rebuild(),this.div!==null&&(this.#t&&this.#i===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#r||this.#e||this.#n||this.#o||this.#t||this.#a)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;return this._isCopy&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#a||(this.#e?this.#p():this.#g()),this._isCopy&&this._moveAfterPaste(e,t),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,t){const{id:n,bitmap:r}=this._uiManager.imageManager.getFromCanvas(e,t);t.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(this.#t=n,r&&(this.#e=r),this.#a=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const e=200;this.#c=setTimeout(()=>{this.#c=null,this.#m()},e)}#p(){const{div:e}=this;let{width:t,height:n}=this.#e;const[r,o]=this.pageDimensions,l=.75;if(this.width)t=this.width*r,n=this.height*o;else if(t>l*r||n>l*o){const u=Math.min(l*r/t,l*o/n);t*=u,n*=u}this._uiManager.enableWaiting(!1);const c=this.#i=document.createElement("canvas");c.setAttribute("role","img"),this.addContainer(c),this.width=t/r,this.height=n/o,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#m(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&this.div.setAttribute("aria-description",this.#s),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(e,t,n=!1){e||(e=224);const{width:r,height:o}=this.#e,l=new Un;let c=this.#e,u=r,h=o,f=null;if(t){if(r>t||o>t){const R=Math.min(t/r,t/o);u=Math.floor(r*R),h=Math.floor(o*R)}f=document.createElement("canvas");const y=f.width=Math.ceil(u*l.sx),x=f.height=Math.ceil(h*l.sy);this.#l||(c=this.#u(y,x));const _=f.getContext("2d");_.filter=this._uiManager.hcmFilter;let b="white",w="#cfcfd8";this._uiManager.hcmFilter!=="none"?w="black":DN.isDarkMode&&(b="#8f8f9d",w="#42414d");const E=15,A=E*l.sx,C=E*l.sy,k=new OffscreenCanvas(A*2,C*2),N=k.getContext("2d");N.fillStyle=b,N.fillRect(0,0,A*2,C*2),N.fillStyle=w,N.fillRect(0,0,A,C),N.fillRect(A,C,A,C),_.fillStyle=_.createPattern(k,"repeat"),_.fillRect(0,0,y,x),_.drawImage(c,0,0,c.width,c.height,0,0,y,x)}let p=null;if(n){let y,x;if(l.symmetric&&c.width<e&&c.height<e)y=c.width,x=c.height;else if(c=this.#e,r>e||o>e){const w=Math.min(e/r,e/o);y=Math.floor(r*w),x=Math.floor(o*w),this.#l||(c=this.#u(y,x))}const b=new OffscreenCanvas(y,x).getContext("2d",{willReadFrequently:!0});b.drawImage(c,0,0,c.width,c.height,0,0,y,x),p={width:y,height:x,data:b.getImageData(0,0,y,x).data}}return{canvas:f,width:u,height:h,imageData:p}}#u(e,t){const{width:n,height:r}=this.#e;let o=n,l=r,c=this.#e;for(;o>2*e||l>2*t;){const u=o,h=l;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*t&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const f=new OffscreenCanvas(o,l);f.getContext("2d").drawImage(c,0,0,u,h,0,0,o,l),c=f.transferToImageBitmap()}return c}#m(){const[e,t]=this.parentDimensions,{width:n,height:r}=this,o=new Un,l=Math.ceil(n*e*o.sx),c=Math.ceil(r*t*o.sy),u=this.#i;if(!u||u.width===l&&u.height===c)return;u.width=l,u.height=c;const h=this.#l?this.#e:this.#u(l,c),f=u.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(h,0,0,h.width,h.height,0,0,l,c)}#y(e){if(e){if(this.#l){const r=this._uiManager.imageManager.getSvgUrl(this.#t);if(r)return r}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#e,t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#l){const[t,n]=this.pageDimensions,r=Math.round(this.width*t*Ds.PDF_TO_CSS_UNITS),o=Math.round(this.height*n*Ds.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(r,o);return l.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,r,o),l.transferToImageBitmap()}return structuredClone(this.#e)}static async deserialize(e,t,n){let r=null,o=!1;if(e instanceof cS){const{data:{rect:b,rotation:w,id:E,structParent:A,popupRef:C,richText:k,contentsObj:N,creationDate:R,modificationDate:D},container:j,parent:{page:{pageNumber:z}},canvas:q}=e;let Y,ne;q?(delete e.canvas,{id:Y,bitmap:ne}=n.imageManager.getFromCanvas(j.id,q),q.remove()):(o=!0,e._hasNoCanvas=!0);const ie=(await t._structTree.getAriaAttributes(`${mp}${E}`))?.get("aria-label")||"";r=e={annotationType:Ae.STAMP,bitmapId:Y,bitmap:ne,pageIndex:z-1,rect:b.slice(0),rotation:w,annotationElementId:E,id:E,deleted:!1,accessibilityData:{decorative:!1,altText:ie},isSvg:!1,structParent:A,popupRef:C,richText:k,comment:N?.str||null,creationDate:R,modificationDate:D}}const l=await super.deserialize(e,t,n),{rect:c,bitmap:u,bitmapUrl:h,bitmapId:f,isSvg:p,accessibilityData:y}=e;o?(n.addMissingCanvas(e.id,l),l.#a=!0):f&&n.imageManager.isValidId(f)?(l.#t=f,u&&(l.#e=u)):l.#n=h,l.#l=p;const[x,_]=l.pageDimensions;return l.width=(c[2]-c[0])/x,l.height=(c[3]-c[1])/_,y&&(l.altTextData=y),l._initialData=r,e.comment&&l.setCommentData(e),l.#h=!!r,l}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Object.assign(super.serialize(e),{bitmapId:this.#t,isSvg:this.#l});if(this.addComment(n),e)return n.bitmapUrl=this.#y(!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(n.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=this.#b(n);return c.isSame?null:(c.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1,n.id=this.annotationElementId,delete n.bitmapId,n)}if(t===null)return n;t.stamps||=new Map;const l=this.#l?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:l,serialized:n}),n.bitmap=this.#y(!1);else if(this.#l){const c=t.stamps.get(this.#t);l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=this.#y(!1))}return n}#b(e){const{pageIndex:t,accessibilityData:{altText:n}}=this._initialData,r=e.pageIndex===t,o=(e.accessibilityData?.alt||"")===n;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class tr{#e;#t=!1;#r=null;#n=null;#o=null;#s=new Map;#i=!1;#a=!1;#c=!1;#l=null;#h=null;#d=null;#f=null;#g=null;#p=-1;#u;static _initialized=!1;static#m=new Map([At,Rp,iO,ht,Zn].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:r,accessibilityManager:o,annotationLayer:l,drawLayer:c,textLayer:u,viewport:h,l10n:f}){const p=[...tr.#m.values()];if(!tr._initialized){tr._initialized=!0;for(const y of p)y.initialize(f,e)}e.registerEditorTypes(p),this.#u=e,this.pageIndex=t,this.div=n,this.#e=o,this.#r=l,this.viewport=h,this.#d=u,this.drawLayer=c,this._structTree=r,this.#u.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===Ae.NONE}updateToolbar(e){this.#u.updateToolbar(e)}updateMode(e=this.#u.getMode()){switch(this.#w(),e){case Ae.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Ae.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Ae.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===Ae.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const n of tr.#m.values())t.toggle(`${n._type}Editing`,e===n._editorType)}this.div.hidden=!1}hasTextLayer(e){return e===this.#d?.div}setEditingState(e){this.#u.setEditingState(e)}addCommands(e){this.#u.addCommands(e)}cleanUndoStack(e){this.#u.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#r?.div.classList.toggle("disabled",!e)}get#y(){return this.#s.size!==0?this.#s.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#g?.abort(),this.#g=null;const e=new Set;for(const n of this.#y)n.enableEditing(),n.show(!0),n.annotationElementId&&(this.#u.removeChangedExistingAnnotation(n),e.add(n.annotationElementId));const t=this.#r;if(t)for(const n of t.getEditableAnnotations()){if(n.hide(),this.#u.isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;const r=await this.deserialize(n);r&&(this.addOrRebuild(r),r.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#a=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#d&&!this.#g){this.#g=new AbortController;const n=this.#u.combinedSignal(this.#g);this.#d.div.addEventListener("pointerdown",r=>{const{clientX:l,clientY:c,timeStamp:u}=r,h=this.#p;if(u-h>500){this.#p=u;return}this.#p=-1;const{classList:f}=this.div;f.toggle("getElements",!0);const p=document.elementsFromPoint(l,c);if(f.toggle("getElements",!1),!this.div.contains(p[0]))return;let y;const x=new RegExp(`^${oa}[0-9]+$`);for(const b of p)if(x.test(b.id)){y=b.id;break}if(!y)return;const _=this.#s.get(y);_?.annotationElementId===null&&(r.stopPropagation(),r.preventDefault(),_.dblclick(r))},{signal:n,capture:!0})}const e=this.#r;if(e){const n=new Map,r=new Map;for(const l of this.#y){if(l.disableEditing(),!l.annotationElementId){l.updateFakeAnnotationElement(e);continue}if(l.serialize()!==null){n.set(l.annotationElementId,l);continue}else r.set(l.annotationElementId,l);this.getEditableAnnotation(l.annotationElementId)?.show(),l.remove()}const o=e.getEditableAnnotations();for(const l of o){const{id:c}=l.data;if(this.#u.isDeletedAnnotationElement(c)){l.updateEdited({deleted:!0});continue}let u=r.get(c);if(u){u.resetAnnotationElement(l),u.show(!1),l.show();continue}u=n.get(c),u&&(this.#u.addChangedExistingAnnotation(u),u.renderAnnotationElement(l)&&u.show(!1)),l.show()}}this.#w(),this.isEmpty&&(this.div.hidden=!0);const{classList:t}=this.div;for(const n of tr.#m.values())t.remove(`${n._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#a=!1}getEditableAnnotation(e){return this.#r?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#u.getActive()!==e&&this.#u.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#d?.div&&!this.#f){this.#f=new AbortController;const e=this.#u.combinedSignal(this.#f);this.#d.div.addEventListener("pointerdown",this.#b.bind(this),{signal:e}),this.#d.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#d?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#d.div.classList.remove("highlighting"))}#b(e){this.#u.unselectAll();const{target:t}=e;if(t===this.#d.div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&this.#d.div.contains(t)){const{isMac:n}=Tt.platform;if(e.button!==0||e.ctrlKey&&n)return;this.#u.showAllEditors("highlight",!0,!0),this.#d.div.classList.add("free"),this.toggleDrawing(),ht.startHighlighting(this,this.#u.direction==="ltr",{target:this.#d.div,x:e.x,y:e.y}),this.#d.div.addEventListener("pointerup",()=>{this.#d.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),e.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const e=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){this.#n?.abort(),this.#n=null}attach(e){this.#s.set(e.id,e);const{annotationElementId:t}=e;t&&this.#u.isDeletedAnnotationElement(t)&&this.#u.removeDeletedAnnotationElement(e)}detach(e){this.#s.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#a&&e.annotationElementId&&this.#u.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#u.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#u.addDeletedAnnotationElement(e.annotationElementId),be.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#u.addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#c),this.#u.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!this.#o&&(e._focusEventsAllowed=!1,this.#o=setTimeout(()=>{this.#o=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),t.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getEditorByUID(e){for(const t of this.#s.values())if(t.uid===e)return t;return null}getNextId(){return this.#u.getId()}get#v(){return tr.#m.get(this.#u.getMode())}combinedSignal(e){return this.#u.combinedSignal(e)}#A(e){const t=this.#v;return t?new t.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#v?.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await this.#u.updateMode(e.mode);const{offsetX:n,offsetY:r}=this.#_(),o=this.getNextId(),l=this.#A({parent:this,id:o,x:n,y:r,uiManager:this.#u,isCentered:!0,...t});l&&this.add(l)}async deserialize(e){return await tr.#m.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#u)||null}createAndAddNewEditor(e,t,n={}){const r=this.getNextId(),o=this.#A({parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:this.#u,isCentered:t,...n});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}#_(){const{x:e,y:t,width:n,height:r}=this.boundingClientRect,o=Math.max(0,e),l=Math.max(0,t),c=Math.min(window.innerWidth,e+n),u=Math.min(window.innerHeight,t+r),h=(o+c)/2-e,f=(l+u)/2-t,[p,y]=this.viewport.rotation%180===0?[h,f]:[f,h];return{offsetX:p,offsetY:y}}addNewEditor(e={}){this.createAndAddNewEditor(this.#_(),!0,e)}setSelected(e){this.#u.setSelected(e)}toggleSelected(e){this.#u.toggleSelected(e)}unselect(e){this.#u.unselect(e)}pointerup(e){const{isMac:t}=Tt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!this.#i||(this.#i=!1,this.#v?.isDrawer&&this.#v.supportMultipleDrawings))return;if(!this.#t){this.#t=!0;return}const n=this.#u.getMode();if(n===Ae.STAMP||n===Ae.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(this.#u.getMode()===Ae.HIGHLIGHT&&this.enableTextSelection(),this.#i){this.#i=!1;return}const{isMac:t}=Tt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(this.#i=!0,this.#v?.isDrawer){this.startDrawingSession(e);return}const n=this.#u.getActive();this.#t=!n||n.isEmpty()}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),this.#l){this.#v.startDrawing(this,this.#u,!1,e);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const t=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(this.#h=null,this.commitOrRemove())},{signal:t}),this.#v.startDrawing(this,this.#u,!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&(this.#h=t);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(e=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#h=null,this.#v.endDrawing(e)):null}findNewParent(e,t,n){const r=this.#u.findParent(t,n);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#v.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#o&&(clearTimeout(this.#o),this.#o=null);for(const e of this.#s.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#s.clear(),this.#u.removeLayer(this)}#w(){for(const e of this.#s.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,rs(this.div,e);for(const t of this.#u.getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){this.#u.commitOrRemove(),this.#w();const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,rs(this.div,{rotation:n}),t!==n)for(const r of this.#s.values())r.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return this.#u.viewParameters.realScale}}class Ct{#e=null;#t=new Map;#r=new Map;static#n=0;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#t.size>0)for(const t of this.#t.values())t.remove(),e.append(t);this.#e=e}}static get _svgFactory(){return Re(this,"_svgFactory",new da)}static#o(e,[t,n,r,o]){const{style:l}=e;l.top=`${100*n}%`,l.left=`${100*t}%`,l.width=`${100*r}%`,l.height=`${100*o}%`}#s(){const e=Ct._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),e}#i(e,t){const n=Ct._svgFactory.createElement("clipPath");e.append(n);const r=`clip_${t}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const o=Ct._svgFactory.createElement("use");return n.append(o),o.setAttribute("href",`#${t}`),o.classList.add("clip"),r}#a(e,t){for(const[n,r]of Object.entries(t))r===null?e.removeAttribute(n):e.setAttribute(n,r)}draw(e,t=!1,n=!1){const r=Ct.#n++,o=this.#s(),l=Ct._svgFactory.createElement("defs");o.append(l);const c=Ct._svgFactory.createElement("path");l.append(c);const u=`path_p${this.pageIndex}_${r}`;c.setAttribute("id",u),c.setAttribute("vector-effect","non-scaling-stroke"),t&&this.#r.set(r,c);const h=n?this.#i(l,u):null,f=Ct._svgFactory.createElement("use");return o.append(f),f.setAttribute("href",`#${u}`),this.updateProperties(o,e),this.#t.set(r,o),{id:r,clipPathId:`url(#${h})`}}drawOutline(e,t){const n=Ct.#n++,r=this.#s(),o=Ct._svgFactory.createElement("defs");r.append(o);const l=Ct._svgFactory.createElement("path");o.append(l);const c=`path_p${this.pageIndex}_${n}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke");let u;if(t){const p=Ct._svgFactory.createElement("mask");o.append(p),u=`mask_p${this.pageIndex}_${n}`,p.setAttribute("id",u),p.setAttribute("maskUnits","objectBoundingBox");const y=Ct._svgFactory.createElement("rect");p.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const x=Ct._svgFactory.createElement("use");p.append(x),x.setAttribute("href",`#${c}`),x.setAttribute("stroke","none"),x.setAttribute("fill","black"),x.setAttribute("fill-rule","nonzero"),x.classList.add("mask")}const h=Ct._svgFactory.createElement("use");r.append(h),h.setAttribute("href",`#${c}`),u&&h.setAttribute("mask",`url(#${u})`);const f=h.cloneNode();return r.append(f),h.classList.add("mainOutline"),f.classList.add("secondaryOutline"),this.updateProperties(r,e),this.#t.set(n,r),n}finalizeDraw(e,t){this.#r.delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:n,bbox:r,rootClass:o,path:l}=t,c=typeof e=="number"?this.#t.get(e):e;if(c){if(n&&this.#a(c,n),r&&Ct.#o(c,r),o){const{classList:u}=c;for(const[h,f]of Object.entries(o))u.toggle(h,f)}if(l){const h=c.firstChild.firstChild;this.#a(h,l)}}}updateParent(e,t){if(t===this)return;const n=this.#t.get(e);n&&(t.#e.append(n),this.#t.delete(e),t.#t.set(e,n))}remove(e){this.#r.delete(e),this.#e!==null&&(this.#t.get(e).remove(),this.#t.delete(e))}destroy(){this.#e=null;for(const e of this.#t.values())e.remove();this.#t.clear(),this.#r.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:Ff};globalThis.pdfjsLib={AbortException:Ar,AnnotationEditorLayer:tr,AnnotationEditorParamsType:Me,AnnotationEditorType:Ae,AnnotationEditorUIManager:Cr,AnnotationLayer:Pp,AnnotationMode:sr,AnnotationType:dt,applyOpacity:Fx,build:sS,ColorPicker:hn,createValidAbsoluteUrl:hp,CSSConstants:Ix,DOMSVGFactory:da,DrawLayer:Ct,FeatureTest:Tt,fetchData:Gi,findContrastColor:jx,getDocument:Ep,getFilenameFromUrl:Ox,getPdfFilenameFromUrl:Mx,getRGB:Yi,getUuid:pp,getXfaPageViewport:Lx,GlobalWorkerOptions:ns,ImageKind:ea,InvalidPDFException:su,isDataScheme:_a,isPdfFile:Cu,isValidExplicitDest:Hx,MathClamp:Ft,noContextMenu:pn,normalizeUnicode:Nx,OPS:ji,OutputScale:Un,PasswordResponses:Px,PDFDataRangeTransport:Cp,PDFDateString:iu,PDFWorker:Bi,PermissionFlag:kx,PixelsPerInch:Ds,RenderingCancelledException:Au,renderRichText:yp,ResponseException:aa,setLayerDimensions:rs,shadow:Re,SignatureExtractor:_s,stopEvent:st,SupportedImageMimeTypes:ou,TextLayer:ca,TouchManager:Aa,updateUrlHash:fp,Util:fe,VerbosityLevel:wa,version:rS,XfaLayer:gp};const oO=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Ar,AnnotationEditorLayer:tr,AnnotationEditorParamsType:Me,AnnotationEditorType:Ae,AnnotationEditorUIManager:Cr,AnnotationLayer:Pp,AnnotationMode:sr,AnnotationType:dt,CSSConstants:Ix,ColorPicker:hn,DOMSVGFactory:da,DrawLayer:Ct,FeatureTest:Tt,GlobalWorkerOptions:ns,ImageKind:ea,InvalidPDFException:su,MathClamp:Ft,OPS:ji,OutputScale:Un,PDFDataRangeTransport:Cp,PDFDateString:iu,PDFWorker:Bi,PasswordResponses:Px,PermissionFlag:kx,PixelsPerInch:Ds,RenderingCancelledException:Au,ResponseException:aa,SignatureExtractor:_s,SupportedImageMimeTypes:ou,TextLayer:ca,TouchManager:Aa,Util:fe,VerbosityLevel:wa,XfaLayer:gp,applyOpacity:Fx,build:sS,createValidAbsoluteUrl:hp,fetchData:Gi,findContrastColor:jx,getDocument:Ep,getFilenameFromUrl:Ox,getPdfFilenameFromUrl:Mx,getRGB:Yi,getUuid:pp,getXfaPageViewport:Lx,isDataScheme:_a,isPdfFile:Cu,isValidExplicitDest:Hx,noContextMenu:pn,normalizeUnicode:Nx,renderRichText:yp,setLayerDimensions:rs,shadow:Re,stopEvent:st,updateUrlHash:fp,version:rS},Symbol.toStringTag,{value:"Module"}));var V0=Object.prototype.hasOwnProperty;function q0(s,e,t){for(t of s.keys())if(Oi(t,e))return t}function Oi(s,e){var t,n,r;if(s===e)return!0;if(s&&e&&(t=s.constructor)===e.constructor){if(t===Date)return s.getTime()===e.getTime();if(t===RegExp)return s.toString()===e.toString();if(t===Array){if((n=s.length)===e.length)for(;n--&&Oi(s[n],e[n]););return n===-1}if(t===Set){if(s.size!==e.size)return!1;for(n of s)if(r=n,r&&typeof r=="object"&&(r=q0(e,r),!r)||!e.has(r))return!1;return!0}if(t===Map){if(s.size!==e.size)return!1;for(n of s)if(r=n[0],r&&typeof r=="object"&&(r=q0(e,r),!r)||!Oi(n[1],e.get(r)))return!1;return!0}if(t===ArrayBuffer)s=new Uint8Array(s),e=new Uint8Array(e);else if(t===DataView){if((n=s.byteLength)===e.byteLength)for(;n--&&s.getInt8(n)===e.getInt8(n););return n===-1}if(ArrayBuffer.isView(s)){if((n=s.byteLength)===e.byteLength)for(;n--&&s[n]===e[n];);return n===-1}if(!t||typeof s=="object"){n=0;for(t in s)if(V0.call(s,t)&&++n&&!V0.call(e,t)||!(t in e)||!Oi(s[t],e[t]))return!1;return Object.keys(e).length===n}}return s!==s&&e!==e}function ka(s){let e=!1;return{promise:new Promise((n,r)=>{s.then(o=>!e&&n(o)).catch(o=>!e&&r(o))}),cancel(){e=!0}}}const aO=["onCopy","onCut","onPaste"],lO=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],cO=["onFocus","onBlur"],uO=["onInput","onInvalid","onReset","onSubmit"],dO=["onLoad","onError"],hO=["onKeyDown","onKeyPress","onKeyUp"],fO=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],pO=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],mO=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],gO=["onSelect"],yO=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],vO=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],bO=["onScroll"],wO=["onWheel"],xO=["onAnimationStart","onAnimationEnd","onAnimationIteration"],SO=["onTransitionEnd"],_O=["onToggle"],EO=["onChange"],AO=[...aO,...lO,...cO,...uO,...dO,...hO,...fO,...pO,...mO,...gO,...yO,...vO,...bO,...wO,...xO,...SO,...EO,..._O];function fS(s,e){const t={};for(const n of AO){const r=s[n];r&&(e?t[n]=(o=>r(o,e(n))):t[n]=r)}return t}var CO="Invariant failed";function We(s,e){if(!s)throw new Error(CO)}var of,G0;function TO(){if(G0)return of;G0=1;var s=function(){};return of=s,of}var kO=TO();const Bt=ss(kO),pS=T.createContext(null),PO="noopener noreferrer nofollow";class RO{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return We(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){We(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}addLinkAttributes(e,t,n){e.href=t,e.rel=this.externalLinkRel||PO,e.target=n?"_blank":this.externalLinkTarget||""}goToDestination(e){return new Promise(t=>{We(this.pdfDocument),We(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{We(Array.isArray(t));const n=t[0];new Promise(r=>{We(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(o=>{r(o)}).catch(()=>{We(!1)}):typeof n=="number"?r(n):We(!1)}).then(r=>{const o=r+1;We(this.pdfViewer),We(o>=1&&o<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:r,pageNumber:o})})})}goToPage(e){const t=e-1;We(this.pdfViewer),We(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(e){this.goToDestination(e)}}function Mi({children:s,type:e}){return g.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:s})}const Y0={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function NO(s,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return s}}function Ui(){return T.useReducer(NO,{value:void 0,error:void 0})}const Pu=typeof window<"u",mS=Pu&&window.location.protocol==="file:";function DO(s){return typeof s<"u"}function Ss(s){return DO(s)&&s!==null}function OO(s){return typeof s=="string"}function MO(s){return s instanceof ArrayBuffer}function LO(s){return We(Pu),s instanceof Blob}function Uf(s){return OO(s)&&/^data:/.test(s)}function X0(s){We(Uf(s));const[e="",t=""]=s.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function IO(){return Pu&&window.devicePixelRatio||1}const gS="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function K0(){Bt(!mS,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${gS}`)}function FO(){Bt(!mS,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${gS}`)}function Ms(s){s?.cancel&&s.cancel()}function zf(s,e){return Object.defineProperty(s,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(s,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(s,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(s,"originalHeight",{get(){return this.view[3]},configurable:!0}),s}function jO(s){return s.name==="RenderingCancelledException"}function BO(s){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return t(new Error("Error while reading a file."));e(n.result)},n.onerror=r=>{if(!r.target)return t(new Error("Error while reading a file."));const{error:o}=r.target;if(!o)return t(new Error("Error while reading a file."));switch(o.code){case o.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case o.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case o.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},n.readAsArrayBuffer(s)})}const{PDFDataRangeTransport:UO}=oO,zO=(s,e)=>{switch(e){case Y0.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");s(t);break}case Y0.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");s(t);break}}};function Q0(s){return typeof s=="object"&&s!==null&&("data"in s||"range"in s||"url"in s)}const HO=T.forwardRef(function({children:e,className:t,error:n="Failed to load PDF file.",externalLinkRel:r,externalLinkTarget:o,file:l,inputRef:c,imageResourcesPath:u,loading:h="Loading PDF",noData:f="No PDF file specified.",onItemClick:p,onLoadError:y,onLoadProgress:x,onLoadSuccess:_,onPassword:b=zO,onSourceError:w,onSourceSuccess:E,options:A,renderMode:C,rotate:k,scale:N,...R},D){const[j,z]=Ui(),{value:q,error:Y}=j,[ne,ie]=Ui(),{value:ee,error:ae}=ne,G=T.useRef(new RO),X=T.useRef([]),I=T.useRef(void 0),V=T.useRef(void 0);l&&l!==I.current&&Q0(l)&&(Bt(!Oi(l,I.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),I.current=l),A&&A!==V.current&&(Bt(!Oi(A,V.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),V.current=A);const Q=T.useRef({scrollPageIntoView:De=>{const{dest:Be,pageNumber:Ke,pageIndex:Le=Ke-1}=De;if(p){p({dest:Be,pageIndex:Le,pageNumber:Ke});return}const vt=X.current[Le];if(vt){vt.scrollIntoView();return}Bt(!1,`An internal link leading to page ${Ke} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});T.useImperativeHandle(D,()=>({linkService:G,pages:X,viewer:Q}),[]);function M(){E&&E()}function W(){Y&&(Bt(!1,Y.toString()),w&&w(Y))}function oe(){z({type:"RESET"})}T.useEffect(oe,[l,z]);const ce=T.useCallback(async()=>{if(!l)return null;if(typeof l=="string")return Uf(l)?{data:X0(l)}:(K0(),{url:l});if(l instanceof UO)return{range:l};if(MO(l))return{data:l};if(Pu&&LO(l))return{data:await BO(l)};if(We(typeof l=="object"),We(Q0(l)),"url"in l&&typeof l.url=="string"){if(Uf(l.url)){const{url:De,...Be}=l;return{data:X0(De),...Be}}K0()}return l},[l]);T.useEffect(()=>{const De=ka(ce());return De.promise.then(Be=>{z({type:"RESOLVE",value:Be})}).catch(Be=>{z({type:"REJECT",error:Be})}),()=>{Ms(De)}},[ce,z]),T.useEffect(()=>{if(!(typeof q>"u")){if(q===!1){W();return}M()}},[q]);function ve(){ee&&(_&&_(ee),X.current=new Array(ee.numPages),G.current.setDocument(ee))}function we(){ae&&(Bt(!1,ae.toString()),y&&y(ae))}T.useEffect(function(){ie({type:"RESET"})},[ie,q]),T.useEffect(function(){if(!q)return;const Be=A?{...q,...A}:q,Ke=Ep(Be);x&&(Ke.onProgress=x),b&&(Ke.onPassword=b);const Le=Ke,vt=Le.promise.then(on=>{ie({type:"RESOLVE",value:on})}).catch(on=>{Le.destroyed||ie({type:"REJECT",error:on})});return()=>{vt.finally(()=>Le.destroy())}},[A,ie,q]),T.useEffect(()=>{if(!(typeof ee>"u")){if(ee===!1){we();return}ve()}},[ee]),T.useEffect(function(){G.current.setViewer(Q.current),G.current.setExternalLinkRel(r),G.current.setExternalLinkTarget(o)},[r,o]);const ge=T.useCallback((De,Be)=>{X.current[De]=Be},[]),K=T.useCallback(De=>{delete X.current[De]},[]),se=T.useMemo(()=>({imageResourcesPath:u,linkService:G.current,onItemClick:p,pdf:ee,registerPage:ge,renderMode:C,rotate:k,scale:N,unregisterPage:K}),[u,p,ee,ge,C,k,N,K]),ue=T.useMemo(()=>fS(R,()=>ee),[R,ee]);function et(){function De(Ke){return!!Ke?.pdf}if(!De(se))throw new Error("pdf is undefined");const Be=typeof e=="function"?e(se):e;return g.jsx(pS.Provider,{value:se,children:Be})}function Gt(){return l?ee==null?g.jsx(Mi,{type:"loading",children:typeof h=="function"?h():h}):ee===!1?g.jsx(Mi,{type:"error",children:typeof n=="function"?n():n}):et():g.jsx(Mi,{type:"no-data",children:typeof f=="function"?f():f})}return g.jsx("div",{className:$i("react-pdf__Document",t),ref:c,...ue,children:Gt()})});function yS(){return T.useContext(pS)}function vS(){for(var s=[],e=0;e<arguments.length;e++)s[e]=arguments[e];var t=s.filter(Boolean);if(t.length<=1){var n=t[0];return n||null}return function(o){for(var l=0,c=t;l<c.length;l++){var u=c[l];typeof u=="function"?u(o):u&&(u.current=o)}}}const bS=T.createContext(null);function Ru(){return T.useContext(bS)}function WO(){const s=yS(),e=Ru();We(e);const t={...s,...e},{imageResourcesPath:n,linkService:r,onGetAnnotationsError:o,onGetAnnotationsSuccess:l,onRenderAnnotationLayerError:c,onRenderAnnotationLayerSuccess:u,page:h,pdf:f,renderForms:p,rotate:y,scale:x=1}=t;We(f),We(h),We(r);const[_,b]=Ui(),{value:w,error:E}=_,A=T.useRef(null);Bt(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function C(){w&&l&&l(w)}function k(){E&&(Bt(!1,E.toString()),o&&o(E))}T.useEffect(function(){b({type:"RESET"})},[b,h]),T.useEffect(function(){if(!h)return;const z=ka(h.getAnnotations()),q=z;return z.promise.then(Y=>{b({type:"RESOLVE",value:Y})}).catch(Y=>{b({type:"REJECT",error:Y})}),()=>{Ms(q)}},[b,h]),T.useEffect(()=>{if(w!==void 0){if(w===!1){k();return}C()}},[w]);function N(){u&&u()}function R(j){Bt(!1,`${j}`),c&&c(j)}const D=T.useMemo(()=>h.getViewport({scale:x,rotation:y}),[h,y,x]);return T.useEffect(function(){if(!f||!h||!r||!w)return;const{current:z}=A;if(!z)return;const q=D.clone({dontFlip:!0}),Y={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:f.annotationStorage,commentManager:null,div:z,l10n:null,linkService:r,page:h,structTreeLayer:null,viewport:q},ne={annotations:w,annotationStorage:f.annotationStorage,div:z,imageResourcesPath:n,linkService:r,page:h,renderForms:p,viewport:q};z.innerHTML="";try{new Pp(Y).render(ne),N()}catch(ie){R(ie)}return()=>{}},[w,n,r,h,f,p,D]),g.jsx("div",{className:$i("react-pdf__Page__annotations","annotationLayer"),ref:A})}const wS={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},$O=/^H(\d+)$/;function VO(s){return s in wS}function Nu(s){return"children"in s}function xS(s){return Nu(s)?s.children.length===1&&0 in s.children&&"id"in s.children[0]:!1}function qO(s){const e={};if(Nu(s)){const{role:t}=s,n=t.match($O);if(n)e.role="heading",e["aria-level"]=Number(n[1]);else if(VO(t)){const r=wS[t];r&&(e.role=r)}}return e}function SS(s){const e={};if(Nu(s)){if(s.alt!==void 0&&(e["aria-label"]=s.alt),s.lang!==void 0&&(e.lang=s.lang),xS(s)){const[t]=s.children;if(t){const n=SS(t);return{...e,...n}}}}else"id"in s&&(e["aria-owns"]=s.id);return e}function GO(s){return s?{...qO(s),...SS(s)}:null}function _S({className:s,node:e}){const t=T.useMemo(()=>GO(e),[e]),n=T.useMemo(()=>!Nu(e)||xS(e)?null:e.children.map((r,o)=>g.jsx(_S,{node:r},o)),[e]);return g.jsx("span",{className:s,...t,children:n})}function YO(){const s=Ru();We(s);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=s,[n,r]=Ui(),{value:o,error:l}=n,{customTextRenderer:c,page:u}=s;function h(){o&&t&&t(o)}function f(){l&&(Bt(!1,l.toString()),e&&e(l))}return T.useEffect(function(){r({type:"RESET"})},[r,u]),T.useEffect(function(){if(c||!u)return;const y=ka(u.getStructTree()),x=y;return y.promise.then(_=>{r({type:"RESOLVE",value:_})}).catch(_=>{r({type:"REJECT",error:_})}),()=>Ms(x)},[c,u,r]),T.useEffect(()=>{if(o!==void 0){if(o===!1){f();return}h()}},[o]),o?g.jsx(_S,{className:"react-pdf__Page__structTree structTree",node:o}):null}const J0=sr;function XO(s){const e=Ru();We(e);const t={...e,...s},{_className:n,canvasBackground:r,devicePixelRatio:o=IO(),onRenderError:l,onRenderSuccess:c,page:u,renderForms:h,renderTextLayer:f,rotate:p,scale:y}=t,{canvasRef:x}=s;We(u);const _=T.useRef(null);function b(){u&&c&&c(zf(u,y))}function w(k){jO(k)||(Bt(!1,k.toString()),l&&l(k))}const E=T.useMemo(()=>u.getViewport({scale:y*o,rotation:p}),[o,u,p,y]),A=T.useMemo(()=>u.getViewport({scale:y,rotation:p}),[u,p,y]);T.useEffect(function(){if(!u)return;u.cleanup();const{current:N}=_;if(!N)return;N.width=E.width,N.height=E.height,N.style.width=`${Math.floor(A.width)}px`,N.style.height=`${Math.floor(A.height)}px`,N.style.visibility="hidden";const R={annotationMode:h?J0.ENABLE_FORMS:J0.ENABLE,canvas:N,canvasContext:N.getContext("2d",{alpha:!1}),viewport:E};r&&(R.background=r);const D=u.render(R),j=D;return D.promise.then(()=>{N.style.visibility="",b()}).catch(w),()=>Ms(j)},[r,u,h,E,A]);const C=T.useCallback(()=>{const{current:k}=_;k&&(k.width=0,k.height=0)},[]);return T.useEffect(()=>C,[C]),g.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:vS(x,_),style:{display:"block",userSelect:"none"},children:f?g.jsx(YO,{}):null})}function KO(s){return"str"in s}function QO(){const s=Ru();We(s);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:n,onRenderTextLayerError:r,onRenderTextLayerSuccess:o,page:l,pageIndex:c,pageNumber:u,rotate:h,scale:f}=s;We(l);const[p,y]=Ui(),{value:x,error:_}=p,b=T.useRef(null);Bt(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function w(){x&&n&&n(x)}function E(){_&&(Bt(!1,_.toString()),t&&t(_))}T.useEffect(function(){y({type:"RESET"})},[l,y]),T.useEffect(function(){if(!l)return;const j=ka(l.getTextContent()),z=j;return j.promise.then(q=>{y({type:"RESOLVE",value:q})}).catch(q=>{y({type:"REJECT",error:q})}),()=>Ms(z)},[l,y]),T.useEffect(()=>{if(x!==void 0){if(x===!1){E();return}w()}},[x]);const A=T.useCallback(()=>{o&&o()},[o]),C=T.useCallback(D=>{Bt(!1,D.toString()),r&&r(D)},[r]);function k(){const D=b.current;D&&D.classList.add("selecting")}function N(){const D=b.current;D&&D.classList.remove("selecting")}const R=T.useMemo(()=>l.getViewport({scale:f,rotation:h}),[l,h,f]);return T.useLayoutEffect(function(){if(!l||!x)return;const{current:j}=b;if(!j)return;j.innerHTML="";const z=l.streamTextContent({includeMarkedContent:!0}),q={container:j,textContentSource:z,viewport:R},Y=new ca(q),ne=Y;return Y.render().then(()=>{const ie=document.createElement("div");ie.className="endOfContent",j.append(ie);const ee=j.querySelectorAll('[role="presentation"]');if(e){let ae=0;x.items.forEach((G,X)=>{if(!KO(G))return;const I=ee[ae];if(!I)return;const V=e({pageIndex:c,pageNumber:u,itemIndex:X,...G});I.innerHTML=V,ae+=G.str&&G.hasEOL?2:1})}A()}).catch(C),()=>Ms(ne)},[e,C,A,l,c,u,x,R]),g.jsx("div",{className:$i("react-pdf__Page__textContent","textLayer"),onMouseUp:N,onMouseDown:k,ref:b})}const Z0=1;function JO(s){const t={...yS(),...s},{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:r=!0,canvasBackground:o,canvasRef:l,children:c,className:u,customRenderer:h,customTextRenderer:f,devicePixelRatio:p,error:y="Failed to load the page.",height:x,inputRef:_,loading:b="Loading page",noData:w="No page specified.",onGetAnnotationsError:E,onGetAnnotationsSuccess:A,onGetStructTreeError:C,onGetStructTreeSuccess:k,onGetTextError:N,onGetTextSuccess:R,onLoadError:D,onLoadSuccess:j,onRenderAnnotationLayerError:z,onRenderAnnotationLayerSuccess:q,onRenderError:Y,onRenderSuccess:ne,onRenderTextLayerError:ie,onRenderTextLayerSuccess:ee,pageIndex:ae,pageNumber:G,pdf:X,registerPage:I,renderAnnotationLayer:V=!0,renderForms:Q=!1,renderMode:M="canvas",renderTextLayer:W=!0,rotate:oe,scale:ce=Z0,unregisterPage:ve,width:we,...ge}=t,[K,se]=Ui(),{value:ue,error:et}=K,Gt=T.useRef(null);We(X);const De=Ss(G)?G-1:ae??null,Be=G??(Ss(ae)?ae+1:null),Ke=oe??(ue?ue.rotate:null),Le=T.useMemo(()=>{if(!ue)return null;let mn=1;const kn=ce??Z0;if(we||x){const Pn=ue.getViewport({scale:1,rotation:Ke});we?mn=we/Pn.width:x&&(mn=x/Pn.height)}return kn*mn},[x,ue,Ke,ce,we]);T.useEffect(function(){return()=>{Ss(De)&&r&&ve&&ve(De)}},[r,X,De,ve]);function vt(){if(j){if(!ue||!Le)return;j(zf(ue,Le))}if(r&&I){if(!Ss(De)||!Gt.current)return;I(De,Gt.current)}}function on(){et&&(Bt(!1,et.toString()),D&&D(et))}T.useEffect(function(){se({type:"RESET"})},[se,X,De]),T.useEffect(function(){if(!X||!Be)return;const kn=ka(X.getPage(Be)),Pn=kn;return kn.promise.then(cr=>{se({type:"RESOLVE",value:cr})}).catch(cr=>{se({type:"REJECT",error:cr})}),()=>Ms(Pn)},[se,X,Be]),T.useEffect(()=>{if(ue!==void 0){if(ue===!1){on();return}vt()}},[ue,Le]);const as=T.useMemo(()=>Ss(De)&&Be&&Ss(Ke)&&Ss(Le)?{_className:n,canvasBackground:o,customTextRenderer:f,devicePixelRatio:p,onGetAnnotationsError:E,onGetAnnotationsSuccess:A,onGetStructTreeError:C,onGetStructTreeSuccess:k,onGetTextError:N,onGetTextSuccess:R,onRenderAnnotationLayerError:z,onRenderAnnotationLayerSuccess:q,onRenderError:Y,onRenderSuccess:ne,onRenderTextLayerError:ie,onRenderTextLayerSuccess:ee,page:ue,pageIndex:De,pageNumber:Be,renderForms:Q,renderTextLayer:W,rotate:Ke,scale:Le}:null,[n,o,f,p,E,A,C,k,N,R,z,q,Y,ne,ie,ee,ue,De,Be,Q,W,Ke,Le]),ls=T.useMemo(()=>fS(ge,()=>ue&&(Le?zf(ue,Le):void 0)),[ge,ue,Le]),Tn=`${De}@${Le}/${Ke}`;function Xi(){switch(M){case"custom":return We(h),g.jsx(h,{},`${Tn}_custom`);case"none":return null;default:return g.jsx(XO,{canvasRef:l},`${Tn}_canvas`)}}function Pa(){return W?g.jsx(QO,{},`${Tn}_text`):null}function Ra(){return V?g.jsx(WO,{},`${Tn}_annotations`):null}function Na(){function mn(Pn){return!!Pn?.page}if(!mn(as))throw new Error("page is undefined");const kn=typeof c=="function"?c(as):c;return g.jsxs(bS.Provider,{value:as,children:[Xi(),Pa(),Ra(),kn]})}function Da(){return Be?X===null||ue===void 0||ue===null?g.jsx(Mi,{type:"loading",children:typeof b=="function"?b():b}):X===!1||ue===!1?g.jsx(Mi,{type:"error",children:typeof y=="function"?y():y}):Na():g.jsx(Mi,{type:"no-data",children:typeof w=="function"?w():w})}return g.jsx("div",{className:$i(n,u),"data-page-number":Be,ref:vS(_,Gt),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${Le}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:o||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...ls,children:Da()})}FO();ns.workerSrc="pdf.worker.mjs";const ZO="/assets/pdf.worker.min-qwK7q_zL.mjs";ns.workerSrc=ZO;const pi=typeof window<"u"&&window.devicePixelRatio||1;function eM(){const[s]=LA(),e=os(),[t,n]=T.useState(null),[r,o]=T.useState(null),[l,c]=T.useState(!0),[u,h]=T.useState(null),[f,p]=T.useState(),[y,x]=T.useState(1),[_,b]=T.useState(null),[w,E]=T.useState(null),[A,C]=T.useState(null),[k,N]=T.useState(!1);T.useEffect(()=>{const K=s.get("orderId");if(!K){h("No order ID provided"),c(!1);return}(async()=>{try{c(!0),h(null);const ue=await it.getOrder(K);n(ue),ue.picklist_path?o({name:`Picklist for Order ${ue.inflow_order_id||ue.id.slice(0,8)}`,filename:`order-${ue.id}-picklist.pdf`,url:`/api/orders/${ue.id}/picklist`}):h("No picklist available for this order")}catch(ue){console.error("Failed to load order:",ue),h("Failed to load order details")}finally{c(!1)}})()},[s]),T.useEffect(()=>{if(ae.current&&!A){console.log("Immediate fallback: viewerRef available, trying to get container width");const K=ae.current.getBoundingClientRect();K.width>0&&(console.log("Immediate fallback: Setting containerWidth to:",K.width),C(K.width))}},[A]);const[R,D]=T.useState(!1),[j,z]=T.useState(!1),[q,Y]=T.useState(null),[ne,ie]=T.useState(!1),ee=T.useRef(null),ae=T.useRef(null),G=T.useRef(null),X=T.useMemo(()=>r?r.url:null,[r]);T.useEffect(()=>{if(!ae.current){console.log("ResizeObserver: viewerRef.current is null");return}console.log("ResizeObserver: Setting up observer on element:",ae.current);const K=new ResizeObserver(se=>{const ue=se[0]?.contentRect;console.log("ResizeObserver fired, container width:",ue?.width,"height:",ue?.height),ue&&ue.width>0&&(console.log("Setting containerWidth to:",ue.width),C(ue.width))});return K.observe(ae.current),()=>{console.log("ResizeObserver: Disconnecting"),K.disconnect()}},[]),T.useEffect(()=>{if(console.log("Debug - pageViewport:",_,"containerWidth:",A,"renderSize:",w,"selectedPdf:",!!r),!_||A===null||A===0)return;const K=A/_.width;E({width:_.width*K,height:_.height*K})},[A,_]),T.useEffect(()=>{if(_&&!A&&ae.current&&!l){console.log("Fallback: Trying to get container width from DOM");const K=ae.current.getBoundingClientRect();K.width>0&&(console.log("Fallback: Got width from getBoundingClientRect:",K.width),C(K.width))}},[_,A,l]),T.useEffect(()=>{if(r&&!w&&!l&&_&&A){console.log("Fallback: Attempting to force renderSize calculation");const K=setTimeout(()=>{if(_&&A&&!w){console.log("Fallback: Setting renderSize");const se=A/_.width;E({width:_.width*se,height:_.height*se})}},1e3);return()=>clearTimeout(K)}},[r,w,_,A,l]),T.useEffect(()=>{const K=ee.current;if(!K||!w)return;const se=K.getContext("2d");se&&(K.width=w.width*pi,K.height=w.height*pi,K.style.width=`${w.width}px`,K.style.height=`${w.height}px`,se.setTransform(1,0,0,1,0,0),se.clearRect(0,0,K.width,K.height),se.scale(pi,pi),se.lineCap="round",se.lineJoin="round",se.strokeStyle="#111827",D(!1))},[w,y,r]);const I=T.useCallback(()=>{const K=ee.current;if(!K||!w)return;const se=K.getContext("2d");se&&(se.setTransform(1,0,0,1,0,0),se.clearRect(0,0,K.width,K.height),se.scale(pi,pi),D(!1))},[w]);T.useEffect(()=>{r&&(I(),ie(!0))},[I,y,r]);const V=T.useCallback(({numPages:K})=>{console.log("PDF loaded successfully with",K,"pages"),p(K),x(1),Y(null)},[]),Q=T.useCallback(K=>{console.log("PDF page loaded, setting viewport");const se=K.getViewport({scale:1});console.log("Viewport:",se.width,"x",se.height),b({width:se.width,height:se.height}),ie(!1)},[]),M=T.useCallback(()=>{ie(!1)},[]),W=T.useCallback(K=>{const se=ee.current;if(!se)return{x:0,y:0};const ue=se.getBoundingClientRect();return{x:K.clientX-ue.left,y:K.clientY-ue.top}},[]),oe=T.useCallback(K=>{if(!ee.current||!w||!X)return;K.preventDefault();const se=ee.current.getContext("2d");if(!se)return;const{x:ue,y:et}=W(K);G.current=K.pointerId,ee.current.setPointerCapture(K.pointerId),se.beginPath(),se.moveTo(ue,et),se.lineWidth=Math.max(2,4*(K.pressure||.5)),N(!0)},[W,w,X]),ce=T.useCallback(K=>{if(!k||!ee.current)return;K.preventDefault();const se=ee.current.getContext("2d");if(!se)return;const{x:ue,y:et}=W(K);se.lineWidth=Math.max(2,4*(K.pressure||.5)),se.lineTo(ue,et),se.stroke(),D(!0)},[k,W]),ve=T.useCallback(K=>{if(!k||!ee.current)return;K.preventDefault(),ce(K);const se=G.current;if(se!==null)try{ee.current.releasePointerCapture(se)}catch(ue){console.warn("Pointer capture release failed",ue)}N(!1),G.current=null},[ce,k]),we=!!(w&&X),ge=T.useCallback(async()=>{if(!(!t||!ee.current||!X)){if(!R){Y("Add a signature before saving.");return}z(!0),Y(null);try{const K=ee.current.toDataURL("image/png");await it.signOrder(t.id,{signature_image:K,page_number:y,position:{x:50,y:60}});const se=s.get("returnTo")||`/orders/${t.id}`;e(se,{state:{message:"Document signed successfully! Bundled documents generated and order marked as delivered."}})}catch(K){console.error(K),Y("Unable to complete signing. Please try again.")}finally{z(!1)}}},[R,t,X,y,s,e]);return l?g.jsx("div",{className:"flex items-center justify-center py-12",children:g.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading order details..."})}):u||!t?g.jsxs("div",{className:"text-center py-12",children:[g.jsx("div",{className:"text-red-600 mb-4",children:u||"Order not found"}),g.jsx("button",{onClick:()=>e(-1),className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Go Back"})]}):g.jsx("div",{className:"px-4 pb-8",children:g.jsxs("div",{className:"max-w-6xl mx-auto",children:[g.jsxs("header",{className:"mb-6",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Sign Delivery Document"}),g.jsxs("p",{className:"text-gray-600 mt-1",children:["Order ",t.inflow_order_id||t.id.slice(0,8)," - ",t.recipient_name||"Unknown Recipient"]})]}),!r&&g.jsx("section",{className:"mb-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:g.jsxs("div",{className:"text-yellow-800",children:[g.jsx("strong",{children:"No picklist available"})," - This order doesn't have a generated picklist to sign."]})}),r&&g.jsx("section",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:g.jsxs("div",{className:"text-blue-800",children:[g.jsx("strong",{children:"Ready to sign:"})," ",r.name]})}),g.jsxs("section",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-4",children:[g.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Document preview"}),g.jsx("p",{className:"text-sm text-gray-600",children:"Switch pages and draw directly on top of the PDF."})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{type:"button",className:"px-4 py-2 rounded-md bg-gray-100 text-gray-800 text-sm font-medium hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>x(K=>Math.max(1,K-1)),disabled:!f||y<=1,children:"Previous"}),g.jsxs("div",{className:"text-sm text-gray-700",children:["Page ",y," ",f?`of ${f}`:""]}),g.jsx("button",{type:"button",className:"px-4 py-2 rounded-md bg-gray-100 text-gray-800 text-sm font-medium hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>x(K=>f?Math.min(f,K+1):K),disabled:!f||(f?y>=f:!0),children:"Next"})]})]}),g.jsx("div",{className:"mt-4 relative bg-gray-50 border border-dashed border-gray-300 rounded-lg min-h-[400px] flex items-center justify-center",ref:ae,children:X?g.jsx("div",{className:"w-full flex justify-center py-4",children:g.jsxs("div",{className:`relative ${k?"ring-2 ring-[#800000] ring-offset-2":""}`,style:{width:w?.width??"100%"},children:[g.jsx(HO,{file:X,loading:g.jsx("div",{className:"text-gray-700",children:"Loading PDF..."}),onLoadSuccess:V,onLoadError:K=>Y(K.message),className:"border border-gray-200 rounded-lg overflow-hidden bg-white",children:g.jsx(JO,{pageNumber:y,width:w?.width??A??void 0,renderMode:"canvas",renderTextLayer:!1,renderAnnotationLayer:!1,loading:g.jsx("div",{className:"p-6 text-gray-700",children:"Rendering page..."}),onLoadSuccess:Q,onRenderSuccess:M,onRenderError:K=>Y(K.message)},`${X}-${y}`)},r?.filename??"pdf-document"),w&&g.jsx("canvas",{ref:ee,className:`absolute inset-0 z-20 ${r?"cursor-crosshair":"cursor-not-allowed"}`,style:{touchAction:"none"},onPointerDown:oe,onPointerMove:ce,onPointerUp:ve,onPointerCancel:ve,onPointerLeave:ve}),!we&&g.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:g.jsx("div",{className:"bg-white/80 border border-gray-200 rounded-md px-4 py-2 text-gray-700",children:"Select a PDF to start signing."})}),k&&g.jsx("span",{className:"absolute top-2 right-2 bg-[#800000] text-white text-xs font-semibold px-3 py-1 rounded-full shadow",children:"Drawing..."})]})}):g.jsx("div",{className:"text-center text-gray-600 py-10",children:"Choose a PDF above to begin."})}),g.jsxs("div",{className:"mt-4 flex flex-wrap gap-3 items-center justify-between",children:[q&&g.jsx("div",{className:"text-sm text-red-700 bg-red-50 border border-red-200 px-3 py-2 rounded-md",children:q}),g.jsxs("div",{className:"flex gap-3 ml-auto",children:[g.jsx("button",{type:"button",className:"px-4 py-2 rounded-md border border-gray-300 text-gray-800 text-sm font-medium hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",onClick:I,disabled:!we||!R,children:"Clear Signature"}),g.jsx("button",{type:"button",className:"px-4 py-2 rounded-md bg-[#800000] text-white text-sm font-semibold hover:bg-[#660000] disabled:opacity-50 disabled:cursor-not-allowed",onClick:ge,disabled:!we||!R||j||ne,children:j?"Saving...":"Save Signed PDF"})]})]})]})]})})}const eb=["Joshua Pullum","Aaron Pizzitola","Stormy Brewer","Lilly Tran","Jevin Joy","Kyler Cao"],Uc=s=>({orderNumber:s,technician:"",verifyAssetTagSerialMatch:!1,verifyOrderDetailsTemplateSent:!1,verifyPackagedProperly:!1,verifyPackingSlipSerialsMatch:!1,verifyElectronicPackingSlipSaved:!1,verifyBoxesLabeledCorrectly:!1,qaSignature:"",method:""}),af=s=>`order-qa-checklist-v2:${s}`;function tb(s){return s.orderNumber.trim().length>0&&s.technician.trim().length>0&&s.verifyAssetTagSerialMatch&&s.verifyOrderDetailsTemplateSent&&s.verifyPackagedProperly&&s.verifyPackingSlipSerialsMatch&&s.verifyElectronicPackingSlipSaved&&s.verifyBoxesLabeledCorrectly&&s.qaSignature.trim().length>0&&(s.method==="Delivery"||s.method==="Shipping")}function tM(){const s=os(),[e,t]=T.useState([]),[n,r]=T.useState(!0),[o,l]=T.useState(""),[c,u]=T.useState(!1),[h,f]=T.useState(!1),[p,y]=T.useState(null),[x,_]=T.useState(()=>Uc("")),[b,w]=T.useState(null);T.useEffect(()=>{E()},[o,c]);const E=async()=>{r(!0);try{if(c){const R=await it.getOrders({search:o.trim()?o.trim():void 0});t(R)}else{const R=await it.getOrders({status:Te.QA,search:o.trim()?o.trim():void 0});t(R)}}catch(R){console.error("Failed to load orders:",R),alert("Failed to load orders")}finally{r(!1)}},A=R=>{y(R);const D=(R.inflow_order_id||R.id||"").toString(),j=localStorage.getItem(af(R.id));if(j)try{const z=JSON.parse(j);_(z.form),w(z.submittedAt)}catch{_(Uc(D)),w(null)}else _(Uc(D)),w(null);f(!0)},C=()=>{f(!1),y(null),w(null),_(Uc(""))},k=async()=>{if(p){if(!tb(x)){alert("Please complete all required QA fields before submitting.");return}try{await it.submitQa(p.id,{responses:x,technician:x.technician});const R={orderId:p.id,inflowOrderId:p.inflow_order_id||p.id,submittedAt:new Date().toISOString(),form:x};localStorage.setItem(af(p.id),JSON.stringify(R)),w(R.submittedAt),alert("QA checklist submitted successfully!"),C(),E()}catch(R){console.error("Failed to submit QA:",R),alert("Failed to submit QA checklist. Please try again.")}}},N=T.useMemo(()=>{const R=new Map;for(const D of e)if(D.qa_completed_at)R.set(D.id,D.qa_completed_at);else{const j=localStorage.getItem(af(D.id));if(!j)continue;try{const z=JSON.parse(j);R.set(D.id,z.submittedAt)}catch{}}return R},[e]);return g.jsxs("div",{className:"p-4",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"QA Checklist"}),g.jsxs("section",{className:"bg-white shadow rounded-lg p-4 border border-gray-100 mb-6",children:[g.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-end md:justify-between",children:[g.jsx("div",{children:g.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:c?"All Orders":"Orders Needing QA"})}),g.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-end",children:[g.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:["Search",g.jsx("input",{className:"rounded-md border px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#800000]",value:o,onChange:R=>l(R.target.value),placeholder:"Order ID / recipient / location..."})]}),g.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[g.jsx("input",{type:"checkbox",checked:c,onChange:R=>u(R.target.checked),className:"h-4 w-4 rounded border-gray-300 text-[#800000] focus:ring-[#800000]"}),"Show all orders"]})]})]}),n?g.jsx("div",{className:"p-4",children:"Loading..."}):g.jsx("div",{className:"mt-4 overflow-x-auto",children:g.jsxs("table",{className:"min-w-full border-collapse border border-gray-200",children:[g.jsx("thead",{children:g.jsxs("tr",{className:"bg-gray-50",children:[g.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Order"}),g.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Recipient"}),g.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Location"}),g.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"QA"})]})}),g.jsxs("tbody",{children:[e.filter(R=>c||!N.has(R.id)).filter(R=>![Te.DELIVERED,Te.IN_DELIVERY,Te.SHIPPING].includes(R.status)).map(R=>{const j=N.get(R.id)||null?"Edit QA":"QA";return g.jsxs("tr",{className:"hover:bg-gray-50",children:[g.jsx("td",{className:"border border-gray-200 px-4 py-2",children:g.jsx("button",{onClick:()=>s(`/orders/${R.id}`),className:"text-blue-600 hover:underline",children:R.inflow_order_id})}),g.jsx("td",{className:"border border-gray-200 px-4 py-2",children:R.recipient_name||"N/A"}),g.jsx("td",{className:"border border-gray-200 px-4 py-2",children:R.delivery_location||"N/A"}),g.jsx("td",{className:"border border-gray-200 px-4 py-2",children:g.jsx("button",{type:"button",onClick:()=>A(R),className:"px-3 py-1.5 text-sm bg-[#800000] text-white rounded hover:bg-[#660000]",children:j})})]},R.id)}),e.filter(R=>c||!N.has(R.id)).filter(R=>![Te.DELIVERED,Te.IN_DELIVERY,Te.SHIPPING].includes(R.status)).length===0&&g.jsx("tr",{children:g.jsx("td",{className:"border border-gray-200 px-4 py-6 text-center text-gray-600",colSpan:4,children:e.length===0?c?"No orders found.":"No orders need QA at this time.":c?"No eligible orders found.":"All eligible orders have completed QA."})})]})]})})]}),h&&p&&g.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[g.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:C}),g.jsxs("div",{className:"relative w-[min(900px,95vw)] max-h-[90vh] overflow-auto bg-white rounded-lg shadow-lg border border-gray-200",children:[g.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-start justify-between gap-4",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"QA Checklist"}),g.jsxs("p",{className:"text-sm text-gray-600",children:["Order: ",g.jsx("span",{className:"font-semibold",children:p.inflow_order_id})]}),b&&g.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Previously submitted: ",new Date(b).toLocaleString()]})]}),g.jsx("button",{type:"button",onClick:C,className:"rounded-md border border-gray-200 px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Close"})]}),g.jsxs("div",{className:"p-4 space-y-6",children:[g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["1. Order Number ",g.jsx("span",{className:"text-red-600",children:"*"})]}),g.jsx("input",{value:x.orderNumber,onChange:R=>_(D=>({...D,orderNumber:R.target.value})),className:"mt-1 w-full rounded-md border px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#800000]"})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["2. Technician (On order checklist) ",g.jsx("span",{className:"text-red-600",children:"*"})]}),g.jsxs("select",{value:x.technician,onChange:R=>_(D=>({...D,technician:R.target.value})),className:"mt-1 w-full rounded-md border px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#800000]",children:[g.jsx("option",{value:"",children:"Select technician"}),eb.map(R=>g.jsx("option",{value:R,children:R},R))]})]}),g.jsxs("div",{className:"space-y-3",children:[g.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["38. Verify each item ",g.jsx("span",{className:"text-red-600",children:"*"})]}),g.jsxs("label",{className:"flex items-start gap-3 rounded-lg border border-gray-100 bg-gray-50 p-3 hover:border-[#800000]",children:[g.jsx("input",{type:"checkbox",checked:x.verifyAssetTagSerialMatch,onChange:()=>_(R=>({...R,verifyAssetTagSerialMatch:!R.verifyAssetTagSerialMatch})),className:"mt-1 h-4 w-4 rounded border-gray-300 text-[#800000] focus:ring-[#800000]"}),g.jsx("div",{children:g.jsx("p",{className:"font-medium text-gray-900",children:"3. Verify that system asset tag has been applied and that the serial number on the device, sticker and pick list all match."})})]}),g.jsxs("label",{className:"flex items-start gap-3 rounded-lg border border-gray-100 bg-gray-50 p-3 hover:border-[#800000]",children:[g.jsx("input",{type:"checkbox",checked:x.verifyOrderDetailsTemplateSent,onChange:()=>_(R=>({...R,verifyOrderDetailsTemplateSent:!R.verifyOrderDetailsTemplateSent})),className:"mt-1 h-4 w-4 rounded border-gray-300 text-[#800000] focus:ring-[#800000]"}),g.jsx("div",{children:g.jsx("p",{className:"font-medium text-gray-900",children:"4. Verify that the order details template has been sent to the customer before completing a delivery."})})]}),g.jsxs("label",{className:"flex items-start gap-3 rounded-lg border border-gray-100 bg-gray-50 p-3 hover:border-[#800000]",children:[g.jsx("input",{type:"checkbox",checked:x.verifyPackagedProperly,onChange:()=>_(R=>({...R,verifyPackagedProperly:!R.verifyPackagedProperly})),className:"mt-1 h-4 w-4 rounded border-gray-300 text-[#800000] focus:ring-[#800000]"}),g.jsx("div",{children:g.jsx("p",{className:"font-medium text-gray-900",children:"5. Verify that system and all materials included are packaged properly"})})]}),g.jsxs("label",{className:"flex items-start gap-3 rounded-lg border border-gray-100 bg-gray-50 p-3 hover:border-[#800000]",children:[g.jsx("input",{type:"checkbox",checked:x.verifyPackingSlipSerialsMatch,onChange:()=>_(R=>({...R,verifyPackingSlipSerialsMatch:!R.verifyPackingSlipSerialsMatch})),className:"mt-1 h-4 w-4 rounded border-gray-300 text-[#800000] focus:ring-[#800000]"}),g.jsx("div",{children:g.jsx("p",{className:"font-medium text-gray-900",children:"6. Verify packing slip and picked items and serial numbers match."})})]}),g.jsxs("label",{className:"flex items-start gap-3 rounded-lg border border-gray-100 bg-gray-50 p-3 hover:border-[#800000]",children:[g.jsx("input",{type:"checkbox",checked:x.verifyElectronicPackingSlipSaved,onChange:()=>_(R=>({...R,verifyElectronicPackingSlipSaved:!R.verifyElectronicPackingSlipSaved})),className:"mt-1 h-4 w-4 rounded border-gray-300 text-[#800000] focus:ring-[#800000]"}),g.jsx("div",{children:g.jsx("p",{className:"font-medium text-gray-900",children:"7. Verify there is an electronic packing slip saved on the shipping and receiving computer."})})]}),g.jsxs("label",{className:"flex items-start gap-3 rounded-lg border border-gray-100 bg-gray-50 p-3 hover:border-[#800000]",children:[g.jsx("input",{type:"checkbox",checked:x.verifyBoxesLabeledCorrectly,onChange:()=>_(R=>({...R,verifyBoxesLabeledCorrectly:!R.verifyBoxesLabeledCorrectly})),className:"mt-1 h-4 w-4 rounded border-gray-300 text-[#800000] focus:ring-[#800000]"}),g.jsx("div",{children:g.jsx("p",{className:"font-medium text-gray-900",children:"8. Verify boxes are labeled with correct order details and shipping labels are marked out."})})]})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["9. QA Signature (First and Last Name) ",g.jsx("span",{className:"text-red-600",children:"*"})]}),g.jsxs("select",{value:x.qaSignature,onChange:R=>_(D=>({...D,qaSignature:R.target.value})),className:"mt-1 w-full rounded-md border px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#800000]",children:[g.jsx("option",{value:"",children:"Select signature"}),eb.map(R=>g.jsx("option",{value:R,children:R},R))]})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["10. Method ",g.jsx("span",{className:"text-red-600",children:"*"})]}),g.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[g.jsxs("label",{className:"inline-flex items-center gap-2",children:[g.jsx("input",{type:"radio",name:"qa-method",checked:x.method==="Delivery",onChange:()=>_(R=>({...R,method:"Delivery"})),className:"h-4 w-4 text-[#800000] focus:ring-[#800000]"}),g.jsx("span",{className:"text-sm text-gray-800",children:"Delivery"})]}),g.jsxs("label",{className:"inline-flex items-center gap-2",children:[g.jsx("input",{type:"radio",name:"qa-method",checked:x.method==="Shipping",onChange:()=>_(R=>({...R,method:"Shipping"})),className:"h-4 w-4 text-[#800000] focus:ring-[#800000]"}),g.jsx("span",{className:"text-sm text-gray-800",children:"Shipping"})]})]})]})]}),g.jsxs("div",{className:"p-4 border-t border-gray-200 flex items-center justify-between gap-3",children:[g.jsx("div",{className:"text-sm text-gray-600",children:tb(x)?g.jsx("span",{className:"inline-flex items-center rounded-full bg-green-100 px-2 py-1 text-xs font-semibold text-green-700",children:"Ready to submit"}):g.jsx("span",{className:"inline-flex items-center rounded-full bg-yellow-100 px-2 py-1 text-xs font-semibold text-yellow-800",children:"Incomplete"})}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{type:"button",onClick:C,className:"rounded-md border border-gray-200 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),g.jsx("button",{type:"button",onClick:k,className:"rounded-md bg-[#800000] px-4 py-2 text-sm font-semibold text-white hover:bg-[#660000]",children:"Submit QA"})]})]})]})]})]})}function ES(s){const[e,t]=T.useState(null),[n,r]=T.useState(!1),[o,l]=T.useState(null);return T.useEffect(()=>{if(!s)return;(async()=>{r(!0),l(null);try{const u=await wu.getRun(s);t(u)}catch(u){console.error("Failed to fetch delivery run:",u),l("Failed to load delivery run details")}finally{r(!1)}})()},[s]),{run:e,loading:n,error:o,refetch:()=>s&&ES(s)}}function nM(){const{runId:s}=db(),{run:e,loading:t,error:n}=ES(s),[r,o]=T.useState(!1),[l,c]=T.useState(!1),[u,h]=T.useState(""),f=e?.orders.every(b=>b.status.toLowerCase()==="delivered")??!1,p=b=>b.split("_").map(w=>w.charAt(0).toUpperCase()+w.slice(1)).join(" ");if(t)return g.jsx("div",{className:"flex items-center justify-center py-12",children:g.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading delivery run details..."})});if(n||!e)return g.jsxs("div",{className:"text-center py-12",children:[g.jsx("div",{className:"text-red-600 mb-4",children:n||"Delivery run not found"}),g.jsx(Cn,{to:"/delivery",children:g.jsxs(xt,{variant:"outline",children:[g.jsx(y0,{className:"w-4 h-4 mr-2"}),"Back to Delivery Dashboard"]})})]});const y=b=>b?new Date(b).toLocaleString():"Not started",x=b=>{switch(b.toLowerCase()){case"active":return"bg-green-100 text-green-800";case"completed":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},_=b=>{switch(b.toLowerCase()){case"pre_delivery":return"bg-yellow-100 text-yellow-800";case"in_delivery":return"bg-blue-100 text-blue-800";case"delivered":return"bg-green-100 text-green-800";case"issue":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx(Cn,{to:"/delivery",children:g.jsxs(xt,{variant:"outline",size:"sm",children:[g.jsx(y0,{className:"w-4 h-4 mr-2"}),"Back to Delivery"]})}),g.jsxs("div",{children:[g.jsx("h1",{className:"text-2xl font-bold",children:e.name}),g.jsxs("p",{className:"text-muted-foreground",children:["Run ID: ",e.id]})]})]}),e&&e.status==="Active"&&g.jsxs(xt,{onClick:async()=>{if(f){o(!0);try{await wu.finishRun(e.id),window.location.reload()}catch(b){console.error("Failed to finish delivery run:",b);const w=b.response?.data?.error?.message||"Failed to complete delivery. Please ensure all orders are delivered first.";h(w),c(!0)}finally{o(!1)}}},disabled:!f||r,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400",children:[g.jsx(dN,{className:"w-4 h-4 mr-2"}),r?"Completing...":"Complete Delivery"]})]}),g.jsxs(nr,{children:[g.jsx(Sr,{children:g.jsxs(_r,{className:"flex items-center gap-2",children:[g.jsx(Pf,{className:"w-5 h-5"}),"Run Summary"]})}),g.jsxs(rr,{children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(_x,{className:"w-5 h-5 text-muted-foreground"}),g.jsxs("div",{children:[g.jsx("div",{className:"text-sm text-muted-foreground",children:"Runner"}),g.jsx("div",{className:"font-medium",children:e.runner})]})]}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(Pf,{className:"w-5 h-5 text-muted-foreground"}),g.jsxs("div",{children:[g.jsx("div",{className:"text-sm text-muted-foreground",children:"Vehicle"}),g.jsx("div",{className:"font-medium",children:p(e.vehicle)})]})]}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-5 h-5 rounded-full bg-current text-muted-foreground flex items-center justify-center text-xs",children:""}),g.jsxs("div",{children:[g.jsx("div",{className:"text-sm text-muted-foreground",children:"Status"}),g.jsx(Zc,{className:x(e.status),children:e.status.toLowerCase()})]})]}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(hN,{className:"w-5 h-5 text-muted-foreground"}),g.jsxs("div",{children:[g.jsx("div",{className:"text-sm text-muted-foreground",children:"Orders"}),g.jsx("div",{className:"font-medium",children:e.orders.length})]})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6 pt-6 border-t",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(kf,{className:"w-5 h-5 text-muted-foreground"}),g.jsxs("div",{children:[g.jsx("div",{className:"text-sm text-muted-foreground",children:"Started"}),g.jsx("div",{className:"font-medium",children:y(e.start_time)})]})]}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(kf,{className:"w-5 h-5 text-muted-foreground"}),g.jsxs("div",{children:[g.jsx("div",{className:"text-sm text-muted-foreground",children:"Completed"}),g.jsx("div",{className:"font-medium",children:y(e.end_time)})]})]})]})]})]}),g.jsxs(nr,{children:[g.jsxs(Sr,{children:[g.jsx(_r,{children:"Orders in This Run"}),g.jsxs(lw,{children:[e.orders.length," order",e.orders.length!==1?"s":""," assigned to this delivery run"]})]}),g.jsx(rr,{children:e.orders.length===0?g.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No orders assigned to this run"}):g.jsx("div",{className:"space-y-3",children:e.orders.map(b=>g.jsxs("div",{className:`flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors ${b.status.toLowerCase()!=="delivered"?"border-orange-200 bg-orange-50":""}`,children:[g.jsx("div",{className:"flex items-center gap-4",children:g.jsxs("div",{children:[g.jsxs("div",{className:"font-medium",children:["Order ",b.inflow_order_id||b.id.slice(0,8)]}),b.recipient_name&&g.jsx("div",{className:"text-sm text-muted-foreground",children:b.recipient_name}),b.delivery_location&&g.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-1 mt-0.5",children:[g.jsx("span",{className:"font-medium",children:"Location:"})," ",b.delivery_location]})]})}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(Zc,{className:_(b.status),children:b.status.toLowerCase().replace("_"," ")}),b.status.toLowerCase()!=="delivered"&&g.jsx("span",{className:"text-xs text-orange-600 font-medium",children:"Must be signed first"}),g.jsx(Cn,{to:`/orders/${b.id}`,children:g.jsx(xt,{variant:"outline",size:"sm",children:"View Details"})}),b.status===Te.IN_DELIVERY&&g.jsx(Cn,{to:`/document-signing?orderId=${b.id}&returnTo=/delivery/runs/${e.id}`,children:g.jsx(xt,{variant:"default",size:"sm",className:"bg-green-600 hover:bg-green-700",children:"Sign Document"})})]})]},b.id))})})]}),g.jsx(Zo,{open:l,onOpenChange:c,children:g.jsxs(Ai,{children:[g.jsxs(Ci,{children:[g.jsxs(ki,{className:"flex items-center gap-2 text-red-600",children:[g.jsx(uN,{className:"w-5 h-5"}),"Cannot Complete Delivery"]}),g.jsx(Pi,{className:"pt-2",children:u})]}),g.jsx(Ti,{children:g.jsx(xt,{onClick:()=>c(!1),children:"OK"})})]})})]})}const rM="/assets/boxTAM-DPy4l8Lk.svg";function sM(){return g.jsx(NA,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:g.jsxs("div",{className:"min-h-screen bg-white flex flex-col",children:[g.jsx("nav",{className:"bg-[#800000] shadow mb-4",children:g.jsx("div",{className:"max-w-7xl mx-auto px-4",children:g.jsxs("div",{className:"flex justify-between items-center py-4",children:[g.jsxs(Cn,{to:"/",className:"flex items-center gap-3",children:[g.jsx("img",{src:rM,alt:"boxTAM logo",className:"h-8 w-auto"}),g.jsx("h1",{className:"text-xl font-bold text-white",children:"TechHub"})]}),g.jsxs("nav",{className:"flex gap-4 items-center",children:[g.jsx(Cn,{to:"/",className:"text-white font-medium hover:text-gray-200",children:"Orders"}),g.jsx(Cn,{to:"/order-qa",className:"text-white font-medium hover:text-gray-200",children:"QA"}),g.jsx(Cn,{to:"/delivery",className:"text-white font-medium hover:text-gray-200",children:"Delivery"}),g.jsx(Cn,{to:"/admin",className:"text-white font-medium hover:text-gray-200",children:"Admin"})]})]})})}),g.jsx("main",{className:"flex-1 max-w-7xl mx-auto w-full px-4",children:g.jsxs(_A,{children:[g.jsx(Fn,{path:"/",element:g.jsx(hk,{})}),g.jsx(Fn,{path:"/orders/:orderId",element:g.jsx(pk,{})}),g.jsx(Fn,{path:"/order-qa",element:g.jsx(tM,{})}),g.jsx(Fn,{path:"/delivery",element:g.jsx(vN,{})}),g.jsx(Fn,{path:"/delivery/runs/:runId",element:g.jsx(nM,{})}),g.jsx(Fn,{path:"/shipping",element:g.jsx(Tx,{})}),g.jsx(Fn,{path:"/pre-delivery",element:g.jsx(Ax,{})}),g.jsx(Fn,{path:"/in-delivery",element:g.jsx(Cx,{})}),g.jsx(Fn,{path:"/document-signing",element:g.jsx(eM,{})}),g.jsx(Fn,{path:"/admin",element:g.jsx(bN,{})})]})}),g.jsx("footer",{className:"bg-[#800000] text-white mt-8",children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 text-center text-sm",children:[" ",new Date().getFullYear()," TechHub  All rights reserved"]})})]})})}RE.createRoot(document.getElementById("root")).render(g.jsx(xr.StrictMode,{children:g.jsx(sM,{})}));
